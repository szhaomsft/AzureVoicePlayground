(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const p of a)if(p.type==="childList")for(const c of p.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&h(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const p={};return a.integrity&&(p.integrity=a.integrity),a.referrerPolicy&&(p.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?p.credentials="include":a.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function h(a){if(a.ep)return;a.ep=!0;const p=s(a);fetch(a.href,p)}})();function $S(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function GR(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var i=r.default;if(typeof i=="function"){var s=function h(){return this instanceof h?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};s.prototype=i.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(r).forEach(function(h){var a=Object.getOwnPropertyDescriptor(r,h);Object.defineProperty(s,h,a.get?a:{enumerable:!0,get:function(){return r[h]}})}),s}var Ll={exports:{}},Mi={},xl={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf;function QR(){if(nf)return ue;nf=1;var r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),c=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;function m(b){return b===null||typeof b!="object"?null:(b=g&&b[g]||b["@@iterator"],typeof b=="function"?b:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,P={};function E(b,x,ae){this.props=b,this.context=x,this.refs=P,this.updater=ae||y}E.prototype.isReactComponent={},E.prototype.setState=function(b,x){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,x,"setState")},E.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function C(){}C.prototype=E.prototype;function T(b,x,ae){this.props=b,this.context=x,this.refs=P,this.updater=ae||y}var A=T.prototype=new C;A.constructor=T,w(A,E.prototype),A.isPureReactComponent=!0;var M=Array.isArray,j=Object.prototype.hasOwnProperty,L={current:null},K={key:!0,ref:!0,__self:!0,__source:!0};function U(b,x,ae){var ce,ge={},me=null,Ee=null;if(x!=null)for(ce in x.ref!==void 0&&(Ee=x.ref),x.key!==void 0&&(me=""+x.key),x)j.call(x,ce)&&!K.hasOwnProperty(ce)&&(ge[ce]=x[ce]);var Ce=arguments.length-2;if(Ce===1)ge.children=ae;else if(1<Ce){for(var Ae=Array(Ce),Ze=0;Ze<Ce;Ze++)Ae[Ze]=arguments[Ze+2];ge.children=Ae}if(b&&b.defaultProps)for(ce in Ce=b.defaultProps,Ce)ge[ce]===void 0&&(ge[ce]=Ce[ce]);return{$$typeof:r,type:b,key:me,ref:Ee,props:ge,_owner:L.current}}function se(b,x){return{$$typeof:r,type:b.type,key:x,ref:b.ref,props:b.props,_owner:b._owner}}function ve(b){return typeof b=="object"&&b!==null&&b.$$typeof===r}function pe(b){var x={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ae){return x[ae]})}var fe=/\/+/g;function te(b,x){return typeof b=="object"&&b!==null&&b.key!=null?pe(""+b.key):x.toString(36)}function we(b,x,ae,ce,ge){var me=typeof b;(me==="undefined"||me==="boolean")&&(b=null);var Ee=!1;if(b===null)Ee=!0;else switch(me){case"string":case"number":Ee=!0;break;case"object":switch(b.$$typeof){case r:case i:Ee=!0}}if(Ee)return Ee=b,ge=ge(Ee),b=ce===""?"."+te(Ee,0):ce,M(ge)?(ae="",b!=null&&(ae=b.replace(fe,"$&/")+"/"),we(ge,x,ae,"",function(Ze){return Ze})):ge!=null&&(ve(ge)&&(ge=se(ge,ae+(!ge.key||Ee&&Ee.key===ge.key?"":(""+ge.key).replace(fe,"$&/")+"/")+b)),x.push(ge)),1;if(Ee=0,ce=ce===""?".":ce+":",M(b))for(var Ce=0;Ce<b.length;Ce++){me=b[Ce];var Ae=ce+te(me,Ce);Ee+=we(me,x,ae,Ae,ge)}else if(Ae=m(b),typeof Ae=="function")for(b=Ae.call(b),Ce=0;!(me=b.next()).done;)me=me.value,Ae=ce+te(me,Ce++),Ee+=we(me,x,ae,Ae,ge);else if(me==="object")throw x=String(b),Error("Objects are not valid as a React child (found: "+(x==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":x)+"). If you meant to render a collection of children, use an array instead.");return Ee}function be(b,x,ae){if(b==null)return b;var ce=[],ge=0;return we(b,ce,"","",function(me){return x.call(ae,me,ge++)}),ce}function Te(b){if(b._status===-1){var x=b._result;x=x(),x.then(function(ae){(b._status===0||b._status===-1)&&(b._status=1,b._result=ae)},function(ae){(b._status===0||b._status===-1)&&(b._status=2,b._result=ae)}),b._status===-1&&(b._status=0,b._result=x)}if(b._status===1)return b._result.default;throw b._result}var Pe={current:null},H={transition:null},$={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:H,ReactCurrentOwner:L};function J(){throw Error("act(...) is not supported in production builds of React.")}return ue.Children={map:be,forEach:function(b,x,ae){be(b,function(){x.apply(this,arguments)},ae)},count:function(b){var x=0;return be(b,function(){x++}),x},toArray:function(b){return be(b,function(x){return x})||[]},only:function(b){if(!ve(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},ue.Component=E,ue.Fragment=s,ue.Profiler=a,ue.PureComponent=T,ue.StrictMode=h,ue.Suspense=u,ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,ue.act=J,ue.cloneElement=function(b,x,ae){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var ce=w({},b.props),ge=b.key,me=b.ref,Ee=b._owner;if(x!=null){if(x.ref!==void 0&&(me=x.ref,Ee=L.current),x.key!==void 0&&(ge=""+x.key),b.type&&b.type.defaultProps)var Ce=b.type.defaultProps;for(Ae in x)j.call(x,Ae)&&!K.hasOwnProperty(Ae)&&(ce[Ae]=x[Ae]===void 0&&Ce!==void 0?Ce[Ae]:x[Ae])}var Ae=arguments.length-2;if(Ae===1)ce.children=ae;else if(1<Ae){Ce=Array(Ae);for(var Ze=0;Ze<Ae;Ze++)Ce[Ze]=arguments[Ze+2];ce.children=Ce}return{$$typeof:r,type:b.type,key:ge,ref:me,props:ce,_owner:Ee}},ue.createContext=function(b){return b={$$typeof:c,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:p,_context:b},b.Consumer=b},ue.createElement=U,ue.createFactory=function(b){var x=U.bind(null,b);return x.type=b,x},ue.createRef=function(){return{current:null}},ue.forwardRef=function(b){return{$$typeof:o,render:b}},ue.isValidElement=ve,ue.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:Te}},ue.memo=function(b,x){return{$$typeof:d,type:b,compare:x===void 0?null:x}},ue.startTransition=function(b){var x=H.transition;H.transition={};try{b()}finally{H.transition=x}},ue.unstable_act=J,ue.useCallback=function(b,x){return Pe.current.useCallback(b,x)},ue.useContext=function(b){return Pe.current.useContext(b)},ue.useDebugValue=function(){},ue.useDeferredValue=function(b){return Pe.current.useDeferredValue(b)},ue.useEffect=function(b,x){return Pe.current.useEffect(b,x)},ue.useId=function(){return Pe.current.useId()},ue.useImperativeHandle=function(b,x,ae){return Pe.current.useImperativeHandle(b,x,ae)},ue.useInsertionEffect=function(b,x){return Pe.current.useInsertionEffect(b,x)},ue.useLayoutEffect=function(b,x){return Pe.current.useLayoutEffect(b,x)},ue.useMemo=function(b,x){return Pe.current.useMemo(b,x)},ue.useReducer=function(b,x,ae){return Pe.current.useReducer(b,x,ae)},ue.useRef=function(b){return Pe.current.useRef(b)},ue.useState=function(b){return Pe.current.useState(b)},ue.useSyncExternalStore=function(b,x,ae){return Pe.current.useSyncExternalStore(b,x,ae)},ue.useTransition=function(){return Pe.current.useTransition()},ue.version="18.3.1",ue}var of;function hd(){return of||(of=1,xl.exports=QR()),xl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf;function YR(){if(sf)return Mi;sf=1;var r=hd(),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function c(o,u,d){var v,g={},m=null,y=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(y=u.ref);for(v in u)h.call(u,v)&&!p.hasOwnProperty(v)&&(g[v]=u[v]);if(o&&o.defaultProps)for(v in u=o.defaultProps,u)g[v]===void 0&&(g[v]=u[v]);return{$$typeof:i,type:o,key:m,ref:y,props:g,_owner:a.current}}return Mi.Fragment=s,Mi.jsx=c,Mi.jsxs=c,Mi}var af;function XR(){return af||(af=1,Ll.exports=YR()),Ll.exports}var D=XR(),le=hd();const ZR=$S(le);var Vc={},ql={exports:{}},at={},Bl={exports:{}},Fl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cf;function $R(){return cf||(cf=1,(function(r){function i(H,$){var J=H.length;H.push($);e:for(;0<J;){var b=J-1>>>1,x=H[b];if(0<a(x,$))H[b]=$,H[J]=x,J=b;else break e}}function s(H){return H.length===0?null:H[0]}function h(H){if(H.length===0)return null;var $=H[0],J=H.pop();if(J!==$){H[0]=J;e:for(var b=0,x=H.length,ae=x>>>1;b<ae;){var ce=2*(b+1)-1,ge=H[ce],me=ce+1,Ee=H[me];if(0>a(ge,J))me<x&&0>a(Ee,ge)?(H[b]=Ee,H[me]=J,b=me):(H[b]=ge,H[ce]=J,b=ce);else if(me<x&&0>a(Ee,J))H[b]=Ee,H[me]=J,b=me;else break e}}return $}function a(H,$){var J=H.sortIndex-$.sortIndex;return J!==0?J:H.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;r.unstable_now=function(){return p.now()}}else{var c=Date,o=c.now();r.unstable_now=function(){return c.now()-o}}var u=[],d=[],v=1,g=null,m=3,y=!1,w=!1,P=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var $=s(d);$!==null;){if($.callback===null)h(d);else if($.startTime<=H)h(d),$.sortIndex=$.expirationTime,i(u,$);else break;$=s(d)}}function M(H){if(P=!1,A(H),!w)if(s(u)!==null)w=!0,Te(j);else{var $=s(d);$!==null&&Pe(M,$.startTime-H)}}function j(H,$){w=!1,P&&(P=!1,C(U),U=-1),y=!0;var J=m;try{for(A($),g=s(u);g!==null&&(!(g.expirationTime>$)||H&&!pe());){var b=g.callback;if(typeof b=="function"){g.callback=null,m=g.priorityLevel;var x=b(g.expirationTime<=$);$=r.unstable_now(),typeof x=="function"?g.callback=x:g===s(u)&&h(u),A($)}else h(u);g=s(u)}if(g!==null)var ae=!0;else{var ce=s(d);ce!==null&&Pe(M,ce.startTime-$),ae=!1}return ae}finally{g=null,m=J,y=!1}}var L=!1,K=null,U=-1,se=5,ve=-1;function pe(){return!(r.unstable_now()-ve<se)}function fe(){if(K!==null){var H=r.unstable_now();ve=H;var $=!0;try{$=K(!0,H)}finally{$?te():(L=!1,K=null)}}else L=!1}var te;if(typeof T=="function")te=function(){T(fe)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,be=we.port2;we.port1.onmessage=fe,te=function(){be.postMessage(null)}}else te=function(){E(fe,0)};function Te(H){K=H,L||(L=!0,te())}function Pe(H,$){U=E(function(){H(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){w||y||(w=!0,Te(j))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return s(u)},r.unstable_next=function(H){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var J=m;m=$;try{return H()}finally{m=J}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=m;m=H;try{return $()}finally{m=J}},r.unstable_scheduleCallback=function(H,$,J){var b=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?b+J:b):J=b,H){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=J+x,H={id:v++,callback:$,priorityLevel:H,startTime:J,expirationTime:x,sortIndex:-1},J>b?(H.sortIndex=J,i(d,H),s(u)===null&&H===s(d)&&(P?(C(U),U=-1):P=!0,Pe(M,J-b))):(H.sortIndex=x,i(u,H),w||y||(w=!0,Te(j))),H},r.unstable_shouldYield=pe,r.unstable_wrapCallback=function(H){var $=m;return function(){var J=m;m=$;try{return H.apply(this,arguments)}finally{m=J}}}})(Fl)),Fl}var uf;function ew(){return uf||(uf=1,Bl.exports=$R()),Bl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf;function tw(){if(lf)return at;lf=1;var r=hd(),i=ew();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=new Set,a={};function p(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)h.add(t[e])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},g={};function m(e){return u.call(g,e)?!0:u.call(v,e)?!1:d.test(e)?g[e]=!0:(v[e]=!0,!1)}function y(e,t,n,l){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w(e,t,n,l){if(t===null||typeof t>"u"||y(e,t,n,l))return!0;if(l)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,n,l,f,S,R){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=f,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=S,this.removeEmptyString=R}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];E[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(C,T);E[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(C,T);E[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(C,T);E[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function A(e,t,n,l){var f=E.hasOwnProperty(t)?E[t]:null;(f!==null?f.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(w(t,n,f,l)&&(n=null),l||f===null?m(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):f.mustUseProperty?e[f.propertyName]=n===null?f.type===3?!1:"":n:(t=f.attributeName,l=f.attributeNamespace,n===null?e.removeAttribute(t):(f=f.type,n=f===3||f===4&&n===!0?"":""+n,l?e.setAttributeNS(l,t,n):e.setAttribute(t,n))))}var M=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),L=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),pe=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),H=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var J=Object.assign,b;function x(e){if(b===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);b=t&&t[1]||""}return`
`+b+e}var ae=!1;function ce(e,t){if(!e||ae)return"";ae=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(z){var l=z}Reflect.construct(e,[],t)}else{try{t.call()}catch(z){l=z}e.call(t.prototype)}else{try{throw Error()}catch(z){l=z}e()}}catch(z){if(z&&l&&typeof z.stack=="string"){for(var f=z.stack.split(`
`),S=l.stack.split(`
`),R=f.length-1,_=S.length-1;1<=R&&0<=_&&f[R]!==S[_];)_--;for(;1<=R&&0<=_;R--,_--)if(f[R]!==S[_]){if(R!==1||_!==1)do if(R--,_--,0>_||f[R]!==S[_]){var I=`
`+f[R].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=R&&0<=_);break}}}finally{ae=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?x(e):""}function ge(e){switch(e.tag){case 5:return x(e.type);case 16:return x("Lazy");case 13:return x("Suspense");case 19:return x("SuspenseList");case 0:case 2:case 15:return e=ce(e.type,!1),e;case 11:return e=ce(e.type.render,!1),e;case 1:return e=ce(e.type,!0),e;default:return""}}function me(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case K:return"Fragment";case L:return"Portal";case se:return"Profiler";case U:return"StrictMode";case te:return"Suspense";case we:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pe:return(e.displayName||"Context")+".Consumer";case ve:return(e._context.displayName||"Context")+".Provider";case fe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case be:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}function Ee(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(t);case 8:return t===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ce(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ae(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ze(e){var t=Ae(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var f=n.get,S=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return f.call(this)},set:function(R){l=""+R,S.call(this,R)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(R){l=""+R},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pn(e){e._valueTracker||(e._valueTracker=Ze(e))}function Aa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=Ae(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function dn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bn(e,t){var n=t.checked;return J({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _a(e,t){var n=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;n=Ce(t.value!=null?t.value:n),e._wrapperState={initialChecked:l,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ia(e,t){t=t.checked,t!=null&&A(e,"checked",t,!1)}function Ue(e,t){Ia(e,t);var n=Ce(t.value),l=t.type;if(n!=null)l==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fn(e,t.type,n):t.hasOwnProperty("defaultValue")&&Fn(e,t.type,Ce(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ka(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Fn(e,t,n){(t!=="number"||dn(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ar=Array.isArray;function er(e,t,n,l){if(e=e.options,t){t={};for(var f=0;f<n.length;f++)t["$"+n[f]]=!0;for(n=0;n<e.length;n++)f=t.hasOwnProperty("$"+e[n].value),e[n].selected!==f&&(e[n].selected=f),f&&l&&(e[n].defaultSelected=!0)}else{for(n=""+Ce(n),t=null,f=0;f<e.length;f++){if(e[f].value===n){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}t!==null||e[f].disabled||(t=e[f])}t!==null&&(t.selected=!0)}}function Un(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return J({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ba(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(s(92));if(Ar(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ce(n)}}function Ma(e,t){var n=Ce(t.value),l=Ce(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),l!=null&&(e.defaultValue=""+l)}function Oa(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Da(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Da(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hn,vn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,l,f){MSApp.execUnsafeLocalFunction(function(){return e(t,n,l,f)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hn=hn||document.createElement("div"),hn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _r(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zc=["Webkit","ms","Moz","O"];Object.keys(Ir).forEach(function(e){Zc.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ir[t]=Ir[e]})});function Na(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ir.hasOwnProperty(e)&&Ir[e]?(""+t).trim():t+"px"}function za(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var l=n.indexOf("--")===0,f=Na(n,t[n],l);n==="float"&&(n="cssFloat"),l?e.setProperty(n,f):e[n]=f}}var $c=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hn(e,t){if(t){if($c[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Vn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kn=null;function Jn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gn=null,Bt=null,tr=null;function ja(e){if(e=gi(e)){if(typeof Gn!="function")throw Error(s(280));var t=e.stateNode;t&&(t=sc(t),Gn(e.stateNode,e.type,t))}}function La(e){Bt?tr?tr.push(e):tr=[e]:Bt=e}function Rd(){if(Bt){var e=Bt,t=tr;if(tr=Bt=null,ja(e),t)for(e=0;e<t.length;e++)ja(t[e])}}function wd(e,t){return e(t)}function Ed(){}var eu=!1;function Td(e,t,n){if(eu)return e(t,n);eu=!0;try{return wd(e,t,n)}finally{eu=!1,(Bt!==null||tr!==null)&&(Ed(),Rd())}}function Qn(e,t){var n=e.stateNode;if(n===null)return null;var l=sc(n);if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var tu=!1;if(o)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){tu=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{tu=!1}function eP(e,t,n,l,f,S,R,_,I){var z=Array.prototype.slice.call(arguments,3);try{t.apply(n,z)}catch(B){this.onError(B)}}var Xn=!1,xa=null,qa=!1,ru=null,tP={onError:function(e){Xn=!0,xa=e}};function rP(e,t,n,l,f,S,R,_,I){Xn=!1,xa=null,eP.apply(tP,arguments)}function nP(e,t,n,l,f,S,R,_,I){if(rP.apply(this,arguments),Xn){if(Xn){var z=xa;Xn=!1,xa=null}else throw Error(s(198));qa||(qa=!0,ru=z)}}function kr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _d(e){if(kr(e)!==e)throw Error(s(188))}function iP(e){var t=e.alternate;if(!t){if(t=kr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,l=t;;){var f=n.return;if(f===null)break;var S=f.alternate;if(S===null){if(l=f.return,l!==null){n=l;continue}break}if(f.child===S.child){for(S=f.child;S;){if(S===n)return _d(f),e;if(S===l)return _d(f),t;S=S.sibling}throw Error(s(188))}if(n.return!==l.return)n=f,l=S;else{for(var R=!1,_=f.child;_;){if(_===n){R=!0,n=f,l=S;break}if(_===l){R=!0,l=f,n=S;break}_=_.sibling}if(!R){for(_=S.child;_;){if(_===n){R=!0,n=S,l=f;break}if(_===l){R=!0,l=S,n=f;break}_=_.sibling}if(!R)throw Error(s(189))}}if(n.alternate!==l)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function Id(e){return e=iP(e),e!==null?kd(e):null}function kd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kd(e);if(t!==null)return t;e=e.sibling}return null}var bd=i.unstable_scheduleCallback,Md=i.unstable_cancelCallback,oP=i.unstable_shouldYield,sP=i.unstable_requestPaint,Le=i.unstable_now,aP=i.unstable_getCurrentPriorityLevel,nu=i.unstable_ImmediatePriority,Od=i.unstable_UserBlockingPriority,Ba=i.unstable_NormalPriority,cP=i.unstable_LowPriority,Dd=i.unstable_IdlePriority,Fa=null,Nt=null;function uP(e){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Fa,e,void 0,(e.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:dP,lP=Math.log,pP=Math.LN2;function dP(e){return e>>>=0,e===0?32:31-(lP(e)/pP|0)|0}var Ua=64,Wa=4194304;function Zn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ha(e,t){var n=e.pendingLanes;if(n===0)return 0;var l=0,f=e.suspendedLanes,S=e.pingedLanes,R=n&268435455;if(R!==0){var _=R&~f;_!==0?l=Zn(_):(S&=R,S!==0&&(l=Zn(S)))}else R=n&~f,R!==0?l=Zn(R):S!==0&&(l=Zn(S));if(l===0)return 0;if(t!==0&&t!==l&&(t&f)===0&&(f=l&-l,S=t&-t,f>=S||f===16&&(S&4194240)!==0))return t;if((l&4)!==0&&(l|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)n=31-wt(t),f=1<<n,l|=e[n],t&=~f;return l}function hP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vP(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,S=e.pendingLanes;0<S;){var R=31-wt(S),_=1<<R,I=f[R];I===-1?((_&n)===0||(_&l)!==0)&&(f[R]=hP(_,t)):I<=t&&(e.expiredLanes|=_),S&=~_}}function iu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nd(){var e=Ua;return Ua<<=1,(Ua&4194240)===0&&(Ua=64),e}function ou(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $n(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wt(t),e[t]=n}function fP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<n;){var f=31-wt(n),S=1<<f;t[f]=0,l[f]=-1,e[f]=-1,n&=~S}}function su(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-wt(n),f=1<<l;f&t|e[l]&t&&(e[l]|=t),n&=~f}}var Re=0;function zd(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var jd,au,Ld,xd,qd,cu=!1,Va=[],rr=null,nr=null,ir=null,ei=new Map,ti=new Map,or=[],gP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bd(e,t){switch(e){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(t.pointerId)}}function ri(e,t,n,l,f,S){return e===null||e.nativeEvent!==S?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:S,targetContainers:[f]},t!==null&&(t=gi(t),t!==null&&au(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,f!==null&&t.indexOf(f)===-1&&t.push(f),e)}function mP(e,t,n,l,f){switch(t){case"focusin":return rr=ri(rr,e,t,n,l,f),!0;case"dragenter":return nr=ri(nr,e,t,n,l,f),!0;case"mouseover":return ir=ri(ir,e,t,n,l,f),!0;case"pointerover":var S=f.pointerId;return ei.set(S,ri(ei.get(S)||null,e,t,n,l,f)),!0;case"gotpointercapture":return S=f.pointerId,ti.set(S,ri(ti.get(S)||null,e,t,n,l,f)),!0}return!1}function Fd(e){var t=br(e.target);if(t!==null){var n=kr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ad(n),t!==null){e.blockedOn=t,qd(e.priority,function(){Ld(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ka(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Kn=l,n.target.dispatchEvent(l),Kn=null}else return t=gi(n),t!==null&&au(t),e.blockedOn=n,!1;t.shift()}return!0}function Ud(e,t,n){Ka(e)&&n.delete(t)}function yP(){cu=!1,rr!==null&&Ka(rr)&&(rr=null),nr!==null&&Ka(nr)&&(nr=null),ir!==null&&Ka(ir)&&(ir=null),ei.forEach(Ud),ti.forEach(Ud)}function ni(e,t){e.blockedOn===t&&(e.blockedOn=null,cu||(cu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,yP)))}function ii(e){function t(f){return ni(f,e)}if(0<Va.length){ni(Va[0],e);for(var n=1;n<Va.length;n++){var l=Va[n];l.blockedOn===e&&(l.blockedOn=null)}}for(rr!==null&&ni(rr,e),nr!==null&&ni(nr,e),ir!==null&&ni(ir,e),ei.forEach(t),ti.forEach(t),n=0;n<or.length;n++)l=or[n],l.blockedOn===e&&(l.blockedOn=null);for(;0<or.length&&(n=or[0],n.blockedOn===null);)Fd(n),n.blockedOn===null&&or.shift()}var fn=M.ReactCurrentBatchConfig,Ja=!0;function SP(e,t,n,l){var f=Re,S=fn.transition;fn.transition=null;try{Re=1,uu(e,t,n,l)}finally{Re=f,fn.transition=S}}function CP(e,t,n,l){var f=Re,S=fn.transition;fn.transition=null;try{Re=4,uu(e,t,n,l)}finally{Re=f,fn.transition=S}}function uu(e,t,n,l){if(Ja){var f=lu(e,t,n,l);if(f===null)_u(e,t,l,Ga,n),Bd(e,l);else if(mP(f,e,t,n,l))l.stopPropagation();else if(Bd(e,l),t&4&&-1<gP.indexOf(e)){for(;f!==null;){var S=gi(f);if(S!==null&&jd(S),S=lu(e,t,n,l),S===null&&_u(e,t,l,Ga,n),S===f)break;f=S}f!==null&&l.stopPropagation()}else _u(e,t,l,null,n)}}var Ga=null;function lu(e,t,n,l){if(Ga=null,e=Jn(l),e=br(e),e!==null)if(t=kr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ad(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ga=e,null}function Wd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aP()){case nu:return 1;case Od:return 4;case Ba:case cP:return 16;case Dd:return 536870912;default:return 16}default:return 16}}var sr=null,pu=null,Qa=null;function Hd(){if(Qa)return Qa;var e,t=pu,n=t.length,l,f="value"in sr?sr.value:sr.textContent,S=f.length;for(e=0;e<n&&t[e]===f[e];e++);var R=n-e;for(l=1;l<=R&&t[n-l]===f[S-l];l++);return Qa=f.slice(e,1<l?1-l:void 0)}function Ya(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xa(){return!0}function Vd(){return!1}function ut(e){function t(n,l,f,S,R){this._reactName=n,this._targetInst=f,this.type=l,this.nativeEvent=S,this.target=R,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(n=e[_],this[_]=n?n(S):S[_]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Xa:Vd,this.isPropagationStopped=Vd,this}return J(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xa)},persist:function(){},isPersistent:Xa}),t}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},du=ut(gn),oi=J({},gn,{view:0,detail:0}),PP=ut(oi),hu,vu,si,Za=J({},oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&e.type==="mousemove"?(hu=e.screenX-si.screenX,vu=e.screenY-si.screenY):vu=hu=0,si=e),hu)},movementY:function(e){return"movementY"in e?e.movementY:vu}}),Kd=ut(Za),RP=J({},Za,{dataTransfer:0}),wP=ut(RP),EP=J({},oi,{relatedTarget:0}),fu=ut(EP),TP=J({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),AP=ut(TP),_P=J({},gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),IP=ut(_P),kP=J({},gn,{data:0}),Jd=ut(kP),bP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=OP[e])?!!t[e]:!1}function gu(){return DP}var NP=J({},oi,{key:function(e){if(e.key){var t=bP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ya(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?MP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(e){return e.type==="keypress"?Ya(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ya(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zP=ut(NP),jP=J({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gd=ut(jP),LP=J({},oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),xP=ut(LP),qP=J({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),BP=ut(qP),FP=J({},Za,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),UP=ut(FP),WP=[9,13,27,32],mu=o&&"CompositionEvent"in window,ai=null;o&&"documentMode"in document&&(ai=document.documentMode);var HP=o&&"TextEvent"in window&&!ai,Qd=o&&(!mu||ai&&8<ai&&11>=ai),Yd=" ",Xd=!1;function Zd(e,t){switch(e){case"keyup":return WP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $d(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mn=!1;function VP(e,t){switch(e){case"compositionend":return $d(t);case"keypress":return t.which!==32?null:(Xd=!0,Yd);case"textInput":return e=t.data,e===Yd&&Xd?null:e;default:return null}}function KP(e,t){if(mn)return e==="compositionend"||!mu&&Zd(e,t)?(e=Hd(),Qa=pu=sr=null,mn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qd&&t.locale!=="ko"?null:t.data;default:return null}}var JP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!JP[e.type]:t==="textarea"}function th(e,t,n,l){La(l),t=nc(t,"onChange"),0<t.length&&(n=new du("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var ci=null,ui=null;function GP(e){Sh(e,0)}function $a(e){var t=Rn(e);if(Aa(t))return e}function QP(e,t){if(e==="change")return t}var rh=!1;if(o){var yu;if(o){var Su="oninput"in document;if(!Su){var nh=document.createElement("div");nh.setAttribute("oninput","return;"),Su=typeof nh.oninput=="function"}yu=Su}else yu=!1;rh=yu&&(!document.documentMode||9<document.documentMode)}function ih(){ci&&(ci.detachEvent("onpropertychange",oh),ui=ci=null)}function oh(e){if(e.propertyName==="value"&&$a(ui)){var t=[];th(t,ui,e,Jn(e)),Td(GP,t)}}function YP(e,t,n){e==="focusin"?(ih(),ci=t,ui=n,ci.attachEvent("onpropertychange",oh)):e==="focusout"&&ih()}function XP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $a(ui)}function ZP(e,t){if(e==="click")return $a(t)}function $P(e,t){if(e==="input"||e==="change")return $a(t)}function eR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:eR;function li(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var f=n[l];if(!u.call(t,f)||!Et(e[f],t[f]))return!1}return!0}function sh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ah(e,t){var n=sh(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sh(n)}}function ch(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ch(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uh(){for(var e=window,t=dn();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=dn(e.document)}return t}function Cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tR(e){var t=uh(),n=e.focusedElem,l=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ch(n.ownerDocument.documentElement,n)){if(l!==null&&Cu(n)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var f=n.textContent.length,S=Math.min(l.start,f);l=l.end===void 0?S:Math.min(l.end,f),!e.extend&&S>l&&(f=l,l=S,S=f),f=ah(n,S);var R=ah(n,l);f&&R&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==R.node||e.focusOffset!==R.offset)&&(t=t.createRange(),t.setStart(f.node,f.offset),e.removeAllRanges(),S>l?(e.addRange(t),e.extend(R.node,R.offset)):(t.setEnd(R.node,R.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rR=o&&"documentMode"in document&&11>=document.documentMode,yn=null,Pu=null,pi=null,Ru=!1;function lh(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ru||yn==null||yn!==dn(l)||(l=yn,"selectionStart"in l&&Cu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),pi&&li(pi,l)||(pi=l,l=nc(Pu,"onSelect"),0<l.length&&(t=new du("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=yn)))}function ec(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sn={animationend:ec("Animation","AnimationEnd"),animationiteration:ec("Animation","AnimationIteration"),animationstart:ec("Animation","AnimationStart"),transitionend:ec("Transition","TransitionEnd")},wu={},ph={};o&&(ph=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);function tc(e){if(wu[e])return wu[e];if(!Sn[e])return e;var t=Sn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ph)return wu[e]=t[n];return e}var dh=tc("animationend"),hh=tc("animationiteration"),vh=tc("animationstart"),fh=tc("transitionend"),gh=new Map,mh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(e,t){gh.set(e,t),p(t,[e])}for(var Eu=0;Eu<mh.length;Eu++){var Tu=mh[Eu],nR=Tu.toLowerCase(),iR=Tu[0].toUpperCase()+Tu.slice(1);ar(nR,"on"+iR)}ar(dh,"onAnimationEnd"),ar(hh,"onAnimationIteration"),ar(vh,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar(fh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oR=new Set("cancel close invalid load scroll toggle".split(" ").concat(di));function yh(e,t,n){var l=e.type||"unknown-event";e.currentTarget=n,nP(l,t,void 0,e),e.currentTarget=null}function Sh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],f=l.event;l=l.listeners;e:{var S=void 0;if(t)for(var R=l.length-1;0<=R;R--){var _=l[R],I=_.instance,z=_.currentTarget;if(_=_.listener,I!==S&&f.isPropagationStopped())break e;yh(f,_,z),S=I}else for(R=0;R<l.length;R++){if(_=l[R],I=_.instance,z=_.currentTarget,_=_.listener,I!==S&&f.isPropagationStopped())break e;yh(f,_,z),S=I}}}if(qa)throw e=ru,qa=!1,ru=null,e}function Ie(e,t){var n=t[Du];n===void 0&&(n=t[Du]=new Set);var l=e+"__bubble";n.has(l)||(Ch(t,e,2,!1),n.add(l))}function Au(e,t,n){var l=0;t&&(l|=4),Ch(n,e,l,t)}var rc="_reactListening"+Math.random().toString(36).slice(2);function hi(e){if(!e[rc]){e[rc]=!0,h.forEach(function(n){n!=="selectionchange"&&(oR.has(n)||Au(n,!1,e),Au(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rc]||(t[rc]=!0,Au("selectionchange",!1,t))}}function Ch(e,t,n,l){switch(Wd(t)){case 1:var f=SP;break;case 4:f=CP;break;default:f=uu}n=f.bind(null,t,n,e),f=void 0,!tu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(t,n,{capture:!0,passive:f}):e.addEventListener(t,n,!0):f!==void 0?e.addEventListener(t,n,{passive:f}):e.addEventListener(t,n,!1)}function _u(e,t,n,l,f){var S=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var R=l.tag;if(R===3||R===4){var _=l.stateNode.containerInfo;if(_===f||_.nodeType===8&&_.parentNode===f)break;if(R===4)for(R=l.return;R!==null;){var I=R.tag;if((I===3||I===4)&&(I=R.stateNode.containerInfo,I===f||I.nodeType===8&&I.parentNode===f))return;R=R.return}for(;_!==null;){if(R=br(_),R===null)return;if(I=R.tag,I===5||I===6){l=S=R;continue e}_=_.parentNode}}l=l.return}Td(function(){var z=S,B=Jn(n),F=[];e:{var q=gh.get(e);if(q!==void 0){var G=du,Y=e;switch(e){case"keypress":if(Ya(n)===0)break e;case"keydown":case"keyup":G=zP;break;case"focusin":Y="focus",G=fu;break;case"focusout":Y="blur",G=fu;break;case"beforeblur":case"afterblur":G=fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=wP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=xP;break;case dh:case hh:case vh:G=AP;break;case fh:G=BP;break;case"scroll":G=PP;break;case"wheel":G=UP;break;case"copy":case"cut":case"paste":G=IP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Gd}var X=(t&4)!==0,xe=!X&&e==="scroll",O=X?q!==null?q+"Capture":null:q;X=[];for(var k=z,N;k!==null;){N=k;var W=N.stateNode;if(N.tag===5&&W!==null&&(N=W,O!==null&&(W=Qn(k,O),W!=null&&X.push(vi(k,W,N)))),xe)break;k=k.return}0<X.length&&(q=new G(q,Y,null,n,B),F.push({event:q,listeners:X}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",q&&n!==Kn&&(Y=n.relatedTarget||n.fromElement)&&(br(Y)||Y[Ft]))break e;if((G||q)&&(q=B.window===B?B:(q=B.ownerDocument)?q.defaultView||q.parentWindow:window,G?(Y=n.relatedTarget||n.toElement,G=z,Y=Y?br(Y):null,Y!==null&&(xe=kr(Y),Y!==xe||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(G=null,Y=z),G!==Y)){if(X=Kd,W="onMouseLeave",O="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(X=Gd,W="onPointerLeave",O="onPointerEnter",k="pointer"),xe=G==null?q:Rn(G),N=Y==null?q:Rn(Y),q=new X(W,k+"leave",G,n,B),q.target=xe,q.relatedTarget=N,W=null,br(B)===z&&(X=new X(O,k+"enter",Y,n,B),X.target=N,X.relatedTarget=xe,W=X),xe=W,G&&Y)t:{for(X=G,O=Y,k=0,N=X;N;N=Cn(N))k++;for(N=0,W=O;W;W=Cn(W))N++;for(;0<k-N;)X=Cn(X),k--;for(;0<N-k;)O=Cn(O),N--;for(;k--;){if(X===O||O!==null&&X===O.alternate)break t;X=Cn(X),O=Cn(O)}X=null}else X=null;G!==null&&Ph(F,q,G,X,!1),Y!==null&&xe!==null&&Ph(F,xe,Y,X,!0)}}e:{if(q=z?Rn(z):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var Z=QP;else if(eh(q))if(rh)Z=$P;else{Z=XP;var re=YP}else(G=q.nodeName)&&G.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(Z=ZP);if(Z&&(Z=Z(e,z))){th(F,Z,n,B);break e}re&&re(e,q,z),e==="focusout"&&(re=q._wrapperState)&&re.controlled&&q.type==="number"&&Fn(q,"number",q.value)}switch(re=z?Rn(z):window,e){case"focusin":(eh(re)||re.contentEditable==="true")&&(yn=re,Pu=z,pi=null);break;case"focusout":pi=Pu=yn=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,lh(F,n,B);break;case"selectionchange":if(rR)break;case"keydown":case"keyup":lh(F,n,B)}var ne;if(mu)e:{switch(e){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else mn?Zd(e,n)&&(oe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(oe="onCompositionStart");oe&&(Qd&&n.locale!=="ko"&&(mn||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&mn&&(ne=Hd()):(sr=B,pu="value"in sr?sr.value:sr.textContent,mn=!0)),re=nc(z,oe),0<re.length&&(oe=new Jd(oe,e,null,n,B),F.push({event:oe,listeners:re}),ne?oe.data=ne:(ne=$d(n),ne!==null&&(oe.data=ne)))),(ne=HP?VP(e,n):KP(e,n))&&(z=nc(z,"onBeforeInput"),0<z.length&&(B=new Jd("onBeforeInput","beforeinput",null,n,B),F.push({event:B,listeners:z}),B.data=ne))}Sh(F,t)})}function vi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nc(e,t){for(var n=t+"Capture",l=[];e!==null;){var f=e,S=f.stateNode;f.tag===5&&S!==null&&(f=S,S=Qn(e,n),S!=null&&l.unshift(vi(e,S,f)),S=Qn(e,t),S!=null&&l.push(vi(e,S,f))),e=e.return}return l}function Cn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ph(e,t,n,l,f){for(var S=t._reactName,R=[];n!==null&&n!==l;){var _=n,I=_.alternate,z=_.stateNode;if(I!==null&&I===l)break;_.tag===5&&z!==null&&(_=z,f?(I=Qn(n,S),I!=null&&R.unshift(vi(n,I,_))):f||(I=Qn(n,S),I!=null&&R.push(vi(n,I,_)))),n=n.return}R.length!==0&&e.push({event:t,listeners:R})}var sR=/\r\n?/g,aR=/\u0000|\uFFFD/g;function Rh(e){return(typeof e=="string"?e:""+e).replace(sR,`
`).replace(aR,"")}function ic(e,t,n){if(t=Rh(t),Rh(e)!==t&&n)throw Error(s(425))}function oc(){}var Iu=null,ku=null;function bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,cR=typeof clearTimeout=="function"?clearTimeout:void 0,wh=typeof Promise=="function"?Promise:void 0,uR=typeof queueMicrotask=="function"?queueMicrotask:typeof wh<"u"?function(e){return wh.resolve(null).then(e).catch(lR)}:Mu;function lR(e){setTimeout(function(){throw e})}function Ou(e,t){var n=t,l=0;do{var f=n.nextSibling;if(e.removeChild(n),f&&f.nodeType===8)if(n=f.data,n==="/$"){if(l===0){e.removeChild(f),ii(t);return}l--}else n!=="$"&&n!=="$?"&&n!=="$!"||l++;n=f}while(n);ii(t)}function cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Eh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pn=Math.random().toString(36).slice(2),zt="__reactFiber$"+Pn,fi="__reactProps$"+Pn,Ft="__reactContainer$"+Pn,Du="__reactEvents$"+Pn,pR="__reactListeners$"+Pn,dR="__reactHandles$"+Pn;function br(e){var t=e[zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ft]||n[zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Eh(e);e!==null;){if(n=e[zt])return n;e=Eh(e)}return t}e=n,n=e.parentNode}return null}function gi(e){return e=e[zt]||e[Ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function sc(e){return e[fi]||null}var Nu=[],wn=-1;function ur(e){return{current:e}}function ke(e){0>wn||(e.current=Nu[wn],Nu[wn]=null,wn--)}function _e(e,t){wn++,Nu[wn]=e.current,e.current=t}var lr={},Ge=ur(lr),rt=ur(!1),Mr=lr;function En(e,t){var n=e.type.contextTypes;if(!n)return lr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var f={},S;for(S in n)f[S]=t[S];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=f),f}function nt(e){return e=e.childContextTypes,e!=null}function ac(){ke(rt),ke(Ge)}function Th(e,t,n){if(Ge.current!==lr)throw Error(s(168));_e(Ge,t),_e(rt,n)}function Ah(e,t,n){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return n;l=l.getChildContext();for(var f in l)if(!(f in t))throw Error(s(108,Ee(e)||"Unknown",f));return J({},n,l)}function cc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lr,Mr=Ge.current,_e(Ge,e),_e(rt,rt.current),!0}function _h(e,t,n){var l=e.stateNode;if(!l)throw Error(s(169));n?(e=Ah(e,t,Mr),l.__reactInternalMemoizedMergedChildContext=e,ke(rt),ke(Ge),_e(Ge,e)):ke(rt),_e(rt,n)}var Ut=null,uc=!1,zu=!1;function Ih(e){Ut===null?Ut=[e]:Ut.push(e)}function hR(e){uc=!0,Ih(e)}function pr(){if(!zu&&Ut!==null){zu=!0;var e=0,t=Re;try{var n=Ut;for(Re=1;e<n.length;e++){var l=n[e];do l=l(!0);while(l!==null)}Ut=null,uc=!1}catch(f){throw Ut!==null&&(Ut=Ut.slice(e+1)),bd(nu,pr),f}finally{Re=t,zu=!1}}return null}var Tn=[],An=0,lc=null,pc=0,mt=[],yt=0,Or=null,Wt=1,Ht="";function Dr(e,t){Tn[An++]=pc,Tn[An++]=lc,lc=e,pc=t}function kh(e,t,n){mt[yt++]=Wt,mt[yt++]=Ht,mt[yt++]=Or,Or=e;var l=Wt;e=Ht;var f=32-wt(l)-1;l&=~(1<<f),n+=1;var S=32-wt(t)+f;if(30<S){var R=f-f%5;S=(l&(1<<R)-1).toString(32),l>>=R,f-=R,Wt=1<<32-wt(t)+f|n<<f|l,Ht=S+e}else Wt=1<<S|n<<f|l,Ht=e}function ju(e){e.return!==null&&(Dr(e,1),kh(e,1,0))}function Lu(e){for(;e===lc;)lc=Tn[--An],Tn[An]=null,pc=Tn[--An],Tn[An]=null;for(;e===Or;)Or=mt[--yt],mt[yt]=null,Ht=mt[--yt],mt[yt]=null,Wt=mt[--yt],mt[yt]=null}var lt=null,pt=null,Me=!1,Tt=null;function bh(e,t){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,lt=e,pt=cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,lt=e,pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Or!==null?{id:Wt,overflow:Ht}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,lt=e,pt=null,!0):!1;default:return!1}}function xu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qu(e){if(Me){var t=pt;if(t){var n=t;if(!Mh(e,t)){if(xu(e))throw Error(s(418));t=cr(n.nextSibling);var l=lt;t&&Mh(e,t)?bh(l,n):(e.flags=e.flags&-4097|2,Me=!1,lt=e)}}else{if(xu(e))throw Error(s(418));e.flags=e.flags&-4097|2,Me=!1,lt=e}}}function Oh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lt=e}function dc(e){if(e!==lt)return!1;if(!Me)return Oh(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bu(e.type,e.memoizedProps)),t&&(t=pt)){if(xu(e))throw Dh(),Error(s(418));for(;t;)bh(e,t),t=cr(t.nextSibling)}if(Oh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pt=cr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pt=null}}else pt=lt?cr(e.stateNode.nextSibling):null;return!0}function Dh(){for(var e=pt;e;)e=cr(e.nextSibling)}function _n(){pt=lt=null,Me=!1}function Bu(e){Tt===null?Tt=[e]:Tt.push(e)}var vR=M.ReactCurrentBatchConfig;function mi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(s(309));var l=n.stateNode}if(!l)throw Error(s(147,e));var f=l,S=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===S?t.ref:(t=function(R){var _=f.refs;R===null?delete _[S]:_[S]=R},t._stringRef=S,t)}if(typeof e!="string")throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function hc(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nh(e){var t=e._init;return t(e._payload)}function zh(e){function t(O,k){if(e){var N=O.deletions;N===null?(O.deletions=[k],O.flags|=16):N.push(k)}}function n(O,k){if(!e)return null;for(;k!==null;)t(O,k),k=k.sibling;return null}function l(O,k){for(O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function f(O,k){return O=Sr(O,k),O.index=0,O.sibling=null,O}function S(O,k,N){return O.index=N,e?(N=O.alternate,N!==null?(N=N.index,N<k?(O.flags|=2,k):N):(O.flags|=2,k)):(O.flags|=1048576,k)}function R(O){return e&&O.alternate===null&&(O.flags|=2),O}function _(O,k,N,W){return k===null||k.tag!==6?(k=Ml(N,O.mode,W),k.return=O,k):(k=f(k,N),k.return=O,k)}function I(O,k,N,W){var Z=N.type;return Z===K?B(O,k,N.props.children,W,N.key):k!==null&&(k.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Te&&Nh(Z)===k.type)?(W=f(k,N.props),W.ref=mi(O,k,N),W.return=O,W):(W=Lc(N.type,N.key,N.props,null,O.mode,W),W.ref=mi(O,k,N),W.return=O,W)}function z(O,k,N,W){return k===null||k.tag!==4||k.stateNode.containerInfo!==N.containerInfo||k.stateNode.implementation!==N.implementation?(k=Ol(N,O.mode,W),k.return=O,k):(k=f(k,N.children||[]),k.return=O,k)}function B(O,k,N,W,Z){return k===null||k.tag!==7?(k=Fr(N,O.mode,W,Z),k.return=O,k):(k=f(k,N),k.return=O,k)}function F(O,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Ml(""+k,O.mode,N),k.return=O,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case j:return N=Lc(k.type,k.key,k.props,null,O.mode,N),N.ref=mi(O,null,k),N.return=O,N;case L:return k=Ol(k,O.mode,N),k.return=O,k;case Te:var W=k._init;return F(O,W(k._payload),N)}if(Ar(k)||$(k))return k=Fr(k,O.mode,N,null),k.return=O,k;hc(O,k)}return null}function q(O,k,N,W){var Z=k!==null?k.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return Z!==null?null:_(O,k,""+N,W);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case j:return N.key===Z?I(O,k,N,W):null;case L:return N.key===Z?z(O,k,N,W):null;case Te:return Z=N._init,q(O,k,Z(N._payload),W)}if(Ar(N)||$(N))return Z!==null?null:B(O,k,N,W,null);hc(O,N)}return null}function G(O,k,N,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number")return O=O.get(N)||null,_(k,O,""+W,Z);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case j:return O=O.get(W.key===null?N:W.key)||null,I(k,O,W,Z);case L:return O=O.get(W.key===null?N:W.key)||null,z(k,O,W,Z);case Te:var re=W._init;return G(O,k,N,re(W._payload),Z)}if(Ar(W)||$(W))return O=O.get(N)||null,B(k,O,W,Z,null);hc(k,W)}return null}function Y(O,k,N,W){for(var Z=null,re=null,ne=k,oe=k=0,Ve=null;ne!==null&&oe<N.length;oe++){ne.index>oe?(Ve=ne,ne=null):Ve=ne.sibling;var Se=q(O,ne,N[oe],W);if(Se===null){ne===null&&(ne=Ve);break}e&&ne&&Se.alternate===null&&t(O,ne),k=S(Se,k,oe),re===null?Z=Se:re.sibling=Se,re=Se,ne=Ve}if(oe===N.length)return n(O,ne),Me&&Dr(O,oe),Z;if(ne===null){for(;oe<N.length;oe++)ne=F(O,N[oe],W),ne!==null&&(k=S(ne,k,oe),re===null?Z=ne:re.sibling=ne,re=ne);return Me&&Dr(O,oe),Z}for(ne=l(O,ne);oe<N.length;oe++)Ve=G(ne,O,oe,N[oe],W),Ve!==null&&(e&&Ve.alternate!==null&&ne.delete(Ve.key===null?oe:Ve.key),k=S(Ve,k,oe),re===null?Z=Ve:re.sibling=Ve,re=Ve);return e&&ne.forEach(function(Cr){return t(O,Cr)}),Me&&Dr(O,oe),Z}function X(O,k,N,W){var Z=$(N);if(typeof Z!="function")throw Error(s(150));if(N=Z.call(N),N==null)throw Error(s(151));for(var re=Z=null,ne=k,oe=k=0,Ve=null,Se=N.next();ne!==null&&!Se.done;oe++,Se=N.next()){ne.index>oe?(Ve=ne,ne=null):Ve=ne.sibling;var Cr=q(O,ne,Se.value,W);if(Cr===null){ne===null&&(ne=Ve);break}e&&ne&&Cr.alternate===null&&t(O,ne),k=S(Cr,k,oe),re===null?Z=Cr:re.sibling=Cr,re=Cr,ne=Ve}if(Se.done)return n(O,ne),Me&&Dr(O,oe),Z;if(ne===null){for(;!Se.done;oe++,Se=N.next())Se=F(O,Se.value,W),Se!==null&&(k=S(Se,k,oe),re===null?Z=Se:re.sibling=Se,re=Se);return Me&&Dr(O,oe),Z}for(ne=l(O,ne);!Se.done;oe++,Se=N.next())Se=G(ne,O,oe,Se.value,W),Se!==null&&(e&&Se.alternate!==null&&ne.delete(Se.key===null?oe:Se.key),k=S(Se,k,oe),re===null?Z=Se:re.sibling=Se,re=Se);return e&&ne.forEach(function(JR){return t(O,JR)}),Me&&Dr(O,oe),Z}function xe(O,k,N,W){if(typeof N=="object"&&N!==null&&N.type===K&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case j:e:{for(var Z=N.key,re=k;re!==null;){if(re.key===Z){if(Z=N.type,Z===K){if(re.tag===7){n(O,re.sibling),k=f(re,N.props.children),k.return=O,O=k;break e}}else if(re.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Te&&Nh(Z)===re.type){n(O,re.sibling),k=f(re,N.props),k.ref=mi(O,re,N),k.return=O,O=k;break e}n(O,re);break}else t(O,re);re=re.sibling}N.type===K?(k=Fr(N.props.children,O.mode,W,N.key),k.return=O,O=k):(W=Lc(N.type,N.key,N.props,null,O.mode,W),W.ref=mi(O,k,N),W.return=O,O=W)}return R(O);case L:e:{for(re=N.key;k!==null;){if(k.key===re)if(k.tag===4&&k.stateNode.containerInfo===N.containerInfo&&k.stateNode.implementation===N.implementation){n(O,k.sibling),k=f(k,N.children||[]),k.return=O,O=k;break e}else{n(O,k);break}else t(O,k);k=k.sibling}k=Ol(N,O.mode,W),k.return=O,O=k}return R(O);case Te:return re=N._init,xe(O,k,re(N._payload),W)}if(Ar(N))return Y(O,k,N,W);if($(N))return X(O,k,N,W);hc(O,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,k!==null&&k.tag===6?(n(O,k.sibling),k=f(k,N),k.return=O,O=k):(n(O,k),k=Ml(N,O.mode,W),k.return=O,O=k),R(O)):n(O,k)}return xe}var In=zh(!0),jh=zh(!1),vc=ur(null),fc=null,kn=null,Fu=null;function Uu(){Fu=kn=fc=null}function Wu(e){var t=vc.current;ke(vc),e._currentValue=t}function Hu(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function bn(e,t){fc=e,Fu=kn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(it=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(Fu!==e)if(e={context:e,memoizedValue:t,next:null},kn===null){if(fc===null)throw Error(s(308));kn=e,fc.dependencies={lanes:0,firstContext:e}}else kn=kn.next=e;return t}var Nr=null;function Vu(e){Nr===null?Nr=[e]:Nr.push(e)}function Lh(e,t,n,l){var f=t.interleaved;return f===null?(n.next=n,Vu(t)):(n.next=f.next,f.next=n),t.interleaved=n,Vt(e,l)}function Vt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var dr=!1;function Ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hr(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ye&2)!==0){var f=l.pending;return f===null?t.next=t:(t.next=f.next,f.next=t),l.pending=t,Vt(e,n)}return f=l.interleaved,f===null?(t.next=t,Vu(l)):(t.next=f.next,f.next=t),l.interleaved=t,Vt(e,n)}function gc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,su(e,n)}}function qh(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var f=null,S=null;if(n=n.firstBaseUpdate,n!==null){do{var R={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};S===null?f=S=R:S=S.next=R,n=n.next}while(n!==null);S===null?f=S=t:S=S.next=t}else f=S=t;n={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:S,shared:l.shared,effects:l.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mc(e,t,n,l){var f=e.updateQueue;dr=!1;var S=f.firstBaseUpdate,R=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var I=_,z=I.next;I.next=null,R===null?S=z:R.next=z,R=I;var B=e.alternate;B!==null&&(B=B.updateQueue,_=B.lastBaseUpdate,_!==R&&(_===null?B.firstBaseUpdate=z:_.next=z,B.lastBaseUpdate=I))}if(S!==null){var F=f.baseState;R=0,B=z=I=null,_=S;do{var q=_.lane,G=_.eventTime;if((l&q)===q){B!==null&&(B=B.next={eventTime:G,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var Y=e,X=_;switch(q=t,G=n,X.tag){case 1:if(Y=X.payload,typeof Y=="function"){F=Y.call(G,F,q);break e}F=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=X.payload,q=typeof Y=="function"?Y.call(G,F,q):Y,q==null)break e;F=J({},F,q);break e;case 2:dr=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,q=f.effects,q===null?f.effects=[_]:q.push(_))}else G={eventTime:G,lane:q,tag:_.tag,payload:_.payload,callback:_.callback,next:null},B===null?(z=B=G,I=F):B=B.next=G,R|=q;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;q=_,_=q.next,q.next=null,f.lastBaseUpdate=q,f.shared.pending=null}}while(!0);if(B===null&&(I=F),f.baseState=I,f.firstBaseUpdate=z,f.lastBaseUpdate=B,t=f.shared.interleaved,t!==null){f=t;do R|=f.lane,f=f.next;while(f!==t)}else S===null&&(f.shared.lanes=0);Lr|=R,e.lanes=R,e.memoizedState=F}}function Bh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],f=l.callback;if(f!==null){if(l.callback=null,l=n,typeof f!="function")throw Error(s(191,f));f.call(l)}}}var yi={},jt=ur(yi),Si=ur(yi),Ci=ur(yi);function zr(e){if(e===yi)throw Error(s(174));return e}function Ju(e,t){switch(_e(Ci,t),_e(Si,e),_e(jt,yi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wn(t,e)}ke(jt),_e(jt,t)}function Mn(){ke(jt),ke(Si),ke(Ci)}function Fh(e){zr(Ci.current);var t=zr(jt.current),n=Wn(t,e.type);t!==n&&(_e(Si,e),_e(jt,n))}function Gu(e){Si.current===e&&(ke(jt),ke(Si))}var Oe=ur(0);function yc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qu=[];function Yu(){for(var e=0;e<Qu.length;e++)Qu[e]._workInProgressVersionPrimary=null;Qu.length=0}var Sc=M.ReactCurrentDispatcher,Xu=M.ReactCurrentBatchConfig,jr=0,De=null,Be=null,We=null,Cc=!1,Pi=!1,Ri=0,fR=0;function Qe(){throw Error(s(321))}function Zu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Et(e[n],t[n]))return!1;return!0}function $u(e,t,n,l,f,S){if(jr=S,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sc.current=e===null||e.memoizedState===null?SR:CR,e=n(l,f),Pi){S=0;do{if(Pi=!1,Ri=0,25<=S)throw Error(s(301));S+=1,We=Be=null,t.updateQueue=null,Sc.current=PR,e=n(l,f)}while(Pi)}if(Sc.current=wc,t=Be!==null&&Be.next!==null,jr=0,We=Be=De=null,Cc=!1,t)throw Error(s(300));return e}function el(){var e=Ri!==0;return Ri=0,e}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?De.memoizedState=We=e:We=We.next=e,We}function Ct(){if(Be===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=We===null?De.memoizedState:We.next;if(t!==null)We=t,Be=e;else{if(e===null)throw Error(s(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},We===null?De.memoizedState=We=e:We=We.next=e}return We}function wi(e,t){return typeof t=="function"?t(e):t}function tl(e){var t=Ct(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var l=Be,f=l.baseQueue,S=n.pending;if(S!==null){if(f!==null){var R=f.next;f.next=S.next,S.next=R}l.baseQueue=f=S,n.pending=null}if(f!==null){S=f.next,l=l.baseState;var _=R=null,I=null,z=S;do{var B=z.lane;if((jr&B)===B)I!==null&&(I=I.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),l=z.hasEagerState?z.eagerState:e(l,z.action);else{var F={lane:B,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};I===null?(_=I=F,R=l):I=I.next=F,De.lanes|=B,Lr|=B}z=z.next}while(z!==null&&z!==S);I===null?R=l:I.next=_,Et(l,t.memoizedState)||(it=!0),t.memoizedState=l,t.baseState=R,t.baseQueue=I,n.lastRenderedState=l}if(e=n.interleaved,e!==null){f=e;do S=f.lane,De.lanes|=S,Lr|=S,f=f.next;while(f!==e)}else f===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rl(e){var t=Ct(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var l=n.dispatch,f=n.pending,S=t.memoizedState;if(f!==null){n.pending=null;var R=f=f.next;do S=e(S,R.action),R=R.next;while(R!==f);Et(S,t.memoizedState)||(it=!0),t.memoizedState=S,t.baseQueue===null&&(t.baseState=S),n.lastRenderedState=S}return[S,l]}function Uh(){}function Wh(e,t){var n=De,l=Ct(),f=t(),S=!Et(l.memoizedState,f);if(S&&(l.memoizedState=f,it=!0),l=l.queue,nl(Kh.bind(null,n,l,e),[e]),l.getSnapshot!==t||S||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,Ei(9,Vh.bind(null,n,l,f,t),void 0,null),He===null)throw Error(s(349));(jr&30)!==0||Hh(n,t,f)}return f}function Hh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vh(e,t,n,l){t.value=n,t.getSnapshot=l,Jh(t)&&Gh(e)}function Kh(e,t,n){return n(function(){Jh(t)&&Gh(e)})}function Jh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch{return!0}}function Gh(e){var t=Vt(e,1);t!==null&&kt(t,e,1,-1)}function Qh(e){var t=Lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=yR.bind(null,De,e),[t.memoizedState,e]}function Ei(e,t,n,l){return e={tag:e,create:t,destroy:n,deps:l,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e)),e}function Yh(){return Ct().memoizedState}function Pc(e,t,n,l){var f=Lt();De.flags|=e,f.memoizedState=Ei(1|t,n,void 0,l===void 0?null:l)}function Rc(e,t,n,l){var f=Ct();l=l===void 0?null:l;var S=void 0;if(Be!==null){var R=Be.memoizedState;if(S=R.destroy,l!==null&&Zu(l,R.deps)){f.memoizedState=Ei(t,n,S,l);return}}De.flags|=e,f.memoizedState=Ei(1|t,n,S,l)}function Xh(e,t){return Pc(8390656,8,e,t)}function nl(e,t){return Rc(2048,8,e,t)}function Zh(e,t){return Rc(4,2,e,t)}function $h(e,t){return Rc(4,4,e,t)}function ev(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tv(e,t,n){return n=n!=null?n.concat([e]):null,Rc(4,4,ev.bind(null,t,e),n)}function il(){}function rv(e,t){var n=Ct();t=t===void 0?null:t;var l=n.memoizedState;return l!==null&&t!==null&&Zu(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function nv(e,t){var n=Ct();t=t===void 0?null:t;var l=n.memoizedState;return l!==null&&t!==null&&Zu(t,l[1])?l[0]:(e=e(),n.memoizedState=[e,t],e)}function iv(e,t,n){return(jr&21)===0?(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=n):(Et(n,t)||(n=Nd(),De.lanes|=n,Lr|=n,e.baseState=!0),t)}function gR(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var l=Xu.transition;Xu.transition={};try{e(!1),t()}finally{Re=n,Xu.transition=l}}function ov(){return Ct().memoizedState}function mR(e,t,n){var l=mr(e);if(n={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null},sv(e))av(t,n);else if(n=Lh(e,t,n,l),n!==null){var f=et();kt(n,e,l,f),cv(n,t,l)}}function yR(e,t,n){var l=mr(e),f={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null};if(sv(e))av(t,f);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=t.lastRenderedReducer,S!==null))try{var R=t.lastRenderedState,_=S(R,n);if(f.hasEagerState=!0,f.eagerState=_,Et(_,R)){var I=t.interleaved;I===null?(f.next=f,Vu(t)):(f.next=I.next,I.next=f),t.interleaved=f;return}}catch{}finally{}n=Lh(e,t,f,l),n!==null&&(f=et(),kt(n,e,l,f),cv(n,t,l))}}function sv(e){var t=e.alternate;return e===De||t!==null&&t===De}function av(e,t){Pi=Cc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function cv(e,t,n){if((n&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,su(e,n)}}var wc={readContext:St,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},SR={readContext:St,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Xh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Pc(4194308,4,ev.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pc(4,2,e,t)},useMemo:function(e,t){var n=Lt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var l=Lt();return t=n!==void 0?n(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=mR.bind(null,De,e),[l.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:Qh,useDebugValue:il,useDeferredValue:function(e){return Lt().memoizedState=e},useTransition:function(){var e=Qh(!1),t=e[0];return e=gR.bind(null,e[1]),Lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var l=De,f=Lt();if(Me){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),He===null)throw Error(s(349));(jr&30)!==0||Hh(l,t,n)}f.memoizedState=n;var S={value:n,getSnapshot:t};return f.queue=S,Xh(Kh.bind(null,l,S,e),[e]),l.flags|=2048,Ei(9,Vh.bind(null,l,S,n,t),void 0,null),n},useId:function(){var e=Lt(),t=He.identifierPrefix;if(Me){var n=Ht,l=Wt;n=(l&~(1<<32-wt(l)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ri++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fR++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},CR={readContext:St,useCallback:rv,useContext:St,useEffect:nl,useImperativeHandle:tv,useInsertionEffect:Zh,useLayoutEffect:$h,useMemo:nv,useReducer:tl,useRef:Yh,useState:function(){return tl(wi)},useDebugValue:il,useDeferredValue:function(e){var t=Ct();return iv(t,Be.memoizedState,e)},useTransition:function(){var e=tl(wi)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Uh,useSyncExternalStore:Wh,useId:ov,unstable_isNewReconciler:!1},PR={readContext:St,useCallback:rv,useContext:St,useEffect:nl,useImperativeHandle:tv,useInsertionEffect:Zh,useLayoutEffect:$h,useMemo:nv,useReducer:rl,useRef:Yh,useState:function(){return rl(wi)},useDebugValue:il,useDeferredValue:function(e){var t=Ct();return Be===null?t.memoizedState=e:iv(t,Be.memoizedState,e)},useTransition:function(){var e=rl(wi)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Uh,useSyncExternalStore:Wh,useId:ov,unstable_isNewReconciler:!1};function At(e,t){if(e&&e.defaultProps){t=J({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ol(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:J({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ec={isMounted:function(e){return(e=e._reactInternals)?kr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var l=et(),f=mr(e),S=Kt(l,f);S.payload=t,n!=null&&(S.callback=n),t=hr(e,S,f),t!==null&&(kt(t,e,f,l),gc(t,e,f))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=et(),f=mr(e),S=Kt(l,f);S.tag=1,S.payload=t,n!=null&&(S.callback=n),t=hr(e,S,f),t!==null&&(kt(t,e,f,l),gc(t,e,f))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=et(),l=mr(e),f=Kt(n,l);f.tag=2,t!=null&&(f.callback=t),t=hr(e,f,l),t!==null&&(kt(t,e,l,n),gc(t,e,l))}};function uv(e,t,n,l,f,S,R){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,S,R):t.prototype&&t.prototype.isPureReactComponent?!li(n,l)||!li(f,S):!0}function lv(e,t,n){var l=!1,f=lr,S=t.contextType;return typeof S=="object"&&S!==null?S=St(S):(f=nt(t)?Mr:Ge.current,l=t.contextTypes,S=(l=l!=null)?En(e,f):lr),t=new t(n,S),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ec,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=S),t}function pv(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Ec.enqueueReplaceState(t,t.state,null)}function sl(e,t,n,l){var f=e.stateNode;f.props=n,f.state=e.memoizedState,f.refs={},Ku(e);var S=t.contextType;typeof S=="object"&&S!==null?f.context=St(S):(S=nt(t)?Mr:Ge.current,f.context=En(e,S)),f.state=e.memoizedState,S=t.getDerivedStateFromProps,typeof S=="function"&&(ol(e,t,S,n),f.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(t=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),t!==f.state&&Ec.enqueueReplaceState(f,f.state,null),mc(e,n,f,l),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function On(e,t){try{var n="",l=t;do n+=ge(l),l=l.return;while(l);var f=n}catch(S){f=`
Error generating stack: `+S.message+`
`+S.stack}return{value:e,source:t,stack:f,digest:null}}function al(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function cl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var RR=typeof WeakMap=="function"?WeakMap:Map;function dv(e,t,n){n=Kt(-1,n),n.tag=3,n.payload={element:null};var l=t.value;return n.callback=function(){Mc||(Mc=!0,wl=l),cl(e,t)},n}function hv(e,t,n){n=Kt(-1,n),n.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var f=t.value;n.payload=function(){return l(f)},n.callback=function(){cl(e,t)}}var S=e.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){cl(e,t),typeof l!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var R=t.stack;this.componentDidCatch(t.value,{componentStack:R!==null?R:""})}),n}function vv(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new RR;var f=new Set;l.set(t,f)}else f=l.get(t),f===void 0&&(f=new Set,l.set(t,f));f.has(n)||(f.add(n),e=jR.bind(null,e,t,n),t.then(e,e))}function fv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gv(e,t,n,l,f){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kt(-1,1),t.tag=2,hr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=f,e)}var wR=M.ReactCurrentOwner,it=!1;function $e(e,t,n,l){t.child=e===null?jh(t,null,n,l):In(t,e.child,n,l)}function mv(e,t,n,l,f){n=n.render;var S=t.ref;return bn(t,f),l=$u(e,t,n,l,S,f),n=el(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~f,Jt(e,t,f)):(Me&&n&&ju(t),t.flags|=1,$e(e,t,l,f),t.child)}function yv(e,t,n,l,f){if(e===null){var S=n.type;return typeof S=="function"&&!bl(S)&&S.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=S,Sv(e,t,S,l,f)):(e=Lc(n.type,null,l,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}if(S=e.child,(e.lanes&f)===0){var R=S.memoizedProps;if(n=n.compare,n=n!==null?n:li,n(R,l)&&e.ref===t.ref)return Jt(e,t,f)}return t.flags|=1,e=Sr(S,l),e.ref=t.ref,e.return=t,t.child=e}function Sv(e,t,n,l,f){if(e!==null){var S=e.memoizedProps;if(li(S,l)&&e.ref===t.ref)if(it=!1,t.pendingProps=l=S,(e.lanes&f)!==0)(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,Jt(e,t,f)}return ul(e,t,n,l,f)}function Cv(e,t,n){var l=t.pendingProps,f=l.children,S=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Nn,dt),dt|=n;else{if((n&1073741824)===0)return e=S!==null?S.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Nn,dt),dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=S!==null?S.baseLanes:n,_e(Nn,dt),dt|=l}else S!==null?(l=S.baseLanes|n,t.memoizedState=null):l=n,_e(Nn,dt),dt|=l;return $e(e,t,f,n),t.child}function Pv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ul(e,t,n,l,f){var S=nt(n)?Mr:Ge.current;return S=En(t,S),bn(t,f),n=$u(e,t,n,l,S,f),l=el(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~f,Jt(e,t,f)):(Me&&l&&ju(t),t.flags|=1,$e(e,t,n,f),t.child)}function Rv(e,t,n,l,f){if(nt(n)){var S=!0;cc(t)}else S=!1;if(bn(t,f),t.stateNode===null)Ac(e,t),lv(t,n,l),sl(t,n,l,f),l=!0;else if(e===null){var R=t.stateNode,_=t.memoizedProps;R.props=_;var I=R.context,z=n.contextType;typeof z=="object"&&z!==null?z=St(z):(z=nt(n)?Mr:Ge.current,z=En(t,z));var B=n.getDerivedStateFromProps,F=typeof B=="function"||typeof R.getSnapshotBeforeUpdate=="function";F||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(_!==l||I!==z)&&pv(t,R,l,z),dr=!1;var q=t.memoizedState;R.state=q,mc(t,l,R,f),I=t.memoizedState,_!==l||q!==I||rt.current||dr?(typeof B=="function"&&(ol(t,n,B,l),I=t.memoizedState),(_=dr||uv(t,n,_,l,q,I,z))?(F||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(t.flags|=4194308)):(typeof R.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=I),R.props=l,R.state=I,R.context=z,l=_):(typeof R.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{R=t.stateNode,xh(e,t),_=t.memoizedProps,z=t.type===t.elementType?_:At(t.type,_),R.props=z,F=t.pendingProps,q=R.context,I=n.contextType,typeof I=="object"&&I!==null?I=St(I):(I=nt(n)?Mr:Ge.current,I=En(t,I));var G=n.getDerivedStateFromProps;(B=typeof G=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(_!==F||q!==I)&&pv(t,R,l,I),dr=!1,q=t.memoizedState,R.state=q,mc(t,l,R,f);var Y=t.memoizedState;_!==F||q!==Y||rt.current||dr?(typeof G=="function"&&(ol(t,n,G,l),Y=t.memoizedState),(z=dr||uv(t,n,z,l,q,Y,I)||!1)?(B||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(l,Y,I),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(l,Y,I)),typeof R.componentDidUpdate=="function"&&(t.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof R.componentDidUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=Y),R.props=l,R.state=Y,R.context=I,l=z):(typeof R.componentDidUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),l=!1)}return ll(e,t,n,l,S,f)}function ll(e,t,n,l,f,S){Pv(e,t);var R=(t.flags&128)!==0;if(!l&&!R)return f&&_h(t,n,!1),Jt(e,t,S);l=t.stateNode,wR.current=t;var _=R&&typeof n.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&R?(t.child=In(t,e.child,null,S),t.child=In(t,null,_,S)):$e(e,t,_,S),t.memoizedState=l.state,f&&_h(t,n,!0),t.child}function wv(e){var t=e.stateNode;t.pendingContext?Th(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Th(e,t.context,!1),Ju(e,t.containerInfo)}function Ev(e,t,n,l,f){return _n(),Bu(f),t.flags|=256,$e(e,t,n,l),t.child}var pl={dehydrated:null,treeContext:null,retryLane:0};function dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tv(e,t,n){var l=t.pendingProps,f=Oe.current,S=!1,R=(t.flags&128)!==0,_;if((_=R)||(_=e!==null&&e.memoizedState===null?!1:(f&2)!==0),_?(S=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),_e(Oe,f&1),e===null)return qu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(R=l.children,e=l.fallback,S?(l=t.mode,S=t.child,R={mode:"hidden",children:R},(l&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=R):S=xc(R,l,0,null),e=Fr(e,l,n,null),S.return=t,e.return=t,S.sibling=e,t.child=S,t.child.memoizedState=dl(n),t.memoizedState=pl,e):hl(t,R));if(f=e.memoizedState,f!==null&&(_=f.dehydrated,_!==null))return ER(e,t,R,l,_,f,n);if(S){S=l.fallback,R=t.mode,f=e.child,_=f.sibling;var I={mode:"hidden",children:l.children};return(R&1)===0&&t.child!==f?(l=t.child,l.childLanes=0,l.pendingProps=I,t.deletions=null):(l=Sr(f,I),l.subtreeFlags=f.subtreeFlags&14680064),_!==null?S=Sr(_,S):(S=Fr(S,R,n,null),S.flags|=2),S.return=t,l.return=t,l.sibling=S,t.child=l,l=S,S=t.child,R=e.child.memoizedState,R=R===null?dl(n):{baseLanes:R.baseLanes|n,cachePool:null,transitions:R.transitions},S.memoizedState=R,S.childLanes=e.childLanes&~n,t.memoizedState=pl,l}return S=e.child,e=S.sibling,l=Sr(S,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=n),l.return=t,l.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=l,t.memoizedState=null,l}function hl(e,t){return t=xc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Tc(e,t,n,l){return l!==null&&Bu(l),In(t,e.child,null,n),e=hl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ER(e,t,n,l,f,S,R){if(n)return t.flags&256?(t.flags&=-257,l=al(Error(s(422))),Tc(e,t,R,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(S=l.fallback,f=t.mode,l=xc({mode:"visible",children:l.children},f,0,null),S=Fr(S,f,R,null),S.flags|=2,l.return=t,S.return=t,l.sibling=S,t.child=l,(t.mode&1)!==0&&In(t,e.child,null,R),t.child.memoizedState=dl(R),t.memoizedState=pl,S);if((t.mode&1)===0)return Tc(e,t,R,null);if(f.data==="$!"){if(l=f.nextSibling&&f.nextSibling.dataset,l)var _=l.dgst;return l=_,S=Error(s(419)),l=al(S,l,void 0),Tc(e,t,R,l)}if(_=(R&e.childLanes)!==0,it||_){if(l=He,l!==null){switch(R&-R){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(l.suspendedLanes|R))!==0?0:f,f!==0&&f!==S.retryLane&&(S.retryLane=f,Vt(e,f),kt(l,e,f,-1))}return kl(),l=al(Error(s(421))),Tc(e,t,R,l)}return f.data==="$?"?(t.flags|=128,t.child=e.child,t=LR.bind(null,e),f._reactRetry=t,null):(e=S.treeContext,pt=cr(f.nextSibling),lt=t,Me=!0,Tt=null,e!==null&&(mt[yt++]=Wt,mt[yt++]=Ht,mt[yt++]=Or,Wt=e.id,Ht=e.overflow,Or=t),t=hl(t,l.children),t.flags|=4096,t)}function Av(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Hu(e.return,t,n)}function vl(e,t,n,l,f){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:f}:(S.isBackwards=t,S.rendering=null,S.renderingStartTime=0,S.last=l,S.tail=n,S.tailMode=f)}function _v(e,t,n){var l=t.pendingProps,f=l.revealOrder,S=l.tail;if($e(e,t,l.children,n),l=Oe.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Av(e,n,t);else if(e.tag===19)Av(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(_e(Oe,l),(t.mode&1)===0)t.memoizedState=null;else switch(f){case"forwards":for(n=t.child,f=null;n!==null;)e=n.alternate,e!==null&&yc(e)===null&&(f=n),n=n.sibling;n=f,n===null?(f=t.child,t.child=null):(f=n.sibling,n.sibling=null),vl(t,!1,f,n,S);break;case"backwards":for(n=null,f=t.child,t.child=null;f!==null;){if(e=f.alternate,e!==null&&yc(e)===null){t.child=f;break}e=f.sibling,f.sibling=n,n=f,f=e}vl(t,!0,n,null,S);break;case"together":vl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ac(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Lr|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=Sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function TR(e,t,n){switch(t.tag){case 3:wv(t),_n();break;case 5:Fh(t);break;case 1:nt(t.type)&&cc(t);break;case 4:Ju(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,f=t.memoizedProps.value;_e(vc,l._currentValue),l._currentValue=f;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(_e(Oe,Oe.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Tv(e,t,n):(_e(Oe,Oe.current&1),e=Jt(e,t,n),e!==null?e.sibling:null);_e(Oe,Oe.current&1);break;case 19:if(l=(n&t.childLanes)!==0,(e.flags&128)!==0){if(l)return _v(e,t,n);t.flags|=128}if(f=t.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),_e(Oe,Oe.current),l)break;return null;case 22:case 23:return t.lanes=0,Cv(e,t,n)}return Jt(e,t,n)}var Iv,fl,kv,bv;Iv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},fl=function(){},kv=function(e,t,n,l){var f=e.memoizedProps;if(f!==l){e=t.stateNode,zr(jt.current);var S=null;switch(n){case"input":f=Bn(e,f),l=Bn(e,l),S=[];break;case"select":f=J({},f,{value:void 0}),l=J({},l,{value:void 0}),S=[];break;case"textarea":f=Un(e,f),l=Un(e,l),S=[];break;default:typeof f.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=oc)}Hn(n,l);var R;n=null;for(z in f)if(!l.hasOwnProperty(z)&&f.hasOwnProperty(z)&&f[z]!=null)if(z==="style"){var _=f[z];for(R in _)_.hasOwnProperty(R)&&(n||(n={}),n[R]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(a.hasOwnProperty(z)?S||(S=[]):(S=S||[]).push(z,null));for(z in l){var I=l[z];if(_=f!=null?f[z]:void 0,l.hasOwnProperty(z)&&I!==_&&(I!=null||_!=null))if(z==="style")if(_){for(R in _)!_.hasOwnProperty(R)||I&&I.hasOwnProperty(R)||(n||(n={}),n[R]="");for(R in I)I.hasOwnProperty(R)&&_[R]!==I[R]&&(n||(n={}),n[R]=I[R])}else n||(S||(S=[]),S.push(z,n)),n=I;else z==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,_=_?_.__html:void 0,I!=null&&_!==I&&(S=S||[]).push(z,I)):z==="children"?typeof I!="string"&&typeof I!="number"||(S=S||[]).push(z,""+I):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(a.hasOwnProperty(z)?(I!=null&&z==="onScroll"&&Ie("scroll",e),S||_===I||(S=[])):(S=S||[]).push(z,I))}n&&(S=S||[]).push("style",n);var z=S;(t.updateQueue=z)&&(t.flags|=4)}},bv=function(e,t,n,l){n!==l&&(t.flags|=4)};function Ti(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var f=e.child;f!==null;)n|=f.lanes|f.childLanes,l|=f.subtreeFlags&14680064,l|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)n|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function AR(e,t,n){var l=t.pendingProps;switch(Lu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return nt(t.type)&&ac(),Ye(t),null;case 3:return l=t.stateNode,Mn(),ke(rt),ke(Ge),Yu(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(dc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Tt!==null&&(Al(Tt),Tt=null))),fl(e,t),Ye(t),null;case 5:Gu(t);var f=zr(Ci.current);if(n=t.type,e!==null&&t.stateNode!=null)kv(e,t,n,l,f),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Ye(t),null}if(e=zr(jt.current),dc(t)){l=t.stateNode,n=t.type;var S=t.memoizedProps;switch(l[zt]=t,l[fi]=S,e=(t.mode&1)!==0,n){case"dialog":Ie("cancel",l),Ie("close",l);break;case"iframe":case"object":case"embed":Ie("load",l);break;case"video":case"audio":for(f=0;f<di.length;f++)Ie(di[f],l);break;case"source":Ie("error",l);break;case"img":case"image":case"link":Ie("error",l),Ie("load",l);break;case"details":Ie("toggle",l);break;case"input":_a(l,S),Ie("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!S.multiple},Ie("invalid",l);break;case"textarea":ba(l,S),Ie("invalid",l)}Hn(n,S),f=null;for(var R in S)if(S.hasOwnProperty(R)){var _=S[R];R==="children"?typeof _=="string"?l.textContent!==_&&(S.suppressHydrationWarning!==!0&&ic(l.textContent,_,e),f=["children",_]):typeof _=="number"&&l.textContent!==""+_&&(S.suppressHydrationWarning!==!0&&ic(l.textContent,_,e),f=["children",""+_]):a.hasOwnProperty(R)&&_!=null&&R==="onScroll"&&Ie("scroll",l)}switch(n){case"input":pn(l),ka(l,S,!0);break;case"textarea":pn(l),Oa(l);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(l.onclick=oc)}l=f,t.updateQueue=l,l!==null&&(t.flags|=4)}else{R=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Da(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=R.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=R.createElement(n,{is:l.is}):(e=R.createElement(n),n==="select"&&(R=e,l.multiple?R.multiple=!0:l.size&&(R.size=l.size))):e=R.createElementNS(e,n),e[zt]=t,e[fi]=l,Iv(e,t,!1,!1),t.stateNode=e;e:{switch(R=Vn(n,l),n){case"dialog":Ie("cancel",e),Ie("close",e),f=l;break;case"iframe":case"object":case"embed":Ie("load",e),f=l;break;case"video":case"audio":for(f=0;f<di.length;f++)Ie(di[f],e);f=l;break;case"source":Ie("error",e),f=l;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),f=l;break;case"details":Ie("toggle",e),f=l;break;case"input":_a(e,l),f=Bn(e,l),Ie("invalid",e);break;case"option":f=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},f=J({},l,{value:void 0}),Ie("invalid",e);break;case"textarea":ba(e,l),f=Un(e,l),Ie("invalid",e);break;default:f=l}Hn(n,f),_=f;for(S in _)if(_.hasOwnProperty(S)){var I=_[S];S==="style"?za(e,I):S==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&vn(e,I)):S==="children"?typeof I=="string"?(n!=="textarea"||I!=="")&&_r(e,I):typeof I=="number"&&_r(e,""+I):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(a.hasOwnProperty(S)?I!=null&&S==="onScroll"&&Ie("scroll",e):I!=null&&A(e,S,I,R))}switch(n){case"input":pn(e),ka(e,l,!1);break;case"textarea":pn(e),Oa(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Ce(l.value));break;case"select":e.multiple=!!l.multiple,S=l.value,S!=null?er(e,!!l.multiple,S,!1):l.defaultValue!=null&&er(e,!!l.multiple,l.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=oc)}switch(n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)bv(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(n=zr(Ci.current),zr(jt.current),dc(t)){if(l=t.stateNode,n=t.memoizedProps,l[zt]=t,(S=l.nodeValue!==n)&&(e=lt,e!==null))switch(e.tag){case 3:ic(l.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ic(l.nodeValue,n,(e.mode&1)!==0)}S&&(t.flags|=4)}else l=(n.nodeType===9?n:n.ownerDocument).createTextNode(l),l[zt]=t,t.stateNode=l}return Ye(t),null;case 13:if(ke(Oe),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&pt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Dh(),_n(),t.flags|=98560,S=!1;else if(S=dc(t),l!==null&&l.dehydrated!==null){if(e===null){if(!S)throw Error(s(318));if(S=t.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(s(317));S[zt]=t}else _n(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),S=!1}else Tt!==null&&(Al(Tt),Tt=null),S=!0;if(!S)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Oe.current&1)!==0?Fe===0&&(Fe=3):kl())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return Mn(),fl(e,t),e===null&&hi(t.stateNode.containerInfo),Ye(t),null;case 10:return Wu(t.type._context),Ye(t),null;case 17:return nt(t.type)&&ac(),Ye(t),null;case 19:if(ke(Oe),S=t.memoizedState,S===null)return Ye(t),null;if(l=(t.flags&128)!==0,R=S.rendering,R===null)if(l)Ti(S,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(R=yc(e),R!==null){for(t.flags|=128,Ti(S,!1),l=R.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=n,n=t.child;n!==null;)S=n,e=l,S.flags&=14680066,R=S.alternate,R===null?(S.childLanes=0,S.lanes=e,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=R.childLanes,S.lanes=R.lanes,S.child=R.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=R.memoizedProps,S.memoizedState=R.memoizedState,S.updateQueue=R.updateQueue,S.type=R.type,e=R.dependencies,S.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e(Oe,Oe.current&1|2),t.child}e=e.sibling}S.tail!==null&&Le()>zn&&(t.flags|=128,l=!0,Ti(S,!1),t.lanes=4194304)}else{if(!l)if(e=yc(R),e!==null){if(t.flags|=128,l=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ti(S,!0),S.tail===null&&S.tailMode==="hidden"&&!R.alternate&&!Me)return Ye(t),null}else 2*Le()-S.renderingStartTime>zn&&n!==1073741824&&(t.flags|=128,l=!0,Ti(S,!1),t.lanes=4194304);S.isBackwards?(R.sibling=t.child,t.child=R):(n=S.last,n!==null?n.sibling=R:t.child=R,S.last=R)}return S.tail!==null?(t=S.tail,S.rendering=t,S.tail=t.sibling,S.renderingStartTime=Le(),t.sibling=null,n=Oe.current,_e(Oe,l?n&1|2:n&1),t):(Ye(t),null);case 22:case 23:return Il(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(dt&1073741824)!==0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function _R(e,t){switch(Lu(t),t.tag){case 1:return nt(t.type)&&ac(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mn(),ke(rt),ke(Ge),Yu(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Gu(t),null;case 13:if(ke(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));_n()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(Oe),null;case 4:return Mn(),null;case 10:return Wu(t.type._context),null;case 22:case 23:return Il(),null;case 24:return null;default:return null}}var _c=!1,Xe=!1,IR=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Dn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(l){je(e,t,l)}else n.current=null}function gl(e,t,n){try{n()}catch(l){je(e,t,l)}}var Mv=!1;function kR(e,t){if(Iu=Ja,e=uh(),Cu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var f=l.anchorOffset,S=l.focusNode;l=l.focusOffset;try{n.nodeType,S.nodeType}catch{n=null;break e}var R=0,_=-1,I=-1,z=0,B=0,F=e,q=null;t:for(;;){for(var G;F!==n||f!==0&&F.nodeType!==3||(_=R+f),F!==S||l!==0&&F.nodeType!==3||(I=R+l),F.nodeType===3&&(R+=F.nodeValue.length),(G=F.firstChild)!==null;)q=F,F=G;for(;;){if(F===e)break t;if(q===n&&++z===f&&(_=R),q===S&&++B===l&&(I=R),(G=F.nextSibling)!==null)break;F=q,q=F.parentNode}F=G}n=_===-1||I===-1?null:{start:_,end:I}}else n=null}n=n||{start:0,end:0}}else n=null;for(ku={focusedElem:e,selectionRange:n},Ja=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var Y=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var X=Y.memoizedProps,xe=Y.memoizedState,O=t.stateNode,k=O.getSnapshotBeforeUpdate(t.elementType===t.type?X:At(t.type,X),xe);O.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(W){je(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return Y=Mv,Mv=!1,Y}function Ai(e,t,n){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&e)===e){var S=f.destroy;f.destroy=void 0,S!==void 0&&gl(t,n,S)}f=f.next}while(f!==l)}}function Ic(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var l=n.create;n.destroy=l()}n=n.next}while(n!==t)}}function ml(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ov(e){var t=e.alternate;t!==null&&(e.alternate=null,Ov(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zt],delete t[fi],delete t[Du],delete t[pR],delete t[dR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dv(e){return e.tag===5||e.tag===3||e.tag===4}function Nv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yl(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=oc));else if(l!==4&&(e=e.child,e!==null))for(yl(e,t,n),e=e.sibling;e!==null;)yl(e,t,n),e=e.sibling}function Sl(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Sl(e,t,n),e=e.sibling;e!==null;)Sl(e,t,n),e=e.sibling}var Ke=null,_t=!1;function vr(e,t,n){for(n=n.child;n!==null;)zv(e,t,n),n=n.sibling}function zv(e,t,n){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Fa,n)}catch{}switch(n.tag){case 5:Xe||Dn(n,t);case 6:var l=Ke,f=_t;Ke=null,vr(e,t,n),Ke=l,_t=f,Ke!==null&&(_t?(e=Ke,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(_t?(e=Ke,n=n.stateNode,e.nodeType===8?Ou(e.parentNode,n):e.nodeType===1&&Ou(e,n),ii(e)):Ou(Ke,n.stateNode));break;case 4:l=Ke,f=_t,Ke=n.stateNode.containerInfo,_t=!0,vr(e,t,n),Ke=l,_t=f;break;case 0:case 11:case 14:case 15:if(!Xe&&(l=n.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){f=l=l.next;do{var S=f,R=S.destroy;S=S.tag,R!==void 0&&((S&2)!==0||(S&4)!==0)&&gl(n,t,R),f=f.next}while(f!==l)}vr(e,t,n);break;case 1:if(!Xe&&(Dn(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=n.memoizedProps,l.state=n.memoizedState,l.componentWillUnmount()}catch(_){je(n,t,_)}vr(e,t,n);break;case 21:vr(e,t,n);break;case 22:n.mode&1?(Xe=(l=Xe)||n.memoizedState!==null,vr(e,t,n),Xe=l):vr(e,t,n);break;default:vr(e,t,n)}}function jv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new IR),t.forEach(function(l){var f=xR.bind(null,e,l);n.has(l)||(n.add(l),l.then(f,f))})}}function It(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var f=n[l];try{var S=e,R=t,_=R;e:for(;_!==null;){switch(_.tag){case 5:Ke=_.stateNode,_t=!1;break e;case 3:Ke=_.stateNode.containerInfo,_t=!0;break e;case 4:Ke=_.stateNode.containerInfo,_t=!0;break e}_=_.return}if(Ke===null)throw Error(s(160));zv(S,R,f),Ke=null,_t=!1;var I=f.alternate;I!==null&&(I.return=null),f.return=null}catch(z){je(f,t,z)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lv(t,e),t=t.sibling}function Lv(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),xt(e),l&4){try{Ai(3,e,e.return),Ic(3,e)}catch(X){je(e,e.return,X)}try{Ai(5,e,e.return)}catch(X){je(e,e.return,X)}}break;case 1:It(t,e),xt(e),l&512&&n!==null&&Dn(n,n.return);break;case 5:if(It(t,e),xt(e),l&512&&n!==null&&Dn(n,n.return),e.flags&32){var f=e.stateNode;try{_r(f,"")}catch(X){je(e,e.return,X)}}if(l&4&&(f=e.stateNode,f!=null)){var S=e.memoizedProps,R=n!==null?n.memoizedProps:S,_=e.type,I=e.updateQueue;if(e.updateQueue=null,I!==null)try{_==="input"&&S.type==="radio"&&S.name!=null&&Ia(f,S),Vn(_,R);var z=Vn(_,S);for(R=0;R<I.length;R+=2){var B=I[R],F=I[R+1];B==="style"?za(f,F):B==="dangerouslySetInnerHTML"?vn(f,F):B==="children"?_r(f,F):A(f,B,F,z)}switch(_){case"input":Ue(f,S);break;case"textarea":Ma(f,S);break;case"select":var q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!S.multiple;var G=S.value;G!=null?er(f,!!S.multiple,G,!1):q!==!!S.multiple&&(S.defaultValue!=null?er(f,!!S.multiple,S.defaultValue,!0):er(f,!!S.multiple,S.multiple?[]:"",!1))}f[fi]=S}catch(X){je(e,e.return,X)}}break;case 6:if(It(t,e),xt(e),l&4){if(e.stateNode===null)throw Error(s(162));f=e.stateNode,S=e.memoizedProps;try{f.nodeValue=S}catch(X){je(e,e.return,X)}}break;case 3:if(It(t,e),xt(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{ii(t.containerInfo)}catch(X){je(e,e.return,X)}break;case 4:It(t,e),xt(e);break;case 13:It(t,e),xt(e),f=e.child,f.flags&8192&&(S=f.memoizedState!==null,f.stateNode.isHidden=S,!S||f.alternate!==null&&f.alternate.memoizedState!==null||(Rl=Le())),l&4&&jv(e);break;case 22:if(B=n!==null&&n.memoizedState!==null,e.mode&1?(Xe=(z=Xe)||B,It(t,e),Xe=z):It(t,e),xt(e),l&8192){if(z=e.memoizedState!==null,(e.stateNode.isHidden=z)&&!B&&(e.mode&1)!==0)for(Q=e,B=e.child;B!==null;){for(F=Q=B;Q!==null;){switch(q=Q,G=q.child,q.tag){case 0:case 11:case 14:case 15:Ai(4,q,q.return);break;case 1:Dn(q,q.return);var Y=q.stateNode;if(typeof Y.componentWillUnmount=="function"){l=q,n=q.return;try{t=l,Y.props=t.memoizedProps,Y.state=t.memoizedState,Y.componentWillUnmount()}catch(X){je(l,n,X)}}break;case 5:Dn(q,q.return);break;case 22:if(q.memoizedState!==null){Bv(F);continue}}G!==null?(G.return=q,Q=G):Bv(F)}B=B.sibling}e:for(B=null,F=e;;){if(F.tag===5){if(B===null){B=F;try{f=F.stateNode,z?(S=f.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(_=F.stateNode,I=F.memoizedProps.style,R=I!=null&&I.hasOwnProperty("display")?I.display:null,_.style.display=Na("display",R))}catch(X){je(e,e.return,X)}}}else if(F.tag===6){if(B===null)try{F.stateNode.nodeValue=z?"":F.memoizedProps}catch(X){je(e,e.return,X)}}else if((F.tag!==22&&F.tag!==23||F.memoizedState===null||F===e)&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===e)break e;for(;F.sibling===null;){if(F.return===null||F.return===e)break e;B===F&&(B=null),F=F.return}B===F&&(B=null),F.sibling.return=F.return,F=F.sibling}}break;case 19:It(t,e),xt(e),l&4&&jv(e);break;case 21:break;default:It(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Dv(n)){var l=n;break e}n=n.return}throw Error(s(160))}switch(l.tag){case 5:var f=l.stateNode;l.flags&32&&(_r(f,""),l.flags&=-33);var S=Nv(e);Sl(e,S,f);break;case 3:case 4:var R=l.stateNode.containerInfo,_=Nv(e);yl(e,_,R);break;default:throw Error(s(161))}}catch(I){je(e,e.return,I)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bR(e,t,n){Q=e,xv(e)}function xv(e,t,n){for(var l=(e.mode&1)!==0;Q!==null;){var f=Q,S=f.child;if(f.tag===22&&l){var R=f.memoizedState!==null||_c;if(!R){var _=f.alternate,I=_!==null&&_.memoizedState!==null||Xe;_=_c;var z=Xe;if(_c=R,(Xe=I)&&!z)for(Q=f;Q!==null;)R=Q,I=R.child,R.tag===22&&R.memoizedState!==null?Fv(f):I!==null?(I.return=R,Q=I):Fv(f);for(;S!==null;)Q=S,xv(S),S=S.sibling;Q=f,_c=_,Xe=z}qv(e)}else(f.subtreeFlags&8772)!==0&&S!==null?(S.return=f,Q=S):qv(e)}}function qv(e){for(;Q!==null;){var t=Q;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Xe||Ic(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Xe)if(n===null)l.componentDidMount();else{var f=t.elementType===t.type?n.memoizedProps:At(t.type,n.memoizedProps);l.componentDidUpdate(f,n.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var S=t.updateQueue;S!==null&&Bh(t,S,l);break;case 3:var R=t.updateQueue;if(R!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Bh(t,R,n)}break;case 5:var _=t.stateNode;if(n===null&&t.flags&4){n=_;var I=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&n.focus();break;case"img":I.src&&(n.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var z=t.alternate;if(z!==null){var B=z.memoizedState;if(B!==null){var F=B.dehydrated;F!==null&&ii(F)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Xe||t.flags&512&&ml(t)}catch(q){je(t,t.return,q)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function Bv(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function Fv(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ic(4,t)}catch(I){je(t,n,I)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var f=t.return;try{l.componentDidMount()}catch(I){je(t,f,I)}}var S=t.return;try{ml(t)}catch(I){je(t,S,I)}break;case 5:var R=t.return;try{ml(t)}catch(I){je(t,R,I)}}}catch(I){je(t,t.return,I)}if(t===e){Q=null;break}var _=t.sibling;if(_!==null){_.return=t.return,Q=_;break}Q=t.return}}var MR=Math.ceil,kc=M.ReactCurrentDispatcher,Cl=M.ReactCurrentOwner,Pt=M.ReactCurrentBatchConfig,ye=0,He=null,qe=null,Je=0,dt=0,Nn=ur(0),Fe=0,_i=null,Lr=0,bc=0,Pl=0,Ii=null,ot=null,Rl=0,zn=1/0,Gt=null,Mc=!1,wl=null,fr=null,Oc=!1,gr=null,Dc=0,ki=0,El=null,Nc=-1,zc=0;function et(){return(ye&6)!==0?Le():Nc!==-1?Nc:Nc=Le()}function mr(e){return(e.mode&1)===0?1:(ye&2)!==0&&Je!==0?Je&-Je:vR.transition!==null?(zc===0&&(zc=Nd()),zc):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Wd(e.type)),e)}function kt(e,t,n,l){if(50<ki)throw ki=0,El=null,Error(s(185));$n(e,n,l),((ye&2)===0||e!==He)&&(e===He&&((ye&2)===0&&(bc|=n),Fe===4&&yr(e,Je)),st(e,l),n===1&&ye===0&&(t.mode&1)===0&&(zn=Le()+500,uc&&pr()))}function st(e,t){var n=e.callbackNode;vP(e,t);var l=Ha(e,e===He?Je:0);if(l===0)n!==null&&Md(n),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(n!=null&&Md(n),t===1)e.tag===0?hR(Wv.bind(null,e)):Ih(Wv.bind(null,e)),uR(function(){(ye&6)===0&&pr()}),n=null;else{switch(zd(l)){case 1:n=nu;break;case 4:n=Od;break;case 16:n=Ba;break;case 536870912:n=Dd;break;default:n=Ba}n=Xv(n,Uv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Uv(e,t){if(Nc=-1,zc=0,(ye&6)!==0)throw Error(s(327));var n=e.callbackNode;if(jn()&&e.callbackNode!==n)return null;var l=Ha(e,e===He?Je:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=jc(e,l);else{t=l;var f=ye;ye|=2;var S=Vv();(He!==e||Je!==t)&&(Gt=null,zn=Le()+500,qr(e,t));do try{NR();break}catch(_){Hv(e,_)}while(!0);Uu(),kc.current=S,ye=f,qe!==null?t=0:(He=null,Je=0,t=Fe)}if(t!==0){if(t===2&&(f=iu(e),f!==0&&(l=f,t=Tl(e,f))),t===1)throw n=_i,qr(e,0),yr(e,l),st(e,Le()),n;if(t===6)yr(e,l);else{if(f=e.current.alternate,(l&30)===0&&!OR(f)&&(t=jc(e,l),t===2&&(S=iu(e),S!==0&&(l=S,t=Tl(e,S))),t===1))throw n=_i,qr(e,0),yr(e,l),st(e,Le()),n;switch(e.finishedWork=f,e.finishedLanes=l,t){case 0:case 1:throw Error(s(345));case 2:Br(e,ot,Gt);break;case 3:if(yr(e,l),(l&130023424)===l&&(t=Rl+500-Le(),10<t)){if(Ha(e,0)!==0)break;if(f=e.suspendedLanes,(f&l)!==l){et(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=Mu(Br.bind(null,e,ot,Gt),t);break}Br(e,ot,Gt);break;case 4:if(yr(e,l),(l&4194240)===l)break;for(t=e.eventTimes,f=-1;0<l;){var R=31-wt(l);S=1<<R,R=t[R],R>f&&(f=R),l&=~S}if(l=f,l=Le()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*MR(l/1960))-l,10<l){e.timeoutHandle=Mu(Br.bind(null,e,ot,Gt),l);break}Br(e,ot,Gt);break;case 5:Br(e,ot,Gt);break;default:throw Error(s(329))}}}return st(e,Le()),e.callbackNode===n?Uv.bind(null,e):null}function Tl(e,t){var n=Ii;return e.current.memoizedState.isDehydrated&&(qr(e,t).flags|=256),e=jc(e,t),e!==2&&(t=ot,ot=n,t!==null&&Al(t)),e}function Al(e){ot===null?ot=e:ot.push.apply(ot,e)}function OR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var l=0;l<n.length;l++){var f=n[l],S=f.getSnapshot;f=f.value;try{if(!Et(S(),f))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yr(e,t){for(t&=~Pl,t&=~bc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-wt(t),l=1<<n;e[n]=-1,t&=~l}}function Wv(e){if((ye&6)!==0)throw Error(s(327));jn();var t=Ha(e,0);if((t&1)===0)return st(e,Le()),null;var n=jc(e,t);if(e.tag!==0&&n===2){var l=iu(e);l!==0&&(t=l,n=Tl(e,l))}if(n===1)throw n=_i,qr(e,0),yr(e,t),st(e,Le()),n;if(n===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Br(e,ot,Gt),st(e,Le()),null}function _l(e,t){var n=ye;ye|=1;try{return e(t)}finally{ye=n,ye===0&&(zn=Le()+500,uc&&pr())}}function xr(e){gr!==null&&gr.tag===0&&(ye&6)===0&&jn();var t=ye;ye|=1;var n=Pt.transition,l=Re;try{if(Pt.transition=null,Re=1,e)return e()}finally{Re=l,Pt.transition=n,ye=t,(ye&6)===0&&pr()}}function Il(){dt=Nn.current,ke(Nn)}function qr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cR(n)),qe!==null)for(n=qe.return;n!==null;){var l=n;switch(Lu(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ac();break;case 3:Mn(),ke(rt),ke(Ge),Yu();break;case 5:Gu(l);break;case 4:Mn();break;case 13:ke(Oe);break;case 19:ke(Oe);break;case 10:Wu(l.type._context);break;case 22:case 23:Il()}n=n.return}if(He=e,qe=e=Sr(e.current,null),Je=dt=t,Fe=0,_i=null,Pl=bc=Lr=0,ot=Ii=null,Nr!==null){for(t=0;t<Nr.length;t++)if(n=Nr[t],l=n.interleaved,l!==null){n.interleaved=null;var f=l.next,S=n.pending;if(S!==null){var R=S.next;S.next=f,l.next=R}n.pending=l}Nr=null}return e}function Hv(e,t){do{var n=qe;try{if(Uu(),Sc.current=wc,Cc){for(var l=De.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Cc=!1}if(jr=0,We=Be=De=null,Pi=!1,Ri=0,Cl.current=null,n===null||n.return===null){Fe=1,_i=t,qe=null;break}e:{var S=e,R=n.return,_=n,I=t;if(t=Je,_.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var z=I,B=_,F=B.tag;if((B.mode&1)===0&&(F===0||F===11||F===15)){var q=B.alternate;q?(B.updateQueue=q.updateQueue,B.memoizedState=q.memoizedState,B.lanes=q.lanes):(B.updateQueue=null,B.memoizedState=null)}var G=fv(R);if(G!==null){G.flags&=-257,gv(G,R,_,S,t),G.mode&1&&vv(S,z,t),t=G,I=z;var Y=t.updateQueue;if(Y===null){var X=new Set;X.add(I),t.updateQueue=X}else Y.add(I);break e}else{if((t&1)===0){vv(S,z,t),kl();break e}I=Error(s(426))}}else if(Me&&_.mode&1){var xe=fv(R);if(xe!==null){(xe.flags&65536)===0&&(xe.flags|=256),gv(xe,R,_,S,t),Bu(On(I,_));break e}}S=I=On(I,_),Fe!==4&&(Fe=2),Ii===null?Ii=[S]:Ii.push(S),S=R;do{switch(S.tag){case 3:S.flags|=65536,t&=-t,S.lanes|=t;var O=dv(S,I,t);qh(S,O);break e;case 1:_=I;var k=S.type,N=S.stateNode;if((S.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(fr===null||!fr.has(N)))){S.flags|=65536,t&=-t,S.lanes|=t;var W=hv(S,_,t);qh(S,W);break e}}S=S.return}while(S!==null)}Jv(n)}catch(Z){t=Z,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function Vv(){var e=kc.current;return kc.current=wc,e===null?wc:e}function kl(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||(Lr&268435455)===0&&(bc&268435455)===0||yr(He,Je)}function jc(e,t){var n=ye;ye|=2;var l=Vv();(He!==e||Je!==t)&&(Gt=null,qr(e,t));do try{DR();break}catch(f){Hv(e,f)}while(!0);if(Uu(),ye=n,kc.current=l,qe!==null)throw Error(s(261));return He=null,Je=0,Fe}function DR(){for(;qe!==null;)Kv(qe)}function NR(){for(;qe!==null&&!oP();)Kv(qe)}function Kv(e){var t=Yv(e.alternate,e,dt);e.memoizedProps=e.pendingProps,t===null?Jv(e):qe=t,Cl.current=null}function Jv(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=AR(n,t,dt),n!==null){qe=n;return}}else{if(n=_R(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,qe=null;return}}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Fe===0&&(Fe=5)}function Br(e,t,n){var l=Re,f=Pt.transition;try{Pt.transition=null,Re=1,zR(e,t,n,l)}finally{Pt.transition=f,Re=l}return null}function zR(e,t,n,l){do jn();while(gr!==null);if((ye&6)!==0)throw Error(s(327));n=e.finishedWork;var f=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var S=n.lanes|n.childLanes;if(fP(e,S),e===He&&(qe=He=null,Je=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Oc||(Oc=!0,Xv(Ba,function(){return jn(),null})),S=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||S){S=Pt.transition,Pt.transition=null;var R=Re;Re=1;var _=ye;ye|=4,Cl.current=null,kR(e,n),Lv(n,e),tR(ku),Ja=!!Iu,ku=Iu=null,e.current=n,bR(n),sP(),ye=_,Re=R,Pt.transition=S}else e.current=n;if(Oc&&(Oc=!1,gr=e,Dc=f),S=e.pendingLanes,S===0&&(fr=null),uP(n.stateNode),st(e,Le()),t!==null)for(l=e.onRecoverableError,n=0;n<t.length;n++)f=t[n],l(f.value,{componentStack:f.stack,digest:f.digest});if(Mc)throw Mc=!1,e=wl,wl=null,e;return(Dc&1)!==0&&e.tag!==0&&jn(),S=e.pendingLanes,(S&1)!==0?e===El?ki++:(ki=0,El=e):ki=0,pr(),null}function jn(){if(gr!==null){var e=zd(Dc),t=Pt.transition,n=Re;try{if(Pt.transition=null,Re=16>e?16:e,gr===null)var l=!1;else{if(e=gr,gr=null,Dc=0,(ye&6)!==0)throw Error(s(331));var f=ye;for(ye|=4,Q=e.current;Q!==null;){var S=Q,R=S.child;if((Q.flags&16)!==0){var _=S.deletions;if(_!==null){for(var I=0;I<_.length;I++){var z=_[I];for(Q=z;Q!==null;){var B=Q;switch(B.tag){case 0:case 11:case 15:Ai(8,B,S)}var F=B.child;if(F!==null)F.return=B,Q=F;else for(;Q!==null;){B=Q;var q=B.sibling,G=B.return;if(Ov(B),B===z){Q=null;break}if(q!==null){q.return=G,Q=q;break}Q=G}}}var Y=S.alternate;if(Y!==null){var X=Y.child;if(X!==null){Y.child=null;do{var xe=X.sibling;X.sibling=null,X=xe}while(X!==null)}}Q=S}}if((S.subtreeFlags&2064)!==0&&R!==null)R.return=S,Q=R;else e:for(;Q!==null;){if(S=Q,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Ai(9,S,S.return)}var O=S.sibling;if(O!==null){O.return=S.return,Q=O;break e}Q=S.return}}var k=e.current;for(Q=k;Q!==null;){R=Q;var N=R.child;if((R.subtreeFlags&2064)!==0&&N!==null)N.return=R,Q=N;else e:for(R=k;Q!==null;){if(_=Q,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:Ic(9,_)}}catch(Z){je(_,_.return,Z)}if(_===R){Q=null;break e}var W=_.sibling;if(W!==null){W.return=_.return,Q=W;break e}Q=_.return}}if(ye=f,pr(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Fa,e)}catch{}l=!0}return l}finally{Re=n,Pt.transition=t}}return!1}function Gv(e,t,n){t=On(n,t),t=dv(e,t,1),e=hr(e,t,1),t=et(),e!==null&&($n(e,1,t),st(e,t))}function je(e,t,n){if(e.tag===3)Gv(e,e,n);else for(;t!==null;){if(t.tag===3){Gv(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(fr===null||!fr.has(l))){e=On(n,e),e=hv(t,e,1),t=hr(t,e,1),e=et(),t!==null&&($n(t,1,e),st(t,e));break}}t=t.return}}function jR(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&n,He===e&&(Je&n)===n&&(Fe===4||Fe===3&&(Je&130023424)===Je&&500>Le()-Rl?qr(e,0):Pl|=n),st(e,t)}function Qv(e,t){t===0&&((e.mode&1)===0?t=1:(t=Wa,Wa<<=1,(Wa&130023424)===0&&(Wa=4194304)));var n=et();e=Vt(e,t),e!==null&&($n(e,t,n),st(e,n))}function LR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qv(e,n)}function xR(e,t){var n=0;switch(e.tag){case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(n=f.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(s(314))}l!==null&&l.delete(t),Qv(e,n)}var Yv;Yv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rt.current)it=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return it=!1,TR(e,t,n);it=(e.flags&131072)!==0}else it=!1,Me&&(t.flags&1048576)!==0&&kh(t,pc,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Ac(e,t),e=t.pendingProps;var f=En(t,Ge.current);bn(t,n),f=$u(null,t,l,e,f,n);var S=el();return t.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(l)?(S=!0,cc(t)):S=!1,t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Ku(t),f.updater=Ec,t.stateNode=f,f._reactInternals=t,sl(t,l,e,n),t=ll(null,t,l,!0,S,n)):(t.tag=0,Me&&S&&ju(t),$e(null,t,f,n),t=t.child),t;case 16:l=t.elementType;e:{switch(Ac(e,t),e=t.pendingProps,f=l._init,l=f(l._payload),t.type=l,f=t.tag=BR(l),e=At(l,e),f){case 0:t=ul(null,t,l,e,n);break e;case 1:t=Rv(null,t,l,e,n);break e;case 11:t=mv(null,t,l,e,n);break e;case 14:t=yv(null,t,l,At(l.type,e),n);break e}throw Error(s(306,l,""))}return t;case 0:return l=t.type,f=t.pendingProps,f=t.elementType===l?f:At(l,f),ul(e,t,l,f,n);case 1:return l=t.type,f=t.pendingProps,f=t.elementType===l?f:At(l,f),Rv(e,t,l,f,n);case 3:e:{if(wv(t),e===null)throw Error(s(387));l=t.pendingProps,S=t.memoizedState,f=S.element,xh(e,t),mc(t,l,null,n);var R=t.memoizedState;if(l=R.element,S.isDehydrated)if(S={element:l,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},t.updateQueue.baseState=S,t.memoizedState=S,t.flags&256){f=On(Error(s(423)),t),t=Ev(e,t,l,n,f);break e}else if(l!==f){f=On(Error(s(424)),t),t=Ev(e,t,l,n,f);break e}else for(pt=cr(t.stateNode.containerInfo.firstChild),lt=t,Me=!0,Tt=null,n=jh(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_n(),l===f){t=Jt(e,t,n);break e}$e(e,t,l,n)}t=t.child}return t;case 5:return Fh(t),e===null&&qu(t),l=t.type,f=t.pendingProps,S=e!==null?e.memoizedProps:null,R=f.children,bu(l,f)?R=null:S!==null&&bu(l,S)&&(t.flags|=32),Pv(e,t),$e(e,t,R,n),t.child;case 6:return e===null&&qu(t),null;case 13:return Tv(e,t,n);case 4:return Ju(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=In(t,null,l,n):$e(e,t,l,n),t.child;case 11:return l=t.type,f=t.pendingProps,f=t.elementType===l?f:At(l,f),mv(e,t,l,f,n);case 7:return $e(e,t,t.pendingProps,n),t.child;case 8:return $e(e,t,t.pendingProps.children,n),t.child;case 12:return $e(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(l=t.type._context,f=t.pendingProps,S=t.memoizedProps,R=f.value,_e(vc,l._currentValue),l._currentValue=R,S!==null)if(Et(S.value,R)){if(S.children===f.children&&!rt.current){t=Jt(e,t,n);break e}}else for(S=t.child,S!==null&&(S.return=t);S!==null;){var _=S.dependencies;if(_!==null){R=S.child;for(var I=_.firstContext;I!==null;){if(I.context===l){if(S.tag===1){I=Kt(-1,n&-n),I.tag=2;var z=S.updateQueue;if(z!==null){z=z.shared;var B=z.pending;B===null?I.next=I:(I.next=B.next,B.next=I),z.pending=I}}S.lanes|=n,I=S.alternate,I!==null&&(I.lanes|=n),Hu(S.return,n,t),_.lanes|=n;break}I=I.next}}else if(S.tag===10)R=S.type===t.type?null:S.child;else if(S.tag===18){if(R=S.return,R===null)throw Error(s(341));R.lanes|=n,_=R.alternate,_!==null&&(_.lanes|=n),Hu(R,n,t),R=S.sibling}else R=S.child;if(R!==null)R.return=S;else for(R=S;R!==null;){if(R===t){R=null;break}if(S=R.sibling,S!==null){S.return=R.return,R=S;break}R=R.return}S=R}$e(e,t,f.children,n),t=t.child}return t;case 9:return f=t.type,l=t.pendingProps.children,bn(t,n),f=St(f),l=l(f),t.flags|=1,$e(e,t,l,n),t.child;case 14:return l=t.type,f=At(l,t.pendingProps),f=At(l.type,f),yv(e,t,l,f,n);case 15:return Sv(e,t,t.type,t.pendingProps,n);case 17:return l=t.type,f=t.pendingProps,f=t.elementType===l?f:At(l,f),Ac(e,t),t.tag=1,nt(l)?(e=!0,cc(t)):e=!1,bn(t,n),lv(t,l,f),sl(t,l,f,n),ll(null,t,l,!0,e,n);case 19:return _v(e,t,n);case 22:return Cv(e,t,n)}throw Error(s(156,t.tag))};function Xv(e,t){return bd(e,t)}function qR(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(e,t,n,l){return new qR(e,t,n,l)}function bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function BR(e){if(typeof e=="function")return bl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fe)return 11;if(e===be)return 14}return 2}function Sr(e,t){var n=e.alternate;return n===null?(n=Rt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,l,f,S){var R=2;if(l=e,typeof e=="function")bl(e)&&(R=1);else if(typeof e=="string")R=5;else e:switch(e){case K:return Fr(n.children,f,S,t);case U:R=8,f|=8;break;case se:return e=Rt(12,n,t,f|2),e.elementType=se,e.lanes=S,e;case te:return e=Rt(13,n,t,f),e.elementType=te,e.lanes=S,e;case we:return e=Rt(19,n,t,f),e.elementType=we,e.lanes=S,e;case Pe:return xc(n,f,S,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ve:R=10;break e;case pe:R=9;break e;case fe:R=11;break e;case be:R=14;break e;case Te:R=16,l=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=Rt(R,n,t,f),t.elementType=e,t.type=l,t.lanes=S,t}function Fr(e,t,n,l){return e=Rt(7,e,l,t),e.lanes=n,e}function xc(e,t,n,l){return e=Rt(22,e,l,t),e.elementType=Pe,e.lanes=n,e.stateNode={isHidden:!1},e}function Ml(e,t,n){return e=Rt(6,e,null,t),e.lanes=n,e}function Ol(e,t,n){return t=Rt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function FR(e,t,n,l,f){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ou(0),this.expirationTimes=ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ou(0),this.identifierPrefix=l,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Dl(e,t,n,l,f,S,R,_,I){return e=new FR(e,t,n,_,I),t===1?(t=1,S===!0&&(t|=8)):t=0,S=Rt(3,null,null,t),e.current=S,S.stateNode=e,S.memoizedState={element:l,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ku(S),e}function UR(e,t,n){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:l==null?null:""+l,children:e,containerInfo:t,implementation:n}}function Zv(e){if(!e)return lr;e=e._reactInternals;e:{if(kr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var n=e.type;if(nt(n))return Ah(e,n,t)}return t}function $v(e,t,n,l,f,S,R,_,I){return e=Dl(n,l,!0,e,f,S,R,_,I),e.context=Zv(null),n=e.current,l=et(),f=mr(n),S=Kt(l,f),S.callback=t??null,hr(n,S,f),e.current.lanes=f,$n(e,f,l),st(e,l),e}function qc(e,t,n,l){var f=t.current,S=et(),R=mr(f);return n=Zv(n),t.context===null?t.context=n:t.pendingContext=n,t=Kt(S,R),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=hr(f,t,R),e!==null&&(kt(e,f,R,S),gc(e,f,R)),R}function Bc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ef(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nl(e,t){ef(e,t),(e=e.alternate)&&ef(e,t)}function WR(){return null}var tf=typeof reportError=="function"?reportError:function(e){console.error(e)};function zl(e){this._internalRoot=e}Fc.prototype.render=zl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));qc(e,t,null,null)},Fc.prototype.unmount=zl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xr(function(){qc(null,e,null,null)}),t[Ft]=null}};function Fc(e){this._internalRoot=e}Fc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<or.length&&t!==0&&t<or[n].priority;n++);or.splice(n,0,e),n===0&&Fd(e)}};function jl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Uc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rf(){}function HR(e,t,n,l,f){if(f){if(typeof l=="function"){var S=l;l=function(){var z=Bc(R);S.call(z)}}var R=$v(t,l,e,0,null,!1,!1,"",rf);return e._reactRootContainer=R,e[Ft]=R.current,hi(e.nodeType===8?e.parentNode:e),xr(),R}for(;f=e.lastChild;)e.removeChild(f);if(typeof l=="function"){var _=l;l=function(){var z=Bc(I);_.call(z)}}var I=Dl(e,0,!1,null,null,!1,!1,"",rf);return e._reactRootContainer=I,e[Ft]=I.current,hi(e.nodeType===8?e.parentNode:e),xr(function(){qc(t,I,n,l)}),I}function Wc(e,t,n,l,f){var S=n._reactRootContainer;if(S){var R=S;if(typeof f=="function"){var _=f;f=function(){var I=Bc(R);_.call(I)}}qc(t,R,e,f)}else R=HR(n,t,e,f,l);return Bc(R)}jd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zn(t.pendingLanes);n!==0&&(su(t,n|1),st(t,Le()),(ye&6)===0&&(zn=Le()+500,pr()))}break;case 13:xr(function(){var l=Vt(e,1);if(l!==null){var f=et();kt(l,e,1,f)}}),Nl(e,1)}},au=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var n=et();kt(t,e,134217728,n)}Nl(e,134217728)}},Ld=function(e){if(e.tag===13){var t=mr(e),n=Vt(e,t);if(n!==null){var l=et();kt(n,e,t,l)}Nl(e,t)}},xd=function(){return Re},qd=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}},Gn=function(e,t,n){switch(t){case"input":if(Ue(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var f=sc(l);if(!f)throw Error(s(90));Aa(l),Ue(l,f)}}}break;case"textarea":Ma(e,n);break;case"select":t=n.value,t!=null&&er(e,!!n.multiple,t,!1)}},wd=_l,Ed=xr;var VR={usingClientEntryPoint:!1,Events:[gi,Rn,sc,La,Rd,_l]},bi={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KR={bundleType:bi.bundleType,version:bi.version,rendererPackageName:bi.rendererPackageName,rendererConfig:bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Id(e),e===null?null:e.stateNode},findFiberByHostInstance:bi.findFiberByHostInstance||WR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Fa=Hc.inject(KR),Nt=Hc}catch{}}return at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VR,at.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jl(t))throw Error(s(200));return UR(e,t,null,n)},at.createRoot=function(e,t){if(!jl(e))throw Error(s(299));var n=!1,l="",f=tf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Dl(e,1,!1,null,null,n,!1,l,f),e[Ft]=t.current,hi(e.nodeType===8?e.parentNode:e),new zl(t)},at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Id(t),e=e===null?null:e.stateNode,e},at.flushSync=function(e){return xr(e)},at.hydrate=function(e,t,n){if(!Uc(t))throw Error(s(200));return Wc(null,e,t,!0,n)},at.hydrateRoot=function(e,t,n){if(!jl(e))throw Error(s(405));var l=n!=null&&n.hydratedSources||null,f=!1,S="",R=tf;if(n!=null&&(n.unstable_strictMode===!0&&(f=!0),n.identifierPrefix!==void 0&&(S=n.identifierPrefix),n.onRecoverableError!==void 0&&(R=n.onRecoverableError)),t=$v(t,null,e,1,n??null,f,!1,S,R),e[Ft]=t.current,hi(e),l)for(e=0;e<l.length;e++)n=l[e],f=n._getVersion,f=f(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,f]:t.mutableSourceEagerHydrationData.push(n,f);return new Fc(t)},at.render=function(e,t,n){if(!Uc(t))throw Error(s(200));return Wc(null,e,t,!1,n)},at.unmountComponentAtNode=function(e){if(!Uc(e))throw Error(s(40));return e._reactRootContainer?(xr(function(){Wc(null,null,e,!1,function(){e._reactRootContainer=null,e[Ft]=null})}),!0):!1},at.unstable_batchedUpdates=_l,at.unstable_renderSubtreeIntoContainer=function(e,t,n,l){if(!Uc(n))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Wc(e,t,n,!1,l)},at.version="18.3.1-next-f1338f8080-20240426",at}var pf;function rw(){if(pf)return ql.exports;pf=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),ql.exports=tw(),ql.exports}var df;function nw(){if(df)return Vc;df=1;var r=rw();return Vc.createRoot=r.createRoot,Vc.hydrateRoot=r.hydrateRoot,Vc}var iw=nw();const ow=$S(iw),hf="azure-tts-settings",eC="azure-tts-api-keys",Ul={apiKey:"",region:"eastus",selectedVoice:"en-US-JennyNeural"};function Wl(){try{const r=localStorage.getItem(eC);if(r)return JSON.parse(r)}catch(r){console.error("Failed to load API keys from localStorage:",r)}return{}}function sw(r){try{localStorage.setItem(eC,JSON.stringify(r))}catch(i){console.error("Failed to save API keys to localStorage:",i)}}function aw(){const[r,i]=le.useState(()=>{try{const a=localStorage.getItem(hf),p=Wl();if(a){const c=JSON.parse(a),o=c.region||Ul.region,u=p[o]||c.apiKey||"";return{...Ul,...c,apiKey:u}}}catch(a){console.error("Failed to load settings from localStorage:",a)}return Ul});le.useEffect(()=>{try{const{apiKey:a,...p}=r;if(localStorage.setItem(hf,JSON.stringify(p)),a){const c=Wl();c[r.region]=a,sw(c)}}catch(a){console.error("Failed to save settings to localStorage:",a)}},[r]);const s=a=>{i(p=>{const c={...p,...a};if(a.region&&a.region!==p.region){const o=Wl();c.apiKey=o[a.region]||""}return c})},h=r.apiKey.length>0&&r.region.length>0;return{settings:r,updateSettings:s,isConfigured:h}}var Ur={},Wr={},Oi={},Hr={},Ne={},Hl={},Vr={},Vl={},Di={},Kc={},vf;function tC(){if(vf)return Kc;vf=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.default=s;let r;const i=new Uint8Array(16);function s(){if(!r&&(r=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}return Kc}var Ln={},Ni={},zi={},ff;function cw(){if(ff)return zi;ff=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.default=void 0;var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return zi.default=r,zi}var gf;function Qc(){if(gf)return Ni;gf=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.default=void 0;var r=i(cw());function i(a){return a&&a.__esModule?a:{default:a}}function s(a){return typeof a=="string"&&r.default.test(a)}var h=s;return Ni.default=h,Ni}var mf;function Yc(){if(mf)return Ln;mf=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.default=void 0,Ln.unsafeStringify=h;var r=i(Qc());function i(c){return c&&c.__esModule?c:{default:c}}const s=[];for(let c=0;c<256;++c)s.push((c+256).toString(16).slice(1));function h(c,o=0){return s[c[o+0]]+s[c[o+1]]+s[c[o+2]]+s[c[o+3]]+"-"+s[c[o+4]]+s[c[o+5]]+"-"+s[c[o+6]]+s[c[o+7]]+"-"+s[c[o+8]]+s[c[o+9]]+"-"+s[c[o+10]]+s[c[o+11]]+s[c[o+12]]+s[c[o+13]]+s[c[o+14]]+s[c[o+15]]}function a(c,o=0){const u=h(c,o);if(!(0,r.default)(u))throw TypeError("Stringified UUID is invalid");return u}var p=a;return Ln.default=p,Ln}var yf;function uw(){if(yf)return Di;yf=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.default=void 0;var r=s(tC()),i=Yc();function s(d){return d&&d.__esModule?d:{default:d}}let h,a,p=0,c=0;function o(d,v,g){let m=v&&g||0;const y=v||new Array(16);d=d||{};let w=d.node||h,P=d.clockseq!==void 0?d.clockseq:a;if(w==null||P==null){const j=d.random||(d.rng||r.default)();w==null&&(w=h=[j[0]|1,j[1],j[2],j[3],j[4],j[5]]),P==null&&(P=a=(j[6]<<8|j[7])&16383)}let E=d.msecs!==void 0?d.msecs:Date.now(),C=d.nsecs!==void 0?d.nsecs:c+1;const T=E-p+(C-c)/1e4;if(T<0&&d.clockseq===void 0&&(P=P+1&16383),(T<0||E>p)&&d.nsecs===void 0&&(C=0),C>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=E,c=C,a=P,E+=122192928e5;const A=((E&268435455)*1e4+C)%4294967296;y[m++]=A>>>24&255,y[m++]=A>>>16&255,y[m++]=A>>>8&255,y[m++]=A&255;const M=E/4294967296*1e4&268435455;y[m++]=M>>>8&255,y[m++]=M&255,y[m++]=M>>>24&15|16,y[m++]=M>>>16&255,y[m++]=P>>>8|128,y[m++]=P&255;for(let j=0;j<6;++j)y[m+j]=w[j];return v||(0,i.unsafeStringify)(y)}var u=o;return Di.default=u,Di}var ji={},Pr={},Li={},Sf;function rC(){if(Sf)return Li;Sf=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.default=void 0;var r=i(Qc());function i(a){return a&&a.__esModule?a:{default:a}}function s(a){if(!(0,r.default)(a))throw TypeError("Invalid UUID");let p;const c=new Uint8Array(16);return c[0]=(p=parseInt(a.slice(0,8),16))>>>24,c[1]=p>>>16&255,c[2]=p>>>8&255,c[3]=p&255,c[4]=(p=parseInt(a.slice(9,13),16))>>>8,c[5]=p&255,c[6]=(p=parseInt(a.slice(14,18),16))>>>8,c[7]=p&255,c[8]=(p=parseInt(a.slice(19,23),16))>>>8,c[9]=p&255,c[10]=(p=parseInt(a.slice(24,36),16))/1099511627776&255,c[11]=p/4294967296&255,c[12]=p>>>24&255,c[13]=p>>>16&255,c[14]=p>>>8&255,c[15]=p&255,c}var h=s;return Li.default=h,Li}var Cf;function nC(){if(Cf)return Pr;Cf=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.URL=Pr.DNS=void 0,Pr.default=c;var r=Yc(),i=s(rC());function s(o){return o&&o.__esModule?o:{default:o}}function h(o){o=unescape(encodeURIComponent(o));const u=[];for(let d=0;d<o.length;++d)u.push(o.charCodeAt(d));return u}const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Pr.DNS=a;const p="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Pr.URL=p;function c(o,u,d){function v(g,m,y,w){var P;if(typeof g=="string"&&(g=h(g)),typeof m=="string"&&(m=(0,i.default)(m)),((P=m)===null||P===void 0?void 0:P.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let E=new Uint8Array(16+g.length);if(E.set(m),E.set(g,m.length),E=d(E),E[6]=E[6]&15|u,E[8]=E[8]&63|128,y){w=w||0;for(let C=0;C<16;++C)y[w+C]=E[C];return y}return(0,r.unsafeStringify)(E)}try{v.name=o}catch{}return v.DNS=a,v.URL=p,v}return Pr}var xi={},Pf;function lw(){if(Pf)return xi;Pf=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.default=void 0;function r(y){if(typeof y=="string"){const w=unescape(encodeURIComponent(y));y=new Uint8Array(w.length);for(let P=0;P<w.length;++P)y[P]=w.charCodeAt(P)}return i(h(a(y),y.length*8))}function i(y){const w=[],P=y.length*32,E="0123456789abcdef";for(let C=0;C<P;C+=8){const T=y[C>>5]>>>C%32&255,A=parseInt(E.charAt(T>>>4&15)+E.charAt(T&15),16);w.push(A)}return w}function s(y){return(y+64>>>9<<4)+14+1}function h(y,w){y[w>>5]|=128<<w%32,y[s(w)-1]=w;let P=1732584193,E=-271733879,C=-1732584194,T=271733878;for(let A=0;A<y.length;A+=16){const M=P,j=E,L=C,K=T;P=u(P,E,C,T,y[A],7,-680876936),T=u(T,P,E,C,y[A+1],12,-389564586),C=u(C,T,P,E,y[A+2],17,606105819),E=u(E,C,T,P,y[A+3],22,-1044525330),P=u(P,E,C,T,y[A+4],7,-176418897),T=u(T,P,E,C,y[A+5],12,1200080426),C=u(C,T,P,E,y[A+6],17,-1473231341),E=u(E,C,T,P,y[A+7],22,-45705983),P=u(P,E,C,T,y[A+8],7,1770035416),T=u(T,P,E,C,y[A+9],12,-1958414417),C=u(C,T,P,E,y[A+10],17,-42063),E=u(E,C,T,P,y[A+11],22,-1990404162),P=u(P,E,C,T,y[A+12],7,1804603682),T=u(T,P,E,C,y[A+13],12,-40341101),C=u(C,T,P,E,y[A+14],17,-1502002290),E=u(E,C,T,P,y[A+15],22,1236535329),P=d(P,E,C,T,y[A+1],5,-165796510),T=d(T,P,E,C,y[A+6],9,-1069501632),C=d(C,T,P,E,y[A+11],14,643717713),E=d(E,C,T,P,y[A],20,-373897302),P=d(P,E,C,T,y[A+5],5,-701558691),T=d(T,P,E,C,y[A+10],9,38016083),C=d(C,T,P,E,y[A+15],14,-660478335),E=d(E,C,T,P,y[A+4],20,-405537848),P=d(P,E,C,T,y[A+9],5,568446438),T=d(T,P,E,C,y[A+14],9,-1019803690),C=d(C,T,P,E,y[A+3],14,-187363961),E=d(E,C,T,P,y[A+8],20,1163531501),P=d(P,E,C,T,y[A+13],5,-1444681467),T=d(T,P,E,C,y[A+2],9,-51403784),C=d(C,T,P,E,y[A+7],14,1735328473),E=d(E,C,T,P,y[A+12],20,-1926607734),P=v(P,E,C,T,y[A+5],4,-378558),T=v(T,P,E,C,y[A+8],11,-2022574463),C=v(C,T,P,E,y[A+11],16,1839030562),E=v(E,C,T,P,y[A+14],23,-35309556),P=v(P,E,C,T,y[A+1],4,-1530992060),T=v(T,P,E,C,y[A+4],11,1272893353),C=v(C,T,P,E,y[A+7],16,-155497632),E=v(E,C,T,P,y[A+10],23,-1094730640),P=v(P,E,C,T,y[A+13],4,681279174),T=v(T,P,E,C,y[A],11,-358537222),C=v(C,T,P,E,y[A+3],16,-722521979),E=v(E,C,T,P,y[A+6],23,76029189),P=v(P,E,C,T,y[A+9],4,-640364487),T=v(T,P,E,C,y[A+12],11,-421815835),C=v(C,T,P,E,y[A+15],16,530742520),E=v(E,C,T,P,y[A+2],23,-995338651),P=g(P,E,C,T,y[A],6,-198630844),T=g(T,P,E,C,y[A+7],10,1126891415),C=g(C,T,P,E,y[A+14],15,-1416354905),E=g(E,C,T,P,y[A+5],21,-57434055),P=g(P,E,C,T,y[A+12],6,1700485571),T=g(T,P,E,C,y[A+3],10,-1894986606),C=g(C,T,P,E,y[A+10],15,-1051523),E=g(E,C,T,P,y[A+1],21,-2054922799),P=g(P,E,C,T,y[A+8],6,1873313359),T=g(T,P,E,C,y[A+15],10,-30611744),C=g(C,T,P,E,y[A+6],15,-1560198380),E=g(E,C,T,P,y[A+13],21,1309151649),P=g(P,E,C,T,y[A+4],6,-145523070),T=g(T,P,E,C,y[A+11],10,-1120210379),C=g(C,T,P,E,y[A+2],15,718787259),E=g(E,C,T,P,y[A+9],21,-343485551),P=p(P,M),E=p(E,j),C=p(C,L),T=p(T,K)}return[P,E,C,T]}function a(y){if(y.length===0)return[];const w=y.length*8,P=new Uint32Array(s(w));for(let E=0;E<w;E+=8)P[E>>5]|=(y[E/8]&255)<<E%32;return P}function p(y,w){const P=(y&65535)+(w&65535);return(y>>16)+(w>>16)+(P>>16)<<16|P&65535}function c(y,w){return y<<w|y>>>32-w}function o(y,w,P,E,C,T){return p(c(p(p(w,y),p(E,T)),C),P)}function u(y,w,P,E,C,T,A){return o(w&P|~w&E,y,w,C,T,A)}function d(y,w,P,E,C,T,A){return o(w&E|P&~E,y,w,C,T,A)}function v(y,w,P,E,C,T,A){return o(w^P^E,y,w,C,T,A)}function g(y,w,P,E,C,T,A){return o(P^(w|~E),y,w,C,T,A)}var m=r;return xi.default=m,xi}var Rf;function pw(){if(Rf)return ji;Rf=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.default=void 0;var r=s(nC()),i=s(lw());function s(p){return p&&p.__esModule?p:{default:p}}var a=(0,r.default)("v3",48,i.default);return ji.default=a,ji}var qi={},Bi={},wf;function dw(){if(wf)return Bi;wf=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.default=void 0;var i={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Bi.default=i,Bi}var Ef;function hw(){if(Ef)return qi;Ef=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.default=void 0;var r=h(dw()),i=h(tC()),s=Yc();function h(c){return c&&c.__esModule?c:{default:c}}function a(c,o,u){if(r.default.randomUUID&&!o&&!c)return r.default.randomUUID();c=c||{};const d=c.random||(c.rng||i.default)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,o){u=u||0;for(let v=0;v<16;++v)o[u+v]=d[v];return o}return(0,s.unsafeStringify)(d)}var p=a;return qi.default=p,qi}var Fi={},Ui={},Tf;function vw(){if(Tf)return Ui;Tf=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.default=void 0;function r(a,p,c,o){switch(a){case 0:return p&c^~p&o;case 1:return p^c^o;case 2:return p&c^p&o^c&o;case 3:return p^c^o}}function i(a,p){return a<<p|a>>>32-p}function s(a){const p=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){const v=unescape(encodeURIComponent(a));a=[];for(let g=0;g<v.length;++g)a.push(v.charCodeAt(g))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);const o=a.length/4+2,u=Math.ceil(o/16),d=new Array(u);for(let v=0;v<u;++v){const g=new Uint32Array(16);for(let m=0;m<16;++m)g[m]=a[v*64+m*4]<<24|a[v*64+m*4+1]<<16|a[v*64+m*4+2]<<8|a[v*64+m*4+3];d[v]=g}d[u-1][14]=(a.length-1)*8/Math.pow(2,32),d[u-1][14]=Math.floor(d[u-1][14]),d[u-1][15]=(a.length-1)*8&4294967295;for(let v=0;v<u;++v){const g=new Uint32Array(80);for(let C=0;C<16;++C)g[C]=d[v][C];for(let C=16;C<80;++C)g[C]=i(g[C-3]^g[C-8]^g[C-14]^g[C-16],1);let m=c[0],y=c[1],w=c[2],P=c[3],E=c[4];for(let C=0;C<80;++C){const T=Math.floor(C/20),A=i(m,5)+r(T,y,w,P)+E+p[T]+g[C]>>>0;E=P,P=w,w=i(y,30)>>>0,y=m,m=A}c[0]=c[0]+m>>>0,c[1]=c[1]+y>>>0,c[2]=c[2]+w>>>0,c[3]=c[3]+P>>>0,c[4]=c[4]+E>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,c[0]&255,c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,c[1]&255,c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,c[2]&255,c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,c[3]&255,c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,c[4]&255]}var h=s;return Ui.default=h,Ui}var Af;function fw(){if(Af)return Fi;Af=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.default=void 0;var r=s(nC()),i=s(vw());function s(p){return p&&p.__esModule?p:{default:p}}var a=(0,r.default)("v5",80,i.default);return Fi.default=a,Fi}var Wi={},_f;function gw(){if(_f)return Wi;_f=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.default=void 0;var r="00000000-0000-0000-0000-000000000000";return Wi.default=r,Wi}var Hi={},If;function mw(){if(If)return Hi;If=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.default=void 0;var r=i(Qc());function i(a){return a&&a.__esModule?a:{default:a}}function s(a){if(!(0,r.default)(a))throw TypeError("Invalid UUID");return parseInt(a.slice(14,15),16)}var h=s;return Hi.default=h,Hi}var kf;function yw(){return kf||(kf=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var i=v(uw()),s=v(pw()),h=v(hw()),a=v(fw()),p=v(gw()),c=v(mw()),o=v(Qc()),u=v(Yc()),d=v(rC());function v(g){return g&&g.__esModule?g:{default:g}}})(Vl)),Vl}var bf;function un(){if(bf)return Vr;bf=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.createNoDashGuid=Vr.createGuid=void 0;const r=yw(),i=()=>(0,r.v4)();Vr.createGuid=i;const s=()=>i().replace(new RegExp("-","g"),"").toUpperCase();return Vr.createNoDashGuid=s,Vr}var Mf;function wa(){return Mf||(Mf=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PlatformEvent=r.EventType=void 0;const i=un();(function(h){h[h.Debug=0]="Debug",h[h.Info=1]="Info",h[h.Warning=2]="Warning",h[h.Error=3]="Error",h[h.None=4]="None"})(r.EventType||(r.EventType={}));class s{constructor(a,p){this.privName=a,this.privEventId=(0,i.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=p,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}r.PlatformEvent=s})(Hl)),Hl}var Of;function Sw(){if(Of)return Ne;Of=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.AudioStreamNodeErrorEvent=Ne.AudioStreamNodeDetachedEvent=Ne.AudioStreamNodeAttachedEvent=Ne.AudioStreamNodeAttachingEvent=Ne.AudioStreamNodeEvent=Ne.AudioSourceErrorEvent=Ne.AudioSourceOffEvent=Ne.AudioSourceReadyEvent=Ne.AudioSourceInitializingEvent=Ne.AudioSourceEvent=void 0;const r=wa();class i extends r.PlatformEvent{constructor(m,y,w=r.EventType.Info){super(m,w),this.privAudioSourceId=y}get audioSourceId(){return this.privAudioSourceId}}Ne.AudioSourceEvent=i;class s extends i{constructor(m){super("AudioSourceInitializingEvent",m)}}Ne.AudioSourceInitializingEvent=s;class h extends i{constructor(m){super("AudioSourceReadyEvent",m)}}Ne.AudioSourceReadyEvent=h;class a extends i{constructor(m){super("AudioSourceOffEvent",m)}}Ne.AudioSourceOffEvent=a;class p extends i{constructor(m,y){super("AudioSourceErrorEvent",m,r.EventType.Error),this.privError=y}get error(){return this.privError}}Ne.AudioSourceErrorEvent=p;class c extends i{constructor(m,y,w){super(m,y),this.privAudioNodeId=w}get audioNodeId(){return this.privAudioNodeId}}Ne.AudioStreamNodeEvent=c;class o extends c{constructor(m,y){super("AudioStreamNodeAttachingEvent",m,y)}}Ne.AudioStreamNodeAttachingEvent=o;class u extends c{constructor(m,y){super("AudioStreamNodeAttachedEvent",m,y)}}Ne.AudioStreamNodeAttachedEvent=u;class d extends c{constructor(m,y){super("AudioStreamNodeDetachedEvent",m,y)}}Ne.AudioStreamNodeDetachedEvent=d;class v extends c{constructor(m,y,w){super("AudioStreamNodeErrorEvent",m,y),this.privError=w}get error(){return this.privError}}return Ne.AudioStreamNodeErrorEvent=v,Ne}var ze={},Df;function Cw(){if(Df)return ze;Df=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.ConnectionRedirectEvent=ze.ConnectionMessageSentEvent=ze.ConnectionMessageReceivedEvent=ze.ConnectionEstablishErrorEvent=ze.ConnectionErrorEvent=ze.ConnectionClosedEvent=ze.ConnectionEstablishedEvent=ze.ConnectionStartEvent=ze.ConnectionEvent=ze.ServiceEvent=void 0;const r=wa();class i extends r.PlatformEvent{constructor(m,y,w=r.EventType.Info){super(m,w),this.privJsonResult=y}get jsonString(){return this.privJsonResult}}ze.ServiceEvent=i;class s extends r.PlatformEvent{constructor(m,y,w=r.EventType.Info){super(m,w),this.privConnectionId=y}get connectionId(){return this.privConnectionId}}ze.ConnectionEvent=s;class h extends s{constructor(m,y,w){super("ConnectionStartEvent",m),this.privUri=y,this.privHeaders=w}get uri(){return this.privUri}get headers(){return this.privHeaders}}ze.ConnectionStartEvent=h;class a extends s{constructor(m){super("ConnectionEstablishedEvent",m)}}ze.ConnectionEstablishedEvent=a;class p extends s{constructor(m,y,w){super("ConnectionClosedEvent",m,r.EventType.Debug),this.privReason=w,this.privStatusCode=y}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ze.ConnectionClosedEvent=p;class c extends s{constructor(m,y,w){super("ConnectionErrorEvent",m,r.EventType.Debug),this.privMessage=y,this.privType=w}get message(){return this.privMessage}get type(){return this.privType}}ze.ConnectionErrorEvent=c;class o extends s{constructor(m,y,w){super("ConnectionEstablishErrorEvent",m,r.EventType.Error),this.privStatusCode=y,this.privReason=w}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ze.ConnectionEstablishErrorEvent=o;class u extends s{constructor(m,y,w){super("ConnectionMessageReceivedEvent",m),this.privNetworkReceivedTime=y,this.privMessage=w}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}ze.ConnectionMessageReceivedEvent=u;class d extends s{constructor(m,y,w){super("ConnectionMessageSentEvent",m),this.privNetworkSentTime=y,this.privMessage=w}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}ze.ConnectionMessageSentEvent=d;class v extends s{constructor(m,y,w,P){super("ConnectionRedirectEvent",m,r.EventType.Info),this.privRedirectUrl=y,this.privOriginalUrl=w,this.privContext=P}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}return ze.ConnectionRedirectEvent=v,ze}var Kl={},Qt={},Nf;function qt(){if(Nf)return Qt;Nf=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.ObjectDisposedError=Qt.InvalidOperationError=Qt.ArgumentNullError=void 0;class r extends Error{constructor(a){super(a),this.name="ArgumentNull",this.message=a}}Qt.ArgumentNullError=r;class i extends Error{constructor(a){super(a),this.name="InvalidOperation",this.message=a}}Qt.InvalidOperationError=i;class s extends Error{constructor(a,p){super(p),this.name=a+"ObjectDisposed",this.message=p}}return Qt.ObjectDisposedError=s,Qt}var zf;function iC(){return zf||(zf=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionMessage=r.MessageType=void 0;const i=qt(),s=un();var h;(function(p){p[p.Text=0]="Text",p[p.Binary=1]="Binary"})(h=r.MessageType||(r.MessageType={}));class a{constructor(c,o,u,d){if(this.privBody=null,c===h.Text&&o&&typeof o!="string")throw new i.InvalidOperationError("Payload must be a string");if(c===h.Binary&&o&&!(o instanceof ArrayBuffer))throw new i.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=c,this.privBody=o,this.privHeaders=u||{},this.privId=d||(0,s.createNoDashGuid)(),this.messageType){case h.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case h.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===h.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===h.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}r.ConnectionMessage=a})(Kl)),Kl}var Vi={},jf;function Pw(){if(jf)return Vi;jf=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.ConnectionOpenResponse=void 0;let r=class{constructor(s,h){this.privStatusCode=s,this.privReason=h}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};return Vi.ConnectionOpenResponse=r,Vi}var Ki={},Lf;function Rw(){if(Lf)return Ki;Lf=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.DeferralMap=void 0;let r=class{constructor(){this.privMap={}}add(s,h){this.privMap[s]=h}getId(s){return this.privMap[s]}complete(s,h){try{this.privMap[s].resolve(h)}catch(a){this.privMap[s].reject(a)}finally{this.privMap[s]=void 0}}};return Ki.DeferralMap=r,Ki}var Kr={},xf;function oC(){if(xf)return Kr;xf=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.SendingAgentContextMessageEvent=Kr.DialogEvent=void 0;const r=wa();class i extends r.PlatformEvent{constructor(a,p=r.EventType.Info){super(a,p)}}Kr.DialogEvent=i;class s extends i{constructor(a){super("SendingAgentContextMessageEvent"),this.privAgentConfig=a}get agentConfig(){return this.privAgentConfig}}return Kr.SendingAgentContextMessageEvent=s,Kr}var Ji={},Gi={},qf;function sC(){if(qf)return Gi;qf=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.EventSource=void 0;const r=qt(),i=un();let s=class{constructor(a){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=a}onEvent(a){if(this.isDisposed())throw new r.ObjectDisposedError("EventSource");if(this.metadata)for(const p in this.metadata)p&&a.metadata&&(a.metadata[p]||(a.metadata[p]=this.metadata[p]));for(const p in this.privEventListeners)p&&this.privEventListeners[p]&&this.privEventListeners[p](a)}attach(a){const p=(0,i.createNoDashGuid)();return this.privEventListeners[p]=a,{detach:()=>(delete this.privEventListeners[p],Promise.resolve())}}attachListener(a){return this.attach(p=>a.onEvent(p))}attachConsoleListener(a){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(p=>a.onEvent(p)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};return Gi.EventSource=s,Gi}var Bf;function ww(){if(Bf)return Ji;Bf=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.Events=void 0;const r=qt(),i=sC();let s=class od{static setEventSource(a){if(!a)throw new r.ArgumentNullError("eventSource");od.privInstance=a}static get instance(){return od.privInstance}};return Ji.Events=s,s.privInstance=new i.EventSource,Ji}var Jl={},Ff;function Ew(){return Ff||(Ff=1,Object.defineProperty(Jl,"__esModule",{value:!0})),Jl}var Gl={},Uf;function Tw(){return Uf||(Uf=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionState=void 0,(function(i){i[i.None=0]="None",i[i.Connected=1]="Connected",i[i.Connecting=2]="Connecting",i[i.Disconnected=3]="Disconnected"})(r.ConnectionState||(r.ConnectionState={}))})(Gl)),Gl}var Ql={},Wf;function Aw(){return Wf||(Wf=1,Object.defineProperty(Ql,"__esModule",{value:!0})),Ql}var Yl={},Hf;function _w(){return Hf||(Hf=1,Object.defineProperty(Yl,"__esModule",{value:!0})),Yl}var Xl={},Vf;function Iw(){return Vf||(Vf=1,Object.defineProperty(Xl,"__esModule",{value:!0})),Xl}var Zl={},Kf;function kw(){return Kf||(Kf=1,Object.defineProperty(Zl,"__esModule",{value:!0})),Zl}var $l={},Jf;function bw(){return Jf||(Jf=1,Object.defineProperty($l,"__esModule",{value:!0})),$l}var ep={},Gf;function Mw(){return Gf||(Gf=1,Object.defineProperty(ep,"__esModule",{value:!0})),ep}var tp={},Qf;function Ow(){return Qf||(Qf=1,Object.defineProperty(tp,"__esModule",{value:!0})),tp}var rp={},Yf;function Dw(){return Yf||(Yf=1,Object.defineProperty(rp,"__esModule",{value:!0})),rp}var Qi={},Xf;function aC(){if(Xf)return Qi;Xf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.List=void 0;const r=qt();let i=class an{constructor(h){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],h)for(const a of h)this.privList.push(a)}get(h){return this.throwIfDisposed(),this.privList[h]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(h){this.throwIfDisposed(),this.insertAt(this.privList.length,h)}insertAt(h,a){this.throwIfDisposed(),h===0?this.privList.unshift(a):h===this.privList.length?this.privList.push(a):this.privList.splice(h,0,a),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(h){return this.throwIfDisposed(),this.remove(h,1)[0]}remove(h,a){this.throwIfDisposed();const p=this.privList.splice(h,a);return this.triggerSubscriptions(this.privRemoveSubscriptions),p}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(h){this.throwIfDisposed();const a=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[a]=h,{detach:()=>(delete this.privAddSubscriptions[a],Promise.resolve())}}onRemoved(h){this.throwIfDisposed();const a=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[a]=h,{detach:()=>(delete this.privRemoveSubscriptions[a],Promise.resolve())}}onDisposed(h){this.throwIfDisposed();const a=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[a]=h,{detach:()=>(delete this.privDisposedSubscriptions[a],Promise.resolve())}}join(h){return this.throwIfDisposed(),this.privList.join(h)}toArray(){const h=Array();return this.privList.forEach(a=>{h.push(a)}),h}any(h){return this.throwIfDisposed(),h?this.where(h).length()>0:this.length()>0}all(h){return this.throwIfDisposed(),this.where(h).length()===this.length()}forEach(h){this.throwIfDisposed();for(let a=0;a<this.length();a++)h(this.privList[a],a)}select(h){this.throwIfDisposed();const a=[];for(let p=0;p<this.privList.length;p++)a.push(h(this.privList[p],p));return new an(a)}where(h){this.throwIfDisposed();const a=new an;for(let p=0;p<this.privList.length;p++)h(this.privList[p],p)&&a.add(this.privList[p]);return a}orderBy(h){this.throwIfDisposed();const p=this.toArray().sort(h);return new an(p)}orderByDesc(h){return this.throwIfDisposed(),this.orderBy((a,p)=>h(p,a))}clone(){return this.throwIfDisposed(),new an(this.toArray())}concat(h){return this.throwIfDisposed(),new an(this.privList.concat(h.toArray()))}concatArray(h){return this.throwIfDisposed(),new an(this.privList.concat(h))}isDisposed(){return this.privList==null}dispose(h){this.isDisposed()||(this.privDisposeReason=h,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new r.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(h){if(h)for(const a in h)a&&h[a]()}};return Qi.List=i,Qi}var np={},Zf;function cC(){return Zf||(Zf=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.marshalPromiseToCallbacks=r.Sink=r.Deferred=r.PromiseResultEventSource=r.PromiseResult=r.PromiseState=void 0;var i;(function(o){o[o.None=0]="None",o[o.Resolved=1]="Resolved",o[o.Rejected=2]="Rejected"})(i=r.PromiseState||(r.PromiseState={}));class s{constructor(u){this.throwIfError=()=>{if(this.isError)throw this.error},u.on(d=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=d)},d=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=d)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}r.PromiseResult=s;class h{constructor(){this.setResult=u=>{this.privOnSetResult(u)},this.setError=u=>{this.privOnSetError(u)},this.on=(u,d)=>{this.privOnSetResult=u,this.privOnSetError=d}}}r.PromiseResultEventSource=h;class a{constructor(){this.resolve=u=>(this.privResolve(u),this),this.reject=u=>(this.privReject(u),this),this.privPromise=new Promise((u,d)=>{this.privResolve=u,this.privReject=d})}get promise(){return this.privPromise}}r.Deferred=a;class p{constructor(){this.privState=i.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new h,this.privPromiseResult=new s(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(u){if(this.privState!==i.None)throw new Error("'Cannot resolve a completed promise'");this.privState=i.Resolved,this.privPromiseResultEvents.setResult(u);for(let d=0;d<this.privSuccessHandlers.length;d++)this.executeSuccessCallback(u,this.privSuccessHandlers[d],this.privErrorHandlers[d]);this.detachHandlers()}reject(u){if(this.privState!==i.None)throw new Error("'Cannot reject a completed promise'");this.privState=i.Rejected,this.privPromiseResultEvents.setError(u);for(const d of this.privErrorHandlers)this.executeErrorCallback(u,d);this.detachHandlers()}on(u,d){u==null&&(u=()=>{}),this.privState===i.None?(this.privSuccessHandlers.push(u),this.privErrorHandlers.push(d)):(this.privState===i.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,u,d):this.privState===i.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,d),this.detachHandlers())}executeSuccessCallback(u,d,v){try{d(u)}catch(g){this.executeErrorCallback(`'Unhandled callback error: ${g}'`,v)}}executeErrorCallback(u,d){if(d)try{d(u)}catch(v){throw new Error(`'Unhandled callback error: ${v}. InnerError: ${u}'`)}else throw new Error(`'Unhandled error: ${u}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}r.Sink=p;function c(o,u,d){o.then(v=>{try{u&&u(v)}catch(g){if(d)try{if(g instanceof Error){const m=g;d(m.name+": "+m.message)}else d(g)}catch{}}},v=>{if(d)try{if(v instanceof Error){const g=v;d(g.name+": "+g.message)}else d(v)}catch{}})}r.marshalPromiseToCallbacks=c})(np)),np}var Yi={},$f;function uC(){if($f)return Yi;$f=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.Queue=void 0;const r=qt(),i=aC(),s=cC();var h;(function(p){p[p.Dequeue=0]="Dequeue",p[p.Peek=1]="Peek"})(h||(h={}));let a=class{constructor(c){this.privPromiseStore=new i.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=c||new i.List,this.privDetachables=[],this.privSubscribers=new i.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(c){this.throwIfDispose(),this.enqueueFromPromise(new Promise(o=>o(c)))}enqueueFromPromise(c){this.throwIfDispose(),c.then(o=>{this.privList.add(o)},()=>{})}dequeue(){this.throwIfDispose();const c=new s.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:c,type:h.Dequeue}),this.drain()),c.promise}peek(){this.throwIfDispose();const c=new s.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:c,type:h.Peek}),this.drain()),c.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(c,o){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=o,this.privIsDisposing=!0;const u=this.privSubscribers;if(u){for(;u.length()>0;)u.removeFirst().deferral.resolve(void 0);this.privSubscribers===u&&(this.privSubscribers=u)}for(const d of this.privDetachables)await d.detach();if(this.privPromiseStore.length()>0&&c){const d=[];return this.privPromiseStore.toArray().forEach(v=>{d.push(v)}),Promise.all(d).finally(()=>{this.privSubscribers=null,this.privList.forEach(v=>{c(v)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(c){await this.drainAndDispose(null,c)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const c=this.privSubscribers,o=this.privList;if(c&&o){for(;o.length()>0&&c.length()>0&&!this.privIsDisposing;){const u=c.removeFirst();if(u.type===h.Peek)u.deferral.resolve(o.first());else{const d=o.removeFirst();u.deferral.resolve(d)}}this.privSubscribers===c&&(this.privSubscribers=c),this.privList===o&&(this.privList=o)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new r.InvalidOperationError(this.privDisposeReason):new r.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new r.InvalidOperationError("Queue disposing")}};return Yi.Queue=a,Yi}var Xi={},eg;function Nw(){if(eg)return Xi;eg=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.RawWebsocketMessage=void 0;const r=iC(),i=qt(),s=un();let h=class{constructor(p,c,o){if(this.privPayload=null,!c)throw new i.ArgumentNullError("payload");if(p===r.MessageType.Binary&&Object.getPrototypeOf(c).constructor.name!=="ArrayBuffer")throw new i.InvalidOperationError("Payload must be ArrayBuffer");if(p===r.MessageType.Text&&typeof c!="string")throw new i.InvalidOperationError("Payload must be a string");this.privMessageType=p,this.privPayload=c,this.privId=o||(0,s.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===r.MessageType.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===r.MessageType.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};return Xi.RawWebsocketMessage=h,Xi}var Zi={},tg;function zw(){if(tg)return Zi;tg=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.RiffPcmEncoder=void 0;let r=class{constructor(s,h){this.privActualSampleRate=s,this.privDesiredSampleRate=h}encode(s){const h=this.downSampleAudioFrame(s,this.privActualSampleRate,this.privDesiredSampleRate);if(!h)return null;const a=h.length*2,p=new ArrayBuffer(a),c=new DataView(p);return this.floatTo16BitPCM(c,0,h),p}setString(s,h,a){for(let p=0;p<a.length;p++)s.setUint8(h+p,a.charCodeAt(p))}floatTo16BitPCM(s,h,a){for(let p=0;p<a.length;p++,h+=2){const c=Math.max(-1,Math.min(1,a[p]));s.setInt16(h,c<0?c*32768:c*32767,!0)}}downSampleAudioFrame(s,h,a){if(!s)return null;if(a===h||a>h)return s;const p=h/a,c=Math.round(s.length/p),o=new Float32Array(c);let u=0,d=0;for(;d<c;){const v=Math.round((d+1)*p);let g=0,m=0;for(;u<v&&u<s.length;)g+=s[u++],m++;o[d++]=g/m}return o}};return Zi.RiffPcmEncoder=r,Zi}var $i={},rg;function jw(){if(rg)return $i;rg=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.Stream=void 0;const r=qt(),i=un(),s=uC();let h=class{constructor(p){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=p||(0,i.createNoDashGuid)(),this.privReaderQueue=new s.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(p){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(p)}catch{}}read(){if(this.privIsReadEnded)throw new r.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async p=>((p===void 0||p.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),p))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new s.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new r.InvalidOperationError("Stream closed")}};return $i.Stream=h,$i}var ip={},ng;function vd(){return ng||(ng=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TranslationStatus=void 0,(function(i){i[i.Success=0]="Success",i[i.Error=1]="Error"})(r.TranslationStatus||(r.TranslationStatus={}))})(ip)),ip}var eo={},ig;function Lw(){if(ig)return eo;ig=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.ChunkedArrayBufferStream=void 0;const r=ie();let i=class extends r.Stream{constructor(h,a){super(a),this.privTargetChunkSize=Math.round(h),this.privNextBufferReadyBytes=0}writeStreamChunk(h){if(h.isEnd||this.privNextBufferReadyBytes===0&&h.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(h);return}let a=0;for(;a<h.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=h.timeReceived);const p=Math.min(h.buffer.byteLength-a,this.privTargetChunkSize-this.privNextBufferReadyBytes),c=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(h.buffer.slice(a,p+a));c.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=p,a+=p,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return eo.ChunkedArrayBufferStream=i,eo}var op={},og;function xw(){return og||(og=1,Object.defineProperty(op,"__esModule",{value:!0})),op}var to={},sg;function qw(){if(sg)return to;sg=1,Object.defineProperty(to,"__esModule",{value:!0}),to.Timeout=void 0;let r=class Rr{static load(){const s=new Map([[0,()=>{}]]),h=new Map,p="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),c=new Worker(p);return c.addEventListener("message",({data:d})=>{if(Rr.isCallNotification(d)){const{params:{timerId:v}}=d,g=s.get(v);if(typeof g=="number"){const m=h.get(g);if(m===void 0||m!==v)throw new Error("The timer is in an undefined state.")}else if(typeof g<"u")g(),s.delete(v);else throw new Error("The timer is in an undefined state.")}else if(Rr.isClearResponse(d)){const{id:v}=d,g=h.get(v);if(g===void 0)throw new Error("The timer is in an undefined state.");h.delete(v),s.delete(g)}else{const{error:{message:v}}=d;throw new Error(v)}}),{clearTimeout:d=>{const v=Math.random();h.set(v,d),s.set(d,v),c.postMessage({id:v,method:"clear",params:{timerId:d}})},setTimeout:(d,v)=>{const g=Math.random();return s.set(g,d),c.postMessage({id:null,method:"set",params:{delay:v,now:performance.now(),timerId:g}}),g}}}static loadWorkerTimers(){return()=>(Rr.workerTimers!==null||(Rr.workerTimers=Rr.load()),Rr.workerTimers)}static isCallNotification(s){return s.method!==void 0&&s.method==="call"}static isClearResponse(s){return s.error===null&&typeof s.id=="number"}};return to.Timeout=r,r.workerTimers=null,r.clearTimeout=i=>r.timers().clearTimeout(i),r.setTimeout=(i,s)=>r.timers().setTimeout(i,s),r.timers=r.loadWorkerTimers(),to}var de={},ag;function Bw(){if(ag)return de;ag=1,Object.defineProperty(de,"__esModule",{value:!0}),de.OCSPCacheUpdateErrorEvent=de.OCSPResponseRetrievedEvent=de.OCSPCacheFetchErrorEvent=de.OCSPVerificationFailedEvent=de.OCSPCacheHitEvent=de.OCSPCacheEntryNeedsRefreshEvent=de.OCSPCacheEntryExpiredEvent=de.OCSPWSUpgradeStartedEvent=de.OCSPStapleReceivedEvent=de.OCSPCacheUpdateCompleteEvent=de.OCSPDiskCacheStoreEvent=de.OCSPMemoryCacheStoreEvent=de.OCSPCacheUpdateNeededEvent=de.OCSPDiskCacheHitEvent=de.OCSPCacheMissEvent=de.OCSPMemoryCacheHitEvent=de.OCSPEvent=void 0;const r=wa();class i extends r.PlatformEvent{constructor(A,M,j){super(A,M),this.privSignature=j}}de.OCSPEvent=i;class s extends i{constructor(A){super("OCSPMemoryCacheHitEvent",r.EventType.Debug,A)}}de.OCSPMemoryCacheHitEvent=s;class h extends i{constructor(A){super("OCSPCacheMissEvent",r.EventType.Debug,A)}}de.OCSPCacheMissEvent=h;class a extends i{constructor(A){super("OCSPDiskCacheHitEvent",r.EventType.Debug,A)}}de.OCSPDiskCacheHitEvent=a;class p extends i{constructor(A){super("OCSPCacheUpdateNeededEvent",r.EventType.Debug,A)}}de.OCSPCacheUpdateNeededEvent=p;class c extends i{constructor(A){super("OCSPMemoryCacheStoreEvent",r.EventType.Debug,A)}}de.OCSPMemoryCacheStoreEvent=c;class o extends i{constructor(A){super("OCSPDiskCacheStoreEvent",r.EventType.Debug,A)}}de.OCSPDiskCacheStoreEvent=o;class u extends i{constructor(A){super("OCSPCacheUpdateCompleteEvent",r.EventType.Debug,A)}}de.OCSPCacheUpdateCompleteEvent=u;class d extends i{constructor(){super("OCSPStapleReceivedEvent",r.EventType.Debug,"")}}de.OCSPStapleReceivedEvent=d;class v extends i{constructor(A){super("OCSPWSUpgradeStartedEvent",r.EventType.Debug,A)}}de.OCSPWSUpgradeStartedEvent=v;class g extends i{constructor(A,M){super("OCSPCacheEntryExpiredEvent",r.EventType.Debug,A),this.privExpireTime=M}}de.OCSPCacheEntryExpiredEvent=g;class m extends i{constructor(A,M,j){super("OCSPCacheEntryNeedsRefreshEvent",r.EventType.Debug,A),this.privExpireTime=j,this.privStartTime=M}}de.OCSPCacheEntryNeedsRefreshEvent=m;class y extends i{constructor(A,M,j){super("OCSPCacheHitEvent",r.EventType.Debug,A),this.privExpireTime=j,this.privExpireTimeString=new Date(j).toLocaleDateString(),this.privStartTime=M,this.privStartTimeString=new Date(M).toLocaleTimeString()}}de.OCSPCacheHitEvent=y;class w extends i{constructor(A,M){super("OCSPVerificationFailedEvent",r.EventType.Debug,A),this.privError=M}}de.OCSPVerificationFailedEvent=w;class P extends i{constructor(A,M){super("OCSPCacheFetchErrorEvent",r.EventType.Debug,A),this.privError=M}}de.OCSPCacheFetchErrorEvent=P;class E extends i{constructor(A){super("OCSPResponseRetrievedEvent",r.EventType.Debug,A)}}de.OCSPResponseRetrievedEvent=E;class C extends i{constructor(A,M){super("OCSPCacheUpdateErrorEvent",r.EventType.Debug,A),this.privError=M}}return de.OCSPCacheUpdateErrorEvent=C,de}var ro={},cg;function Fw(){if(cg)return ro;cg=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.BackgroundEvent=void 0;const r=ie();class i extends r.PlatformEvent{constructor(h){super("BackgroundEvent",r.EventType.Error),this.privError=h}get error(){return this.privError}}return ro.BackgroundEvent=i,ro}var ug;function ie(){return ug||(ug=1,(function(r){var i=Hr&&Hr.__createBinding||(Object.create?(function(a,p,c,o){o===void 0&&(o=c),Object.defineProperty(a,o,{enumerable:!0,get:function(){return p[c]}})}):(function(a,p,c,o){o===void 0&&(o=c),a[o]=p[c]})),s=Hr&&Hr.__exportStar||function(a,p){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(p,c)&&i(p,a,c)};Object.defineProperty(r,"__esModule",{value:!0}),r.TranslationStatus=void 0,s(Sw(),r),s(Cw(),r),s(iC(),r),s(Pw(),r),s(Rw(),r),s(oC(),r),s(qt(),r),s(ww(),r),s(sC(),r),s(un(),r),s(Ew(),r),s(Tw(),r),s(Aw(),r),s(_w(),r),s(Iw(),r),s(kw(),r),s(bw(),r),s(Mw(),r),s(Ow(),r),s(Dw(),r),s(aC(),r),s(wa(),r),s(cC(),r),s(uC(),r),s(Nw(),r),s(zw(),r),s(jw(),r);var h=vd();Object.defineProperty(r,"TranslationStatus",{enumerable:!0,get:function(){return h.TranslationStatus}}),s(Lw(),r),s(xw(),r),s(qw(),r),s(Bw(),r),s(Fw(),r)})(Hr)),Hr}var no={},lg;function gt(){if(lg)return no;lg=1,Object.defineProperty(no,"__esModule",{value:!0}),no.HeaderNames=void 0;let r=class{};return no.HeaderNames=r,r.AuthKey="Ocp-Apim-Subscription-Key",r.Authorization="Authorization",r.SpIDAuthKey="Apim-Subscription-Id",r.ConnectionId="X-ConnectionId",r.ContentType="Content-Type",r.CustomCommandsAppId="X-CommandsAppId",r.Path="Path",r.RequestId="X-RequestId",r.RequestStreamId="X-StreamId",r.RequestTimestamp="X-Timestamp",no}var io={},pg;function fd(){if(pg)return io;pg=1,Object.defineProperty(io,"__esModule",{value:!0}),io.AuthInfo=void 0;class r{constructor(s,h){this.privHeaderName=s,this.privToken=h}get headerName(){return this.privHeaderName}get token(){return this.privToken}}return io.AuthInfo=r,io}var dg;function Uw(){if(dg)return Oi;dg=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.CognitiveSubscriptionKeyAuthentication=void 0;const r=ie(),i=gt(),s=fd();let h=class{constructor(p){if(!p)throw new r.ArgumentNullError("subscriptionKey");this.privAuthInfo=new s.AuthInfo(i.HeaderNames.AuthKey,p)}fetch(p){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(p){return Promise.resolve(this.privAuthInfo)}};return Oi.CognitiveSubscriptionKeyAuthentication=h,Oi}var oo={},hg;function Ww(){if(hg)return oo;hg=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.CognitiveTokenAuthentication=void 0;const r=ie(),i=fd(),s=gt();let h=class sd{constructor(p,c){if(!p)throw new r.ArgumentNullError("fetchCallback");if(!c)throw new r.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=p,this.privFetchOnExpiryCallback=c}fetch(p){return this.privFetchCallback(p).then(c=>new i.AuthInfo(s.HeaderNames.Authorization,c===void 0?void 0:sd.privTokenPrefix+c))}fetchOnExpiry(p){return this.privFetchOnExpiryCallback(p).then(c=>new i.AuthInfo(s.HeaderNames.Authorization,c===void 0?void 0:sd.privTokenPrefix+c))}};return oo.CognitiveTokenAuthentication=h,h.privTokenPrefix="Bearer ",oo}var sp={},vg;function Hw(){return vg||(vg=1,Object.defineProperty(sp,"__esModule",{value:!0})),sp}var ap={},fg;function Vw(){return fg||(fg=1,Object.defineProperty(ap,"__esModule",{value:!0})),ap}var cp={},gg;function gd(){return gg||(gg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognitionEndedEvent=r.RecognitionCompletionStatus=r.RecognitionStartedEvent=r.ConnectingToServiceEvent=r.ListeningStartedEvent=r.RecognitionTriggeredEvent=r.SpeechRecognitionEvent=void 0;const i=ie();class s extends i.PlatformEvent{constructor(v,g,m,y=i.EventType.Info){super(v,y),this.privRequestId=g,this.privSessionId=m}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}r.SpeechRecognitionEvent=s;class h extends s{constructor(v,g,m,y){super("RecognitionTriggeredEvent",v,g),this.privAudioSourceId=m,this.privAudioNodeId=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}r.RecognitionTriggeredEvent=h;class a extends s{constructor(v,g,m,y){super("ListeningStartedEvent",v,g),this.privAudioSourceId=m,this.privAudioNodeId=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}r.ListeningStartedEvent=a;class p extends s{constructor(v,g,m){super("ConnectingToServiceEvent",v,m),this.privAuthFetchEventid=g}get authFetchEventid(){return this.privAuthFetchEventid}}r.ConnectingToServiceEvent=p;class c extends s{constructor(v,g,m,y,w){super("RecognitionStartedEvent",v,w),this.privAudioSourceId=g,this.privAudioNodeId=m,this.privAuthFetchEventId=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}r.RecognitionStartedEvent=c;var o;(function(d){d[d.Success=0]="Success",d[d.AudioSourceError=1]="AudioSourceError",d[d.AudioSourceTimeout=2]="AudioSourceTimeout",d[d.AuthTokenFetchError=3]="AuthTokenFetchError",d[d.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",d[d.UnAuthorized=5]="UnAuthorized",d[d.ConnectTimeout=6]="ConnectTimeout",d[d.ConnectError=7]="ConnectError",d[d.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",d[d.UnknownError=9]="UnknownError"})(o=r.RecognitionCompletionStatus||(r.RecognitionCompletionStatus={}));class u extends s{constructor(v,g,m,y,w,P,E,C){super("RecognitionEndedEvent",v,w,E===o.Success?i.EventType.Info:i.EventType.Error),this.privAudioSourceId=g,this.privAudioNodeId=m,this.privAuthFetchEventId=y,this.privStatus=E,this.privError=C,this.privServiceTag=P}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}r.RecognitionEndedEvent=u})(cp)),cp}var so={},Jr={},bt={};const Kw={},Jw=Object.freeze(Object.defineProperty({__proto__:null,default:Kw},Symbol.toStringTag,{value:"Module"})),cn=GR(Jw);var up={},mg;function lC(){return mg||(mg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LogLevel=void 0;const i=ie();Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return i.EventType}})})(up)),up}var ao={},yg;function he(){if(yg)return ao;yg=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.Contracts=void 0;let r=class wr{static throwIfNullOrUndefined(s,h){if(s==null)throw new Error("throwIfNullOrUndefined:"+h)}static throwIfNull(s,h){if(s===null)throw new Error("throwIfNull:"+h)}static throwIfNullOrWhitespace(s,h){if(wr.throwIfNullOrUndefined(s,h),(""+s).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+h)}static throwIfNullOrTooLong(s,h,a){if(wr.throwIfNullOrUndefined(s,h),(""+s).length>a)throw new Error("throwIfNullOrTooLong:"+h+" (more than "+a.toString()+" characters)")}static throwIfNullOrTooShort(s,h,a){if(wr.throwIfNullOrUndefined(s,h),(""+s).length<a)throw new Error("throwIfNullOrTooShort:"+h+" (less than "+a.toString()+" characters)")}static throwIfDisposed(s){if(s)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(s,h){if(wr.throwIfNullOrUndefined(s,h),s.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+h);for(const a of s)wr.throwIfNullOrWhitespace(a,h)}static throwIfFileDoesNotExist(s,h){wr.throwIfNullOrWhitespace(s,h)}static throwIfNotUndefined(s,h){if(s!==void 0)throw new Error("throwIfNotUndefined:"+h)}static throwIfNumberOutOfRange(s,h,a,p){if(wr.throwIfNullOrUndefined(s,h),s<a||s>p)throw new Error("throwIfNumberOutOfRange:"+h+" (must be between "+a.toString()+" and "+p.toString()+")")}};return ao.Contracts=r,ao}var Sg;function Gw(){if(Sg)return bt;Sg=1;var r=bt&&bt.__createBinding||(Object.create?(function(o,u,d,v){v===void 0&&(v=d),Object.defineProperty(o,v,{enumerable:!0,get:function(){return u[d]}})}):(function(o,u,d,v){v===void 0&&(v=d),o[v]=u[d]})),i=bt&&bt.__setModuleDefault||(Object.create?(function(o,u){Object.defineProperty(o,"default",{enumerable:!0,value:u})}):function(o,u){o.default=u}),s=bt&&bt.__importStar||function(o){if(o&&o.__esModule)return o;var u={};if(o!=null)for(var d in o)d!=="default"&&Object.prototype.hasOwnProperty.call(o,d)&&r(u,o,d);return i(u,o),u};Object.defineProperty(bt,"__esModule",{value:!0}),bt.ConsoleLoggingListener=void 0;const h=s(cn),a=lC(),p=he();let c=class{constructor(u=a.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=u}set logPath(u){p.Contracts.throwIfNullOrUndefined(h.openSync,`
File System access not available`),this.privLogPath=u}set enableConsoleOutput(u){this.privEnableConsoleOutput=u}onEvent(u){if(u.eventType>=this.privLogLevelFilter){const d=this.toString(u);if(this.logCallback&&this.logCallback(d),this.privLogPath&&h.writeFileSync(this.privLogPath,d+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(u.eventType){case a.LogLevel.Debug:console.debug(d);break;case a.LogLevel.Info:console.info(d);break;case a.LogLevel.Warning:console.warn(d);break;case a.LogLevel.Error:console.error(d);break;default:console.log(d);break}}}toString(u){const d=[`${u.eventTime}`,`${u.name}`],v=u;for(const g in v)if(g&&u.hasOwnProperty(g)&&g!=="eventTime"&&g!=="eventType"&&g!=="eventId"&&g!=="name"&&g!=="constructor"){const m=v[g];let y="<NULL>";m!=null&&(typeof m=="number"||typeof m=="string"?y=m.toString():y=JSON.stringify(m)),d.push(`${g}: ${y}`)}return d.join(" | ")}};return bt.ConsoleLoggingListener=c,bt}var lp={},Cg;function Qw(){return Cg||(Cg=1,Object.defineProperty(lp,"__esModule",{value:!0})),lp}var pp={},dp={},Pg;function ln(){return Pg||(Pg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AudioStreamFormatImpl=r.AudioStreamFormat=r.AudioFormatTag=void 0;var i;(function(a){a[a.PCM=1]="PCM",a[a.MuLaw=2]="MuLaw",a[a.Siren=3]="Siren",a[a.MP3=4]="MP3",a[a.SILKSkype=5]="SILKSkype",a[a.OGG_OPUS=6]="OGG_OPUS",a[a.WEBM_OPUS=7]="WEBM_OPUS",a[a.ALaw=8]="ALaw",a[a.FLAC=9]="FLAC",a[a.OPUS=10]="OPUS",a[a.AMR_WB=11]="AMR_WB",a[a.G722=12]="G722"})(i=r.AudioFormatTag||(r.AudioFormatTag={}));class s{static getDefaultInputFormat(){return h.getDefaultInputFormat()}static getWaveFormat(p,c,o,u){return new h(p,c,o,u)}static getWaveFormatPCM(p,c,o){return new h(p,c,o)}}r.AudioStreamFormat=s;class h extends s{constructor(p=16e3,c=16,o=1,u=i.PCM){super();let d=!0;switch(u){case i.PCM:this.formatTag=1;break;case i.ALaw:this.formatTag=6;break;case i.MuLaw:this.formatTag=7;break;default:d=!1}if(this.bitsPerSample=c,this.samplesPerSec=p,this.channels=o,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),d){this.privHeader=new ArrayBuffer(44);const v=new DataView(this.privHeader);this.setString(v,0,"RIFF"),v.setUint32(4,0,!0),this.setString(v,8,"WAVEfmt "),v.setUint32(16,16,!0),v.setUint16(20,this.formatTag,!0),v.setUint16(22,this.channels,!0),v.setUint32(24,this.samplesPerSec,!0),v.setUint32(28,this.avgBytesPerSec,!0),v.setUint16(32,this.channels*(this.bitsPerSample/8),!0),v.setUint16(34,this.bitsPerSample,!0),this.setString(v,36,"data"),v.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new h}static getAudioContext(p){const c=window.AudioContext||window.webkitAudioContext||!1;if(c)return p!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new c({sampleRate:p}):new c;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(p,c,o){for(let u=0;u<o.length;u++)p.setUint8(c+u,o.charCodeAt(u))}}r.AudioStreamFormatImpl=h})(dp)),dp}var Rg;function Yw(){return Rg||(Rg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MicAudioSource=r.AudioWorkletSourceURLPropertyName=void 0;const i=ee(),s=ie(),h=ln();r.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class a{constructor(c,o,u,d){this.privRecorder=c,this.deviceId=o,this.privStreams={},this.privOutputChunkSize=a.AUDIOFORMAT.avgBytesPerSec/10,this.privId=u||(0,s.createNoDashGuid)(),this.privEvents=new s.EventSource,this.privMediaStream=d||null,this.privIsClosing=!1}get format(){return Promise.resolve(a.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new s.Deferred;try{this.createAudioContext()}catch(u){if(u instanceof Error){const d=u;this.privInitializeDeferral.reject(d.name+": "+d.message)}else this.privInitializeDeferral.reject(u);return this.privInitializeDeferral.promise}const c=window.navigator;let o=c.getUserMedia||c.webkitGetUserMedia||c.mozGetUserMedia||c.msGetUserMedia;if(c.mediaDevices&&(o=(u,d,v)=>{c.mediaDevices.getUserMedia(u).then(d).catch(v)}),o){const u=()=>{this.onEvent(new s.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new s.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):o({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},d=>{this.privMediaStream=d,this.onEvent(new s.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},d=>{const v=`Error occurred during microphone initialization: ${d}`;this.privInitializeDeferral.reject(v),this.onEvent(new s.AudioSourceErrorEvent(this.privId,v))})};this.privContext.state==="suspended"?this.privContext.resume().then(u).catch(d=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${d}`)}):u()}else{const u="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(u),this.onEvent(new s.AudioSourceErrorEvent(u,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(c){return this.onEvent(new s.AudioStreamNodeAttachingEvent(this.privId,c)),this.listen(c).then(o=>(this.onEvent(new s.AudioStreamNodeAttachedEvent(this.privId,c)),{detach:async()=>(o.readEnded(),delete this.privStreams[c],this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,c)),this.turnOff()),id:()=>c,read:()=>o.read()}))}detach(c){c&&this.privStreams[c]&&(this.privStreams[c].close(),delete this.privStreams[c],this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,c)))}async turnOff(){for(const c in this.privStreams)if(c){const o=this.privStreams[c];o&&o.close()}this.onEvent(new s.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(c=>({bitspersample:a.AUDIOFORMAT.bitsPerSample,channelcount:a.AUDIOFORMAT.channels,connectivity:i.connectivity.Unknown,manufacturer:"Speech SDK",model:c,samplerate:a.AUDIOFORMAT.samplesPerSec,type:i.type.Microphones}))}setProperty(c,o){if(c===r.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(o);else throw new Error("Property '"+c+"' is not supported on Microphone.")}getMicrophoneLabel(){const c="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(c);this.privMicrophoneLabel=c;const o=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(o===void 0)return Promise.resolve(this.privMicrophoneLabel);const u=new s.Deferred;return navigator.mediaDevices.enumerateDevices().then(d=>{for(const v of d)if(v.deviceId===o){this.privMicrophoneLabel=v.label;break}u.resolve(this.privMicrophoneLabel)},()=>u.resolve(this.privMicrophoneLabel)),u.promise}async listen(c){await this.turnOn();const o=new s.ChunkedArrayBufferStream(this.privOutputChunkSize,c);this.privStreams[c]=o;try{this.privRecorder.record(this.privContext,this.privMediaStream,o)}catch(d){throw this.onEvent(new s.AudioStreamNodeErrorEvent(this.privId,c,d)),d}return o}onEvent(c){this.privEvents.onEvent(c),s.Events.instance.onEvent(c)}createAudioContext(){this.privContext||(this.privContext=h.AudioStreamFormatImpl.getAudioContext(a.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let c=!1;"close"in this.privContext&&(c=!0),c?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}r.MicAudioSource=a,a.AUDIOFORMAT=h.AudioStreamFormat.getDefaultInputFormat()})(pp)),pp}var co={},wg;function Xw(){if(wg)return co;wg=1,Object.defineProperty(co,"__esModule",{value:!0}),co.FileAudioSource=void 0;const r=ee(),i=ie(),s=ln();let h=class{constructor(p,c,o){this.privStreams={},this.privHeaderEnd=44,this.privId=o||(0,i.createNoDashGuid)(),this.privEvents=new i.EventSource,this.privSource=p,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=p.name:this.privFilename=c||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const p=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new i.AudioSourceErrorEvent(p,"")),Promise.reject(p)}this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(p){this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,p));const c=await this.upload(p);return this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,p)),Promise.resolve({detach:async()=>{c.readEnded(),delete this.privStreams[p],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,p)),await this.turnOff()},id:()=>p,read:()=>c.read()})}detach(p){p&&this.privStreams[p]&&(this.privStreams[p].close(),delete this.privStreams[p],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,p)))}turnOff(){for(const p in this.privStreams)if(p){const c=this.privStreams[p];c&&!c.isClosed&&c.close()}return this.onEvent(new i.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(p=>Promise.resolve({bitspersample:p.bitsPerSample,channelcount:p.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:p.samplesPerSec,type:r.type.File}))}readHeader(){const c=this.privSource.slice(0,4296),o=new i.Deferred,u=d=>{const v=new DataView(d),g=C=>String.fromCharCode(v.getUint8(C),v.getUint8(C+1),v.getUint8(C+2),v.getUint8(C+3));if(g(0)!=="RIFF"){o.reject("Invalid WAV header in file, RIFF was not found");return}if(g(8)!=="WAVE"||g(12)!=="fmt "){o.reject("Invalid WAV header in file, WAVEfmt was not found");return}const m=v.getInt32(16,!0),y=v.getUint16(22,!0),w=v.getUint32(24,!0),P=v.getUint16(34,!0);let E=36+Math.max(m-16,0);for(;g(E)!=="data";E+=2)if(E>4288){o.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=E+8,o.resolve(s.AudioStreamFormat.getWaveFormatPCM(w,P,y))};if(typeof window<"u"&&typeof Blob<"u"&&c instanceof Blob){const d=new FileReader;d.onload=v=>{const g=v.target.result;u(g)},d.readAsArrayBuffer(c)}else{const d=c;u(d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength))}return o.promise}async upload(p){const c=o=>{const u=`Error occurred while processing '${this.privFilename}'. ${o}`;throw this.onEvent(new i.AudioStreamNodeErrorEvent(this.privId,p,u)),new Error(u)};try{await this.turnOn();const o=await this.privAudioFormatPromise,u=new i.ChunkedArrayBufferStream(o.avgBytesPerSec/10,p);this.privStreams[p]=u;const d=this.privSource.slice(this.privHeaderEnd),v=g=>{u.isClosed||(u.writeStreamChunk({buffer:g,isEnd:!1,timeReceived:Date.now()}),u.close())};if(typeof window<"u"&&typeof Blob<"u"&&d instanceof Blob){const g=new FileReader;g.onerror=m=>c(m.toString()),g.onload=m=>{const y=m.target.result;v(y)},g.readAsArrayBuffer(d)}else{const g=d;v(g.buffer.slice(g.byteOffset,g.byteOffset+g.byteLength))}return u}catch(o){c(o)}}onEvent(p){this.privEvents.onEvent(p),i.Events.instance.onEvent(p)}};return co.FileAudioSource=h,co}var uo={},Eg;function Zw(){if(Eg)return uo;Eg=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.PcmRecorder=void 0;const r=ie();class i{constructor(h){this.privStopInputOnRelease=h}record(h,a,p){const o=new r.RiffPcmEncoder(h.sampleRate,16e3),u=h.createMediaStreamSource(a),d=()=>{const g=(()=>{let m=0;try{return h.createScriptProcessor(m,1,1)}catch{m=2048;let w=h.sampleRate;for(;m<16384&&w>=32e3;)m<<=1,w>>=1;return h.createScriptProcessor(m,1,1)}})();g.onaudioprocess=m=>{const y=m.inputBuffer.getChannelData(0);if(p&&!p.isClosed){const w=o.encode(y);w&&p.writeStreamChunk({buffer:w,isEnd:!1,timeReceived:Date.now()})}},u.connect(g),g.connect(h.destination),this.privMediaResources={scriptProcessorNode:g,source:u,stream:a}},v=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(h.audioWorklet&&!v){if(!this.privSpeechProcessorScript){const g=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,m=new Blob([g],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(m)}h.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const g=new AudioWorkletNode(h,"speech-processor");g.port.onmessage=m=>{const y=m.data;if(p&&!p.isClosed){const w=o.encode(y);w&&p.writeStreamChunk({buffer:w,isEnd:!1,timeReceived:Date.now()})}},u.connect(g),g.connect(h.destination),this.privMediaResources={scriptProcessorNode:g,source:u,stream:a}}).catch(()=>{d()})}else try{d()}catch(g){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${g}`)}}releaseMediaResources(h){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(h.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(a=>a.stop()),this.privMediaResources.source=null))}setWorkletUrl(h){this.privSpeechProcessorScript=h}}return uo.PcmRecorder=i,uo}var lo={},ht={},Tg;function pC(){if(Tg)return ht;Tg=1;var r=ht&&ht.__createBinding||(Object.create?(function(m,y,w,P){P===void 0&&(P=w),Object.defineProperty(m,P,{enumerable:!0,get:function(){return y[w]}})}):(function(m,y,w,P){P===void 0&&(P=w),m[P]=y[w]})),i=ht&&ht.__setModuleDefault||(Object.create?(function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}):function(m,y){m.default=y}),s=ht&&ht.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var w in m)w!=="default"&&Object.prototype.hasOwnProperty.call(m,w)&&r(y,m,w);return i(y,m),y},h=ht&&ht.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(ht,"__esModule",{value:!0}),ht.WebsocketMessageAdapter=void 0;const a=s(cn),p=s(cn),c=h(cn),o=h(cn),u=h(cn),d=gt(),v=ie();let g=class ad{constructor(y,w,P,E,C,T){if(!y)throw new v.ArgumentNullError("uri");if(!P)throw new v.ArgumentNullError("messageFormatter");this.proxyInfo=E,this.privConnectionEvents=new v.EventSource,this.privConnectionId=w,this.privMessageFormatter=P,this.privConnectionState=v.ConnectionState.None,this.privUri=y,this.privHeaders=C,this.privEnableCompression=T,this.privHeaders[d.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===v.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new v.Deferred,this.privCertificateValidatedDeferral=new v.Deferred,this.privConnectionState=v.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!ad.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let w=new URL(this.privUri).protocol;(w==null?void 0:w.toLocaleLowerCase())==="wss:"?w="https:":(w==null?void 0:w.toLocaleLowerCase())==="ws:"&&(w="http:");const P={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:w.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),P.agent=this.getAgent(),P.agent.protocol=w,this.privWebsocketClient=new u.default(this.privUri,P),this.privWebsocketClient.on("redirect",E=>{const C=new v.ConnectionRedirectEvent(this.privConnectionId,E,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${E}'`);v.Events.instance.onEvent(C)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new v.Queue,this.privDisconnectDeferral=new v.Deferred,this.privSendMessageQueue=new v.Queue,this.processSendQueue().catch(y=>{v.Events.instance.onEvent(new v.BackgroundEvent(y))})}catch(y){return this.privConnectionEstablishDeferral.resolve(new v.ConnectionOpenResponse(500,y)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new v.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=v.ConnectionState.Connected,this.onEvent(new v.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new v.ConnectionOpenResponse(200,""))},y=>{this.privConnectionEstablishDeferral.reject(y)})},this.privWebsocketClient.onerror=y=>{this.onEvent(new v.ConnectionErrorEvent(this.privConnectionId,y.message,y.type)),this.privLastErrorReceived=y.message},this.privWebsocketClient.onclose=y=>{this.privConnectionState===v.ConnectionState.Connecting?(this.privConnectionState=v.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new v.ConnectionOpenResponse(y.code,y.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=v.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new v.ConnectionClosedEvent(this.privConnectionId,y.code,y.reason))),this.onClose(y.code,y.reason).catch(w=>{v.Events.instance.onEvent(new v.BackgroundEvent(w))})},this.privWebsocketClient.onmessage=y=>{const w=new Date().toISOString();if(this.privConnectionState===v.ConnectionState.Connected){const P=new v.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(P.promise),y.data instanceof ArrayBuffer){const E=new v.RawWebsocketMessage(v.MessageType.Binary,y.data);this.privMessageFormatter.toConnectionMessage(E).then(C=>{this.onEvent(new v.ConnectionMessageReceivedEvent(this.privConnectionId,w,C)),P.resolve(C)},C=>{P.reject(`Invalid binary message format. Error: ${C}`)})}else{const E=new v.RawWebsocketMessage(v.MessageType.Text,y.data);this.privMessageFormatter.toConnectionMessage(E).then(C=>{this.onEvent(new v.ConnectionMessageReceivedEvent(this.privConnectionId,w,C)),P.resolve(C)},C=>{P.reject(`Invalid text message format. Error: ${C}`)})}}},this.privConnectionEstablishDeferral.promise}send(y){if(this.privConnectionState!==v.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${v.ConnectionState[this.privConnectionState]} state`);const w=new v.Deferred,P=new v.Deferred;return this.privSendMessageQueue.enqueueFromPromise(P.promise),this.privMessageFormatter.fromConnectionMessage(y).then(E=>{P.resolve({Message:y,RawWebsocketMessage:E,sendStatusDeferral:w})},E=>{P.reject(`Error formatting the message. ${E}`)}),w.promise}read(){return this.privConnectionState!==v.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(y){if(this.privWebsocketClient)this.privConnectionState!==v.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,y||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(y){try{if(!y)return Promise.resolve();if(this.onEvent(new v.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),y.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(y.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+y.Message.id+" "+new Error().stack);return Promise.resolve()}catch(w){return Promise.reject(`websocket send error: ${w}`)}}async onClose(y,w){const P=`Connection closed. ${y}: ${w}`;this.privConnectionState=v.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},P),await this.privSendMessageQueue.drainAndDispose(E=>{E.sendStatusDeferral.reject(P)},P)}async processSendQueue(){for(;;){const w=await this.privSendMessageQueue.dequeue();if(!w)return;try{await this.sendRawMessage(w),w.sendStatusDeferral.resolve()}catch(P){w.sendStatusDeferral.reject(P)}}}onEvent(y){this.privConnectionEvents.onEvent(y),v.Events.instance.onEvent(y)}getAgent(){const y=new c.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(y.proxyInfo=this.proxyInfo),y}static GetProxyAgent(y){const w={host:y.HostName,port:y.Port};return y.UserName?w.headers={"Proxy-Authentication":"Basic "+Buffer.from(`${y.UserName}:${y.Password===void 0?"":y.Password}`).toString("base64")}:w.headers={},w.headers.requestOCSP="true",new o.default(w)}createConnection(y,w){let P;if(w={...w,requestOCSP:!0,servername:w.host},this.proxyInfo){const C=ad.GetProxyAgent(this.proxyInfo);P=new Promise((T,A)=>{C.callback(y,w,(M,j)=>{M?A(M):T(j)})})}else w.secureEndpoint?P=Promise.resolve(p.connect(w)):P=Promise.resolve(a.connect(w));return P}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};return ht.WebsocketMessageAdapter=g,g.forceNpmWebSocket=!1,ht}var Ag;function $w(){if(Ag)return lo;Ag=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.WebsocketConnection=void 0;const r=ie(),i=pC();let s=class{constructor(a,p,c,o,u,d=!1,v){if(this.privIsDisposed=!1,!a)throw new r.ArgumentNullError("uri");if(!o)throw new r.ArgumentNullError("messageFormatter");this.privMessageFormatter=o;let g="",m=0;if(p){for(const y in p)if(y){g+=m===0&&a.indexOf("?")===-1?"?":"&";const w=encodeURIComponent(y);g+=w;let P=p[y];P&&(P=encodeURIComponent(P),g+=`=${P}`),m++}}if(c){for(const y in c)if(y){g+=m===0&&a.indexOf("?")===-1?"?":"&";const w=encodeURIComponent(c[y]);g+=`${y}=${w}`,m++}}this.privUri=a+g,this.privId=v||(0,r.createNoDashGuid)(),this.privConnectionMessageAdapter=new i.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,u,c,d)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(a){return this.privConnectionMessageAdapter.send(a)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};return lo.WebsocketConnection=s,lo}var po={},_g;function eE(){if(_g)return po;_g=1,Object.defineProperty(po,"__esModule",{value:!0}),po.ReplayableAudioNode=void 0;let r=class{constructor(h,a){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=h,this.privBytesPerSecond=a}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const h=this.privReplayOffset-this.privBufferStartOffset;let a=Math.round(h*this.privBytesPerSecond*1e-7);a%2!==0&&a++;let p=0;for(;p<this.privBuffers.length&&a>=this.privBuffers[p].chunk.buffer.byteLength;)a-=this.privBuffers[p++].chunk.buffer.byteLength;if(p<this.privBuffers.length){const c=this.privBuffers[p].chunk.buffer.slice(a);return this.privReplayOffset+=c.byteLength/this.privBytesPerSecond*1e7,p===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:c,isEnd:!1,timeReceived:this.privBuffers[p].chunk.timeReceived})}}return this.privAudioNode.read().then(h=>(h&&h.buffer&&this.privBuffers&&(this.privBuffers.push(new i(h,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=h.buffer.byteLength),h))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(h){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=h;const a=h-this.privBufferStartOffset;let p=Math.round(a*this.privBytesPerSecond*1e-7),c=0;for(;c<this.privBuffers.length&&p>=this.privBuffers[c].chunk.buffer.byteLength;)p-=this.privBuffers[c++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(h-p/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(c)}findTimeAtOffset(h){if(h<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const a of this.privBuffers){const p=a.byteOffset/this.privBytesPerSecond*1e7,c=p+a.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(h>=p&&h<=c)return a.chunk.timeReceived}return 0}};po.ReplayableAudioNode=r;class i{constructor(h,a,p){this.chunk=h,this.serial=a,this.byteOffset=p}}return po}var ho={},hp={},Yt={},Mt={},Ig;function dC(){if(Ig)return Mt;Ig=1;var r=Mt&&Mt.__createBinding||(Object.create?(function(c,o,u,d){d===void 0&&(d=u),Object.defineProperty(c,d,{enumerable:!0,get:function(){return o[u]}})}):(function(c,o,u,d){d===void 0&&(d=u),c[d]=o[u]})),i=Mt&&Mt.__setModuleDefault||(Object.create?(function(c,o){Object.defineProperty(c,"default",{enumerable:!0,value:o})}):function(c,o){c.default=o}),s=Mt&&Mt.__importStar||function(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var u in c)u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)&&r(o,c,u);return i(o,c),o};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.AudioFileWriter=void 0;const h=s(cn),a=he();let p=class{constructor(o){a.Contracts.throwIfNullOrUndefined(h.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=h.openSync(o,"w")}set format(o){a.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=o;let u=0;this.privAudioFormat.hasHeader&&(u=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=h.createWriteStream("",{fd:this.privFd,start:u,autoClose:!1}))}write(o){a.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(o.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),h.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),h.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};return Mt.AudioFileWriter=p,Mt}var vt={},kg;function hC(){if(kg)return vt;kg=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.PullAudioInputStreamImpl=vt.PullAudioInputStream=vt.PushAudioInputStreamImpl=vt.PushAudioInputStream=vt.AudioInputStream=void 0;const r=ee(),i=ie(),s=un(),h=V(),a=ln();let p=class{constructor(){}static createPushStream(g){return c.create(g)}static createPullStream(g,m){return u.create(g,m)}};vt.AudioInputStream=p;class c extends p{static create(g){return new o(g)}}vt.PushAudioInputStream=c;class o extends c{constructor(g){super(),g===void 0?this.privFormat=a.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=g,this.privEvents=new i.EventSource,this.privId=(0,s.createNoDashGuid)(),this.privStream=new i.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(g){this.privStream.writeStreamChunk({buffer:g,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))}async attach(g){this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,g)),await this.turnOn();const m=this.privStream;return this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,g)),{detach:async()=>(this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,g)),this.turnOff()),id:()=>g,read:()=>m.read()}}detach(g){this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,g))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(g){this.privEvents.onEvent(g),i.Events.instance.onEvent(g)}toBuffer(g){const m=Buffer.alloc(g.byteLength),y=new Uint8Array(g);for(let w=0;w<m.length;++w)m[w]=y[w];return m}}vt.PushAudioInputStreamImpl=o;class u extends p{constructor(){super()}static create(g,m){return new d(g,m)}}vt.PullAudioInputStream=u;class d extends u{constructor(g,m){super(),m===void 0?this.privFormat=h.AudioStreamFormat.getDefaultInputFormat():this.privFormat=m,this.privEvents=new i.EventSource,this.privId=(0,s.createNoDashGuid)(),this.privCallback=g,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))}async attach(g){return this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,g)),await this.turnOn(),this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,g)),{detach:()=>(this.privCallback.close(),this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,g)),this.turnOff()),id:()=>g,read:()=>{let m=0,y;for(;m<this.privBufferSize;){const w=new ArrayBuffer(this.privBufferSize-m),P=this.privCallback.read(w);if(y===void 0?y=w:new Int8Array(y).set(new Int8Array(w),m),P===0)break;m+=P}return Promise.resolve({buffer:y.slice(0,m),isEnd:this.privIsClosed||m===0,timeReceived:Date.now()})}}}detach(g){this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,g))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(g){this.privEvents.onEvent(g),i.Events.instance.onEvent(g)}}return vt.PullAudioInputStreamImpl=d,vt}var ft={},vo={},vp={},bg;function vC(){return bg||(bg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechSynthesisOutputFormat=void 0,(function(i){i[i.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",i[i.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",i[i.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",i[i.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",i[i.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",i[i.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",i[i.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",i[i.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",i[i.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",i[i.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",i[i.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",i[i.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",i[i.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",i[i.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",i[i.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",i[i.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",i[i.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",i[i.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",i[i.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",i[i.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",i[i.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",i[i.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",i[i.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",i[i.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",i[i.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",i[i.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",i[i.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",i[i.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",i[i.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",i[i.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",i[i.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",i[i.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",i[i.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",i[i.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",i[i.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",i[i.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",i[i.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",i[i.AmrWb16000Hz=37]="AmrWb16000Hz",i[i.G72216Khz64Kbps=38]="G72216Khz64Kbps"})(r.SpeechSynthesisOutputFormat||(r.SpeechSynthesisOutputFormat={}))})(vp)),vp}var Mg;function Ea(){if(Mg)return vo;Mg=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.AudioOutputFormatImpl=void 0;const r=vC(),i=ln();class s extends i.AudioStreamFormatImpl{constructor(a,p,c,o,u,d,v,g,m){super(c,d,p,a),this.formatTag=a,this.avgBytesPerSec=o,this.blockAlign=u,this.priAudioFormatString=v,this.priRequestAudioFormatString=g,this.priHasHeader=m}static fromSpeechSynthesisOutputFormat(a){return a===void 0?s.getDefaultOutputFormat():s.fromSpeechSynthesisOutputFormatString(s.SpeechSynthesisOutputFormatToString[a])}static fromSpeechSynthesisOutputFormatString(a){switch(a){case"raw-8khz-8bit-mono-mulaw":return new s(i.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,a,a,!1);case"riff-16khz-16kbps-mono-siren":return new s(i.AudioFormatTag.Siren,1,16e3,2e3,40,0,a,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new s(i.AudioFormatTag.Siren,1,16e3,2e3,40,0,a,a,!1);case"audio-16khz-32kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,16e3,4096,2,16,a,a,!1);case"audio-16khz-128kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,16e3,16384,2,16,a,a,!1);case"audio-16khz-64kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,16e3,8192,2,16,a,a,!1);case"audio-24khz-48kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,24e3,6144,2,16,a,a,!1);case"audio-24khz-96kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,24e3,12288,2,16,a,a,!1);case"audio-24khz-160kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,24e3,20480,2,16,a,a,!1);case"raw-16khz-16bit-mono-truesilk":return new s(i.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,a,a,!1);case"riff-8khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,8e3,16e3,2,16,a,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,24e3,48e3,2,16,a,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new s(i.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,a,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,16e3,32e3,2,16,a,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,24e3,48e3,2,16,a,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,8e3,16e3,2,16,a,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new s(i.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,a,a,!1);case"ogg-24khz-16bit-mono-opus":return new s(i.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,a,a,!1);case"raw-48khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,48e3,96e3,2,16,a,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,48e3,96e3,2,16,a,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,48e3,12288,2,16,a,a,!1);case"audio-48khz-192kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,48e3,24576,2,16,a,a,!1);case"ogg-48khz-16bit-mono-opus":return new s(i.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,a,a,!1);case"webm-16khz-16bit-mono-opus":return new s(i.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,a,a,!1);case"webm-24khz-16bit-mono-opus":return new s(i.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,a,a,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new s(i.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,a,a,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new s(i.AudioFormatTag.OPUS,1,16e3,4e3,2,16,a,a,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new s(i.AudioFormatTag.OPUS,1,24e3,6e3,2,16,a,a,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new s(i.AudioFormatTag.OPUS,1,24e3,3e3,2,16,a,a,!1);case"audio-24khz-16bit-mono-flac":return new s(i.AudioFormatTag.FLAC,1,24e3,24e3,2,16,a,a,!1);case"audio-48khz-16bit-mono-flac":return new s(i.AudioFormatTag.FLAC,1,48e3,3e4,2,16,a,a,!1);case"raw-24khz-16bit-mono-truesilk":return new s(i.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,a,a,!1);case"raw-8khz-8bit-mono-alaw":return new s(i.AudioFormatTag.ALaw,1,8e3,8e3,1,8,a,a,!1);case"riff-8khz-8bit-mono-alaw":return new s(i.AudioFormatTag.ALaw,1,8e3,8e3,1,8,a,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,22050,44100,2,16,a,a,!1);case"riff-22050hz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,22050,44100,2,16,a,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,44100,88200,2,16,a,a,!1);case"riff-44100hz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,44100,88200,2,16,a,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new s(i.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,a,a,!1);case"g722-16khz-64kbps":return new s(i.AudioFormatTag.G722,1,16e3,8e3,2,16,a,a,!1);case"riff-16khz-16bit-mono-pcm":default:return new s(i.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return s.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(a){if(this.priHasHeader){const p=new DataView(this.privHeader);p.setUint32(4,a+this.privHeader.byteLength-8,!0),p.setUint32(40,a,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(a){if(!this.hasHeader)return a;this.updateHeader(a.byteLength);const p=new Uint8Array(a.byteLength+this.header.byteLength);return p.set(new Uint8Array(this.header),0),p.set(new Uint8Array(a),this.header.byteLength),p.buffer}}return vo.AudioOutputFormatImpl=s,s.SpeechSynthesisOutputFormatToString={[r.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[r.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[r.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[r.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[r.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[r.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[r.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[r.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[r.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[r.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"},vo}var Og;function qn(){if(Og)return ft;Og=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.PushAudioOutputStreamImpl=ft.PushAudioOutputStream=ft.PullAudioOutputStreamImpl=ft.PullAudioOutputStream=ft.AudioOutputStream=void 0;const r=ie(),i=he(),s=Ea();let h=class{constructor(){}static createPullStream(){return a.create()}};ft.AudioOutputStream=h;class a extends h{static create(){return new p}}ft.PullAudioOutputStream=a;class p extends a{constructor(){super(),this.privId=(0,r.createNoDashGuid)(),this.privStream=new r.Stream}set format(d){d==null&&(this.privFormat=s.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=d}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(d){const v=new Int8Array(d);let g=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>d.byteLength)return v.set(this.privLastChunkView.slice(0,d.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(d.byteLength),Promise.resolve(d.byteLength);v.set(this.privLastChunkView),g=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;g<d.byteLength&&!this.privStream.isReadEnded;){const m=await this.privStream.read();if(m!==void 0&&!m.isEnd){let y;m.buffer.byteLength>d.byteLength-g?(y=m.buffer.slice(0,d.byteLength-g),this.privLastChunkView=new Int8Array(m.buffer.slice(d.byteLength-g))):y=m.buffer,v.set(new Int8Array(y),g),g+=y.byteLength}else this.privStream.readEnded()}return g}write(d){i.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}ft.PullAudioOutputStreamImpl=p;class c extends h{constructor(){super()}static create(d){return new o(d)}}ft.PushAudioOutputStream=c;class o extends c{constructor(d){super(),this.privId=(0,r.createNoDashGuid)(),this.privCallback=d}set format(d){}write(d){this.privCallback.write&&this.privCallback.write(d)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}return ft.PushAudioOutputStreamImpl=o,ft}var Dg;function tE(){if(Dg)return Yt;Dg=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.AudioOutputConfigImpl=Yt.AudioConfigImpl=Yt.AudioConfig=void 0;const r=ct(),i=he(),s=V(),h=dC(),a=hC(),p=qn();let c=class fC{static fromDefaultMicrophoneInput(){const v=new r.PcmRecorder(!0);return new o(new r.MicAudioSource(v))}static fromMicrophoneInput(v){const g=new r.PcmRecorder(!0);return new o(new r.MicAudioSource(g,v))}static fromWavFileInput(v,g="unnamedBuffer.wav"){return new o(new r.FileAudioSource(v,g))}static fromStreamInput(v){if(v instanceof s.PullAudioInputStreamCallback)return new o(new a.PullAudioInputStreamImpl(v));if(v instanceof s.AudioInputStream)return new o(v);if(typeof MediaStream<"u"&&v instanceof MediaStream){const g=new r.PcmRecorder(!1);return new o(new r.MicAudioSource(g,null,null,v))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new u(new s.SpeakerAudioDestination)}static fromSpeakerOutput(v){if(v===void 0)return fC.fromDefaultSpeakerOutput();if(v instanceof s.SpeakerAudioDestination)return new u(v);throw new Error("Not Supported Type")}static fromAudioFileOutput(v){return new u(new h.AudioFileWriter(v))}static fromStreamOutput(v){if(v instanceof s.PushAudioOutputStreamCallback)return new u(new p.PushAudioOutputStreamImpl(v));if(v instanceof s.PushAudioOutputStream)return new u(v);if(v instanceof s.PullAudioOutputStream)return new u(v);throw new Error("Not Supported Type")}};Yt.AudioConfig=c;class o extends c{constructor(v){super(),this.privSource=v}get format(){return this.privSource.format}close(v,g){this.privSource.turnOff().then(()=>{v&&v()},m=>{g&&g(m)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(v){return this.privSource.attach(v)}detach(v){return this.privSource.detach(v)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(v,g){if(i.Contracts.throwIfNull(g,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(v,g);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(v,g){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(v,g);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Yt.AudioConfigImpl=o;class u extends c{constructor(v){super(),this.privDestination=v}set format(v){this.privDestination.format=v}write(v){this.privDestination.write(v)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Yt.AudioOutputConfigImpl=u,Yt}var fp={},Ng;function rE(){return Ng||(Ng=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationReason=void 0,(function(i){i[i.Error=0]="Error",i[i.EndOfStream=1]="EndOfStream"})(r.CancellationReason||(r.CancellationReason={}))})(fp)),fp}var fo={},zg;function nE(){if(zg)return fo;zg=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.PullAudioInputStreamCallback=void 0;let r=class{};return fo.PullAudioInputStreamCallback=r,fo}var go={},jg;function iE(){if(jg)return go;jg=1,Object.defineProperty(go,"__esModule",{value:!0}),go.PushAudioOutputStreamCallback=void 0;let r=class{};return go.PushAudioOutputStreamCallback=r,go}var mo={},Lg;function oE(){if(Lg)return mo;Lg=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.KeywordRecognitionModel=void 0;const r=he();let i=class{constructor(){this.privDisposed=!1}static fromFile(h){throw r.Contracts.throwIfFileDoesNotExist(h,"fileName"),new Error("Not yet implemented.")}static fromStream(h){throw r.Contracts.throwIfNull(h,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};return mo.KeywordRecognitionModel=i,mo}var yo={},xg;function sE(){if(xg)return yo;xg=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.SessionEventArgs=void 0;let r=class{constructor(s){this.privSessionId=s}get sessionId(){return this.privSessionId}};return yo.SessionEventArgs=r,yo}var So={},qg;function aE(){if(qg)return So;qg=1,Object.defineProperty(So,"__esModule",{value:!0}),So.RecognitionEventArgs=void 0;const r=V();let i=class extends r.SessionEventArgs{constructor(h,a){super(a),this.privOffset=h}get offset(){return this.privOffset}};return So.RecognitionEventArgs=i,So}var gp={},Bg;function cE(){return Bg||(Bg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OutputFormat=void 0,(function(i){i[i.Simple=0]="Simple",i[i.Detailed=1]="Detailed"})(r.OutputFormat||(r.OutputFormat={}))})(gp)),gp}var Co={},Fg;function uE(){if(Fg)return Co;Fg=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.RecognitionResult=void 0;let r=class{constructor(s,h,a,p,c,o,u,d,v,g){this.privResultId=s,this.privReason=h,this.privText=a,this.privDuration=p,this.privOffset=c,this.privLanguage=o,this.privLanguageDetectionConfidence=u,this.privErrorDetails=d,this.privJson=v,this.privProperties=g}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};return Co.RecognitionResult=r,Co}var Po={},Ug;function lE(){if(Ug)return Po;Ug=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.SpeechRecognitionResult=void 0;const r=V();let i=class extends r.RecognitionResult{constructor(h,a,p,c,o,u,d,v,g,m,y){super(h,a,p,c,o,u,d,g,m,y),this.privSpeakerId=v}get speakerId(){return this.privSpeakerId}};return Po.SpeechRecognitionResult=i,Po}var Xt={},Wg;function pE(){if(Wg)return Xt;Wg=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.MeetingTranscriptionEventArgs=Xt.ConversationTranscriptionEventArgs=Xt.SpeechRecognitionEventArgs=void 0;const r=V();let i=class extends r.RecognitionEventArgs{constructor(p,c,o){super(c,o),this.privResult=p}get result(){return this.privResult}};Xt.SpeechRecognitionEventArgs=i;class s extends r.RecognitionEventArgs{constructor(p,c,o){super(c,o),this.privResult=p}get result(){return this.privResult}}Xt.ConversationTranscriptionEventArgs=s;class h extends i{}return Xt.MeetingTranscriptionEventArgs=h,Xt}var Ro={},wo={},Hg;function Ta(){if(Hg)return wo;Hg=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.CancellationEventArgsBase=void 0;const r=V();let i=class extends r.RecognitionEventArgs{constructor(h,a,p,c,o){super(c,o),this.privReason=h,this.privErrorDetails=a,this.privErrorCode=p}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return wo.CancellationEventArgsBase=i,wo}var Vg;function dE(){if(Vg)return Ro;Vg=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.SpeechRecognitionCanceledEventArgs=void 0;const r=Ta();let i=class extends r.CancellationEventArgsBase{};return Ro.SpeechRecognitionCanceledEventArgs=i,Ro}var Eo={},Kg;function hE(){if(Kg)return Eo;Kg=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.TranslationRecognitionEventArgs=void 0;const r=V();let i=class extends r.RecognitionEventArgs{constructor(h,a,p){super(a,p),this.privResult=h}get result(){return this.privResult}};return Eo.TranslationRecognitionEventArgs=i,Eo}var To={},Jg;function vE(){if(Jg)return To;Jg=1,Object.defineProperty(To,"__esModule",{value:!0}),To.TranslationSynthesisEventArgs=void 0;const r=V();let i=class extends r.SessionEventArgs{constructor(h,a){super(a),this.privResult=h}get result(){return this.privResult}};return To.TranslationSynthesisEventArgs=i,To}var Ao={},Gg;function mC(){if(Gg)return Ao;Gg=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.TranslationRecognitionResult=void 0;const r=V();let i=class gC extends r.SpeechRecognitionResult{constructor(h,a,p,c,o,u,d,v,g,m,y){super(a,p,c,o,u,d,v,void 0,g,m,y),this.privTranslations=h}static fromSpeechRecognitionResult(h){return new gC(void 0,h.resultId,h.reason,h.text,h.duration,h.offset,h.language,h.languageDetectionConfidence,h.errorDetails,h.json,h.properties)}get translations(){return this.privTranslations}};return Ao.TranslationRecognitionResult=i,Ao}var _o={},Qg;function fE(){if(Qg)return _o;Qg=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.TranslationSynthesisResult=void 0;let r=class{constructor(s,h){this.privReason=s,this.privAudio=h}get audio(){return this.privAudio}get reason(){return this.privReason}};return _o.TranslationSynthesisResult=r,_o}var mp={},Yg;function gE(){return Yg||(Yg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ResultReason=void 0,(function(i){i[i.NoMatch=0]="NoMatch",i[i.Canceled=1]="Canceled",i[i.RecognizingSpeech=2]="RecognizingSpeech",i[i.RecognizedSpeech=3]="RecognizedSpeech",i[i.RecognizedKeyword=4]="RecognizedKeyword",i[i.TranslatingSpeech=5]="TranslatingSpeech",i[i.TranslatedSpeech=6]="TranslatedSpeech",i[i.SynthesizingAudio=7]="SynthesizingAudio",i[i.SynthesizingAudioCompleted=8]="SynthesizingAudioCompleted",i[i.SynthesizingAudioStarted=9]="SynthesizingAudioStarted",i[i.VoicesListRetrieved=10]="VoicesListRetrieved",i[i.TranslatingParticipantSpeech=11]="TranslatingParticipantSpeech",i[i.TranslatedParticipantSpeech=12]="TranslatedParticipantSpeech",i[i.TranslatedInstantMessage=13]="TranslatedInstantMessage",i[i.TranslatedParticipantInstantMessage=14]="TranslatedParticipantInstantMessage"})(r.ResultReason||(r.ResultReason={}))})(mp)),mp}var Gr={},Xg;function mE(){if(Xg)return Gr;Xg=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.SpeechConfigImpl=Gr.SpeechConfig=void 0;const r=ee(),i=he(),s=V();let h=class{constructor(){}static fromSubscription(c,o){i.Contracts.throwIfNullOrWhitespace(c,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(o,"region");const u=new a;return u.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),u}static fromEndpoint(c,o){i.Contracts.throwIfNull(c,"endpoint");const u=typeof o=="string"&&o.trim().length>0,d=typeof o=="object"&&o!==null&&typeof o.getToken=="function",v=typeof o=="object"&&o!==null&&typeof o.key=="string";if(o!==void 0&&!u&&!d&&!v)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let g;return typeof o=="string"?(g=new a,g.setProperty(s.PropertyId.SpeechServiceConnection_Key,o)):typeof o=="object"&&typeof o.getToken=="function"?g=new a(o):typeof o=="object"&&typeof o.key=="string"?(g=new a,g.setProperty(s.PropertyId.SpeechServiceConnection_Key,o.key)):g=new a,g.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,c.href),g}static fromHost(c,o){i.Contracts.throwIfNull(c,"hostName");const u=new a;return u.setProperty(s.PropertyId.SpeechServiceConnection_Host,c.protocol+"//"+c.hostname+(c.port===""?"":":"+c.port)),u.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),o!==void 0&&u.setProperty(s.PropertyId.SpeechServiceConnection_Key,o),u}static fromAuthorizationToken(c,o){i.Contracts.throwIfNull(c,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(o,"region");const u=new a;return u.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u.authorizationToken=c,u}close(){}};Gr.SpeechConfig=h;class a extends h{constructor(c){super(),this.privProperties=new s.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=s.OutputFormat.Simple,this.privTokenCredential=c}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}get speechRecognitionLanguage(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,c)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c)}get outputFormat(){return s.OutputFormat[this.privProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(c){this.privProperties.setProperty(r.OutputFormatPropertyName,s.OutputFormat[c])}get endpointId(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,c)}get tokenCredential(){return this.privTokenCredential}setProperty(c,o){i.Contracts.throwIfNull(o,"value"),this.privProperties.setProperty(c,o)}getProperty(c,o){return this.privProperties.getProperty(c,o)}setProxy(c,o,u,d){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],c),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],d)}setServiceProperty(c,o){const u=JSON.parse(this.privProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));u[c]=o,this.privProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[c])}enableAudioLogging(){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(r.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(r.ForceDictationPropertyName,"true")}clone(){const c=new a(this.tokenCredential);return c.privProperties=this.privProperties.clone(),c}get speechSynthesisLanguage(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,c)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,c)}get speechSynthesisOutputFormat(){return s.SpeechSynthesisOutputFormat[this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[c])}}return Gr.SpeechConfigImpl=a,Gr}var Qr={},Zg;function yE(){if(Zg)return Qr;Zg=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.SpeechTranslationConfigImpl=Qr.SpeechTranslationConfig=void 0;const r=ee(),i=he(),s=V();let h=class extends s.SpeechConfig{constructor(){super()}static fromSubscription(c,o){i.Contracts.throwIfNullOrWhitespace(c,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(o,"region");const u=new a;return u.properties.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),u.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u}static fromAuthorizationToken(c,o){i.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(o,"region");const u=new a;return u.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c),u.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u}static fromHost(c,o){i.Contracts.throwIfNull(c,"hostName");const u=new a;return u.setProperty(s.PropertyId.SpeechServiceConnection_Host,c.protocol+"//"+c.hostname+(c.port===""?"":":"+c.port)),o!==void 0&&u.setProperty(s.PropertyId.SpeechServiceConnection_Key,o),u}static fromEndpoint(c,o){i.Contracts.throwIfNull(c,"endpoint");const u=typeof o=="string"&&o.trim().length>0,d=typeof o=="object"&&o!==null&&typeof o.getToken=="function",v=typeof o=="object"&&o!==null&&typeof o.key=="string";if(o!==void 0&&!u&&!d&&!v)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let g;return typeof o=="string"?(g=new a,g.setProperty(s.PropertyId.SpeechServiceConnection_Key,o)):typeof o=="object"&&typeof o.getToken=="function"?g=new a(o):typeof o=="object"&&typeof o.key=="string"?(g=new a,g.setProperty(s.PropertyId.SpeechServiceConnection_Key,o.key)):g=new a,g.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,c.href),g}};Qr.SpeechTranslationConfig=h;class a extends h{constructor(c){super(),this.privSpeechProperties=new s.PropertyCollection,this.outputFormat=s.OutputFormat.Simple,this.privTokenCredential=c}set authorizationToken(c){i.Contracts.throwIfNullOrWhitespace(c,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}set speechRecognitionLanguage(c){i.Contracts.throwIfNullOrWhitespace(c,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,c)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return s.OutputFormat[this.privSpeechProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(c){this.privSpeechProperties.setProperty(r.OutputFormatPropertyName,s.OutputFormat[c])}get endpointId(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,c)}addTargetLanguage(c){i.Contracts.throwIfNullOrWhitespace(c,"value");const o=this.targetLanguages;o.includes(c)||(o.push(c),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,o.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(c){i.Contracts.throwIfNullOrWhitespace(c,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,c)}get region(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(c,o,u,d){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],c),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],d)}getProperty(c,o){return this.privSpeechProperties.getProperty(c,o)}setProperty(c,o){this.privSpeechProperties.setProperty(c,o)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(c,o){const u=JSON.parse(this.privSpeechProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));u[c]=o,this.privSpeechProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[c])}enableAudioLogging(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(r.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,c)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,c)}get speechSynthesisOutputFormat(){return s.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[c])}}return Qr.SpeechTranslationConfigImpl=a,Qr}var Io={},$g;function SC(){if($g)return Io;$g=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.PropertyCollection=void 0;const r=V();let i=class yC{constructor(){this.privKeys=[],this.privValues=[]}getProperty(h,a){let p;typeof h=="string"?p=h:p=r.PropertyId[h];for(let c=0;c<this.privKeys.length;c++)if(this.privKeys[c]===p)return this.privValues[c];if(a!==void 0)return String(a)}setProperty(h,a){let p;typeof h=="string"?p=h:p=r.PropertyId[h];for(let c=0;c<this.privKeys.length;c++)if(this.privKeys[c]===p){this.privValues[c]=a;return}this.privKeys.push(p),this.privValues.push(a)}clone(){const h=new yC;for(let a=0;a<this.privKeys.length;a++)h.privKeys.push(this.privKeys[a]),h.privValues.push(this.privValues[a]);return h}mergeTo(h){this.privKeys.forEach(a=>{if(h.getProperty(a,void 0)===void 0){const p=this.getProperty(a);h.setProperty(a,p)}})}get keys(){return this.privKeys}};return Io.PropertyCollection=i,Io}var yp={},em;function md(){return em||(em=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PropertyId=void 0,(function(i){i[i.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",i[i.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",i[i.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",i[i.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",i[i.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",i[i.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",i[i.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",i[i.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",i[i.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",i[i.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",i[i.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",i[i.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",i[i.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",i[i.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",i[i.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",i[i.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",i[i.Speech_SessionId=16]="Speech_SessionId",i[i.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",i[i.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",i[i.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",i[i.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",i[i.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",i[i.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",i[i.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",i[i.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",i[i.CancellationDetails_Reason=25]="CancellationDetails_Reason",i[i.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",i[i.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",i[i.SpeechServiceConnection_Url=28]="SpeechServiceConnection_Url",i[i.SpeechServiceConnection_InitialSilenceTimeoutMs=29]="SpeechServiceConnection_InitialSilenceTimeoutMs",i[i.SpeechServiceConnection_EndSilenceTimeoutMs=30]="SpeechServiceConnection_EndSilenceTimeoutMs",i[i.Speech_SegmentationSilenceTimeoutMs=31]="Speech_SegmentationSilenceTimeoutMs",i[i.Speech_SegmentationMaximumTimeMs=32]="Speech_SegmentationMaximumTimeMs",i[i.Speech_SegmentationStrategy=33]="Speech_SegmentationStrategy",i[i.Speech_StartEventSensitivity=34]="Speech_StartEventSensitivity",i[i.SpeechServiceConnection_EnableAudioLogging=35]="SpeechServiceConnection_EnableAudioLogging",i[i.SpeechServiceConnection_LanguageIdMode=36]="SpeechServiceConnection_LanguageIdMode",i[i.SpeechServiceConnection_RecognitionEndpointVersion=37]="SpeechServiceConnection_RecognitionEndpointVersion",i[i.SpeechServiceResponse_ProfanityOption=38]="SpeechServiceResponse_ProfanityOption",i[i.SpeechServiceResponse_PostProcessingOption=39]="SpeechServiceResponse_PostProcessingOption",i[i.SpeechServiceResponse_RequestWordLevelTimestamps=40]="SpeechServiceResponse_RequestWordLevelTimestamps",i[i.SpeechServiceResponse_StablePartialResultThreshold=41]="SpeechServiceResponse_StablePartialResultThreshold",i[i.SpeechServiceResponse_OutputFormatOption=42]="SpeechServiceResponse_OutputFormatOption",i[i.SpeechServiceResponse_TranslationRequestStablePartialResult=43]="SpeechServiceResponse_TranslationRequestStablePartialResult",i[i.SpeechServiceResponse_RequestWordBoundary=44]="SpeechServiceResponse_RequestWordBoundary",i[i.SpeechServiceResponse_RequestPunctuationBoundary=45]="SpeechServiceResponse_RequestPunctuationBoundary",i[i.SpeechServiceResponse_RequestSentenceBoundary=46]="SpeechServiceResponse_RequestSentenceBoundary",i[i.SpeechServiceResponse_DiarizeIntermediateResults=47]="SpeechServiceResponse_DiarizeIntermediateResults",i[i.Conversation_ApplicationId=48]="Conversation_ApplicationId",i[i.Conversation_DialogType=49]="Conversation_DialogType",i[i.Conversation_Initial_Silence_Timeout=50]="Conversation_Initial_Silence_Timeout",i[i.Conversation_From_Id=51]="Conversation_From_Id",i[i.Conversation_Conversation_Id=52]="Conversation_Conversation_Id",i[i.Conversation_Custom_Voice_Deployment_Ids=53]="Conversation_Custom_Voice_Deployment_Ids",i[i.Conversation_Speech_Activity_Template=54]="Conversation_Speech_Activity_Template",i[i.Conversation_Request_Bot_Status_Messages=55]="Conversation_Request_Bot_Status_Messages",i[i.Conversation_Agent_Connection_Id=56]="Conversation_Agent_Connection_Id",i[i.SpeechServiceConnection_Host=57]="SpeechServiceConnection_Host",i[i.ConversationTranslator_Host=58]="ConversationTranslator_Host",i[i.ConversationTranslator_Name=59]="ConversationTranslator_Name",i[i.ConversationTranslator_CorrelationId=60]="ConversationTranslator_CorrelationId",i[i.ConversationTranslator_Token=61]="ConversationTranslator_Token",i[i.PronunciationAssessment_ReferenceText=62]="PronunciationAssessment_ReferenceText",i[i.PronunciationAssessment_GradingSystem=63]="PronunciationAssessment_GradingSystem",i[i.PronunciationAssessment_Granularity=64]="PronunciationAssessment_Granularity",i[i.PronunciationAssessment_EnableMiscue=65]="PronunciationAssessment_EnableMiscue",i[i.PronunciationAssessment_Json=66]="PronunciationAssessment_Json",i[i.PronunciationAssessment_Params=67]="PronunciationAssessment_Params",i[i.WebWorkerLoadType=68]="WebWorkerLoadType",i[i.TalkingAvatarService_WebRTC_SDP=69]="TalkingAvatarService_WebRTC_SDP"})(r.PropertyId||(r.PropertyId={}))})(yp)),yp}var ko={},tm;function SE(){if(tm)return ko;tm=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.Recognizer=void 0;const r=ee(),i=ie(),s=he(),h=V();let a=class CC{constructor(c,o,u,d){this.audioConfig=c!==void 0?c:h.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=o.clone(),this.privConnectionFactory=u,this.tokenCredential=d,this.implCommonRecognizerSetup()}close(c,o){s.Contracts.throwIfDisposed(this.privDisposed),(0,i.marshalPromiseToCallbacks)(this.dispose(!0),c,o)}get internalData(){return this.privReco}async dispose(c){this.privDisposed||(this.privDisposed=!0,c&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return r.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(c){r.ServiceRecognizerBase.telemetryDataEnabled=c}implCommonRecognizerSetup(){let c=typeof window<"u"?"Browser":"Node",o="unknown",u="unknown";typeof navigator<"u"&&(c=c+"/"+navigator.platform,o=navigator.userAgent,u=navigator.appVersion);const d=this.createRecognizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(c,o,u))));this.privReco=this.createServiceRecognizer(CC.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,d)}async recognizeOnceAsyncImpl(c){s.Contracts.throwIfDisposed(this.privDisposed);const o=new i.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(c,o.resolve,o.reject);const u=await o.promise;return await this.implRecognizerStop(),u}async startContinuousRecognitionAsyncImpl(c){s.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(c,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){s.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(c,o){const u=c.getProperty(h.PropertyId.SpeechServiceConnection_Key,void 0);return u&&u!==""?new r.CognitiveSubscriptionKeyAuthentication(u):o?new r.CognitiveTokenAuthentication(async()=>{try{const d=await o.getToken("https://cognitiveservices.azure.com/.default");return(d==null?void 0:d.token)??""}catch(d){throw d}},async()=>{try{const d=await o.getToken("https://cognitiveservices.azure.com/.default");return(d==null?void 0:d.token)??""}catch(d){throw d}}):new r.CognitiveTokenAuthentication(()=>{const d=c.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)},()=>{const d=c.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)})}};return ko.Recognizer=a,ko}var bo={},Sp={},rm;function Dt(){return rm||(rm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechStartEventSensitivity=r.RecognitionMode=void 0,(function(i){i.Interactive="Interactive",i.Dictation="Dictation",i.Conversation="Conversation",i.None="None"})(r.RecognitionMode||(r.RecognitionMode={})),(function(i){i.Low="low",i.Medium="medium",i.High="high"})(r.SpeechStartEventSensitivity||(r.SpeechStartEventSensitivity={}))})(Sp)),Sp}var nm;function CE(){if(nm)return bo;nm=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.SpeechRecognizer=void 0;const r=ee(),i=Dt(),s=ie(),h=he(),a=V();let p=class PC extends a.Recognizer{constructor(o,u){const d=o;h.Contracts.throwIfNull(d,"speechConfig"),h.Contracts.throwIfNullOrWhitespace(d.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new r.SpeechConnectionFactory,o.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(o,u,d){const v=o;return u.properties.mergeTo(v.properties),new PC(o,d)}get endpointId(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){h.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,o)}get speechRecognitionLanguage(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,a.OutputFormat[a.OutputFormat.Simple])===a.OutputFormat[a.OutputFormat.Simple]?a.OutputFormat.Simple:a.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(i.RecognitionMode.Interactive),o,u)}startContinuousRecognitionAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(r.ForceDictationPropertyName,void 0)===void 0?i.RecognitionMode.Conversation:i.RecognitionMode.Dictation),o,u)}stopContinuousRecognitionAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,u)}startKeywordRecognitionAsync(o,u,d){h.Contracts.throwIfNull(o,"model"),d&&d("Not yet implemented.")}stopKeywordRecognitionAsync(o){o&&o()}close(o,u){h.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,s.marshalPromiseToCallbacks)(this.dispose(!0),o,u)}async dispose(o){this.privDisposedRecognizer||(o&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(o))}createRecognizerConfig(o){return new r.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,u,d,v){const g=d;return new r.SpeechServiceRecognizer(o,u,g,v,this)}};return bo.SpeechRecognizer=p,bo}var Mo={},Oo={},Yr={},im;function RC(){if(im)return Yr;im=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.ConnectionMessageImpl=Yr.ConnectionMessage=void 0;const r=gt(),i=ie(),s=SC(),h=md();let a=class{};Yr.ConnectionMessage=a;class p{constructor(o){this.privConnectionMessage=o,this.privProperties=new s.PropertyCollection,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]&&this.privProperties.setProperty(h.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(u=>{this.privProperties.setProperty(u,this.privConnectionMessage.headers[u])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(o=>o.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===i.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===i.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Yr.ConnectionMessageImpl=p,Yr}var om;function wC(){if(om)return Oo;om=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.Connection=void 0;const r=ee(),i=ie(),s=RC(),h=he(),a=V();let p=class cd{static fromRecognizer(o){const u=o.internalData,d=new cd;return d.privInternalData=u,d.setupEvents(),d}static fromSynthesizer(o){const u=o.internalData,d=new cd;return d.privInternalData=u,d.setupEvents(),d}openConnection(o,u){(0,i.marshalPromiseToCallbacks)(this.privInternalData.connect(),o,u)}closeConnection(o,u){if(this.privInternalData instanceof r.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,i.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),o,u)}setMessageProperty(o,u,d){if(h.Contracts.throwIfNullOrWhitespace(u,"propertyName"),this.privInternalData instanceof r.ServiceRecognizerBase){if(o.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{const v=this.privInternalData.speechContext.getContext();v[u]=d}}else if(this.privInternalData instanceof r.SynthesisAdapterBase){if(o.toLowerCase()!=="speech.config"&&o.toLowerCase()!=="synthesis.context")throw new Error("Only speech.config and synthesis.context message paths are currently supported for synthesizer");if(o.toLowerCase()==="speech.config"){if(u.toLowerCase()!=="context")throw new Error("Only context property is currently supported for speech.config message path for synthesizer");this.privInternalData.synthesizerConfig.setContextFromJson(d)}else this.privInternalData.synthesisContext.setSection(u,d)}}sendMessageAsync(o,u,d,v){(0,i.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(o,u),d,v)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(o=>{o.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new a.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new a.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new a.ConnectionMessageEventArgs(new s.ConnectionMessageImpl(o.message))):o.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new a.ConnectionMessageEventArgs(new s.ConnectionMessageImpl(o.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(o=>{this.receivedServiceMessage&&this.receivedServiceMessage(new a.ServiceEventArgs(o.jsonString,o.name))})}};return Oo.Connection=p,Oo}var sm;function PE(){if(sm)return Mo;sm=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.TranslationRecognizer=void 0;const r=ee(),i=Dt(),s=ie(),h=wC(),a=he(),p=V();let c=class EC extends p.Recognizer{constructor(u,d,v){const g=u;a.Contracts.throwIfNull(g,"speechConfig"),super(d,g.properties,v||new r.TranslationConnectionFactory,u.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&a.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice),p.PropertyId[p.PropertyId.SpeechServiceConnection_TranslationVoice]),a.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages),p.PropertyId[p.PropertyId.SpeechServiceConnection_TranslationToLanguages]),a.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage),p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(u,d,v){const g=u;return d.properties.mergeTo(g.properties),d.properties.getProperty(p.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===r.AutoDetectSourceLanguagesOpenRangeOptionName&&g.properties.setProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new EC(u,v)}get speechRecognitionLanguage(){return a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(u){this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,u)}recognizeOnceAsync(u,d){a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,s.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(i.RecognitionMode.Interactive),u,d)}startContinuousRecognitionAsync(u,d){(0,s.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),u,d)}stopContinuousRecognitionAsync(u,d){(0,s.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),u,d)}removeTargetLanguage(u){if(a.Contracts.throwIfNullOrUndefined(u,"language to be removed"),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const d=this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),v=d.indexOf(u);v>-1&&(d.splice(v,1),this.properties.setProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,d.join(",")),this.updateLanguages(d))}}addTargetLanguage(u){a.Contracts.throwIfNullOrUndefined(u,"language to be added");let d=[];this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(d=this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),d.includes(u)||(d.push(u),this.properties.setProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,d.join(",")))):(this.properties.setProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,u),d=[u]),this.updateLanguages(d)}close(u,d){a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,s.marshalPromiseToCallbacks)(this.dispose(!0),u,d)}onConnection(){}async dispose(u){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,u&&(await this.implRecognizerStop(),await super.dispose(u)))}createRecognizerConfig(u){return new r.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,d,v,g){const m=v;return new r.TranslationServiceRecognizer(u,d,m,g,this)}updateLanguages(u){const d=h.Connection.fromRecognizer(this);d&&(d.setMessageProperty("speech.context","translationcontext",{to:u}),d.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:u})))}};return Mo.TranslationRecognizer=c,Mo}var Do={},am;function RE(){if(am)return Do;am=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.Translations=void 0;const r=V();let i=class{constructor(){this.privMap=new r.PropertyCollection}get languages(){return this.privMap.keys}get(h,a){return this.privMap.getProperty(h,a)}set(h,a){this.privMap.setProperty(h,a)}};return Do.Translations=i,Do}var Cp={},cm;function wE(){return cm||(cm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NoMatchReason=void 0,(function(i){i[i.NotRecognized=0]="NotRecognized",i[i.InitialSilenceTimeout=1]="InitialSilenceTimeout",i[i.InitialBabbleTimeout=2]="InitialBabbleTimeout"})(r.NoMatchReason||(r.NoMatchReason={}))})(Cp)),Cp}var No={},um;function EE(){if(um)return No;um=1,Object.defineProperty(No,"__esModule",{value:!0}),No.NoMatchDetails=void 0;const r=ee(),i=V();let s=class TC{constructor(a){this.privReason=a}static fromResult(a){const p=r.SimpleSpeechPhrase.fromJSON(a.json,0);let c=i.NoMatchReason.NotRecognized;switch(p.RecognitionStatus){case r.RecognitionStatus.BabbleTimeout:c=i.NoMatchReason.InitialBabbleTimeout;break;case r.RecognitionStatus.InitialSilenceTimeout:c=i.NoMatchReason.InitialSilenceTimeout;break;default:c=i.NoMatchReason.NotRecognized;break}return new TC(c)}get reason(){return this.privReason}};return No.NoMatchDetails=s,No}var zo={},lm;function TE(){if(lm)return zo;lm=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.TranslationRecognitionCanceledEventArgs=void 0;let r=class{constructor(s,h,a,p,c){this.privCancelReason=h,this.privErrorDetails=a,this.privResult=c,this.privSessionId=s,this.privErrorCode=p}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return zo.TranslationRecognitionCanceledEventArgs=r,zo}var jo={},pm;function AC(){if(pm)return jo;pm=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.CancellationDetailsBase=void 0;let r=class{constructor(s,h,a){this.privReason=s,this.privErrorDetails=h,this.privErrorCode=a}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};return jo.CancellationDetailsBase=r,jo}var Lo={},dm;function AE(){if(dm)return Lo;dm=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.CancellationDetails=void 0;const r=ee(),i=AC(),s=V();let h=class _C extends i.CancellationDetailsBase{constructor(p,c,o){super(p,c,o)}static fromResult(p){let c=s.CancellationReason.Error,o=s.CancellationErrorCode.NoError;if(p instanceof s.RecognitionResult&&p.json){const u=r.SimpleSpeechPhrase.fromJSON(p.json,0);c=r.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus)}return p.properties&&(o=s.CancellationErrorCode[p.properties.getProperty(r.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new _C(c,p.errorDetails||r.EnumTranslation.implTranslateErrorDetails(o),o)}};return Lo.CancellationDetails=h,Lo}var Pp={},hm;function _E(){return hm||(hm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationErrorCode=void 0,(function(i){i[i.NoError=0]="NoError",i[i.AuthenticationFailure=1]="AuthenticationFailure",i[i.BadRequestParameters=2]="BadRequestParameters",i[i.TooManyRequests=3]="TooManyRequests",i[i.ConnectionFailure=4]="ConnectionFailure",i[i.ServiceTimeout=5]="ServiceTimeout",i[i.ServiceError=6]="ServiceError",i[i.RuntimeError=7]="RuntimeError",i[i.Forbidden=8]="Forbidden"})(r.CancellationErrorCode||(r.CancellationErrorCode={}))})(Pp)),Pp}var xo={},vm;function IE(){if(vm)return xo;vm=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.ConnectionEventArgs=void 0;const r=V();let i=class extends r.SessionEventArgs{};return xo.ConnectionEventArgs=i,xo}var qo={},fm;function kE(){if(fm)return qo;fm=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.ServiceEventArgs=void 0;const r=V();let i=class extends r.SessionEventArgs{constructor(h,a,p){super(p),this.privJsonResult=h,this.privEventName=a}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return qo.ServiceEventArgs=i,qo}var Bo={},gm;function bE(){if(gm)return Bo;gm=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.PhraseListGrammar=void 0;const r=he();let i=class IC{constructor(h){this.privGrammerBuilder=h.dynamicGrammar}static fromRecognizer(h){const a=h.internalData;return new IC(a)}addPhrase(h){this.privGrammerBuilder.addPhrase(h)}addPhrases(h){this.privGrammerBuilder.addPhrase(h)}clear(){this.privGrammerBuilder.clearPhrases()}setWeight(h){r.Contracts.throwIfNumberOutOfRange(h,"weight",0,2),this.privGrammerBuilder.setWeight(h)}};return Bo.PhraseListGrammar=i,Bo}var Xr={},mm;function yd(){if(mm)return Xr;mm=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.DialogServiceConfigImpl=Xr.DialogServiceConfig=void 0;const r=he(),i=V();let s=class{constructor(){}set applicationId(p){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};Xr.DialogServiceConfig=s;class h extends s{constructor(){super(),this.privSpeechConfig=new i.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(p){r.Contracts.throwIfNullOrWhitespace(p,"value"),this.privSpeechConfig.speechRecognitionLanguage=p}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(p){this.privSpeechConfig.outputFormat=p}setProperty(p,c){this.privSpeechConfig.setProperty(p,c)}getProperty(p,c){return this.privSpeechConfig.getProperty(p)}setProxy(p,c,o,u){this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyHostName,p),this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyPort,`${c}`),o&&this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyUserName,o),u&&this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyPassword,u)}setServiceProperty(p,c,o){this.privSpeechConfig.setServiceProperty(p,c)}close(){}}return Xr.DialogServiceConfigImpl=h,Xr}var Fo={},ym;function ME(){if(ym)return Fo;ym=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.BotFrameworkConfig=void 0;const r=he(),i=yd(),s=V();let h=class extends i.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(p,c,o){r.Contracts.throwIfNullOrWhitespace(p,"subscription"),r.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i.DialogServiceConfigImpl;return u.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(s.PropertyId.SpeechServiceConnection_Key,p),u.setProperty(s.PropertyId.SpeechServiceConnection_Region,c),o&&u.setProperty(s.PropertyId.Conversation_ApplicationId,o),u}static fromAuthorizationToken(p,c,o){r.Contracts.throwIfNullOrWhitespace(p,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i.DialogServiceConfigImpl;return u.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,p),u.setProperty(s.PropertyId.SpeechServiceConnection_Region,c),o&&u.setProperty(s.PropertyId.Conversation_ApplicationId,o),u}static fromHost(p,c,o){r.Contracts.throwIfNullOrUndefined(p,"host");const u=p instanceof URL?p:new URL(`wss://${p}.convai.speech.azure.us`);r.Contracts.throwIfNullOrUndefined(u,"resolvedHost");const d=new i.DialogServiceConfigImpl;return d.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),d.setProperty(s.PropertyId.SpeechServiceConnection_Host,u.toString()),c!==void 0&&d.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),d}static fromEndpoint(p,c){r.Contracts.throwIfNull(p,"endpoint");const o=new i.DialogServiceConfigImpl;return o.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,p.toString()),c!==void 0&&o.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),o}};return Fo.BotFrameworkConfig=h,Fo}var Uo={},Sm;function OE(){if(Sm)return Uo;Sm=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.CustomCommandsConfig=void 0;const r=he(),i=yd(),s=V();let h=class extends i.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(p,c,o){r.Contracts.throwIfNullOrWhitespace(p,"applicationId"),r.Contracts.throwIfNullOrWhitespace(c,"subscription"),r.Contracts.throwIfNullOrWhitespace(o,"region");const u=new i.DialogServiceConfigImpl;return u.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(s.PropertyId.Conversation_ApplicationId,p),u.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),u.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u}static fromAuthorizationToken(p,c,o){r.Contracts.throwIfNullOrWhitespace(p,"applicationId"),r.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(o,"region");const u=new i.DialogServiceConfigImpl;return u.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(s.PropertyId.Conversation_ApplicationId,p),u.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c),u.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u}set applicationId(p){r.Contracts.throwIfNullOrWhitespace(p,"value"),this.setProperty(s.PropertyId.Conversation_ApplicationId,p)}get applicationId(){return this.getProperty(s.PropertyId.Conversation_ApplicationId)}};return Uo.CustomCommandsConfig=h,Uo}var Wo={},Ho={},Vo={},Ko={},Cm;function Tr(){if(Cm)return Ko;Cm=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.QueryParameterNames=void 0;let r=class{};return Ko.QueryParameterNames=r,r.BotId="botid",r.CustomSpeechDeploymentId="cid",r.CustomVoiceDeploymentId="deploymentId",r.EnableAudioLogging="storeAudio",r.EnableLanguageId="lidEnabled",r.EnableWordLevelTimestamps="wordLevelTimestamps",r.EndSilenceTimeoutMs="endSilenceTimeoutMs",r.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",r.SegmentationMaximumTimeMs="segmentationMaximumTimeMs",r.SegmentationStrategy="segmentationStrategy",r.Format="format",r.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",r.Language="language",r.Profanity="profanity",r.RequestBotStatusMessages="enableBotMessageStatus",r.StableIntermediateThreshold="stableIntermediateThreshold",r.StableTranslation="stableTranslation",r.TestHooks="testhooks",r.Postprocessing="postprocessing",r.CtsMeetingId="meetingId",r.CtsDeviceId="deviceId",r.CtsIsParticipant="isParticipant",r.EnableAvatar="enableTalkingAvatar",Ko}var Pm;function $t(){if(Pm)return Vo;Pm=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.ConnectionFactoryBase=void 0;const r=ee(),i=ie(),s=V(),h=Tr();let a=class{static getHostSuffix(c){if(c){if(c.toLowerCase().startsWith("china"))return".azure.cn";if(c.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(c,o,u){new Map([[s.PropertyId.Speech_SegmentationSilenceTimeoutMs,h.QueryParameterNames.SegmentationSilenceTimeoutMs],[s.PropertyId.SpeechServiceConnection_EnableAudioLogging,h.QueryParameterNames.EnableAudioLogging],[s.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,h.QueryParameterNames.EndSilenceTimeoutMs],[s.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,h.QueryParameterNames.InitialSilenceTimeoutMs],[s.PropertyId.SpeechServiceResponse_PostProcessingOption,h.QueryParameterNames.Postprocessing],[s.PropertyId.SpeechServiceResponse_ProfanityOption,h.QueryParameterNames.Profanity],[s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,h.QueryParameterNames.EnableWordLevelTimestamps],[s.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,h.QueryParameterNames.StableIntermediateThreshold]]).forEach((g,m)=>{this.setUrlParameter(m,g,c,o,u)});const v=JSON.parse(c.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(v).forEach(g=>{o[g]=v[g]})}setUrlParameter(c,o,u,d,v){const g=u.parameters.getProperty(c,void 0);g&&(!v||v.search(o)===-1)&&(d[o]=g.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(c){const o=new URL(c);o.protocol="https:",o.port="443",o.searchParams.append("GenerateRedirectResponse","true");const d=o.toString();i.Events.instance.onEvent(new i.ConnectionRedirectEvent("",d,void 0,"ConnectionFactoryBase: redirectUrl request"));const v=await fetch(d);if(v.status!==200)return c;const g=await v.text();i.Events.instance.onEvent(new i.ConnectionRedirectEvent("",g,c,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(g.trim()).toString()}catch{return c}}};return Vo.ConnectionFactoryBase=a,Vo}var Rm;function DE(){if(Rm)return Ho;Rm=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.DialogConnectionFactory=void 0;const r=ct(),i=ee(),s=V(),h=$t(),a=ee(),p=gt(),c=Tr();class o extends h.ConnectionFactoryBase{create(d,v,g){const m=d.parameters.getProperty(s.PropertyId.Conversation_ApplicationId,""),y=d.parameters.getProperty(s.PropertyId.Conversation_DialogType),w=d.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region),P=d.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),E=d.parameters.getProperty(s.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),C={};C[p.HeaderNames.ConnectionId]=g,C[c.QueryParameterNames.Format]=d.parameters.getProperty(i.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase(),C[c.QueryParameterNames.Language]=P,C[c.QueryParameterNames.RequestBotStatusMessages]=E,m&&(C[c.QueryParameterNames.BotId]=m,y===s.DialogServiceConfig.DialogTypes.CustomCommands&&(C[p.HeaderNames.CustomCommandsAppId]=m));const T=y===s.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",A=y===s.DialogServiceConfig.DialogTypes.CustomCommands?"v1":y===s.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",M={};v.token!=null&&v.token!==""&&(M[v.headerName]=v.token);let j=d.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,"");if(!j){const K=h.ConnectionFactoryBase.getHostSuffix(w),U=d.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,`wss://${w}.${o.BaseUrl}${K}`);j=`${U.endsWith("/")?U:U+"/"}${T}${o.ApiKey}/${A}`}this.setCommonUrlParams(d,C,j);const L=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(j,C,M,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(d),L,g))}}return Ho.DialogConnectionFactory=o,o.ApiKey="api",o.BaseUrl="convai.speech",Ho}var wm;function NE(){if(wm)return Wo;wm=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.DialogServiceConnector=void 0;const r=DE(),i=ee(),s=Dt(),h=ie(),a=he(),p=V(),c=md();let o=class extends p.Recognizer{constructor(d,v){const g=d;a.Contracts.throwIfNull(d,"dialogConfig"),super(v,g.properties,new r.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=g.properties.clone();const m=this.buildAgentConfig();this.privReco.agentConfig.set(m)}connect(d,v){(0,h.marshalPromiseToCallbacks)(this.privReco.connect(),d,v)}disconnect(d,v){(0,h.marshalPromiseToCallbacks)(this.privReco.disconnect(),d,v)}get authorizationToken(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(d){a.Contracts.throwIfNullOrWhitespace(d,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,d)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(c.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(d){this.properties.setProperty(c.PropertyId.Conversation_Speech_Activity_Template,d)}listenOnceAsync(d,v){if(this.isTurnComplete){a.Contracts.throwIfDisposed(this.privIsDisposed);const m=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const y=new h.Deferred;await this.privReco.recognize(s.RecognitionMode.Conversation,y.resolve,y.reject);const w=await y.promise;return await this.implRecognizerStop(),w})();m.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,h.marshalPromiseToCallbacks)(m.finally(()=>{this.isTurnComplete=!0}),d,v)}}sendActivityAsync(d,v,g){(0,h.marshalPromiseToCallbacks)(this.privReco.sendMessage(d),v,g)}close(d,v){a.Contracts.throwIfDisposed(this.privIsDisposed),(0,h.marshalPromiseToCallbacks)(this.dispose(!0),d,v)}async dispose(d){this.privIsDisposed||d&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(d))}createRecognizerConfig(d){return new i.RecognizerConfig(d,this.privProperties)}createServiceRecognizer(d,v,g,m){const y=g;return new i.DialogServiceAdapter(d,v,y,m,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(c.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(c.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(c.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return Wo.DialogServiceConnector=o,Wo}var Jo={},Em;function zE(){if(Em)return Jo;Em=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.ActivityReceivedEventArgs=void 0;let r=class{constructor(s,h){this.privActivity=s,this.privAudioStream=h}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};return Jo.ActivityReceivedEventArgs=r,Jo}var Go={},Qo={},Tm;function jE(){if(Tm)return Qo;Tm=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.TurnStatusResponsePayload=void 0;class r{constructor(s){this.privMessageStatusResponse=JSON.parse(s)}static fromJSON(s){return new r(s)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}return Qo.TurnStatusResponsePayload=r,Qo}var Am;function LE(){if(Am)return Go;Am=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.TurnStatusReceivedEventArgs=void 0;const r=jE();let i=class{constructor(h){this.privTurnStatus=r.TurnStatusResponsePayload.fromJSON(h)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};return Go.TurnStatusReceivedEventArgs=i,Go}var Rp={},_m;function xE(){return _m||(_m=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ServicePropertyChannel=void 0,(function(i){i[i.UriQueryParameter=0]="UriQueryParameter"})(r.ServicePropertyChannel||(r.ServicePropertyChannel={}))})(Rp)),Rp}var wp={},Im;function qE(){return Im||(Im=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ProfanityOption=void 0,(function(i){i[i.Masked=0]="Masked",i[i.Removed=1]="Removed",i[i.Raw=2]="Raw"})(r.ProfanityOption||(r.ProfanityOption={}))})(wp)),wp}var Yo={},km;function BE(){if(km)return Yo;km=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.BaseAudioPlayer=void 0;const r=qt(),i=V(),s=ln();let h=class{constructor(p){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,p===void 0&&(p=i.AudioStreamFormat.getDefaultInputFormat()),this.init(p)}playAudioSample(p,c,o){try{this.ensureInitializedContext();const u=this.formatAudioData(p),d=new Float32Array(this.samples.length+u.length);d.set(this.samples,0),d.set(u,this.samples.length),this.samples=d,c&&c()}catch(u){o&&o(u)}}stopAudio(p,c){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{p&&p()},o=>{c&&c(o)}),this.audioContext=null)}init(p){this.audioFormat=p,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const p=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},p)}}createAudioContext(){this.audioContext=s.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(p){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(p),128);case 16:return this.formatArrayBuffer(new Int16Array(p),32768);case 32:return this.formatArrayBuffer(new Int32Array(p),2147483648);default:throw new r.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(p,c){const o=new Float32Array(p.length);for(let u=0;u<p.length;u++)o[u]=p[u]/c;return o}updateAudioBuffer(){if(this.samples.length===0)return;const p=this.audioFormat.channels,c=this.audioContext.createBufferSource(),o=this.samples.length/p,u=this.audioContext.createBuffer(p,o,this.audioFormat.samplesPerSec);for(let d=0;d<p;d++){let v=d;const g=u.getChannelData(d);for(let m=0;m<this.samples.length;m++,v+=p)g[m]=this.samples[v]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),c.buffer=u,c.connect(this.gainNode),c.start(this.startTime),this.startTime+=u.duration,this.samples=new Float32Array}async playAudio(p){this.audioContext===null&&this.createAudioContext();const c=this.audioContext.createBufferSource(),o=this.audioContext.destination;await this.audioContext.decodeAudioData(p,u=>{c.buffer=u,c.connect(o),c.start(0)})}};return Yo.BaseAudioPlayer=h,Yo}var Xo={},bm;function FE(){if(bm)return Xo;bm=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.ConnectionMessageEventArgs=void 0;let r=class{constructor(s){this.privConnectionMessage=s}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};return Xo.ConnectionMessageEventArgs=r,Xo}var Zo={},Ep={},Mm;function kC(){return Mm||(Mm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LanguageIdMode=void 0,(function(i){i[i.AtStart=0]="AtStart",i[i.Continuous=1]="Continuous"})(r.LanguageIdMode||(r.LanguageIdMode={}))})(Ep)),Ep}var Om;function UE(){if(Om)return Zo;Om=1,Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.AutoDetectSourceLanguageConfig=void 0;const r=ee(),i=he(),s=V(),h=kC();let a=class Jc{constructor(){this.privProperties=new s.PropertyCollection,this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=h.LanguageIdMode.AtStart}static fromOpenRange(){const c=new Jc;return c.properties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.AutoDetectSourceLanguagesOpenRangeOptionName),c.properties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),c}static fromLanguages(c){i.Contracts.throwIfArrayEmptyOrWhitespace(c,"languages");const o=new Jc;return o.properties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),o}static fromSourceLanguageConfigs(c){if(c.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const o=new Jc,u=[];return c.forEach(d=>{if(u.push(d.language),d.endpointId!==void 0&&d.endpointId!==""){const v=d.language+s.PropertyId.SpeechServiceConnection_EndpointId.toString();o.properties.setProperty(v,d.endpointId)}}),o.properties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,u.join()),o}get properties(){return this.privProperties}set mode(c){c===h.LanguageIdMode.Continuous?(this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=c}};return Zo.AutoDetectSourceLanguageConfig=a,Zo}var $o={},Dm;function WE(){if(Dm)return $o;Dm=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.AutoDetectSourceLanguageResult=void 0;const r=he();let i=class ud{constructor(h,a){r.Contracts.throwIfNullOrUndefined(h,"language"),r.Contracts.throwIfNullOrUndefined(a,"languageDetectionConfidence"),this.privLanguage=h,this.privLanguageDetectionConfidence=a}static fromResult(h){return new ud(h.language,h.languageDetectionConfidence)}static fromConversationTranscriptionResult(h){return new ud(h.language,h.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};return $o.AutoDetectSourceLanguageResult=i,$o}var es={},Nm;function HE(){if(Nm)return es;Nm=1,Object.defineProperty(es,"__esModule",{value:!0}),es.SourceLanguageConfig=void 0;const r=he();let i=class bC{constructor(h,a){r.Contracts.throwIfNullOrUndefined(h,"language"),this.privLanguage=h,this.privEndpointId=a}static fromLanguage(h,a){return new bC(h,a)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};return es.SourceLanguageConfig=i,es}var Tp={},Zr={},zm;function MC(){if(zm)return Zr;zm=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.ConversationImpl=Zr.Conversation=void 0;const r=ee(),i=ie(),s=he(),h=V();let a=class{constructor(){}static createConversationAsync(o,u,d,v){s.Contracts.throwIfNullOrUndefined(o,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(o.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!o.subscriptionKey&&!o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceAuthorization_Token])&&s.Contracts.throwIfNullOrUndefined(o.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let g,m,y;return typeof u=="string"?(g=new p(o,u),(0,i.marshalPromiseToCallbacks)((async()=>{})(),d,v)):(g=new p(o),m=u,y=d,g.createConversationAsync((()=>{m&&m()}),w=>{y&&y(w)})),g}};Zr.Conversation=a;class p extends a{constructor(o,u){if(super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=g=>{var m;this.privIsConnected=!0;try{(m=this.privConversationTranslator)!=null&&m.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,g)}catch{}},this.onDisconnected=g=>{var m;try{(m=this.privConversationTranslator)!=null&&m.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,g)}catch{}finally{this.close(!1)}},this.onCanceled=(g,m)=>{var y;try{(y=this.privConversationTranslator)!=null&&y.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,m)}catch{}},this.onParticipantUpdateCommandReceived=(g,m)=>{try{const y=this.privParticipants.getParticipant(m.id);if(y!==void 0){switch(m.key){case r.ConversationTranslatorCommandTypes.changeNickname:y.displayName=m.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:y.isUsingTts=m.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:y.profanity=m.value;break;case r.ConversationTranslatorCommandTypes.setMute:y.isMuted=m.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:y.translateToLanguages=m.value;break}this.privParticipants.addOrUpdateParticipant(y),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,[this.toParticipant(y)],m.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(g,m)=>{try{this.privParticipants.participants.forEach(y=>y.isMuted=y.isHost?!1:m.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,this.toParticipants(!1),m.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(g,m)=>{try{const y=this.privParticipants.addOrUpdateParticipant(m.participant);y!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,[this.toParticipant(y)],m.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(g,m)=>{try{const y=this.privParticipants.getParticipant(m.participant.id);y!==void 0&&(this.privParticipants.deleteParticipant(m.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.LeftConversation,[this.toParticipant(y)],m.sessionId)))}catch{}},this.onTranslationReceived=(g,m)=>{try{switch(m.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break}}catch{}},this.onParticipantsListReceived=(g,m)=>{var y;try{if(m.sessionToken!==void 0&&m.sessionToken!==null&&(this.privRoom.token=m.sessionToken),this.privParticipants.participants=[...m.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),m.sessionId)),this.me.isHost){const w=(y=this.privConversationTranslator)==null?void 0:y.properties.getProperty(h.PropertyId.ConversationTranslator_Name);w!==void 0&&w.length>0&&w!==this.me.displayName&&this.changeNicknameAsync(w)}}catch{}},this.onConversationExpiration=(g,m)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,m)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new h.PropertyCollection,this.privManager=new r.ConversationManager,o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage]),u)this.privConversationId=u;else{o.targetLanguages.length===0&&o.addTargetLanguage(this.privLanguage),o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceResponse_ProfanityOption])||o.setProfanity(h.ProfanityOption.Masked);let m=o.getProperty(h.PropertyId[h.PropertyId.ConversationTranslator_Name]);m==null&&(m="Host"),s.Contracts.throwIfNullOrTooLong(m,"nickname",50),s.Contracts.throwIfNullOrTooShort(m,"nickname",2),o.setProperty(h.PropertyId[h.PropertyId.ConversationTranslator_Name],m)}this.privConfig=o;const v=o;s.Contracts.throwIfNull(v,"speechConfig"),this.privProperties=v.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,u;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(u=this.privParticipants.me)==null?void 0:u.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const o=this.conversationId,u=this.participants.map(g=>({id:g.id,preferredLanguage:g.preferredLanguage,voice:g.voice})),d={};for(const g of r.ConversationConnectionConfig.transcriptionEventKeys){const m=this.properties.getProperty(g,"");m!==""&&(d[g]=m)}return{id:o,participants:u,conversationProperties:d}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){s.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}set conversationTranslator(o){this.privConversationTranslator=o}onToken(o){this.privConversationTranslator.onToken(o)}createConversationAsync(o,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,(d=>{d||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=d,this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}startConversationAsync(o,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=r.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}addParticipantAsync(o,u,d){s.Contracts.throwIfNullOrUndefined(o,"Participant"),(0,i.marshalPromiseToCallbacks)(this.addParticipantImplAsync(o),u,d)}joinConversationAsync(o,u,d,v,g){try{s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,(m=>{s.Contracts.throwIfNullOrUndefined(m,this.privErrors.permissionDeniedConnect),this.privRoom=m,this.privConfig.authorizationToken=m.cognitiveSpeechAuthToken,v&&v(m.cognitiveSpeechAuthToken)}),(m=>{this.handleError(m,g)}))}catch(m){this.handleError(m,g)}}deleteConversationAsync(o,u){(0,i.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),o,u)}async deleteConversationImplAsync(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(o,u){(0,i.marshalPromiseToCallbacks)(this.endConversationImplAsync(),o,u)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteAllParticipantsAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteParticipantAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),(()=>{this.handleCallback(u,d)}),(g=>{this.handleError(g,d)}))}catch(v){this.handleError(v,d)}}removeParticipantAsync(o,u,d){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))(0,i.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(o),u,d);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),d);let v="";typeof o=="string"?v=o:o.hasOwnProperty("id")?v=o.id:o.hasOwnProperty("userId")&&(v=o.userId),s.Contracts.throwIfNullOrWhitespace(v,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(m=>m.id===v)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(v),(()=>{this.handleCallback(u,d)}),(m=>{this.handleError(m,d)}))}}catch(v){this.handleError(v,d)}}unlockConversationAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteAllParticipantsAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteParticipantAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),(()=>{this.handleCallback(u,d)}),(g=>{this.handleError(g,d)}))}catch(v){this.handleError(v,d)}}sendTextMessageAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}setTranslatedLanguagesAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}changeNicknameAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const d=this.conversationInfo;return d.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(d,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const u=this.conversationInfo;return u.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(u,"leave")}async close(o){var u;try{this.privIsConnected=!1,await((u=this.privConversationRecognizer)==null?void 0:u.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(d){throw d}o&&this.dispose()}handleCallback(o,u){if(o){try{o()}catch(d){u&&u(d)}o=void 0}}handleError(o,u){if(u)if(o instanceof Error){const d=o;u(d.name+": "+d.message)}else u(o)}toParticipants(o){const u=this.privParticipants.participants.map(d=>this.toParticipant(d));return o?u:u.filter(d=>d.isHost===!1)}toParticipant(o){return new h.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,u){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(o,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:r.ConversationTranslatorMessageTypes.instantMessage})}}return Zr.ConversationImpl=p,Zr}var ts={},jm;function VE(){if(jm)return ts;jm=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.ConversationCommon=void 0;let r=class{constructor(s){this.privAudioConfig=s}handleCallback(s,h){if(s){try{s()}catch(a){h&&h(a)}s=void 0}}handleError(s,h){if(h)if(s instanceof Error){const a=s;h(a.name+": "+a.message)}else h(s)}};return ts.ConversationCommon=r,ts}var rs={},Lm;function KE(){if(Lm)return rs;Lm=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.ConversationExpirationEventArgs=void 0;const r=V();let i=class extends r.SessionEventArgs{constructor(h,a){super(a),this.privExpirationTime=h}get expirationTime(){return this.privExpirationTime}};return rs.ConversationExpirationEventArgs=i,rs}var ns={},xm;function JE(){if(xm)return ns;xm=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.ConversationParticipantsChangedEventArgs=void 0;const r=V();let i=class extends r.SessionEventArgs{constructor(h,a,p){super(p),this.privReason=h,this.privParticipant=a}get reason(){return this.privReason}get participants(){return this.privParticipant}};return ns.ConversationParticipantsChangedEventArgs=i,ns}var is={},qm;function GE(){if(qm)return is;qm=1,Object.defineProperty(is,"__esModule",{value:!0}),is.ConversationTranslationCanceledEventArgs=void 0;const r=Ta();let i=class extends r.CancellationEventArgsBase{};return is.ConversationTranslationCanceledEventArgs=i,is}var os={},Bm;function QE(){if(Bm)return os;Bm=1,Object.defineProperty(os,"__esModule",{value:!0}),os.ConversationTranslationEventArgs=void 0;const r=V();let i=class extends r.RecognitionEventArgs{constructor(h,a,p){super(a,p),this.privResult=h}get result(){return this.privResult}};return os.ConversationTranslationEventArgs=i,os}var ss={},Fm;function YE(){if(Fm)return ss;Fm=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.ConversationTranslationResult=void 0;const r=mC();let i=class extends r.TranslationRecognitionResult{constructor(h,a,p,c,o,u,d,v,g,m,y){super(a,c,o,u,d,v,void 0,void 0,g,m,y),this.privId=h,this.privOrigLang=p}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return ss.ConversationTranslationResult=i,ss}var Ap={},as={},cs={},Um;function OC(){if(Um)return cs;Um=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.StringUtils=void 0;let r=class{static formatString(s,h){if(!s)return"";if(!h)return s;let a="",p="";const c=d=>{a+=d},o=d=>{p+=d};let u=c;for(let d=0;d<s.length;d++){const v=s[d],g=d+1<s.length?s[d+1]:"";switch(v){case"{":g==="{"?(u("{"),d++):u=o;break;case"}":g==="}"?(u("}"),d++):(h.hasOwnProperty(p)&&(a+=h[p]),u=c,p="");break;default:u(v);break}}return a}};return cs.StringUtils=r,cs}var Wm;function XE(){if(Wm)return as;Wm=1,Object.defineProperty(as,"__esModule",{value:!0}),as.ConversationTranslatorConnectionFactory=void 0;const r=ct(),i=OC(),s=he(),h=V(),a=gt(),p=Tr(),c=$t(),o=ee();let u=class DC extends c.ConnectionFactoryBase{constructor(v){super(),s.Contracts.throwIfNullOrUndefined(v,"convGetter"),this.privConvGetter=v}create(v,g,m){const y=v.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",w=this.privConvGetter().room,P=w.cognitiveSpeechRegion||v.parameters.getProperty(h.PropertyId.SpeechServiceConnection_Region,""),E={hostSuffix:c.ConnectionFactoryBase.getHostSuffix(P),path:DC.CTS_VIRT_MIC_PATH,region:encodeURIComponent(P)};E[p.QueryParameterNames.Language]=encodeURIComponent(v.parameters.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage,"")),E[p.QueryParameterNames.CtsMeetingId]=encodeURIComponent(w.roomId),E[p.QueryParameterNames.CtsDeviceId]=encodeURIComponent(w.participantId),E[p.QueryParameterNames.CtsIsParticipant]=w.isHost?"":"&"+p.QueryParameterNames.CtsIsParticipant;let C="";const T={},A={};if(y){C=v.parameters.getProperty(h.PropertyId.SpeechServiceConnection_Endpoint),C||(C="wss://"+v.parameters.getProperty(h.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),C=i.StringUtils.formatString(C,E);const j=new URL(C);j.searchParams.forEach((K,U)=>{T[U]=K}),new o.TranscriberConnectionFactory().setQueryParams(T,v,C),T[p.QueryParameterNames.CtsMeetingId]=E[p.QueryParameterNames.CtsMeetingId],T[p.QueryParameterNames.CtsDeviceId]=E[p.QueryParameterNames.CtsDeviceId],w.isHost||(T[p.QueryParameterNames.CtsIsParticipant]=""),p.QueryParameterNames.Format in T||(T[p.QueryParameterNames.Format]="simple"),j.searchParams.forEach((K,U)=>{j.searchParams.set(U,T[U]),delete T[U]}),C=j.toString()}else{const j=new o.TranslationConnectionFactory;C=j.getEndpointUrl(v,!0),C=i.StringUtils.formatString(C,E),j.setQueryParams(T,v,C)}A[a.HeaderNames.ConnectionId]=m,A[r.RestConfigBase.configParams.token]=w.token,g.token&&(A[g.headerName]=g.token);const M=v.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new r.WebsocketConnection(C,T,A,new o.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(v),M,m))}};return as.ConversationTranslatorConnectionFactory=u,u.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",as}var Hm;function ZE(){return Hm||(Hm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationTranslator=r.SpeechState=void 0;const i=ee(),s=XE(),h=ie(),a=he(),p=V(),c=MC(),o=Sd();var u;(function(g){g[g.Inactive=0]="Inactive",g[g.Connecting=1]="Connecting",g[g.Connected=2]="Connected"})(u=r.SpeechState||(r.SpeechState={}));class d extends p.TranslationRecognizer{constructor(m,y,w,P){super(m,y,new s.ConversationTranslatorConnectionFactory(P)),this.privSpeechState=u.Inactive,w&&(this.privTranslator=w,this.sessionStarted=()=>{this.privSpeechState=u.Connected},this.sessionStopped=()=>{this.privSpeechState=u.Inactive},this.recognizing=(E,C)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,C)},this.recognized=async(E,C)=>{var T;(T=C.result)!=null&&T.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(C.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,C)},this.canceled=async()=>{if(this.privSpeechState!==u.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=u.Inactive}})}get state(){return this.privSpeechState}set state(m){this.privSpeechState=m}set authentication(m){this.privReco.authentication=m}onConnection(){this.privSpeechState=u.Connected}async onCancelSpeech(){this.privSpeechState=u.Inactive,await this.cancelSpeech()}fireCancelEvent(m){try{if(this.privTranslator.canceled){const y=new o.ConversationTranslationCanceledEventArgs(p.CancellationReason.Error,m,p.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,y)}}catch{}}async cancelSpeech(){var m;try{this.stopContinuousRecognitionAsync(),await((m=this.privReco)==null?void 0:m.disconnect()),this.privSpeechState=u.Inactive}catch{}}}class v extends o.ConversationCommon{constructor(m){super(m),this.privErrors=i.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new p.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var m;return(m=this.privConversation)==null?void 0:m.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===u.Connected||this.privCTRecognizer.state===u.Connecting||this.privConversation.isMutedByHost)}onToken(m){this.privCTRecognizer.authentication=m}setServiceProperty(m,y){const w=JSON.parse(this.privProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));w[m]=y,this.privProperties.setProperty(i.ServicePropertiesPropertyName,JSON.stringify(w))}joinConversationAsync(m,y,w,P,E){try{if(typeof m=="string"){a.Contracts.throwIfNullOrUndefined(m,this.privErrors.invalidArgs.replace("{arg}","conversation id")),a.Contracts.throwIfNullOrWhitespace(y,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),E);let C=w;(C==null||C==="")&&(C=i.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=p.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(p.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(C),this.privSpeechTranslationConfig.setProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage],C),this.privSpeechTranslationConfig.setProperty(p.PropertyId[p.PropertyId.ConversationTranslator_Name],y);const T=[p.PropertyId.SpeechServiceConnection_Host,p.PropertyId.ConversationTranslator_Host,p.PropertyId.SpeechServiceConnection_Endpoint,p.PropertyId.SpeechServiceConnection_ProxyHostName,p.PropertyId.SpeechServiceConnection_ProxyPassword,p.PropertyId.SpeechServiceConnection_ProxyPort,p.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const M of T){const j=this.privProperties.getProperty(M);if(j){const L=typeof M=="string"?M:p.PropertyId[M];this.privSpeechTranslationConfig.setProperty(L,j)}}const A=JSON.parse(this.privProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));for(const M of Object.keys(A))this.privSpeechTranslationConfig.setServiceProperty(M,A[M],p.ServicePropertyChannel.UriQueryParameter);this.privConversation=new c.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(m,y,C,(M=>{M||this.handleError(new Error(this.privErrors.permissionDeniedConnect),E),this.privSpeechTranslationConfig.authorizationToken=M,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync((()=>{this.handleCallback(P,E)}),(j=>{this.handleError(j,E)}))}),(M=>{this.handleError(M,E)}))}else typeof m=="object"?(a.Contracts.throwIfNullOrUndefined(m,this.privErrors.invalidArgs.replace("{arg}","conversation id")),a.Contracts.throwIfNullOrWhitespace(y,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(p.PropertyId.ConversationTranslator_Name,y),this.privConversation=m,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,a.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),a.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=m.config,this.handleCallback(w,P)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),P)}catch(C){this.handleError(C,typeof w=="string"?E:P)}}leaveConversationAsync(m,y){(0,h.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),m,y)}sendTextMessageAsync(m,y,w){try{a.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),a.Contracts.throwIfNullOrWhitespace(m,this.privErrors.invalidArgs.replace("{arg}",m)),this.privConversation.sendTextMessageAsync(m,y,w)}catch(P){this.handleError(P,w)}}startTranscribingAsync(m,y){(0,h.marshalPromiseToCallbacks)((async()=>{try{a.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),a.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),a.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),y),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(w){throw this.privIsSpeaking=!1,await this.cancelSpeech(),w}})(),m,y)}stopTranscribingAsync(m,y){(0,h.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((w,P)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(w,P)})}catch{await this.cancelSpeech()}})(),m,y)}isDisposed(){return this.privIsDisposed}dispose(m,y,w){(0,h.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),y,w)}async cancelSpeech(){var m;try{this.privIsSpeaking=!1,await((m=this.privCTRecognizer)==null?void 0:m.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=p.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_Key],"");const m=()=>this.privConversation;this.privCTRecognizer=new d(this.privSpeechTranslationConfig,this.privAudioConfig,this,m)}catch(m){throw await this.cancelSpeech(),m}}startContinuousRecognition(){return new Promise((m,y)=>{this.privCTRecognizer.startContinuousRecognitionAsync(m,y)})}}r.ConversationTranslator=v})(Ap)),Ap}var us={},Vm;function $E(){if(Vm)return us;Vm=1,Object.defineProperty(us,"__esModule",{value:!0}),us.ConversationTranscriber=void 0;const r=ee(),i=Dt(),s=ie(),h=he(),a=V();let p=class NC extends a.Recognizer{constructor(o,u){const d=o;h.Contracts.throwIfNull(d,"speechConfig"),h.Contracts.throwIfNullOrWhitespace(d.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new r.ConversationTranscriberConnectionFactory,o.tokenCredential),this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(o,u,d){const v=o;return u.properties.mergeTo(v.properties),new NC(o,d)}get endpointId(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){h.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,o)}get speechRecognitionLanguage(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,a.OutputFormat[a.OutputFormat.Simple])===a.OutputFormat[a.OutputFormat.Simple]?a.OutputFormat.Simple:a.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),o,u)}stopTranscribingAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,u)}close(o,u){h.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,s.marshalPromiseToCallbacks)(this.dispose(!0),o,u)}async dispose(o){this.privDisposedRecognizer||(o&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(o))}createRecognizerConfig(o){return new r.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,u,d,v){const g=d;return v.isSpeakerDiarizationEnabled=!0,new r.ConversationTranscriptionServiceRecognizer(o,u,g,v,this)}};return us.ConversationTranscriber=p,us}var $r={},Km;function e0(){if(Km)return $r;Km=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.Participant=$r.User=void 0;const r=V();class i{constructor(a){this.privUserId=a}get userId(){return this.privUserId}}$r.User=i;class s{constructor(a,p,c,o,u,d,v,g){this.privId=a,this.privAvatar=p,this.privDisplayName=c,this.privIsHost=o,this.privIsMuted=u,this.privIsUsingTts=d,this.privPreferredLanguage=v,this.privVoice=g,this.privProperties=new r.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(a,p,c){return new s(a,"",a,!1,!1,!1,p,c)}}return $r.Participant=s,$r}var _p={},Jm;function t0(){return Jm||(Jm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParticipantChangedReason=void 0,(function(i){i[i.JoinedConversation=0]="JoinedConversation",i[i.LeftConversation=1]="LeftConversation",i[i.Updated=2]="Updated"})(r.ParticipantChangedReason||(r.ParticipantChangedReason={}))})(_p)),_p}var en={},Gm;function r0(){if(Gm)return en;Gm=1,Object.defineProperty(en,"__esModule",{value:!0}),en.MeetingImpl=en.Meeting=void 0;const r=ee(),i=ie(),s=he(),h=V();let a=class{constructor(){}static createMeetingAsync(o,u,d,v){if(s.Contracts.throwIfNullOrUndefined(o,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(o.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),s.Contracts.throwIfNull(u,"meetingId"),u.length===0)throw new Error("meetingId cannot be empty");!o.subscriptionKey&&!o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceAuthorization_Token])&&s.Contracts.throwIfNullOrUndefined(o.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const g=new p(o,u);return(0,i.marshalPromiseToCallbacks)((async()=>{})(),d,v),g}};en.Meeting=a;class p extends a{constructor(o,u){super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=g=>{var m;this.privIsConnected=!0;try{(m=this.privConversationTranslator)!=null&&m.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,g)}catch{}},this.onDisconnected=g=>{var m;try{(m=this.privConversationTranslator)!=null&&m.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,g)}catch{}finally{this.close(!1)}},this.onCanceled=(g,m)=>{var y;try{(y=this.privConversationTranslator)!=null&&y.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,m)}catch{}},this.onParticipantUpdateCommandReceived=(g,m)=>{try{const y=this.privParticipants.getParticipant(m.id);if(y!==void 0){switch(m.key){case r.ConversationTranslatorCommandTypes.changeNickname:y.displayName=m.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:y.isUsingTts=m.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:y.profanity=m.value;break;case r.ConversationTranslatorCommandTypes.setMute:y.isMuted=m.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:y.translateToLanguages=m.value;break}this.privParticipants.addOrUpdateParticipant(y),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,[this.toParticipant(y)],m.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(g,m)=>{try{this.privParticipants.participants.forEach(y=>y.isMuted=y.isHost?!1:m.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,this.toParticipants(!1),m.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(g,m)=>{try{const y=this.privParticipants.addOrUpdateParticipant(m.participant);y!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,[this.toParticipant(y)],m.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(g,m)=>{try{const y=this.privParticipants.getParticipant(m.participant.id);y!==void 0&&(this.privParticipants.deleteParticipant(m.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.LeftConversation,[this.toParticipant(y)],m.sessionId)))}catch{}},this.onTranslationReceived=(g,m)=>{try{switch(m.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break}}catch{}},this.onParticipantsListReceived=(g,m)=>{var y;try{if(m.sessionToken!==void 0&&m.sessionToken!==null&&(this.privRoom.token=m.sessionToken),this.privParticipants.participants=[...m.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),m.sessionId)),this.me.isHost){const w=(y=this.privConversationTranslator)==null?void 0:y.properties.getProperty(h.PropertyId.ConversationTranslator_Name);w!==void 0&&w.length>0&&w!==this.me.displayName&&this.changeNicknameAsync(w)}}catch{}},this.onConversationExpiration=(g,m)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,m)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new h.PropertyCollection,this.privManager=new r.ConversationManager,o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=u,this.privConfig=o;const v=o;s.Contracts.throwIfNull(v,"speechConfig"),this.privProperties=v.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,u;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(u=this.privParticipants.me)==null?void 0:u.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const o=this.meetingId,u=this.participants.map(g=>({id:g.id,preferredLanguage:g.preferredLanguage,voice:g.voice})),d={};for(const g of r.ConversationConnectionConfig.transcriptionEventKeys){const m=this.properties.getProperty(g,"");m!==""&&(d[g]=m)}return{id:o,participants:u,meetingProperties:d}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){s.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}createMeetingAsync(o,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,(d=>{d||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=d,this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}startMeetingAsync(o,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}addParticipantAsync(o,u,d){s.Contracts.throwIfNullOrUndefined(o,"Participant"),(0,i.marshalPromiseToCallbacks)(this.addParticipantImplAsync(o),u,d)}joinMeetingAsync(o,u,d,v,g){try{s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,(m=>{s.Contracts.throwIfNullOrUndefined(m,this.privErrors.permissionDeniedConnect),this.privRoom=m,this.privConfig.authorizationToken=m.cognitiveSpeechAuthToken,v&&v(m.cognitiveSpeechAuthToken)}),(m=>{this.handleError(m,g)}))}catch(m){this.handleError(m,g)}}deleteMeetingAsync(o,u){(0,i.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),o,u)}async deleteMeetingImplAsync(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(o,u){(0,i.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),o,u)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteAllParticipantsAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteParticipantAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),(()=>{this.handleCallback(u,d)}),(g=>{this.handleError(g,d)}))}catch(v){this.handleError(v,d)}}removeParticipantAsync(o,u,d){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))(0,i.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(o),u,d);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),d);let v="";typeof o=="string"?v=o:o.hasOwnProperty("id")?v=o.id:o.hasOwnProperty("userId")&&(v=o.userId),s.Contracts.throwIfNullOrWhitespace(v,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(m=>m.id===v)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(v),(()=>{this.handleCallback(u,d)}),(m=>{this.handleError(m,d)}))}}catch(v){this.handleError(v,d)}}unlockMeetingAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteAllParticipantsAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteParticipantAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),(()=>{this.handleCallback(u,d)}),(g=>{this.handleError(g,d)}))}catch(v){this.handleError(v,d)}}sendTextMessageAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}setTranslatedLanguagesAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}changeNicknameAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const d=this.meetingInfo;return d.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(d,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const u=this.meetingInfo;return u.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(u,"leave")}async close(o){var u;try{this.privIsConnected=!1,await((u=this.privConversationRecognizer)==null?void 0:u.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(d){throw d}o&&this.dispose()}handleCallback(o,u){if(o){try{o()}catch(d){u&&u(d)}o=void 0}}handleError(o,u){if(u)if(o instanceof Error){const d=o;u(d.name+": "+d.message)}else u(o)}toParticipants(o){const u=this.privParticipants.participants.map(d=>this.toParticipant(d));return o?u:u.filter(d=>d.isHost===!1)}toParticipant(o){return new h.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,u){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(o,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:r.ConversationTranslatorMessageTypes.instantMessage})}}return en.MeetingImpl=p,en}var ls={},Qm;function n0(){if(Qm)return ls;Qm=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.MeetingTranscriptionCanceledEventArgs=void 0;const r=Ta();class i extends r.CancellationEventArgsBase{}return ls.MeetingTranscriptionCanceledEventArgs=i,ls}var ps={},Ym;function i0(){if(Ym)return ps;Ym=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.MeetingTranscriber=void 0;const r=ee(),i=ie(),s=he(),h=V(),a=Sd();let p=class{constructor(o){this.privAudioConfig=o,this.privProperties=new h.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return h.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){s.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(h.PropertyId.SpeechServiceAuthorization_Token,o)}joinMeetingAsync(o,u,d){const v=o;s.Contracts.throwIfNullOrUndefined(a.MeetingImpl,"Meeting"),this.privRecognizer=new r.TranscriberRecognizer(o.config,this.privAudioConfig),s.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,i.marshalPromiseToCallbacks)(v.connectTranscriberRecognizer(this.privRecognizer),u,d)}startTranscribingAsync(o,u){this.privRecognizer.startContinuousRecognitionAsync(o,u)}stopTranscribingAsync(o,u){this.privRecognizer.stopContinuousRecognitionAsync(o,u)}leaveMeetingAsync(o,u){this.privRecognizer.disconnectCallbacks(),(0,i.marshalPromiseToCallbacks)((async()=>{})(),o,u)}close(o,u){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,i.marshalPromiseToCallbacks)(this.dispose(!0),o,u)}async dispose(o){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),o&&(this.privDisposedRecognizer=!0))}};return ps.MeetingTranscriber=p,ps}var ds={},Xm;function o0(){if(Xm)return ds;Xm=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.ConversationTranscriptionResult=void 0;const r=V();let i=class extends r.RecognitionResult{constructor(h,a,p,c,o,u,d,v,g,m,y){super(h,a,p,c,o,u,d,g,m,y),this.privSpeakerId=v}get speakerId(){return this.privSpeakerId}};return ds.ConversationTranscriptionResult=i,ds}var Zm;function Sd(){return Zm||(Zm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationTranscriptionResult=r.MeetingTranscriber=r.MeetingTranscriptionCanceledEventArgs=r.MeetingImpl=r.Meeting=r.ParticipantChangedReason=r.User=r.Participant=r.ConversationTranscriber=r.ConversationTranslator=r.ConversationTranslationResult=r.ConversationTranslationEventArgs=r.ConversationTranslationCanceledEventArgs=r.ConversationParticipantsChangedEventArgs=r.ConversationExpirationEventArgs=r.ConversationCommon=r.ConversationImpl=r.Conversation=void 0;var i=MC();Object.defineProperty(r,"Conversation",{enumerable:!0,get:function(){return i.Conversation}}),Object.defineProperty(r,"ConversationImpl",{enumerable:!0,get:function(){return i.ConversationImpl}});var s=VE();Object.defineProperty(r,"ConversationCommon",{enumerable:!0,get:function(){return s.ConversationCommon}});var h=KE();Object.defineProperty(r,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return h.ConversationExpirationEventArgs}});var a=JE();Object.defineProperty(r,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return a.ConversationParticipantsChangedEventArgs}});var p=GE();Object.defineProperty(r,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return p.ConversationTranslationCanceledEventArgs}});var c=QE();Object.defineProperty(r,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return c.ConversationTranslationEventArgs}});var o=YE();Object.defineProperty(r,"ConversationTranslationResult",{enumerable:!0,get:function(){return o.ConversationTranslationResult}});var u=ZE();Object.defineProperty(r,"ConversationTranslator",{enumerable:!0,get:function(){return u.ConversationTranslator}});var d=$E();Object.defineProperty(r,"ConversationTranscriber",{enumerable:!0,get:function(){return d.ConversationTranscriber}});var v=e0();Object.defineProperty(r,"Participant",{enumerable:!0,get:function(){return v.Participant}}),Object.defineProperty(r,"User",{enumerable:!0,get:function(){return v.User}});var g=t0();Object.defineProperty(r,"ParticipantChangedReason",{enumerable:!0,get:function(){return g.ParticipantChangedReason}});var m=r0();Object.defineProperty(r,"Meeting",{enumerable:!0,get:function(){return m.Meeting}}),Object.defineProperty(r,"MeetingImpl",{enumerable:!0,get:function(){return m.MeetingImpl}});var y=n0();Object.defineProperty(r,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return y.MeetingTranscriptionCanceledEventArgs}});var w=i0();Object.defineProperty(r,"MeetingTranscriber",{enumerable:!0,get:function(){return w.MeetingTranscriber}});var P=o0();Object.defineProperty(r,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return P.ConversationTranscriptionResult}})})(Tp)),Tp}var tn={},$m;function Cd(){if($m)return tn;$m=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.SynthesisRequest=tn.Synthesizer=void 0;const r=ee(),i=ie(),s=he(),h=V();let a=class zC{constructor(o){const u=o;s.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new i.Queue,this.tokenCredential=o.tokenCredential}get authorizationToken(){return this.properties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){s.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(h.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(h.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===r.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(o){const u={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let d=this.properties.getProperty(h.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),v=this.properties.getProperty(h.PropertyId.SpeechServiceConnection_SynthVoice,""),g=zC.XMLEncode(o);return this.autoDetectSourceLanguage?d="en-US":v=v||u[d],v&&(g=`<voice name='${v}'>${g}</voice>`),g=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${d}'>${g}</speak>`,g}async dispose(o){this.privDisposed||(o&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const o=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(o.text,o.isSSML,o.requestId,o.cb,o.err,o.dataStream)}}createSynthesizerConfig(o){return new r.SynthesizerConfig(o,this.privProperties)}implCommonSynthesizeSetup(){let o=typeof window<"u"?"Browser":"Node",u="unknown",d="unknown";typeof navigator<"u"&&(o=o+"/"+navigator.platform,u=navigator.userAgent,d=navigator.appVersion);const v=this.createSynthesizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(o,u,d)))),g=this.privProperties.getProperty(h.PropertyId.SpeechServiceConnection_Key,void 0),m=g&&g!==""?new r.CognitiveSubscriptionKeyAuthentication(g):this.tokenCredential?new r.CognitiveTokenAuthentication(async()=>{try{const y=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(y==null?void 0:y.token)??""}catch(y){throw y}},async()=>{try{const y=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(y==null?void 0:y.token)??""}catch(y){throw y}}):new r.CognitiveTokenAuthentication(()=>{const y=this.privProperties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(y)},()=>{const y=this.privProperties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(y)});this.privAdapter=this.createSynthesisAdapter(m,this.privConnectionFactory,v),this.privRestAdapter=this.createRestSynthesisAdapter(m,v)}static XMLEncode(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};tn.Synthesizer=a;class p{constructor(o,u,d,v,g,m){this.requestId=o,this.text=u,this.isSSML=d,this.cb=v,this.err=g,this.dataStream=m}}return tn.SynthesisRequest=p,tn}var hs={},ey;function s0(){if(ey)return hs;ey=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.SpeechSynthesizer=void 0;const r=ee(),i=ie(),s=dC(),h=Ea(),a=qn(),p=he(),c=V(),o=Cd();let u=class jC extends c.Synthesizer{constructor(v,g){super(v),g!==null&&(g===void 0?this.audioConfig=typeof window>"u"?void 0:c.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=g),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(v,g,m){const y=v;return g.properties.mergeTo(y.properties),new jC(v,m)}speakTextAsync(v,g,m,y){this.speakImpl(v,!1,g,m,y)}speakSsmlAsync(v,g,m,y){this.speakImpl(v,!0,g,m,y)}async getVoicesAsync(v=""){return this.getVoices(v)}close(v,g){p.Contracts.throwIfDisposed(this.privDisposed),(0,i.marshalPromiseToCallbacks)(this.dispose(!0),v,g)}get internalData(){return this.privAdapter}createSynthesisAdapter(v,g,m){return new r.SpeechSynthesisAdapter(v,g,m,this,this.audioConfig)}createRestSynthesisAdapter(v,g){return new r.SynthesisRestAdapter(g,v)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=h.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(c.SpeechSynthesisOutputFormat[this.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(v,g,m,y,w){try{p.Contracts.throwIfDisposed(this.privDisposed);const P=(0,i.createNoDashGuid)();let E;w instanceof c.PushAudioOutputStreamCallback?E=new a.PushAudioOutputStreamImpl(w):w instanceof c.PullAudioOutputStream?E=w:w!==void 0?E=new s.AudioFileWriter(w):E=void 0,this.synthesisRequestQueue.enqueue(new o.SynthesisRequest(P,v,g,C=>{if(this.privSynthesizing=!1,m)try{m(C)}catch(T){y&&y(T)}m=void 0,this.adapterSpeak().catch(()=>{})},C=>{y&&y(C)},E)),this.adapterSpeak().catch(()=>{})}catch(P){if(y)if(P instanceof Error){const E=P;y(E.name+": "+E.message)}else y(P);this.dispose(!0).catch(()=>{})}}async getVoices(v){const g=(0,i.createNoDashGuid)(),m=await this.privRestAdapter.getVoicesList(g);if(m.ok&&Array.isArray(m.json)){let y=m.json;return v&&v.length>0&&(y=y.filter(w=>!!w.Locale&&w.Locale.toLowerCase()===v.toLowerCase())),new c.SynthesisVoicesResult(g,y,void 0)}else return new c.SynthesisVoicesResult(g,void 0,`Error: ${m.status}: ${m.statusText}`)}};return hs.SpeechSynthesizer=u,hs}var vs={},ty;function a0(){if(ty)return vs;ty=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.SynthesisResult=void 0;let r=class{constructor(s,h,a,p){this.privResultId=s,this.privReason=h,this.privErrorDetails=a,this.privProperties=p}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};return vs.SynthesisResult=r,vs}var fs={},ry;function c0(){if(ry)return fs;ry=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.SpeechSynthesisResult=void 0;const r=V();let i=class extends r.SynthesisResult{constructor(h,a,p,c,o,u){super(h,a,c,o),this.privAudioData=p,this.privAudioDuration=u}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return fs.SpeechSynthesisResult=i,fs}var gs={},ny;function u0(){if(ny)return gs;ny=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.SpeechSynthesisEventArgs=void 0;let r=class{constructor(s){this.privResult=s}get result(){return this.privResult}};return gs.SpeechSynthesisEventArgs=r,gs}var ms={},iy;function l0(){if(iy)return ms;iy=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.SpeechSynthesisWordBoundaryEventArgs=void 0;let r=class{constructor(s,h,a,p,c,o){this.privAudioOffset=s,this.privDuration=h,this.privText=a,this.privWordLength=p,this.privTextOffset=c,this.privBoundaryType=o}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};return ms.SpeechSynthesisWordBoundaryEventArgs=r,ms}var ys={},oy;function p0(){if(oy)return ys;oy=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.SpeechSynthesisBookmarkEventArgs=void 0;let r=class{constructor(s,h){this.privAudioOffset=s,this.privText=h}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};return ys.SpeechSynthesisBookmarkEventArgs=r,ys}var Ss={},sy;function d0(){if(sy)return Ss;sy=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.SpeechSynthesisVisemeEventArgs=void 0;let r=class{constructor(s,h,a){this.privAudioOffset=s,this.privVisemeId=h,this.privAnimation=a}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};return Ss.SpeechSynthesisVisemeEventArgs=r,Ss}var Ip={},ay;function h0(){return ay||(ay=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechSynthesisBoundaryType=void 0,(function(i){i.Word="WordBoundary",i.Punctuation="PunctuationBoundary",i.Sentence="SentenceBoundary"})(r.SpeechSynthesisBoundaryType||(r.SpeechSynthesisBoundaryType={}))})(Ip)),Ip}var Cs={},cy;function v0(){if(cy)return Cs;cy=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.SynthesisVoicesResult=void 0;const r=V();let i=class extends r.SynthesisResult{constructor(h,a,p){if(Array.isArray(a)){super(h,r.ResultReason.VoicesListRetrieved,void 0,new r.PropertyCollection),this.privVoices=[];for(const c of a)this.privVoices.push(new r.VoiceInfo(c))}else super(h,r.ResultReason.Canceled,p||"Error information unavailable",new r.PropertyCollection)}get voices(){return this.privVoices}};return Cs.SynthesisVoicesResult=i,Cs}var kp={},uy;function f0(){return uy||(uy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.VoiceInfo=r.SynthesisVoiceType=r.SynthesisVoiceGender=void 0;var i;(function(c){c[c.Unknown=0]="Unknown",c[c.Female=1]="Female",c[c.Male=2]="Male",c[c.Neutral=3]="Neutral"})(i=r.SynthesisVoiceGender||(r.SynthesisVoiceGender={}));var s;(function(c){c[c.Unknown=0]="Unknown",c[c.OnlineNeural=1]="OnlineNeural",c[c.OnlineStandard=2]="OnlineStandard",c[c.OfflineNeural=3]="OfflineNeural",c[c.OfflineStandard=4]="OfflineStandard",c[c.OnlineNeuralHD=5]="OnlineNeuralHD"})(s=r.SynthesisVoiceType||(r.SynthesisVoiceType={}));const h={[i[i.Neutral]]:i.Neutral,[i[i.Male]]:i.Male,[i[i.Female]]:i.Female},a={Neural:s.OnlineNeural,NeuralHD:s.OnlineNeuralHD};class p{constructor(o){if(this.privStyleList=[],o){if(this.privName=o.Name,this.privLocale=o.Locale,this.privShortName=o.ShortName,this.privLocaleName=o.LocaleName,this.privDisplayName=o.DisplayName,this.privLocalName=o.LocalName,this.privVoiceType=a[o.VoiceType]||s.Unknown,this.privGender=h[o.Gender]||i.Unknown,o.StyleList&&Array.isArray(o.StyleList))for(const u of o.StyleList)this.privStyleList.push(u);this.privSampleRateHertz=o.SampleRateHertz,this.privStatus=o.Status,o.ExtendedPropertyMap&&(this.privExtendedPropertyMap=o.ExtendedPropertyMap),this.privWordsPerMinute=o.WordsPerMinute,Array.isArray(o.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...o.SecondaryLocaleList]),Array.isArray(o.RolePlayList)&&(this.privRolePlayList=[...o.RolePlayList]),o.VoiceTag&&(this.privVoiceTag=o.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}r.VoiceInfo=p})(kp)),kp}var Ps={},ly;function g0(){if(ly)return Ps;ly=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.SpeakerAudioDestination=void 0;const r=ie(),i=qn(),s=ln(),h=1800,a={[s.AudioFormatTag.PCM]:"audio/wav",[s.AudioFormatTag.MuLaw]:"audio/x-wav",[s.AudioFormatTag.MP3]:"audio/mpeg",[s.AudioFormatTag.OGG_OPUS]:"audio/ogg",[s.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[s.AudioFormatTag.ALaw]:"audio/x-wav",[s.AudioFormatTag.FLAC]:"audio/flac",[s.AudioFormatTag.AMR_WB]:"audio/amr-wb",[s.AudioFormatTag.G722]:"audio/G722"};let p=class{constructor(o){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=o||(0,r.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(o,u,d){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(o),this.updateSourceBuffer().then(()=>{u&&u()},v=>{d&&d(v)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(o),this.privBytesReceived+=o.byteLength)}close(o,u){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{o&&o()},d=>{u&&u(d)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===s.AudioFormatTag.PCM||this.privFormat.formatTag===s.AudioFormatTag.MuLaw||this.privFormat.formatTag===s.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let d=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(d).then(()=>{d=this.privFormat.addHeader(d);const v=new Blob([d],{type:a[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(v),this.notifyPlayback().then(()=>{o&&o()},g=>{u&&u(g)})},v=>{u&&u(v)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(o){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=o;const u=a[this.privFormat.formatTag];u===void 0?console.warn(`Unknown mimeType for format ${s.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(u)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=h,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(u),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(d=>{r.Events.instance.onEvent(new r.BackgroundEvent(d))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(d=>{r.Events.instance.onEvent(new r.BackgroundEvent(d))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(d=>{r.Events.instance.onEvent(new r.BackgroundEvent(d))})):(console.warn(`Format ${s.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new i.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var o;return((o=this.privAudio)==null?void 0:o.volume)??-1}set volume(o){this.privAudio&&(this.privAudio.volume=o)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(o,u){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{o&&o()},d=>{u&&u(d)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const o=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(o)}catch{this.privAudioBuffer.unshift(o),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};return Ps.SpeakerAudioDestination=p,Ps}var Rs={},py;function m0(){if(py)return Rs;py=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.ConversationTranscriptionCanceledEventArgs=void 0;const r=Ta();let i=class extends r.CancellationEventArgsBase{};return Rs.ConversationTranscriptionCanceledEventArgs=i,Rs}var ws={},dy;function y0(){if(dy)return ws;dy=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.MeetingTranscriptionCanceledEventArgs=void 0;const r=Ta();let i=class extends r.CancellationEventArgsBase{};return ws.MeetingTranscriptionCanceledEventArgs=i,ws}var bp={},hy;function S0(){return hy||(hy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PronunciationAssessmentGradingSystem=void 0,(function(i){i[i.FivePoint=1]="FivePoint",i[i.HundredMark=2]="HundredMark"})(r.PronunciationAssessmentGradingSystem||(r.PronunciationAssessmentGradingSystem={}))})(bp)),bp}var Mp={},vy;function C0(){return vy||(vy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PronunciationAssessmentGranularity=void 0,(function(i){i[i.Phoneme=1]="Phoneme",i[i.Word=2]="Word",i[i.FullText=3]="FullText"})(r.PronunciationAssessmentGranularity||(r.PronunciationAssessmentGranularity={}))})(Mp)),Mp}var Es={},fy;function P0(){if(fy)return Es;fy=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.PronunciationAssessmentConfig=void 0;const r=he(),i=V();let s=class LC{constructor(a,p=i.PronunciationAssessmentGradingSystem.FivePoint,c=i.PronunciationAssessmentGranularity.Phoneme,o=!1){r.Contracts.throwIfNullOrUndefined(a,"referenceText"),this.privProperties=new i.PropertyCollection,this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,a),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_GradingSystem,i.PronunciationAssessmentGradingSystem[p]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Granularity,i.PronunciationAssessmentGranularity[c]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}static fromJSON(a){r.Contracts.throwIfNullOrUndefined(a,"json");const p=new LC("");return p.privProperties=new i.PropertyCollection,p.properties.setProperty(i.PropertyId.PronunciationAssessment_Json,a),p}toJSON(){return this.updateJson(),this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Params)}applyTo(a){this.updateJson();const p=a.internalData;p.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(i.PropertyId.PronunciationAssessment_Params),p.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(a){r.Contracts.throwIfNullOrWhitespace(a,"referenceText"),this.properties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,a)}set phonemeAlphabet(a){r.Contracts.throwIfNullOrWhitespace(a,"phonemeAlphabet"),this.privPhonemeAlphabet=a}set enableMiscue(a){const p=a?"true":"false";this.properties.setProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,p)}get enableMiscue(){return this.properties.getProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(a){this.privNBestPhonemeCount=a}set enableProsodyAssessment(a){this.privEnableProsodyAssessment=a}get properties(){return this.privProperties}updateJson(){const a=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Json,"{}"),p=JSON.parse(a),c=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText);c&&(p.referenceText=c);const o=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_GradingSystem);o&&(p.gradingSystem=o);const u=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Granularity);u&&(p.granularity=u),this.privPhonemeAlphabet&&(p.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(p.nbestPhonemeCount=this.privNBestPhonemeCount),p.enableProsodyAssessment=this.privEnableProsodyAssessment,p.dimension="Comprehensive",this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_EnableMiscue)&&(p.enableMiscue=this.enableMiscue),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Params,JSON.stringify(p))}};return Es.PronunciationAssessmentConfig=s,Es}var Ts={},gy;function R0(){if(gy)return Ts;gy=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.PronunciationAssessmentResult=void 0;const r=he(),i=V();let s=class xC{constructor(a){const p=JSON.parse(a);r.Contracts.throwIfNullOrUndefined(p.NBest[0],"NBest"),this.privPronJson=p.NBest[0]}static fromResult(a){r.Contracts.throwIfNullOrUndefined(a,"result");const p=a.properties.getProperty(i.PropertyId.SpeechServiceResponse_JsonResult);return r.Contracts.throwIfNullOrUndefined(p,"json"),new xC(p)}get detailResult(){return this.privPronJson}get accuracyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.AccuracyScore}get pronunciationScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.PronScore}get completenessScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.CompletenessScore}get fluencyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.FluencyScore}get prosodyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.ProsodyScore}};return Ts.PronunciationAssessmentResult=s,Ts}var As={},my;function w0(){if(my)return As;my=1,Object.defineProperty(As,"__esModule",{value:!0}),As.AvatarConfig=void 0;const r=he(),i=V();let s=class{constructor(a,p,c){this.privCustomized=!1,this.privUseBuiltInVoice=!1,r.Contracts.throwIfNullOrWhitespace(a,"character"),this.character=a,this.style=p,c===void 0&&(c=new i.AvatarVideoFormat),this.videoFormat=c}get customized(){return this.privCustomized}set customized(a){this.privCustomized=a}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(a){this.privUseBuiltInVoice=a}get photoAvatarBaseModel(){return this.privPhotoAvatarBaseModel}set photoAvatarBaseModel(a){this.privPhotoAvatarBaseModel=a}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(a){this.privBackgroundColor=a}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(a){this.privBackgroundImage=a}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(a){this.privRemoteIceServers=a}};return As.AvatarConfig=s,As}var Op={},yy;function E0(){return yy||(yy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AvatarEventArgs=r.AvatarEventTypes=void 0,(function(s){s.SwitchedToSpeaking="SwitchedToSpeaking",s.SwitchedToIdle="SwitchedToIdle",s.SessionClosed="SessionClosed"})(r.AvatarEventTypes||(r.AvatarEventTypes={}));class i{constructor(h,a){this.privOffset=h,this.privDescription=a}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}r.AvatarEventArgs=i})(Op)),Op}var _s={},Is={},Sy;function qC(){if(Sy)return Is;Sy=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.SpeechSynthesisConnectionFactory=void 0;const r=ct(),i=V(),s=$t(),h=ee(),a=gt(),p=Tr();let c=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(u,d,v){let g=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);const m=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,void 0),y=s.ConnectionFactoryBase.getHostSuffix(m),w=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),P=w===void 0?"tts":"voice",E=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+m+"."+P+".speech"+y),C={},T={};if(d.token!==void 0&&d.token!==""&&(T[d.headerName]=d.token),T[a.HeaderNames.ConnectionId]=v,w!==void 0&&w!==""&&(!g||g.search(p.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(C[p.QueryParameterNames.CustomVoiceDeploymentId]=w),u.avatarEnabled&&(!g||g.search(p.QueryParameterNames.EnableAvatar)===-1)&&(C[p.QueryParameterNames.EnableAvatar]="true"),g){const M=new URL(g),j=M.pathname;(j===""||j==="/")&&(M.pathname=this.synthesisUri,g=await s.ConnectionFactoryBase.getRedirectUrlFromEndpoint(M.toString()))}g||(g=E+this.synthesisUri),u.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,g);const A=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(g,C,T,new h.WebsocketMessageFormatter,r.ProxyInfo.fromParameters(u.parameters),A,v)}};return Is.SpeechSynthesisConnectionFactory=c,Is}var Cy;function T0(){if(Cy)return _s;Cy=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.AvatarSynthesizer=void 0;const r=qC(),i=ee(),s=ie(),h=Ea(),a=V(),p=he(),c=Cd();let o=class extends a.Synthesizer{constructor(d,v){super(d),p.Contracts.throwIfNullOrUndefined(v,"avatarConfig"),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.privAvatarConfig=v,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=h.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(d){p.Contracts.throwIfNullOrUndefined(d,"peerConnection"),this.privIceServers=d.getConfiguration().iceServers,p.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const v=new s.Deferred;d.onicegatheringstatechange=()=>{s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering state: "+d.iceGatheringState,s.EventType.Debug)),d.iceGatheringState==="complete"&&(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering complete.",s.EventType.Info)),v.resolve())},d.onicecandidate=P=>{P.candidate?s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice candidate: "+P.candidate.candidate,s.EventType.Debug)):(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice candidate: complete",s.EventType.Debug)),v.resolve())},setTimeout(()=>{d.iceGatheringState!=="complete"&&(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering timeout.",s.EventType.Warning)),v.resolve())},2e3);const g=await d.createOffer();await d.setLocalDescription(g),await v.promise,s.Events.instance.onEvent(new s.PlatformEvent("peer connection: got local SDP.",s.EventType.Info)),this.privProperties.setProperty(a.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(d.localDescription));const m=await this.speak("",!1);if(m.reason!==a.ResultReason.SynthesizingAudioCompleted)return new a.SynthesisResult(m.resultId,m.reason,m.errorDetails,m.properties);const y=atob(m.properties.getProperty(a.PropertyId.TalkingAvatarService_WebRTC_SDP)),w=new RTCSessionDescription(JSON.parse(y));return await d.setRemoteDescription(w),new a.SynthesisResult(m.resultId,m.reason,void 0,m.properties)}async speakTextAsync(d){const v=await this.speak(d,!1);return new a.SynthesisResult(v.resultId,v.reason,v.errorDetails,v.properties)}async speakSsmlAsync(d){const v=await this.speak(d,!0);return new a.SynthesisResult(v.resultId,v.reason,v.errorDetails,v.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return p.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(d,v,g){return new i.AvatarSynthesisAdapter(d,v,g,this,this.privAvatarConfig)}createRestSynthesisAdapter(d,v){}createSynthesizerConfig(d){const v=super.createSynthesizerConfig(d);return v.avatarEnabled=!0,v}async speak(d,v){const g=(0,s.createNoDashGuid)(),m=new s.Deferred;return this.synthesisRequestQueue.enqueue(new c.SynthesisRequest(g,d,v,y=>{m.resolve(y),this.privSynthesizing=!1,this.adapterSpeak()},y=>{m.reject(y),this.privSynthesizing=!1})),this.adapterSpeak(),m.promise}};return _s.AvatarSynthesizer=o,_s}var rn={},Py;function A0(){if(Py)return rn;Py=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.AvatarVideoFormat=rn.Coordinate=void 0;class r{constructor(h,a){this.x=h,this.y=a}}rn.Coordinate=r;let i=class{constructor(h="H264",a=2e6,p=1920,c=1080){this.codec=h,this.bitrate=a,this.width=p,this.height=c}setCropRange(h,a){this.cropRange={bottomRight:a,topLeft:h}}};return rn.AvatarVideoFormat=i,rn}var ks={},Ry;function _0(){if(Ry)return ks;Ry=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.AvatarWebRTCConnectionResult=void 0;const r=V();let i=class extends r.SynthesisResult{constructor(h,a,p,c,o){super(a,p,c,o),this.privSDPAnswer=h}get SDPAnswer(){return this.privSDPAnswer}};return ks.AvatarWebRTCConnectionResult=i,ks}var bs={},wy;function I0(){if(wy)return bs;wy=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.Diagnostics=void 0;const r=ct(),i=ie();let s=class{static SetLoggingLevel(a){this.privListener=new r.ConsoleLoggingListener(a),i.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(a){if(typeof window>"u")this.privListener&&(this.privListener.logPath=a);else throw new Error("File system logging not available in browser.")}static set onLogOutput(a){this.privListener&&(this.privListener.logCallback=a)}};return bs.Diagnostics=s,s.privListener=void 0,bs}var Ey;function V(){return Ey||(Ey=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CustomCommandsConfig=r.BotFrameworkConfig=r.DialogServiceConfig=r.PhraseListGrammar=r.Connection=r.ServiceEventArgs=r.ConnectionEventArgs=r.CancellationErrorCode=r.CancellationDetails=r.CancellationDetailsBase=r.TranslationRecognitionCanceledEventArgs=r.NoMatchDetails=r.NoMatchReason=r.Translations=r.TranslationRecognizer=r.SpeechRecognizer=r.Recognizer=r.PropertyId=r.PropertyCollection=r.SpeechTranslationConfigImpl=r.SpeechTranslationConfig=r.SpeechConfigImpl=r.SpeechConfig=r.ResultReason=r.TranslationSynthesisResult=r.TranslationRecognitionResult=r.TranslationSynthesisEventArgs=r.TranslationRecognitionEventArgs=r.SpeechRecognitionCanceledEventArgs=r.MeetingTranscriptionEventArgs=r.ConversationTranscriptionEventArgs=r.SpeechRecognitionEventArgs=r.SpeechRecognitionResult=r.RecognitionResult=r.OutputFormat=r.RecognitionEventArgs=r.SessionEventArgs=r.KeywordRecognitionModel=r.PushAudioOutputStreamCallback=r.PullAudioInputStreamCallback=r.CancellationReason=r.PushAudioOutputStream=r.PullAudioOutputStream=r.AudioOutputStream=r.PushAudioInputStream=r.PullAudioInputStream=r.AudioInputStream=r.AudioFormatTag=r.AudioStreamFormat=r.AudioConfig=void 0,r.AvatarSynthesizer=r.AvatarEventArgs=r.AvatarConfig=r.LanguageIdMode=r.PronunciationAssessmentResult=r.PronunciationAssessmentConfig=r.PronunciationAssessmentGranularity=r.PronunciationAssessmentGradingSystem=r.MeetingTranscriptionCanceledEventArgs=r.ConversationTranscriptionCanceledEventArgs=r.SpeakerAudioDestination=r.VoiceInfo=r.SynthesisVoiceType=r.SynthesisVoiceGender=r.SynthesisVoicesResult=r.SpeechSynthesisBoundaryType=r.SpeechSynthesisVisemeEventArgs=r.SpeechSynthesisBookmarkEventArgs=r.SpeechSynthesisWordBoundaryEventArgs=r.SpeechSynthesisEventArgs=r.SpeechSynthesisResult=r.SynthesisResult=r.SpeechSynthesizer=r.SpeechSynthesisOutputFormat=r.Synthesizer=r.User=r.ParticipantChangedReason=r.Participant=r.MeetingTranscriber=r.Meeting=r.ConversationTranscriptionResult=r.ConversationTranscriber=r.ConversationTranslator=r.ConversationTranslationResult=r.ConversationTranslationEventArgs=r.ConversationTranslationCanceledEventArgs=r.ConversationParticipantsChangedEventArgs=r.ConversationExpirationEventArgs=r.Conversation=r.SourceLanguageConfig=r.AutoDetectSourceLanguageResult=r.AutoDetectSourceLanguageConfig=r.ConnectionMessage=r.ConnectionMessageEventArgs=r.BaseAudioPlayer=r.ProfanityOption=r.ServicePropertyChannel=r.TurnStatusReceivedEventArgs=r.ActivityReceivedEventArgs=r.DialogServiceConnector=void 0,r.LogLevel=r.Diagnostics=r.AvatarWebRTCConnectionResult=r.Coordinate=r.AvatarVideoFormat=void 0;var i=tE();Object.defineProperty(r,"AudioConfig",{enumerable:!0,get:function(){return i.AudioConfig}});var s=ln();Object.defineProperty(r,"AudioStreamFormat",{enumerable:!0,get:function(){return s.AudioStreamFormat}}),Object.defineProperty(r,"AudioFormatTag",{enumerable:!0,get:function(){return s.AudioFormatTag}});var h=hC();Object.defineProperty(r,"AudioInputStream",{enumerable:!0,get:function(){return h.AudioInputStream}}),Object.defineProperty(r,"PullAudioInputStream",{enumerable:!0,get:function(){return h.PullAudioInputStream}}),Object.defineProperty(r,"PushAudioInputStream",{enumerable:!0,get:function(){return h.PushAudioInputStream}});var a=qn();Object.defineProperty(r,"AudioOutputStream",{enumerable:!0,get:function(){return a.AudioOutputStream}}),Object.defineProperty(r,"PullAudioOutputStream",{enumerable:!0,get:function(){return a.PullAudioOutputStream}}),Object.defineProperty(r,"PushAudioOutputStream",{enumerable:!0,get:function(){return a.PushAudioOutputStream}});var p=rE();Object.defineProperty(r,"CancellationReason",{enumerable:!0,get:function(){return p.CancellationReason}});var c=nE();Object.defineProperty(r,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return c.PullAudioInputStreamCallback}});var o=iE();Object.defineProperty(r,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return o.PushAudioOutputStreamCallback}});var u=oE();Object.defineProperty(r,"KeywordRecognitionModel",{enumerable:!0,get:function(){return u.KeywordRecognitionModel}});var d=sE();Object.defineProperty(r,"SessionEventArgs",{enumerable:!0,get:function(){return d.SessionEventArgs}});var v=aE();Object.defineProperty(r,"RecognitionEventArgs",{enumerable:!0,get:function(){return v.RecognitionEventArgs}});var g=cE();Object.defineProperty(r,"OutputFormat",{enumerable:!0,get:function(){return g.OutputFormat}});var m=uE();Object.defineProperty(r,"RecognitionResult",{enumerable:!0,get:function(){return m.RecognitionResult}});var y=lE();Object.defineProperty(r,"SpeechRecognitionResult",{enumerable:!0,get:function(){return y.SpeechRecognitionResult}});var w=pE();Object.defineProperty(r,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return w.SpeechRecognitionEventArgs}}),Object.defineProperty(r,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return w.ConversationTranscriptionEventArgs}}),Object.defineProperty(r,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return w.MeetingTranscriptionEventArgs}});var P=dE();Object.defineProperty(r,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return P.SpeechRecognitionCanceledEventArgs}});var E=hE();Object.defineProperty(r,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return E.TranslationRecognitionEventArgs}});var C=vE();Object.defineProperty(r,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var T=mC();Object.defineProperty(r,"TranslationRecognitionResult",{enumerable:!0,get:function(){return T.TranslationRecognitionResult}});var A=fE();Object.defineProperty(r,"TranslationSynthesisResult",{enumerable:!0,get:function(){return A.TranslationSynthesisResult}});var M=gE();Object.defineProperty(r,"ResultReason",{enumerable:!0,get:function(){return M.ResultReason}});var j=mE();Object.defineProperty(r,"SpeechConfig",{enumerable:!0,get:function(){return j.SpeechConfig}}),Object.defineProperty(r,"SpeechConfigImpl",{enumerable:!0,get:function(){return j.SpeechConfigImpl}});var L=yE();Object.defineProperty(r,"SpeechTranslationConfig",{enumerable:!0,get:function(){return L.SpeechTranslationConfig}}),Object.defineProperty(r,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return L.SpeechTranslationConfigImpl}});var K=SC();Object.defineProperty(r,"PropertyCollection",{enumerable:!0,get:function(){return K.PropertyCollection}});var U=md();Object.defineProperty(r,"PropertyId",{enumerable:!0,get:function(){return U.PropertyId}});var se=SE();Object.defineProperty(r,"Recognizer",{enumerable:!0,get:function(){return se.Recognizer}});var ve=CE();Object.defineProperty(r,"SpeechRecognizer",{enumerable:!0,get:function(){return ve.SpeechRecognizer}});var pe=PE();Object.defineProperty(r,"TranslationRecognizer",{enumerable:!0,get:function(){return pe.TranslationRecognizer}});var fe=RE();Object.defineProperty(r,"Translations",{enumerable:!0,get:function(){return fe.Translations}});var te=wE();Object.defineProperty(r,"NoMatchReason",{enumerable:!0,get:function(){return te.NoMatchReason}});var we=EE();Object.defineProperty(r,"NoMatchDetails",{enumerable:!0,get:function(){return we.NoMatchDetails}});var be=TE();Object.defineProperty(r,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return be.TranslationRecognitionCanceledEventArgs}});var Te=AC();Object.defineProperty(r,"CancellationDetailsBase",{enumerable:!0,get:function(){return Te.CancellationDetailsBase}});var Pe=AE();Object.defineProperty(r,"CancellationDetails",{enumerable:!0,get:function(){return Pe.CancellationDetails}});var H=_E();Object.defineProperty(r,"CancellationErrorCode",{enumerable:!0,get:function(){return H.CancellationErrorCode}});var $=IE();Object.defineProperty(r,"ConnectionEventArgs",{enumerable:!0,get:function(){return $.ConnectionEventArgs}});var J=kE();Object.defineProperty(r,"ServiceEventArgs",{enumerable:!0,get:function(){return J.ServiceEventArgs}});var b=wC();Object.defineProperty(r,"Connection",{enumerable:!0,get:function(){return b.Connection}});var x=bE();Object.defineProperty(r,"PhraseListGrammar",{enumerable:!0,get:function(){return x.PhraseListGrammar}});var ae=yd();Object.defineProperty(r,"DialogServiceConfig",{enumerable:!0,get:function(){return ae.DialogServiceConfig}});var ce=ME();Object.defineProperty(r,"BotFrameworkConfig",{enumerable:!0,get:function(){return ce.BotFrameworkConfig}});var ge=OE();Object.defineProperty(r,"CustomCommandsConfig",{enumerable:!0,get:function(){return ge.CustomCommandsConfig}});var me=NE();Object.defineProperty(r,"DialogServiceConnector",{enumerable:!0,get:function(){return me.DialogServiceConnector}});var Ee=zE();Object.defineProperty(r,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Ee.ActivityReceivedEventArgs}});var Ce=LE();Object.defineProperty(r,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Ce.TurnStatusReceivedEventArgs}});var Ae=xE();Object.defineProperty(r,"ServicePropertyChannel",{enumerable:!0,get:function(){return Ae.ServicePropertyChannel}});var Ze=qE();Object.defineProperty(r,"ProfanityOption",{enumerable:!0,get:function(){return Ze.ProfanityOption}});var pn=BE();Object.defineProperty(r,"BaseAudioPlayer",{enumerable:!0,get:function(){return pn.BaseAudioPlayer}});var Aa=FE();Object.defineProperty(r,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return Aa.ConnectionMessageEventArgs}});var dn=RC();Object.defineProperty(r,"ConnectionMessage",{enumerable:!0,get:function(){return dn.ConnectionMessage}});var Bn=UE();Object.defineProperty(r,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return Bn.AutoDetectSourceLanguageConfig}});var _a=WE();Object.defineProperty(r,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return _a.AutoDetectSourceLanguageResult}});var Ia=HE();Object.defineProperty(r,"SourceLanguageConfig",{enumerable:!0,get:function(){return Ia.SourceLanguageConfig}});var Ue=Sd();Object.defineProperty(r,"Conversation",{enumerable:!0,get:function(){return Ue.Conversation}}),Object.defineProperty(r,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Ue.ConversationExpirationEventArgs}}),Object.defineProperty(r,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Ue.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(r,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Ue.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(r,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Ue.ConversationTranslationEventArgs}}),Object.defineProperty(r,"ConversationTranslationResult",{enumerable:!0,get:function(){return Ue.ConversationTranslationResult}}),Object.defineProperty(r,"ConversationTranslator",{enumerable:!0,get:function(){return Ue.ConversationTranslator}}),Object.defineProperty(r,"ConversationTranscriber",{enumerable:!0,get:function(){return Ue.ConversationTranscriber}}),Object.defineProperty(r,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Ue.ConversationTranscriptionResult}}),Object.defineProperty(r,"Meeting",{enumerable:!0,get:function(){return Ue.Meeting}}),Object.defineProperty(r,"MeetingTranscriber",{enumerable:!0,get:function(){return Ue.MeetingTranscriber}}),Object.defineProperty(r,"Participant",{enumerable:!0,get:function(){return Ue.Participant}}),Object.defineProperty(r,"ParticipantChangedReason",{enumerable:!0,get:function(){return Ue.ParticipantChangedReason}}),Object.defineProperty(r,"User",{enumerable:!0,get:function(){return Ue.User}});var ka=Cd();Object.defineProperty(r,"Synthesizer",{enumerable:!0,get:function(){return ka.Synthesizer}});var Fn=vC();Object.defineProperty(r,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Fn.SpeechSynthesisOutputFormat}});var Ar=s0();Object.defineProperty(r,"SpeechSynthesizer",{enumerable:!0,get:function(){return Ar.SpeechSynthesizer}});var er=a0();Object.defineProperty(r,"SynthesisResult",{enumerable:!0,get:function(){return er.SynthesisResult}});var Un=c0();Object.defineProperty(r,"SpeechSynthesisResult",{enumerable:!0,get:function(){return Un.SpeechSynthesisResult}});var ba=u0();Object.defineProperty(r,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return ba.SpeechSynthesisEventArgs}});var Ma=l0();Object.defineProperty(r,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Ma.SpeechSynthesisWordBoundaryEventArgs}});var Oa=p0();Object.defineProperty(r,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Oa.SpeechSynthesisBookmarkEventArgs}});var Da=d0();Object.defineProperty(r,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Da.SpeechSynthesisVisemeEventArgs}});var Wn=h0();Object.defineProperty(r,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Wn.SpeechSynthesisBoundaryType}});var hn=v0();Object.defineProperty(r,"SynthesisVoicesResult",{enumerable:!0,get:function(){return hn.SynthesisVoicesResult}});var vn=f0();Object.defineProperty(r,"SynthesisVoiceGender",{enumerable:!0,get:function(){return vn.SynthesisVoiceGender}}),Object.defineProperty(r,"SynthesisVoiceType",{enumerable:!0,get:function(){return vn.SynthesisVoiceType}}),Object.defineProperty(r,"VoiceInfo",{enumerable:!0,get:function(){return vn.VoiceInfo}});var _r=g0();Object.defineProperty(r,"SpeakerAudioDestination",{enumerable:!0,get:function(){return _r.SpeakerAudioDestination}});var Ir=m0();Object.defineProperty(r,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Ir.ConversationTranscriptionCanceledEventArgs}});var Zc=y0();Object.defineProperty(r,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Zc.MeetingTranscriptionCanceledEventArgs}});var Na=S0();Object.defineProperty(r,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Na.PronunciationAssessmentGradingSystem}});var za=C0();Object.defineProperty(r,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return za.PronunciationAssessmentGranularity}});var $c=P0();Object.defineProperty(r,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return $c.PronunciationAssessmentConfig}});var Hn=R0();Object.defineProperty(r,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Hn.PronunciationAssessmentResult}});var Vn=kC();Object.defineProperty(r,"LanguageIdMode",{enumerable:!0,get:function(){return Vn.LanguageIdMode}});var Kn=w0();Object.defineProperty(r,"AvatarConfig",{enumerable:!0,get:function(){return Kn.AvatarConfig}});var Jn=E0();Object.defineProperty(r,"AvatarEventArgs",{enumerable:!0,get:function(){return Jn.AvatarEventArgs}});var Gn=T0();Object.defineProperty(r,"AvatarSynthesizer",{enumerable:!0,get:function(){return Gn.AvatarSynthesizer}});var Bt=A0();Object.defineProperty(r,"AvatarVideoFormat",{enumerable:!0,get:function(){return Bt.AvatarVideoFormat}}),Object.defineProperty(r,"Coordinate",{enumerable:!0,get:function(){return Bt.Coordinate}});var tr=_0();Object.defineProperty(r,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return tr.AvatarWebRTCConnectionResult}});var ja=I0();Object.defineProperty(r,"Diagnostics",{enumerable:!0,get:function(){return ja.Diagnostics}});var La=lC();Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return La.LogLevel}})})(hp)),hp}var Ty;function k0(){if(Ty)return ho;Ty=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.ProxyInfo=void 0;const r=V();let i=class BC{constructor(h,a,p,c){this.privProxyHostName=h,this.privProxyPort=a,this.privProxyUserName=p,this.privProxyPassword=c}static fromParameters(h){return new BC(h.getProperty(r.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(h.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPort),10),h.getProperty(r.PropertyId.SpeechServiceConnection_ProxyUserName),h.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(h){return this.fromParameters(h.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return ho.ProxyInfo=i,ho}var Ms={},Dp,Ay;function b0(){if(Ay)return Dp;Ay=1;const r=new Set(["json","buffer","string"]);return Dp=i=>(...s)=>{const h=new Set;let a,p,c,o="";return s.forEach(u=>{if(typeof u=="string")if(u.toUpperCase()===u)if(a){const d=`Can't set method to ${u}, already set to ${a}.`;throw new Error(d)}else a=u;else if(u.startsWith("http:")||u.startsWith("https:"))o=u;else if(r.has(u))p=u;else throw new Error(`Unknown encoding, ${u}`);else if(typeof u=="number")h.add(u);else if(typeof u=="object")if(Array.isArray(u)||u instanceof Set)u.forEach(d=>h.add(d));else{if(c)throw new Error("Cannot set headers twice.");c=u}else throw new Error(`Unknown type: ${typeof u}`)}),a||(a="GET"),h.size===0&&h.add(200),i(h,a,p,c,o)},Dp}var Np,_y;function M0(){if(_y)return Np;_y=1;const r=b0();class i extends Error{constructor(a,...p){super(...p),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.name="StatusError",this.message=a.statusMessage,this.statusCode=a.status,this.res=a,this.json=a.json.bind(a),this.text=a.text.bind(a),this.arrayBuffer=a.arrayBuffer.bind(a);let c;Object.defineProperty(this,"responseBody",{get:()=>(c||(c=this.arrayBuffer()),c)}),this.headers={};for(const[u,d]of a.headers.entries())this.headers[u.toLowerCase()]=d}}return Np=r((h,a,p,c,o)=>async(u,d,v={})=>{u=o+(u||"");let g=new URL(u);if(c||(c={}),g.username&&(c.Authorization="Basic "+btoa(g.username+":"+g.password),g=new URL(g.protocol+"//"+g.host+g.pathname+g.search)),g.protocol!=="https:"&&g.protocol!=="http:")throw new Error(`Unknown protocol, ${g.protocol}`);if(d&&!(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="string"))if(typeof d=="object")d=JSON.stringify(d),c["Content-Type"]="application/json";else throw new Error("Unknown body type.");v=new Headers({...c||{},...v});const m=await fetch(g,{method:a,headers:v,body:d});if(m.statusCode=m.status,!h.has(m.status))throw new i(m);return p==="json"?m.json():p==="buffer"?m.arrayBuffer():p==="string"?m.text():m}),Np}var Iy;function O0(){return Iy||(Iy=1,(function(r){var i=Ms&&Ms.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0}),r.RestMessageAdapter=r.RestRequestType=void 0;const s=i(M0()),h=ie();var a;(function(c){c.Get="GET",c.Post="POST",c.Delete="DELETE",c.File="file"})(a=r.RestRequestType||(r.RestRequestType={}));let p=class{constructor(o){if(!o)throw new h.ArgumentNullError("configParams");this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}static extractHeaderValue(o,u){let d="";try{const v=u.trim().split(/[\r\n]+/),g={};v.forEach(m=>{const y=m.split(": "),w=y.shift().toLowerCase(),P=y.join(": ");g[w]=P}),d=g[o.toLowerCase()]}catch{}return d}set options(o){this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}setHeaders(o,u){this.privHeaders[o]=u}request(o,u,d={},v=null){const g=new h.Deferred,m=o===a.File?"POST":o,y=(P,E={})=>{const C=P;return{data:JSON.stringify(E),headers:JSON.stringify(P.headers),json:E,ok:P.statusCode>=200&&P.statusCode<300,status:P.statusCode,statusText:E.error?E.error.message:C.statusText?C.statusText:C.statusMessage}},w=P=>{const E=(0,s.default)(u,m,this.privHeaders,200,201,202,204,400,401,402,403,404),C=this.queryParams(d)===""?"":`?${this.queryParams(d)}`;E(C,P).then(async T=>{if(o===a.Delete||T.statusCode===204)g.resolve(y(T));else try{const A=await T.json();g.resolve(y(T,A))}catch{g.resolve(y(T))}}).catch(T=>{g.reject(T)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),o===a.Post&&v&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),w(v),g.promise}queryParams(o={}){return Object.keys(o).map(u=>encodeURIComponent(u)+"="+encodeURIComponent(o[u])).join("&")}};r.RestMessageAdapter=p})(Ms)),Ms}var Os={},ky;function FC(){if(ky)return Os;ky=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.RestConfigBase=void 0;let r=class Gc{static get requestOptions(){return Gc.privDefaultRequestOptions}static get configParams(){return Gc.privDefaultParams}static get restErrors(){return Gc.privRestErrors}};return Os.RestConfigBase=r,r.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},r.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},r.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},Os}var by;function ct(){return by||(by=1,(function(r){var i=Jr&&Jr.__createBinding||(Object.create?(function(h,a,p,c){c===void 0&&(c=p),Object.defineProperty(h,c,{enumerable:!0,get:function(){return a[p]}})}):(function(h,a,p,c){c===void 0&&(c=p),h[c]=a[p]})),s=Jr&&Jr.__exportStar||function(h,a){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(a,p)&&i(a,h,p)};Object.defineProperty(r,"__esModule",{value:!0}),s(Gw(),r),s(Qw(),r),s(Yw(),r),s(Xw(),r),s(Zw(),r),s($w(),r),s(pC(),r),s(eE(),r),s(k0(),r),s(O0(),r),s(FC(),r)})(Jr)),Jr}var Ds={},My;function Xc(){if(My)return Ds;My=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.SpeechConnectionMessage=void 0;const r=ie(),i=gt();class s extends r.ConnectionMessage{constructor(a,p,c,o,u,d,v,g){if(!p)throw new r.ArgumentNullError("path");if(!c)throw new r.ArgumentNullError("requestId");const m={};if(m[i.HeaderNames.Path]=p,m[i.HeaderNames.RequestId]=c,m[i.HeaderNames.RequestTimestamp]=new Date().toISOString(),o&&(m[i.HeaderNames.ContentType]=o),d&&(m[i.HeaderNames.RequestStreamId]=d),v)for(const y in v)y&&(m[y]=v[y]);g?super(a,u,m,g):super(a,u,m),this.privPath=p,this.privRequestId=c,this.privContentType=o,this.privStreamId=d,this.privAdditionalHeaders=v}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(a){let p=null,c=null,o=null,u=null;const d={};if(a.headers)for(const v in a.headers)v&&(v.toLowerCase()===i.HeaderNames.Path.toLowerCase()?p=a.headers[v]:v.toLowerCase()===i.HeaderNames.RequestId.toLowerCase()?c=a.headers[v]:v.toLowerCase()===i.HeaderNames.ContentType.toLowerCase()?o=a.headers[v]:v.toLowerCase()===i.HeaderNames.RequestStreamId.toLowerCase()?u=a.headers[v]:d[v]=a.headers[v]);return new s(a.messageType,p,c,o,a.body,u,d,a.id)}}return Ds.SpeechConnectionMessage=s,Ds}var zp={},Oy;function D0(){return Oy||(Oy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SegmentationMode=void 0,(function(i){i.Normal="Normal",i.Disabled="Disabled",i.Custom="Custom",i.Semantic="Semantic"})(r.SegmentationMode||(r.SegmentationMode={}))})(zp)),zp}var jp={},Dy;function N0(){return Dy||(Dy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NextAction=void 0,(function(i){i.None="None",i.Synthesize="Synthesize"})(r.NextAction||(r.NextAction={}))})(jp)),jp}var Lp={},Ny;function z0(){return Ny||(Ny=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Mode=void 0,(function(i){i.None="None",i.Always="Always"})(r.Mode||(r.Mode={}))})(Lp)),Lp}var xp={},zy;function j0(){return zy||(zy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LanguageIdDetectionPriority=r.LanguageIdDetectionMode=void 0,(function(i){i.DetectAtAudioStart="DetectAtAudioStart",i.DetectContinuous="DetectContinuous",i.DetectSegments="DetectSegments"})(r.LanguageIdDetectionMode||(r.LanguageIdDetectionMode={})),(function(i){i.Auto="Auto",i.PrioritizeLatency="PrioritizeLatency",i.PrioritizeAccuracy="PrioritizeAccuracy"})(r.LanguageIdDetectionPriority||(r.LanguageIdDetectionPriority={}))})(xp)),xp}var qp={},jy;function L0(){return jy||(jy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NextAction=void 0,(function(i){i.Recognize="Recognize",i.None="None"})(r.NextAction||(r.NextAction={}))})(qp)),qp}var Bp={},Ly;function x0(){return Ly||(Ly=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OnUnknownAction=void 0,(function(i){i.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",i.None="None"})(r.OnUnknownAction||(r.OnUnknownAction={}))})(Bp)),Bp}var Fp={},xy;function q0(){return xy||(xy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ResultType=void 0,(function(i){i.Auto="Auto",i.StableFragment="StableFragment",i.Hypothesis="Hypothesis",i.None="None"})(r.ResultType||(r.ResultType={}))})(Fp)),Fp}var Up={},qy;function B0(){return qy||(qy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PhraseResultOutputType=void 0,(function(i){i.Always="Always",i.None="None"})(r.PhraseResultOutputType||(r.PhraseResultOutputType={}))})(Up)),Up}var Wp={},By;function F0(){return By||(By=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NextAction=void 0,(function(i){i.None="None",i.Translate="Translate"})(r.NextAction||(r.NextAction={}))})(Wp)),Wp}var Fy;function U0(){if(Fy)return so;Fy=1,Object.defineProperty(so,"__esModule",{value:!0}),so.ServiceRecognizerBase=void 0;const r=ct(),i=ie(),s=V(),h=ee(),a=Xc(),p=D0(),c=Dt(),o=N0(),u=z0(),d=j0(),v=L0(),g=x0(),m=q0(),y=B0(),w=F0();let P=class Ra{constructor(C,T,A,M,j){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!C)throw new i.ArgumentNullError("authentication");if(!T)throw new i.ArgumentNullError("connectionFactory");if(!A)throw new i.ArgumentNullError("audioSource");if(!M)throw new i.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=M.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=C,this.privConnectionFactory=T,this.privAudioSource=A,this.privRecognizerConfig=M,this.privIsDisposed=!1,this.privRecognizer=j,this.privRequestSession=new h.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new i.EventSource,this.privServiceEvents=new i.EventSource,this.privDynamicGrammar=new h.DynamicGrammarBuilder,this.privSpeechContext=new h.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new h.AgentConfig,this.privRecognizerConfig.parameters.getProperty(s.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=i.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(K=>{if(K.name==="ConnectionClosedEvent"){const U=K;(U.statusCode===1003||U.statusCode===1007||U.statusCode===1002||U.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(s.CancellationReason.Error,U.statusCode===1007?s.CancellationErrorCode.BadRequestParameters:s.CancellationErrorCode.ConnectionFailure,`${U.reason} websocket error code: ${U.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,i.createNoDashGuid)())}setTranslationJson(){const C=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(C!==void 0){const T=C.split(","),A=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),M=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),j=A!==void 0?o.NextAction.Synthesize:o.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:j},onSuccess:{action:j},output:{includePassThroughResults:!0,interimResults:{mode:u.Mode.Always}},targetLanguages:T},M!==void 0&&(this.privSpeechContext.getContext().translation.category=M),A!==void 0){const K={};for(const U of T)K[U]=A;this.privSpeechContext.getContext().synthesis={defaultVoices:K}}const L=this.privSpeechContext.getContext().phraseDetection||{};L.onSuccess={action:w.NextAction.Translate},L.onInterim={action:w.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=L}}setSpeechSegmentationTimeoutJson(){const C=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),T=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),A=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationStrategy,void 0),M={mode:p.SegmentationMode.Normal};let j=!1;if(A!==void 0){j=!0;let L=p.SegmentationMode.Normal;switch(A.toLowerCase()){case"default":break;case"time":L=p.SegmentationMode.Custom;break;case"semantic":L=p.SegmentationMode.Semantic;break}M.mode=L}if(C!==void 0){j=!0;const L=parseInt(C,10);M.mode=p.SegmentationMode.Custom,M.segmentationSilenceTimeoutMs=L}if(T!==void 0){j=!0;const L=parseInt(T,10);M.mode=p.SegmentationMode.Custom,M.segmentationForcedTimeoutMs=L}if(j){const L=this.privSpeechContext.getContext().phraseDetection||{};switch(L.mode=this.recognitionMode,this.recognitionMode){case c.RecognitionMode.Conversation:L.conversation=L.conversation??{segmentation:{}},L.conversation.segmentation=M;break;case c.RecognitionMode.Interactive:L.interactive=L.interactive??{segmentation:{}},L.interactive.segmentation=M;break;case c.RecognitionMode.Dictation:L.dictation=L.dictation??{},L.dictation.segmentation=M;break}this.privSpeechContext.getContext().phraseDetection=L}}setLanguageIdJson(){const C=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const T=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");T.length===1&&T[0]===h.AutoDetectSourceLanguagesOpenRangeOptionName&&(T[0]="UND");let A;this.privRecognizerConfig.languageIdMode==="Continuous"?A=d.LanguageIdDetectionMode.DetectContinuous:A=d.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:T,mode:A,onSuccess:{action:v.NextAction.Recognize},onUnknown:{action:g.OnUnknownAction.None},priority:d.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:m.ResultType.Auto},phraseResults:{resultType:y.PhraseResultOutputType.Always}};const M=this.privRecognizerConfig.sourceLanguageModels;M!==void 0&&(C.customModels=M,C.onInterim={action:w.NextAction.None},C.onSuccess={action:w.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=C}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(h.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()===s.OutputFormat[s.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}setSpeechStartEventSensitivityJson(){const C=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_StartEventSensitivity,void 0);if(C!==void 0){let T=!1;switch(C.toLowerCase()){case c.SpeechStartEventSensitivity.Low:case c.SpeechStartEventSensitivity.Medium:case c.SpeechStartEventSensitivity.High:T=!0;break}if(T){const A=this.privSpeechContext.getContext().phraseDetection||{};A.voiceOnsetSensitivity=C.toLowerCase(),this.privSpeechContext.getContext().phraseDetection=A}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(C){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.ConversationTranslator_Token,C)}set authentication(C){this.privAuthentication=C}isDisposed(){return this.privIsDisposed}async dispose(C){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(C)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(C,T,A){if(this.recognizeOverride!==void 0){await this.recognizeOverride(C,T,A);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=C,this.privRecognizerConfig.recognitionEndpointVersion==="2"){const U=this.privSpeechContext.getContext().phraseDetection||{};U.mode=C,this.privSpeechContext.getContext().phraseDetection=U}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.setSpeechStartEventSensitivityJson(),this.privSuccessCallback=T,this.privErrorCallback=A,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const M=this.connectImpl();let j;try{const U=await this.audioSource.attach(this.privRequestSession.audioNodeId),se=await this.audioSource.format,ve=await this.audioSource.deviceInfo;this.privIsLiveAudio=ve.type&&ve.type===h.type.Microphones,j=new r.ReplayableAudioNode(U,se.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(j,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:ve}}catch(U){throw await this.privRequestSession.onStopRecognizing(),U}try{await M}catch(U){await this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,U);return}const L=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,L),this.receiveMessage(),this.sendAudio(j).catch(async U=>{await this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,U)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(C,T){this.connectImpl().then(()=>{try{C&&C()}catch(A){T&&T(A)}},A=>{try{T&&T(A)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(C){}async sendNetworkMessage(C,T){const A=typeof T=="string"?i.MessageType.Text:i.MessageType.Binary,M=typeof T=="string"?"application/json":"";return(await this.fetchConnection()).send(new a.SpeechConnectionMessage(A,C,this.privRequestSession.requestId,M,T))}set activityTemplate(C){this.privActivityTemplate=C}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(C){this.privExpectContentAssessmentResponse=C}async sendTelemetryData(){const C=this.privRequestSession.getTelemetry();if(Ra.telemetryDataEnabled!==!0||this.privIsDisposed||C===null)return;if(Ra.telemetryData)try{Ra.telemetryData(C)}catch{}await(await this.fetchConnection()).send(new a.SpeechConnectionMessage(i.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",C))}async cancelRecognitionLocal(C,T,A){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,C,T,A))}async receiveMessage(){try{if(this.privIsDisposed)return;let C=await this.fetchConnection();const T=await C.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!T)return this.receiveMessage();this.privServiceHasSentMessage=!0;const A=a.SpeechConnectionMessage.fromConnectionMessage(T);if(A.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(A.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const M=h.SpeechDetected.fromJSON(A.textBody,this.privRequestSession.currentTurnAudioOffset),j=new s.RecognitionEventArgs(M.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,j);break;case"speech.enddetected":let L;A.textBody.length>0?L=A.textBody:L="{ Offset: 0 }";const K=h.SpeechDetected.fromJSON(L,this.privRequestSession.currentTurnAudioOffset),U=new s.RecognitionEventArgs(K.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,U);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(s.CancellationReason.EndOfStream,s.CancellationErrorCode.NoError,void 0));const se=new s.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,se);return}else C=await this.fetchConnection(),await this.sendPrePayloadJSON(C);break;default:await this.processTypeSpecificMessages(A)||this.privServiceEvents&&this.serviceEvents.onEvent(new i.ServiceEvent(A.path.toLowerCase(),A.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const C=this.privRequestSession.recognitionBytesSent,T=this.privAverageBytesPerMs!==0?C/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(T)}sendSpeechContext(C,T){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const A=this.speechContext.toJSON();if(T&&this.privRequestSession.onSpeechContext(),A)return C.send(new a.SpeechConnectionMessage(i.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",A))}setupTranslationWithLanguageId(){const C=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),T=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(C!==void 0&&T){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:m.ResultType.None},phraseResults:{resultType:y.PhraseResultOutputType.None}};const A=this.privSpeechContext.getContext().translation;if(A){const M=this.privRecognizerConfig.sourceLanguageModels;if(M!==void 0&&M.length>0){const L=this.privSpeechContext.getContext().phraseDetection||{};L.customModels=M,this.privSpeechContext.getContext().phraseDetection=L}this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(A.onSuccess={action:o.NextAction.Synthesize},A.onPassthrough={action:o.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(C,T=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(C);await this.sendSpeechContext(C,T),await this.sendWaveHeader(C)}async sendWaveHeader(C){const T=await this.audioSource.format;return C.send(new a.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",T.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(C=>C.state()===i.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(C,T,A){if(T.onSpeechContext(),Ra.telemetryDataEnabled!==!0){const j={context:{system:JSON.parse(A).context.system}};A=JSON.stringify(j)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const M=JSON.parse(A);M.context.DisableReferenceChannel="True",M.context.MicSpec="1_0_0",A=JSON.stringify(M)}if(A)return C.send(new a.SpeechConnectionMessage(i.MessageType.Text,"speech.config",T.requestId,"application/json",A))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(C=>C.state()===i.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(C){const T=await this.audioSource.format;this.privAverageBytesPerMs=T.avgBytesPerSec/1e3;let A=Date.now();const M=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),j=T.avgBytesPerSec/1e3*parseInt(M,10),L=this.privRequestSession.recogNumber,K=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===L){const U=await this.fetchConnection(),se=await C.read();if(this.privRequestSession.isSpeechEnded)return;let ve,pe;if(!se||se.isEnd?(ve=null,pe=0):(ve=se.buffer,this.privRequestSession.onAudioSent(ve.byteLength),j>=this.privRequestSession.bytesSent?pe=0:pe=Math.max(0,A-Date.now())),pe!==0&&await this.delay(pe),ve!==null&&(A=Date.now()+ve.byteLength*1e3/(T.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===L)if(U.send(new a.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,null,ve)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),se!=null&&se.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return K()}};return K()}async retryableConnect(){let C=!1;this.privAuthFetchEventId=(0,i.createNoDashGuid)();const T=this.privRequestSession.sessionId;this.privConnectionId=T!==void 0?T:(0,i.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let A=0,M="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const L=await(C?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const K=await this.privConnectionFactory.create(this.privRecognizerConfig,L,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(K.events),K.events.attach(se=>{this.connectionEvents.onEvent(se)});const U=await K.open();if(U.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(U.statusCode),Promise.resolve(K);U.statusCode===1006&&(C=!0),A=U.statusCode,M=U.reason}return await this.privRequestSession.onConnectionEstablishCompleted(A,M),Promise.reject(`Unable to contact server. StatusCode: ${A}, ${this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${M}`)}delay(C){return new Promise(T=>this.privSetTimeout(T,C))}writeBufferToConsole(C){let T="Buffer Size: ";if(C===null)T+="null";else{const A=new Uint8Array(C);T+=`${C.byteLength}\r
`;for(let M=0;M<C.byteLength;M++)T+=A[M].toString(16).padStart(2,"0")+" ",(M+1)%16===0&&(console.info(T),T="")}console.info(T)}async sendFinalAudio(){await(await this.fetchConnection()).send(new a.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const C=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(C):(await this.sendSpeechServiceConfig(C,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(C,!1),C)}};return so.ServiceRecognizerBase=P,P.telemetryDataEnabled=!0,so}var Ns={},Uy;function W0(){if(Uy)return Ns;Uy=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.ConversationServiceRecognizer=void 0;const r=V(),i=ee();let s=class extends i.ServiceRecognizerBase{constructor(a,p,c,o,u){super(a,p,c,o,u),this.handleSpeechPhraseMessage=async d=>this.handleSpeechPhrase(d),this.handleSpeechHypothesisMessage=d=>this.handleSpeechHypothesis(d)}processTypeSpecificMessages(a){}handleRecognizedCallback(a,p,c){}handleRecognizingCallback(a,p,c){}async processSpeechMessages(a){let p=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(a.textBody),p=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(a.textBody),p=!0;break}return p}cancelRecognition(a,p,c,o,u){}async handleSpeechPhrase(a){const p=i.SimpleSpeechPhrase.fromJSON(a,this.privRequestSession.currentTurnAudioOffset),c=i.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);let o;const u=new r.PropertyCollection;if(u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,a),this.privRequestSession.onPhraseRecognized(p.Offset+p.Duration),r.ResultReason.Canceled===c){const d=i.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),v=i.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(d,v,i.EnumTranslation.implTranslateErrorDetails(v))}else if(p.RecognitionStatus!==i.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])o=new r.SpeechRecognitionResult(this.privRequestSession.requestId,c,p.DisplayText,p.Duration,p.Offset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,p.asJson(),u);else{const d=i.DetailedSpeechPhrase.fromJSON(a,this.privRequestSession.currentTurnAudioOffset);o=new r.SpeechRecognitionResult(this.privRequestSession.requestId,c,d.Text,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,d.SpeakerId,void 0,d.asJson(),u)}this.handleRecognizedCallback(o,o.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(a){const p=i.SpeechHypothesis.fromJSON(a,this.privRequestSession.currentTurnAudioOffset),c=new r.PropertyCollection;c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,a);const o=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,p.Text,p.Duration,p.Offset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,p.asJson(),c);this.privRequestSession.onHypothesis(p.Offset),this.handleRecognizingCallback(o,p.Duration,this.privRequestSession.sessionId)}};return Ns.ConversationServiceRecognizer=s,Ns}var Hp={},Wy;function H0(){return Wy||(Wy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognizerConfig=r.SpeechResultFormat=void 0;const i=V(),s=ee(),h=Dt();(function(p){p[p.Simple=0]="Simple",p[p.Detailed=1]="Detailed"})(r.SpeechResultFormat||(r.SpeechResultFormat={}));class a{constructor(c,o){this.privSpeechServiceConfig=c||new s.SpeechServiceConfig(new s.Context(null)),this.privParameters=o,this.privMaxRetryCount=parseInt(o.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=o.getProperty(i.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(c){this.privRecognitionMode=c,this.privRecognitionActivityTimeout=c===h.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=h.RecognitionMode[c]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==h.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(i.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(c){this.parameters.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,c)}get sourceLanguageModels(){const c=[];let o=!1;if(this.autoDetectSourceLanguages!==void 0)for(const u of this.autoDetectSourceLanguages.split(",")){const d=u+i.PropertyId.SpeechServiceConnection_EndpointId.toString(),v=this.parameters.getProperty(d,void 0);v!==void 0?(c.push({language:u,endpoint:v}),o=!0):c.push({language:u,endpoint:""})}return o?c:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(c){this.privEnableSpeakerId=c}}r.RecognizerConfig=a})(Hp)),Hp}var Vp={},Hy;function V0(){return Hy||(Hy=1,Object.defineProperty(Vp,"__esModule",{value:!0})),Vp}var zs={},Vy;function K0(){if(Vy)return zs;Vy=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.WebsocketMessageFormatter=void 0;const r=ie(),i=`\r
`;let s=class{toConnectionMessage(a){const p=new r.Deferred;try{if(a.messageType===r.MessageType.Text){const c=a.textContent;let o={},u=null;if(c){const d=c.split(`\r
\r
`);d&&d.length>0&&(o=this.parseHeaders(d[0]),d.length>1&&(u=d[1]))}p.resolve(new r.ConnectionMessage(a.messageType,u,o,a.id))}else if(a.messageType===r.MessageType.Binary){const c=a.binaryContent;let o={},u=null;if(!c||c.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const d=new DataView(c),v=d.getInt16(0);if(c.byteLength<v+2)throw new Error("Invalid binary message format. Header content missing.");let g="";for(let m=0;m<v;m++)g+=String.fromCharCode(d.getInt8(m+2));o=this.parseHeaders(g),c.byteLength>v+2&&(u=c.slice(2+v)),p.resolve(new r.ConnectionMessage(a.messageType,u,o,a.id))}}catch(c){p.reject(`Error formatting the message. Error: ${c}`)}return p.promise}fromConnectionMessage(a){const p=new r.Deferred;try{if(a.messageType===r.MessageType.Text){const c=`${this.makeHeaders(a)}${i}${a.textBody?a.textBody:""}`;p.resolve(new r.RawWebsocketMessage(r.MessageType.Text,c,a.id))}else if(a.messageType===r.MessageType.Binary){const c=this.makeHeaders(a),o=a.binaryBody,u=this.stringToArrayBuffer(c),d=new Int8Array(u),v=d.byteLength,g=new Int8Array(2+v+(o?o.byteLength:0));if(g[0]=v>>8&255,g[1]=v&255,g.set(d,2),o){const y=new Int8Array(o);g.set(y,2+v)}const m=g.buffer;p.resolve(new r.RawWebsocketMessage(r.MessageType.Binary,m,a.id))}}catch(c){p.reject(`Error formatting the message. ${c}`)}return p.promise}makeHeaders(a){let p="";if(a.headers)for(const c in a.headers)c&&(p+=`${c}: ${a.headers[c]}${i}`);return p}parseHeaders(a){const p={};if(a){const c=a.match(/[^\r\n]+/g);if(p){for(const o of c)if(o){const u=o.indexOf(":"),d=u>0?o.substr(0,u).trim().toLowerCase():o,v=u>0&&o.length>u+1?o.substr(u+1).trim():"";p[d]=v}}}return p}stringToArrayBuffer(a){const p=new ArrayBuffer(a.length),c=new DataView(p);for(let o=0;o<a.length;o++)c.setUint8(o,a.charCodeAt(o));return p}};return zs.WebsocketMessageFormatter=s,zs}var js={},Ky;function J0(){if(Ky)return js;Ky=1,Object.defineProperty(js,"__esModule",{value:!0}),js.SpeechConnectionFactory=void 0;const r=ct(),i=ee(),s=V(),h=$t(),a=ee(),p=gt(),c=Tr(),o=Dt();let u=class extends h.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(v,g,m){let y=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0);const w=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,void 0),P=h.ConnectionFactoryBase.getHostSuffix(w),E=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://"+w+".stt.speech"+P),C={},T=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,void 0),A=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(T?(!y||y.search(c.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(C[c.QueryParameterNames.CustomSpeechDeploymentId]=T):A&&(!y||y.search(c.QueryParameterNames.Language)===-1)&&(C[c.QueryParameterNames.Language]=A),(!y||y.search(c.QueryParameterNames.Format)===-1)&&(C[c.QueryParameterNames.Format]=v.parameters.getProperty(i.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()),v.autoDetectSourceLanguages!==void 0&&(C[c.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(v,C,y),y){const U=new URL(y),se=U.pathname;(se===""||se==="/")&&(U.pathname=this.universalUri+v.recognitionEndpointVersion,y=await h.ConnectionFactoryBase.getRedirectUrlFromEndpoint(U.toString()))}if(!y)switch(v.recognitionMode){case o.RecognitionMode.Conversation:v.parameters.getProperty(i.ForceDictationPropertyName,"false")==="true"?y=E+this.dictationRelativeUri:v.recognitionEndpointVersion!==void 0&&parseInt(v.recognitionEndpointVersion,10)>1?y=`${E}${this.universalUri}${v.recognitionEndpointVersion}`:y=E+this.conversationRelativeUri;break;case o.RecognitionMode.Dictation:y=E+this.dictationRelativeUri;break;default:v.recognitionEndpointVersion!==void 0&&parseInt(v.recognitionEndpointVersion,10)>1?y=`${E}${this.universalUri}${v.recognitionEndpointVersion}`:y=E+this.interactiveRelativeUri;break}const M={};g.token!==void 0&&g.token!==""&&(M[g.headerName]=g.token),M[p.HeaderNames.ConnectionId]=m,M.connectionId=m;const j=v.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",L=new r.WebsocketConnection(y,C,M,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(v),j,m),K=L.uri;return v.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,K),L}};return js.SpeechConnectionFactory=u,js}var Ls={},Jy;function G0(){if(Jy)return Ls;Jy=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.ConversationTranscriberConnectionFactory=void 0;const r=ct(),i=V(),s=ee(),h=$t(),a=ee(),p=gt(),c=Tr();let o=class extends h.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.conversationRelativeUriV1="/speech/recognition/conversation/cognitiveservices/v1"}async create(d,v,g){let m=d.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);const y=d.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,void 0),w=h.ConnectionFactoryBase.getHostSuffix(y),P=d.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+y+".stt.speech"+w),E={},C=d.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),T=d.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(C?(!m||m.search(c.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(E[c.QueryParameterNames.CustomSpeechDeploymentId]=C):T&&(!m||m.search(c.QueryParameterNames.Language)===-1)&&(E[c.QueryParameterNames.Language]=T),d.autoDetectSourceLanguages!==void 0&&(E[c.QueryParameterNames.EnableLanguageId]="true"),d.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)==="1")m=`${P}${this.universalUri}`;else{if(this.setV2UrlParams(d,E,m),m){const U=new URL(m),se=U.pathname;(se===""||se==="/")&&(U.pathname=this.universalUri,m=await h.ConnectionFactoryBase.getRedirectUrlFromEndpoint(U.toString()))}m||(m=`${P}${this.conversationRelativeUriV1}`)}const M={};v.token!==void 0&&v.token!==""&&(M[v.headerName]=v.token),M[p.HeaderNames.ConnectionId]=g;const j=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",L=new r.WebsocketConnection(m,E,M,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(d),j,g),K=L.uri;return d.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,K),L}setV2UrlParams(d,v,g){new Map([[i.PropertyId.Speech_SegmentationSilenceTimeoutMs,c.QueryParameterNames.SegmentationSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_EnableAudioLogging,c.QueryParameterNames.EnableAudioLogging],[i.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,c.QueryParameterNames.EndSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,c.QueryParameterNames.InitialSilenceTimeoutMs],[i.PropertyId.SpeechServiceResponse_PostProcessingOption,c.QueryParameterNames.Postprocessing],[i.PropertyId.SpeechServiceResponse_ProfanityOption,c.QueryParameterNames.Profanity],[i.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,c.QueryParameterNames.StableIntermediateThreshold]]).forEach((w,P)=>{this.setUrlParameter(P,w,d,v,g)});const y=JSON.parse(d.parameters.getProperty(s.ServicePropertiesPropertyName,"{}"));Object.keys(y).forEach(w=>{v[w]=y[w]})}};return Ls.ConversationTranscriberConnectionFactory=o,Ls}var xs={},Gy;function Q0(){if(Gy)return xs;Gy=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.TranscriberConnectionFactory=void 0;const r=ct(),i=V(),s=$t(),h=ee(),a=gt(),p=Tr();let c=class extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(u,d,v){let g=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);const m=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,"centralus"),y=s.ConnectionFactoryBase.getHostSuffix(m),w="wss://transcribe."+m+".cts.speech"+y+this.multiaudioRelativeUri,P=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,w),E={};this.setQueryParams(E,u,g),g||(g=P);const C={};d.token!==void 0&&d.token!==""&&(C[d.headerName]=d.token),C[a.HeaderNames.ConnectionId]=v,u.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,g);const T=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(g,E,C,new h.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),T,v))}setQueryParams(u,d,v){const g=d.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=d.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);g&&!(p.QueryParameterNames.CustomSpeechDeploymentId in u)&&(u[p.QueryParameterNames.CustomSpeechDeploymentId]=g),m&&!(p.QueryParameterNames.Language in u)&&(u[p.QueryParameterNames.Language]=m);const y=d.parameters.getProperty(i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",w=d.parameters.getProperty(h.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])!==i.OutputFormat[i.OutputFormat.Simple];(y||w)&&(u[p.QueryParameterNames.Format]=i.OutputFormat[i.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(d,u,v)}};return xs.TranscriberConnectionFactory=c,xs}var qs={},Qy;function Y0(){if(Qy)return qs;Qy=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.TranslationConnectionFactory=void 0;const r=ct(),i=OC(),s=V(),h=$t(),a=ee(),p=gt(),c=Tr(),o=Dt();let u=class extends h.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(v,g,m){let y=this.getEndpointUrl(v);const w={};if(this.setQueryParams(w,v,y),y){const T=new URL(y),A=T.pathname;(A===""||A==="/")&&(T.pathname=this.universalUri,y=await h.ConnectionFactoryBase.getRedirectUrlFromEndpoint(T.toString()))}const P={};g.token!==void 0&&g.token!==""&&(P[g.headerName]=g.token),P[p.HeaderNames.ConnectionId]=m,v.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,y);const E=v.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(y,w,P,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(v),E,m)}getEndpointUrl(v,g){const m=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region),y=h.ConnectionFactoryBase.getHostSuffix(m);let w=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0);return w?g===!0?w:i.StringUtils.formatString(w,{region:m}):(v.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?w=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+y)+this.translationV1Uri:w=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+y)+this.universalUri,g===!0?w:i.StringUtils.formatString(w,{region:m}))}setQueryParams(v,g,m){v.from=g.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),v.to=g.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages),v.scenario=g.recognitionMode===o.RecognitionMode.Interactive?"interactive":g.recognitionMode===o.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(g,v,m),this.setUrlParameter(s.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,c.QueryParameterNames.StableTranslation,g,v,m);const y=g.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);y!==void 0&&(v.voice=y,v.features="requireVoice")}};return qs.TranslationConnectionFactory=u,qs}var Bs={},Yy;function X0(){if(Yy)return Bs;Yy=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.EnumTranslation=void 0;const r=V(),i=ee();let s=class{static implTranslateRecognitionResult(a,p=!1){let c=r.ResultReason.Canceled;switch(a){case i.RecognitionStatus.Success:c=r.ResultReason.RecognizedSpeech;break;case i.RecognitionStatus.EndOfDictation:c=p?r.ResultReason.RecognizedSpeech:r.ResultReason.NoMatch;break;case i.RecognitionStatus.NoMatch:case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:c=r.ResultReason.NoMatch;break;case i.RecognitionStatus.Error:case i.RecognitionStatus.BadRequest:case i.RecognitionStatus.Forbidden:default:c=r.ResultReason.Canceled;break}return c}static implTranslateCancelResult(a){let p=r.CancellationReason.EndOfStream;switch(a){case i.RecognitionStatus.Success:case i.RecognitionStatus.EndOfDictation:case i.RecognitionStatus.NoMatch:p=r.CancellationReason.EndOfStream;break;case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:case i.RecognitionStatus.Error:case i.RecognitionStatus.BadRequest:case i.RecognitionStatus.Forbidden:default:p=r.CancellationReason.Error;break}return p}static implTranslateCancelErrorCode(a){let p=r.CancellationErrorCode.NoError;switch(a){case i.RecognitionStatus.Error:p=r.CancellationErrorCode.ServiceError;break;case i.RecognitionStatus.TooManyRequests:p=r.CancellationErrorCode.TooManyRequests;break;case i.RecognitionStatus.BadRequest:p=r.CancellationErrorCode.BadRequestParameters;break;case i.RecognitionStatus.Forbidden:p=r.CancellationErrorCode.Forbidden;break;default:p=r.CancellationErrorCode.NoError;break}return p}static implTranslateErrorDetails(a){let p="The speech service encountered an internal error and could not continue.";switch(a){case r.CancellationErrorCode.Forbidden:p="The recognizer is using a free subscription that ran out of quota.";break;case r.CancellationErrorCode.BadRequestParameters:p="Invalid parameter or unsupported audio format in the request.";break;case r.CancellationErrorCode.TooManyRequests:p="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return p}};return Bs.EnumTranslation=s,Bs}var Kp={},Xy;function Z0(){return Xy||(Xy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognitionStatus=r.SynthesisStatus=void 0,(function(i){i[i.Success=0]="Success",i[i.SynthesisEnd=1]="SynthesisEnd",i[i.Error=2]="Error"})(r.SynthesisStatus||(r.SynthesisStatus={})),(function(i){i[i.Success=0]="Success",i[i.NoMatch=1]="NoMatch",i[i.InitialSilenceTimeout=2]="InitialSilenceTimeout",i[i.BabbleTimeout=3]="BabbleTimeout",i[i.Error=4]="Error",i[i.EndOfDictation=5]="EndOfDictation",i[i.TooManyRequests=6]="TooManyRequests",i[i.BadRequest=7]="BadRequest",i[i.Forbidden=8]="Forbidden"})(r.RecognitionStatus||(r.RecognitionStatus={}))})(Kp)),Kp}var Fs={},Zy;function $0(){if(Zy)return Fs;Zy=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.TranslationSynthesisEnd=void 0;const r=ee();let i=class UC{constructor(h){this.privSynthesisEnd=JSON.parse(h),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(h){return new UC(h)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Fs.TranslationSynthesisEnd=i,Fs}var Us={},$y;function eT(){if($y)return Us;$y=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.TranslationHypothesis=void 0;const r=he(),i=vd();let s=class ld{constructor(a,p){this.privTranslationHypothesis=a,this.privTranslationHypothesis.Offset+=p,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(a,p){return new ld(JSON.parse(a),p)}static fromTranslationResponse(a,p){r.Contracts.throwIfNullOrUndefined(a,"translationHypothesis");const c=a.SpeechHypothesis;return a.SpeechHypothesis=void 0,c.Translation=a,new ld(c,p)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var a;return(a=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:a.Language}asJson(){const a={...this.privTranslationHypothesis};return a.Translation!==void 0?JSON.stringify({...a,TranslationStatus:i.TranslationStatus[a.Translation.TranslationStatus]}):JSON.stringify(a)}mapTranslationStatus(a){if(typeof a=="string")return i.TranslationStatus[a];if(typeof a=="number")return a}};return Us.TranslationHypothesis=s,Us}var Ws={},eS;function tT(){if(eS)return Ws;eS=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.TranslationPhrase=void 0;const r=he(),i=ee(),s=vd();let h=class pd{constructor(p,c){this.privTranslationPhrase=p,this.privTranslationPhrase.Offset+=c,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(p,c){return new pd(JSON.parse(p),c)}static fromTranslationResponse(p,c){r.Contracts.throwIfNullOrUndefined(p,"translationResponse");const o=p.SpeechPhrase;return p.SpeechPhrase=void 0,o.Translation=p,o.Text=o.DisplayText,new pd(o,c)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var p;return(p=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:p.Language}get Confidence(){var p;return(p=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:p.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const p={...this.privTranslationPhrase},c={...p,RecognitionStatus:i.RecognitionStatus[p.RecognitionStatus]};return p.Translation&&(c.Translation={...p.Translation,TranslationStatus:s.TranslationStatus[p.Translation.TranslationStatus]}),JSON.stringify(c)}mapRecognitionStatus(p){if(typeof p=="string")return i.RecognitionStatus[p];if(typeof p=="number")return p}mapTranslationStatus(p){if(typeof p=="string")return s.TranslationStatus[p];if(typeof p=="number")return p}};return Ws.TranslationPhrase=h,Ws}var Hs={},tS;function rT(){if(tS)return Hs;tS=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.TranslationServiceRecognizer=void 0;const r=ie(),i=V(),s=ee();let h=class extends s.ConversationServiceRecognizer{constructor(p,c,o,u,d){super(p,c,o,u,d),this.privTranslationRecognizer=d,this.connectionEvents.attach(v=>{v.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(p){const c=new i.PropertyCollection;let o=await this.processSpeechMessages(p);if(o)return!0;const u=async v=>{if(c.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,v.asJson()),this.privRequestSession.onPhraseRecognized(v.Offset+v.Duration),v.RecognitionStatus===s.RecognitionStatus.Success){const g=this.fireEventForResult(v,c);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,g)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(g.result)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const g=s.EnumTranslation.implTranslateRecognitionResult(v.RecognitionStatus),m=new i.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,g,v.Text,v.Duration,v.Offset,v.Language,v.Confidence,void 0,v.asJson(),c);if(g===i.ResultReason.Canceled){const y=s.EnumTranslation.implTranslateCancelResult(v.RecognitionStatus),w=s.EnumTranslation.implTranslateCancelErrorCode(v.RecognitionStatus);await this.cancelRecognitionLocal(y,w,s.EnumTranslation.implTranslateErrorDetails(w))}else if(v.RecognitionStatus!==s.RecognitionStatus.EndOfDictation){const y=new i.TranslationRecognitionEventArgs(m,m.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,y)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(m)}catch(w){this.privErrorCallback&&this.privErrorCallback(w)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0}},d=v=>{c.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,v.asJson());const g=this.fireEventForResult(v,c);if(this.privRequestSession.onHypothesis(g.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,g)}catch{}o=!0};switch(p.messageType===r.MessageType.Text&&c.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,p.textBody),p.path.toLowerCase()){case"translation.hypothesis":d(s.TranslationHypothesis.fromJSON(p.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const v=JSON.parse(p.textBody);if(v.SpeechPhrase)await u(s.TranslationPhrase.fromTranslationResponse(v,this.privRequestSession.currentTurnAudioOffset));else{const m=JSON.parse(p.textBody);m.SpeechHypothesis&&d(s.TranslationHypothesis.fromTranslationResponse(m,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await u(s.TranslationPhrase.fromJSON(p.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(p.binaryBody,this.privRequestSession.sessionId),o=!0;break;case"audio.end":case"translation.synthesis.end":const g=s.TranslationSynthesisEnd.fromJSON(p.textBody);switch(g.SynthesisStatus){case s.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const m=new i.TranslationSynthesisResult(i.ResultReason.Canceled,void 0),y=new i.TranslationSynthesisEventArgs(m,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,y)}catch{}}if(this.privTranslationRecognizer.canceled){const m=new i.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,i.CancellationReason.Error,g.FailureReason,i.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,m)}catch{}}break;case s.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}o=!0;break}return o}cancelRecognition(p,c,o,u,d){const v=new i.PropertyCollection;if(v.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[u]),this.privTranslationRecognizer.canceled){const g=new i.TranslationRecognitionCanceledEventArgs(p,o,d,u,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,g)}catch{}}if(this.privSuccessCallback){const g=new i.TranslationRecognitionResult(void 0,c,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,d,void 0,v);try{this.privSuccessCallback(g),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(p,c,o){try{const u=new i.TranslationRecognitionEventArgs(i.TranslationRecognitionResult.fromSpeechRecognitionResult(p),c,o);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,u)}catch{}}handleRecognizedCallback(p,c,o){try{const u=new i.TranslationRecognitionEventArgs(i.TranslationRecognitionResult.fromSpeechRecognitionResult(p),c,o);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}}fireEventForResult(p,c){let o;if(p.Translation.Translations!==void 0){o=new i.Translations;for(const y of p.Translation.Translations)o.set(y.Language,y.Text||y.DisplayText)}let u,d;p instanceof s.TranslationPhrase?(p.Translation&&p.Translation.TranslationStatus===r.TranslationStatus.Success?u=i.ResultReason.TranslatedSpeech:u=i.ResultReason.RecognizedSpeech,d=p.Confidence):u=i.ResultReason.TranslatingSpeech;const v=p.Language,g=new i.TranslationRecognitionResult(o,this.privRequestSession.requestId,u,p.Text,p.Duration,p.Offset,v,d,p.Translation.FailureReason,p.asJson(),c);return new i.TranslationRecognitionEventArgs(g,p.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(p,c){const o=p===void 0?i.ResultReason.SynthesizingAudioCompleted:i.ResultReason.SynthesizingAudio,u=new i.TranslationSynthesisResult(o,p),d=new i.TranslationSynthesisEventArgs(u,c);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,d)}catch{}}};return Hs.TranslationServiceRecognizer=h,Hs}var Vs={},rS;function nT(){if(rS)return Vs;rS=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.SpeechDetected=void 0;let r=class WC{constructor(s,h){this.privSpeechStartDetected=JSON.parse(s),this.privSpeechStartDetected.Offset+=h}static fromJSON(s,h){return new WC(s,h)}get Offset(){return this.privSpeechStartDetected.Offset}};return Vs.SpeechDetected=r,Vs}var Ks={},nS;function iT(){if(nS)return Ks;nS=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.SpeechHypothesis=void 0;let r=class HC{constructor(s,h){this.privSpeechHypothesis=JSON.parse(s),this.updateOffset(h)}static fromJSON(s,h){return new HC(s,h)}updateOffset(s){this.privSpeechHypothesis.Offset+=s}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};return Ks.SpeechHypothesis=r,Ks}var Js={},iS;function oT(){if(iS)return Js;iS=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.SpeechKeyword=void 0;let r=class VC{constructor(s,h){this.privSpeechKeyword=JSON.parse(s),this.privSpeechKeyword.Offset+=h}static fromJSON(s,h){return new VC(s,h)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}};return Js.SpeechKeyword=r,Js}var Gs={},oS;function sT(){if(oS)return Gs;oS=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.SpeechServiceRecognizer=void 0;const r=V(),i=ee();let s=class extends i.ServiceRecognizerBase{constructor(a,p,c,o,u){super(a,p,c,o,u),this.privSpeechRecognizer=u}async processTypeSpecificMessages(a){let p;const c=new r.PropertyCollection;let o=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const u=i.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,u.asJson()),p=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,u.Text,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,void 0,void 0,u.asJson(),c),this.privRequestSession.onHypothesis(u.Offset);const d=new r.SpeechRecognitionEventArgs(p,u.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,d)}catch{}o=!0;break;case"speech.phrase":const v=i.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,v.asJson());const g=i.EnumTranslation.implTranslateRecognitionResult(v.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(v.Offset+v.Duration),r.ResultReason.Canceled===g){const m=i.EnumTranslation.implTranslateCancelResult(v.RecognitionStatus),y=i.EnumTranslation.implTranslateCancelErrorCode(v.RecognitionStatus);await this.cancelRecognitionLocal(m,y,i.EnumTranslation.implTranslateErrorDetails(y))}else{if(v.RecognitionStatus===i.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])p=new r.SpeechRecognitionResult(this.privRequestSession.requestId,g,v.DisplayText,v.Duration,v.Offset,v.Language,v.LanguageDetectionConfidence,void 0,void 0,v.asJson(),c);else{const y=i.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,y.asJson()),p=new r.SpeechRecognitionResult(this.privRequestSession.requestId,g,y.RecognitionStatus===i.RecognitionStatus.Success?y.NBest[0].Display:"",y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,void 0,void 0,y.asJson(),c)}const m=new r.SpeechRecognitionEventArgs(p,p.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,m)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p)}catch(y){this.privErrorCallback&&this.privErrorCallback(y)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0;break}return o}cancelRecognition(a,p,c,o,u){const d=new r.PropertyCollection;if(d.setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[o]),this.privSpeechRecognizer.canceled){const v=new r.SpeechRecognitionCanceledEventArgs(c,u,o,void 0,a);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,v)}catch{}}if(this.privSuccessCallback){const v=new r.SpeechRecognitionResult(p,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,d);try{this.privSuccessCallback(v),this.privSuccessCallback=void 0}catch{}}}};return Gs.SpeechServiceRecognizer=s,Gs}var Qs={},Jp={},sS;function aT(){return sS||(sS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.IdentityProvider=r.SpeakerDiarizationMode=void 0,(function(i){i.None="None",i.Identity="Identity",i.Anonymous="Anonymous"})(r.SpeakerDiarizationMode||(r.SpeakerDiarizationMode={})),(function(i){i.CallCenter="CallCenter"})(r.IdentityProvider||(r.IdentityProvider={}))})(Jp)),Jp}var aS;function cT(){if(aS)return Qs;aS=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.ConversationTranscriptionServiceRecognizer=void 0;const r=V(),i=ee(),s=aT(),h=Dt();let a=class extends i.ServiceRecognizerBase{constructor(c,o,u,d,v){super(c,o,u,d,v),this.privConversationTranscriber=v,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const c=this.privSpeechContext.getContext().phraseDetection||{};c.mode=h.RecognitionMode.Conversation;const o={};o.mode=s.SpeakerDiarizationMode.Anonymous,o.audioSessionId=this.privDiarizationSessionId,o.audioOffsetMs=0,o.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",c.speakerDiarization=o,this.privSpeechContext.getContext().phraseDetection=c}}async processTypeSpecificMessages(c){let o;const u=new r.PropertyCollection;u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,c.textBody);let d=!1;switch(c.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const v=i.SpeechHypothesis.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset);o=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,v.Text,v.Duration,v.Offset,v.Language,v.LanguageDetectionConfidence,v.SpeakerId,void 0,v.asJson(),u),this.privRequestSession.onHypothesis(v.Offset);const g=new r.ConversationTranscriptionEventArgs(o,v.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,g)}catch{}d=!0;break;case"speech.phrase":const m=i.SimpleSpeechPhrase.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset),y=i.EnumTranslation.implTranslateRecognitionResult(m.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(m.Offset+m.Duration),r.ResultReason.Canceled===y){const w=i.EnumTranslation.implTranslateCancelResult(m.RecognitionStatus),P=i.EnumTranslation.implTranslateCancelErrorCode(m.RecognitionStatus);await this.cancelRecognitionLocal(w,P,i.EnumTranslation.implTranslateErrorDetails(P))}else if(!(this.privRequestSession.isSpeechEnded&&y===r.ResultReason.NoMatch&&m.RecognitionStatus!==i.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])o=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,y,m.DisplayText,m.Duration,m.Offset,m.Language,m.LanguageDetectionConfidence,m.SpeakerId,void 0,m.asJson(),u);else{const P=i.DetailedSpeechPhrase.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset);o=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,y,P.RecognitionStatus===i.RecognitionStatus.Success?P.NBest[0].Display:void 0,P.Duration,P.Offset,P.Language,P.LanguageDetectionConfidence,m.SpeakerId,void 0,P.asJson(),u)}const w=new r.ConversationTranscriptionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,w)}catch{}}d=!0;break}return d}cancelRecognition(c,o,u,d,v){if(new r.PropertyCollection().setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[d]),this.privConversationTranscriber.canceled){const m=new r.ConversationTranscriptionCanceledEventArgs(u,v,d,void 0,c);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,m)}catch{}}}};return Qs.ConversationTranscriptionServiceRecognizer=a,Qs}var Ys={},cS;function uT(){if(cS)return Ys;cS=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.TranscriptionServiceRecognizer=void 0;const r=ie(),i=V(),s=ee(),h=Xc();let a=class extends s.ConversationServiceRecognizer{constructor(c,o,u,d,v){super(c,o,u,d,v),this.privTranscriberRecognizer=v,this.sendPrePayloadJSONOverride=g=>this.sendTranscriptionStartJSON(g),this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(c,o){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createSpeechEventPayload(c,o))}}async sendMeetingSpeechEventAsync(c,o){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createMeetingSpeechEventPayload(c,o))}}processTypeSpecificMessages(c){return this.processSpeechMessages(c)}handleRecognizedCallback(c,o,u){try{const d=new i.SpeechRecognitionEventArgs(c,o,u);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,d),this.privSuccessCallback){try{this.privSuccessCallback(c)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(c,o,u){try{const d=new i.SpeechRecognitionEventArgs(c,o,u);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,d)}catch{}}cancelRecognition(c,o,u,d,v){const g=new i.PropertyCollection;if(g.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[d]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const m=new i.MeetingTranscriptionCanceledEventArgs(u,v,d,void 0,c);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,m)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const m=new i.ConversationTranscriptionCanceledEventArgs(u,v,d,void 0,c);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,m)}catch{}}if(this.privSuccessCallback){const m=new i.SpeechRecognitionResult(o,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,v,void 0,g);try{this.privSuccessCallback(m),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(c){if(await this.sendSpeechContext(c,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const o=this.privTranscriberRecognizer.getMeetingInfo(),u=this.createMeetingSpeechEventPayload(o,"start");await this.sendSpeechEvent(c,u)}else{const o=this.privTranscriberRecognizer.getConversationInfo(),u=this.createSpeechEventPayload(o,"start");await this.sendSpeechEvent(c,u)}await this.sendWaveHeader(c)}sendSpeechEvent(c,o){const u=JSON.stringify(o);if(u)return c.send(new h.SpeechConnectionMessage(r.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",u))}createSpeechEventPayload(c,o){const u={id:"meeting",name:o,meeting:c.conversationProperties};return u.meeting.id=c.id,u.meeting.attendees=c.participants,u}createMeetingSpeechEventPayload(c,o){const u={id:"meeting",name:o,meeting:c.meetingProperties};return u.meeting.id=c.id,u.meeting.attendees=c.participants,u}};return Ys.TranscriptionServiceRecognizer=a,Ys}var Xs={},uS;function lT(){if(uS)return Xs;uS=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.DetailedSpeechPhrase=void 0;const r=ee();let i=class KC{constructor(h,a){this.privDetailedSpeechPhrase=JSON.parse(h),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(a)}static fromJSON(h,a){return new KC(h,a)}updateOffsets(h){if(this.privDetailedSpeechPhrase.Offset+=h,this.privDetailedSpeechPhrase.NBest)for(const a of this.privDetailedSpeechPhrase.NBest){if(a.Words)for(const p of a.Words)p.Offset+=h;if(a.DisplayWords)for(const p of a.DisplayWords)p.Offset+=h}}asJson(){const h={...this.privDetailedSpeechPhrase};return JSON.stringify({...h,RecognitionStatus:r.RecognitionStatus[h.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(h){if(typeof h=="string")return r.RecognitionStatus[h];if(typeof h=="number")return h}};return Xs.DetailedSpeechPhrase=i,Xs}var Zs={},lS;function pT(){if(lS)return Zs;lS=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.SimpleSpeechPhrase=void 0;const r=ee();let i=class JC{constructor(h,a=0){this.privSimpleSpeechPhrase=JSON.parse(h),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(a)}static fromJSON(h,a){return new JC(h,a)}updateOffset(h){this.privSimpleSpeechPhrase.Offset+=h}asJson(){const h={...this.privSimpleSpeechPhrase};return JSON.stringify({...h,RecognitionStatus:r.RecognitionStatus[h.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(h){if(typeof h=="string")return r.RecognitionStatus[h];if(typeof h=="number")return h}};return Zs.SimpleSpeechPhrase=i,Zs}var $s={},ea={},pS;function dT(){if(pS)return ea;pS=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.ServiceTelemetryListener=void 0;const r=ie(),i=gd();class s{constructor(a,p,c){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=a,this.privAudioSourceId=p,this.privAudioNodeId=c,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(a){a>0&&this.privPhraseLatencies.push(Date.now()-a)}hypothesisReceived(a){a>0&&this.privHypothesisLatencies.push(Date.now()-a)}onEvent(a){this.privIsDisposed||(a instanceof i.RecognitionTriggeredEvent&&a.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:a.eventTime,Name:"ListeningTrigger",Start:a.eventTime}),a instanceof r.AudioStreamNodeAttachingEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=a.eventTime),a instanceof r.AudioStreamNodeAttachedEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=a.eventTime),a instanceof r.AudioSourceErrorEvent&&a.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:a.eventTime,Error:a.error,Name:"Microphone",Start:this.privMicStartTime})),a instanceof r.AudioStreamNodeErrorEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:a.eventTime,Error:a.error,Name:"Microphone",Start:this.privMicStartTime})),a instanceof r.AudioStreamNodeDetachedEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:a.eventTime,Name:"Microphone",Start:this.privMicStartTime})),a instanceof i.ConnectingToServiceEvent&&a.requestId===this.privRequestId&&(this.privConnectionId=a.sessionId),a instanceof r.ConnectionStartEvent&&a.connectionId===this.privConnectionId&&(this.privConnectionStartTime=a.eventTime),a instanceof r.ConnectionEstablishedEvent&&a.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:a.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),a instanceof r.ConnectionEstablishErrorEvent&&a.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:a.eventTime,Error:this.getConnectionError(a.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),a instanceof r.ConnectionMessageReceivedEvent&&a.connectionId===this.privConnectionId&&a.message&&a.message.headers&&a.message.headers.path&&(this.privReceivedMessages[a.message.headers.path]||(this.privReceivedMessages[a.message.headers.path]=new Array),this.privReceivedMessages[a.message.headers.path].length<50&&this.privReceivedMessages[a.message.headers.path].push(a.networkReceivedTime)))}getTelemetry(){const a=new Array;this.privListeningTriggerMetric&&a.push(this.privListeningTriggerMetric),this.privMicMetric&&a.push(this.privMicMetric),this.privConnectionEstablishMetric&&a.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&a.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&a.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const p={Metrics:a,ReceivedMessages:this.privReceivedMessages},c=JSON.stringify(p);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],c}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(a){switch(a){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+a.toString()}}}return ea.ServiceTelemetryListener=s,ea}var dS;function hT(){if(dS)return $s;dS=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.RequestSession=void 0;const r=ie(),i=gd(),s=dT();let h=class{constructor(p){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=p,this.privRequestId=(0,r.createNoDashGuid)(),this.privAudioNodeId=(0,r.createNoDashGuid)(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(p){this.privServiceTelemetryListener&&this.privDetachables.push(p.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new s.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new i.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(p,c){this.privAudioNode=p,this.privIsAudioNodeDetached=!1,c?await this.onComplete():this.onEvent(new i.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(p,c){this.privAuthFetchEventId=p,this.privSessionId=c,this.onEvent(new i.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(p){p&&await this.onComplete()}async onConnectionEstablishCompleted(p,c){if(p===200){this.onEvent(new i.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else p===403&&await this.onComplete()}async onServiceTurnEndResponse(p){this.privTurnDeferral.resolve(),!p||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,r.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred}onHypothesis(p){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(p)))}onPhraseRecognized(p){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(p)),this.onServiceRecognized(p)}onServiceRecognized(p){this.privLastRecoOffset=p,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(p),this.privConnectionAttempts=0}onAudioSent(p){this.privBytesSent+=p,this.privRecognitionBytesSent+=p}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const p of this.privDetachables)await p.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(p){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(p),r.Events.instance.onEvent(p)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}};return $s.RequestSession=h,$s}var ta={},Gp={},hS;function vT(){return hS||(hS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TentativePhraseResultsOption=r.OutputFormat=r.PhraseExtension=r.PhraseOption=void 0,(function(i){i.WordTimings="WordTimings",i.SNR="SNR",i.Pronunciation="Pronunciation",i.WordPronunciation="WordPronunciation",i.WordConfidence="WordConfidence",i.Words="Words",i.Sentiment="Sentiment",i.PronunciationAssessment="PronunciationAssessment",i.ContentAssessment="ContentAssessment",i.PhraseAMScore="PhraseAMScore",i.PhraseLMScore="PhraseLMScore",i.WordAMScore="WordAMScore",i.WordLMScore="WordLMScore",i.RuleTree="RuleTree",i.NBestTimings="NBestTimings",i.DecoderDiagnostics="DecoderDiagnostics",i.DisplayWordTimings="DisplayWordTimings",i.DisplayWords="DisplayWords"})(r.PhraseOption||(r.PhraseOption={})),(function(i){i.Graph="Graph",i.Corrections="Corrections",i.Sentiment="Sentiment"})(r.PhraseExtension||(r.PhraseExtension={})),(function(i){i.Simple="Simple",i.Detailed="Detailed"})(r.OutputFormat||(r.OutputFormat={})),(function(i){i.None="None",i.Always="Always"})(r.TentativePhraseResultsOption||(r.TentativePhraseResultsOption={}))})(Gp)),Gp}var vS;function fT(){if(vS)return ta;vS=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.SpeechContext=void 0;const r=Dt(),i=vT();let s=class{constructor(a){this.privContext={},this.privDynamicGrammar=a}getContext(){return this.privContext}setPronunciationAssessmentParams(a,p=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(a)||{},p&&(this.privContext.phraseDetection.mode=r.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(i.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(i.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(i.PhraseOption.SNR)}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=i.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=i.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(i.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(i.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(a){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=a}toJSON(){const a=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=a,JSON.stringify(this.privContext)}};return ta.SpeechContext=s,ta}var ra={},Qp={},fS;function gT(){return fS||(fS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SubstringMatchType=r.GroupType=void 0,(function(i){i.IntentText="IntentText",i.IntentEntity="IntentEntity",i.Generic="Generic",i.People="People",i.Place="Place",i.DynamicEntity="DynamicEntity"})(r.GroupType||(r.GroupType={})),(function(i){i.None="None",i.LeftRooted="LeftRooted",i.PartialName="PartialName",i.MiddleOfSentence="MiddleOfSentence"})(r.SubstringMatchType||(r.SubstringMatchType={}))})(Qp)),Qp}var gS;function mT(){if(gS)return ra;gS=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.DynamicGrammarBuilder=void 0;const r=gT();let i=class{constructor(){this.privWeight=1}addPhrase(h){this.privPhrases||(this.privPhrases=[]),h instanceof Array?this.privPhrases=this.privPhrases.concat(h):this.privPhrases.push(h)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(h){this.privGrammars||(this.privGrammars=[]),h instanceof Array?this.privGrammars=this.privGrammars.concat(h):this.privGrammars.push(h)}clearGrammars(){this.privGrammars=void 0}setWeight(h){this.privWeight=h}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const h={};if(h.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const a=[];this.privPhrases.forEach(p=>{a.push({text:p})}),h.groups=[{type:r.GroupType.Generic,items:a}],h.bias=this.privWeight}return h}};return ra.DynamicGrammarBuilder=i,ra}var na={},ia={},oa={},Yp={},mS;function GC(){return mS||(mS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MessageDataStreamType=r.ActivityPayloadResponse=void 0;class i{constructor(h){this.privActivityResponse=JSON.parse(h)}static fromJSON(h){return new i(h)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}r.ActivityPayloadResponse=i,(function(s){s[s.None=0]="None",s[s.TextToSpeechAudio=1]="TextToSpeechAudio"})(r.MessageDataStreamType||(r.MessageDataStreamType={}))})(Yp)),Yp}var yS;function yT(){if(yS)return oa;yS=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.DialogServiceTurnState=void 0;const r=Ea(),i=qn(),s=GC();let h=class{constructor(p,c){this.privRequestId=c,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=p,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(p,c){return p.messageDataStreamType===s.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=i.AudioOutputStream.createPullStream(),this.privAudioStream.format=c!==void 0?c:r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};return oa.DialogServiceTurnState=h,oa}var SS;function ST(){if(SS)return ia;SS=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.DialogServiceTurnStateManager=void 0;const r=qt(),i=yT();let s=class{constructor(){this.privTurnMap=new Map}StartTurn(a){if(this.privTurnMap.has(a))throw new r.InvalidOperationError("Service error: There is already a turn with id:"+a);const p=new i.DialogServiceTurnState(this,a);return this.privTurnMap.set(a,p),this.privTurnMap.get(a)}GetTurn(a){return this.privTurnMap.get(a)}CompleteTurn(a){if(!this.privTurnMap.has(a))throw new r.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+a);const p=this.privTurnMap.get(a);return p.complete(),this.privTurnMap.delete(a),p}};return ia.DialogServiceTurnStateManager=s,ia}var Xp={},CS;function CT(){return CS||(CS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.InvocationSource=void 0,(function(i){i.None="None",i.VoiceActivationWithKeyword="VoiceActivationWithKeyword"})(r.InvocationSource||(r.InvocationSource={}))})(Xp)),Xp}var Zp={},PS;function PT(){return PS||(PS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OnRejectAction=r.KeywordDetectionType=void 0,(function(i){i.StartTrigger="StartTrigger"})(r.KeywordDetectionType||(r.KeywordDetectionType={})),(function(i){i.EndOfTurn="EndOfTurn",i.Continue="Continue"})(r.OnRejectAction||(r.OnRejectAction={}))})(Zp)),Zp}var RS;function RT(){if(RS)return na;RS=1,Object.defineProperty(na,"__esModule",{value:!0}),na.DialogServiceAdapter=void 0;const r=ct(),i=oC(),s=ie(),h=Ea(),a=V(),p=ST(),c=ee(),o=GC(),u=CT(),d=PT(),v=Xc();let g=class extends c.ServiceRecognizerBase{constructor(y,w,P,E,C){super(y,w,P,E,C),this.privEvents=new s.EventSource,this.privDialogServiceConnector=C,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new p.DialogServiceTurnStateManager,this.recognizeOverride=(T,A,M)=>this.listenOnce(T,A,M),this.postConnectImplOverride=T=>this.dialogConnectImpl(T),this.configConnectionOverride=T=>this.configConnection(T),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=P,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(T=>{T.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(y){const w=(0,s.createGuid)(),P=(0,s.createNoDashGuid)(),E={context:{interactionId:w},messagePayload:JSON.parse(y),version:.5},C=JSON.stringify(E);await(await this.fetchConnection()).send(new v.SpeechConnectionMessage(s.MessageType.Text,"agent",P,"application/json",C))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(y){const w=new a.PropertyCollection;y.messageType===s.MessageType.Text&&w.setProperty(a.PropertyId.SpeechServiceResponse_JsonResult,y.textBody);let P,E;switch(y.path.toLowerCase()){case"speech.phrase":const T=c.SimpleSpeechPhrase.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(T.Offset+T.Duration),T.RecognitionStatus!==c.RecognitionStatus.TooManyRequests&&T.RecognitionStatus!==c.RecognitionStatus.Error){const K=this.fireEventForResult(T,w);if(this.privLastResult=K.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,K)}catch{}}E=!0;break;case"speech.hypothesis":const A=c.SpeechHypothesis.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset);P=new a.SpeechRecognitionResult(this.privRequestSession.requestId,a.ResultReason.RecognizingSpeech,A.Text,A.Duration,A.Offset,A.Language,A.LanguageDetectionConfidence,void 0,void 0,A.asJson(),w),this.privRequestSession.onHypothesis(A.Offset);const M=new a.SpeechRecognitionEventArgs(P,A.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,M)}catch{}E=!0;break;case"speech.keyword":const j=c.SpeechKeyword.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset);P=new a.SpeechRecognitionResult(this.privRequestSession.requestId,j.Status==="Accepted"?a.ResultReason.RecognizedKeyword:a.ResultReason.NoMatch,j.Text,j.Duration,j.Offset,void 0,void 0,void 0,void 0,j.asJson(),w),j.Status!=="Accepted"&&(this.privLastResult=P);const L=new a.SpeechRecognitionEventArgs(P,P.duration,P.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,L)}catch{}E=!0;break;case"audio":{const K=y.requestId.toUpperCase(),U=this.privTurnStateManager.GetTurn(K);try{y.binaryBody?U.audioStream.write(y.binaryBody):U.endAudioStream()}catch{}}E=!0;break;case"response":this.handleResponseMessage(y),E=!0;break}const C=new s.Deferred;return C.resolve(E),C.promise}async cancelRecognition(y,w,P,E,C){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const T=new a.PropertyCollection;T.setProperty(c.CancellationErrorCodePropertyName,a.CancellationErrorCode[E]);const A=new a.SpeechRecognitionCanceledEventArgs(P,C,E,void 0,y);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,A)}catch{}if(this.privSuccessCallback){const M=new a.SpeechRecognitionResult(void 0,a.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,C,void 0,T);try{this.privSuccessCallback(M),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(y,w,P){this.privRecognizerConfig.recognitionMode=y,this.privSuccessCallback=w,this.privErrorCallback=P,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(a.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const E=this.connectImpl(),C=this.sendPreAudioMessages(),T=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),A=await this.privDialogAudioSource.format,M=await this.privDialogAudioSource.deviceInfo,j=new r.ReplayableAudioNode(T,A.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(j,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:M};try{await E,await C}catch(U){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.ConnectionFailure,U),Promise.resolve()}const L=new a.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,L),this.sendAudio(j).then(()=>{},async U=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,U)})}dialogConnectImpl(y){return this.privConnectionLoop=this.startMessageLoop(),y}receiveDialogMessageOverride(){const y=new s.Deferred,w=async()=>{try{const P=this.isDisposed(),E=!this.isDisposed()&&this.terminateMessageLoop;if(P||E){y.resolve(void 0);return}const T=await(await this.fetchConnection()).read();if(!T)return w();const A=v.SpeechConnectionMessage.fromConnectionMessage(T);switch(A.path.toLowerCase()){case"turn.start":{const ve=A.requestId.toUpperCase(),pe=this.privRequestSession.requestId.toUpperCase();ve!==pe?this.privTurnStateManager.StartTurn(ve):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const j=c.SpeechDetected.fromJSON(A.textBody,this.privRequestSession.currentTurnAudioOffset),L=new a.RecognitionEventArgs(j.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,L);break;case"speech.enddetected":let K;A.textBody.length>0?K=A.textBody:K="{ Offset: 0 }";const U=c.SpeechDetected.fromJSON(K,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(U.Offset);const se=new a.RecognitionEventArgs(U.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,se);break;case"turn.end":{const ve=A.requestId.toUpperCase(),pe=this.privRequestSession.requestId.toUpperCase();if(ve!==pe)this.privTurnStateManager.CompleteTurn(ve);else{const fe=new a.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,fe),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(te){this.privErrorCallback&&this.privErrorCallback(te)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(A)||this.serviceEvents&&this.serviceEvents.onEvent(new s.ServiceEvent(A.path.toLowerCase(),A.textBody))}catch{}}return w()}catch{this.terminateMessageLoop=!0,y.resolve()}};return w().catch(P=>{s.Events.instance.onEvent(new s.BackgroundEvent(P))}),y.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(y){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,y)}return Promise.resolve()}async configConnection(y){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(y,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(y),y)}async sendPreAudioMessages(){const y=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(y,!0),await this.sendAgentContext(y),await this.sendWaveHeader(y)}sendAgentConfig(y){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(a.PropertyId.Conversation_DialogType)===a.DialogServiceConfig.DialogTypes.CustomCommands){const P=this.agentConfig.get();P.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(P)}this.onEvent(new i.SendingAgentContextMessageEvent(this.agentConfig));const w=this.agentConfig.toJsonString();return this.agentConfigSent=!0,y.send(new v.SpeechConnectionMessage(s.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",w))}}sendAgentContext(y){const w=(0,s.createGuid)(),P=this.privDialogServiceConnector.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template),C=JSON.stringify({channelData:"",context:{interactionId:w},messagePayload:typeof P===void 0?void 0:P,version:.5});return y.send(new v.SpeechConnectionMessage(s.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",C))}fireEventForResult(y,w){const P=c.EnumTranslation.implTranslateRecognitionResult(y.RecognitionStatus),E=new a.SpeechRecognitionResult(this.privRequestSession.requestId,P,y.DisplayText,y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,void 0,void 0,y.asJson(),w);return new a.SpeechRecognitionEventArgs(E,y.Offset,this.privRequestSession.sessionId)}handleResponseMessage(y){const w=JSON.parse(y.textBody);switch(w.messageType.toLowerCase()){case"message":const P=y.requestId.toUpperCase(),E=o.ActivityPayloadResponse.fromJSON(y.textBody),C=this.privTurnStateManager.GetTurn(P);if(E.conversationId){const M=this.agentConfig.get();M.botInfo.conversationId=E.conversationId,this.agentConfig.set(M)}const T=C.processActivityPayload(E,h.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),A=new a.ActivityReceivedEventArgs(E.messagePayload,T);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,A)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new a.TurnStatusReceivedEventArgs(y.textBody))}catch{}break;default:s.Events.instance.onEvent(new s.BackgroundEvent(`Unexpected response of type ${w.messageType}. Ignoring.`));break}}onEvent(y){this.privEvents.onEvent(y),s.Events.instance.onEvent(y)}addKeywordContextData(){const y=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(y===void 0)return;const w=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),P=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),E=y.split(";"),C=w===void 0?[]:w.split(";"),T=P===void 0?[]:P.split(";"),A=[];for(let M=0;M<E.length;M++){const j={text:E[M]};M<C.length&&(j.startOffset=Number(C[M])),M<T.length&&(j.duration=Number(T[M])),A.push(j)}this.speechContext.getContext().invocationSource=u.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:A,onReject:{action:d.OnRejectAction.EndOfTurn},type:d.KeywordDetectionType.StartTrigger}]}};return na.DialogServiceAdapter=g,na}var sa={},wS;function wT(){if(wS)return sa;wS=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.AgentConfig=void 0;let r=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(s){this.iPrivConfig=s}};return sa.AgentConfig=r,sa}var $p={},aa={},ca={},ES;function Pd(){if(ES)return ca;ES=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.ConversationConnectionConfig=void 0;const r=FC();let i=class Er extends r.RestConfigBase{static get host(){return Er.privHost}static get apiVersion(){return Er.privApiVersion}static get clientAppId(){return Er.privClientAppId}static get defaultLanguageCode(){return Er.privDefaultLanguageCode}static get restPath(){return Er.privRestPath}static get webSocketPath(){return Er.privWebSocketPath}static get transcriptionEventKeys(){return Er.privTranscriptionEventKeys}};return ca.ConversationConnectionConfig=i,i.privHost="dev.microsofttranslator.com",i.privRestPath="/capito/room",i.privApiVersion="2.0",i.privDefaultLanguageCode="en-US",i.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",i.privWebSocketPath="/capito/translate",i.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],ca}var TS;function ET(){if(TS)return aa;TS=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.ConversationManager=void 0;const r=ct(),i=he(),s=V(),h=Pd();let a=class{constructor(){this.privRequestParams=h.ConversationConnectionConfig.configParams,this.privErrors=h.ConversationConnectionConfig.restErrors,this.privHost=h.ConversationConnectionConfig.host,this.privApiVersion=h.ConversationConnectionConfig.apiVersion,this.privRestPath=h.ConversationConnectionConfig.restPath,this.privRestAdapter=new r.RestMessageAdapter({})}createOrJoin(c,o,u,d){try{i.Contracts.throwIfNullOrUndefined(c,"args");const v=c.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,h.ConversationConnectionConfig.defaultLanguageCode),g=c.getProperty(s.PropertyId.ConversationTranslator_Name,"conversation_host"),m=c.getProperty(s.PropertyId.ConversationTranslator_Host,this.privHost),y=c.getProperty(s.PropertyId.ConversationTranslator_CorrelationId),w=c.getProperty(s.PropertyId.SpeechServiceConnection_Key),P=c.getProperty(s.PropertyId.SpeechServiceConnection_Region),E=c.getProperty(s.PropertyId.SpeechServiceAuthorization_Token);i.Contracts.throwIfNullOrWhitespace(v,"languageCode"),i.Contracts.throwIfNullOrWhitespace(g,"nickname"),i.Contracts.throwIfNullOrWhitespace(m,"endpointHost");const C={};C[this.privRequestParams.apiVersion]=this.privApiVersion,C[this.privRequestParams.languageCode]=v,C[this.privRequestParams.nickname]=g;const T={};y&&(T[this.privRequestParams.correlationId]=y),T[this.privRequestParams.clientAppId]=h.ConversationConnectionConfig.clientAppId,o!==void 0?C[this.privRequestParams.roomId]=o:(i.Contracts.throwIfNullOrUndefined(P,this.privErrors.authInvalidSubscriptionRegion),T[this.privRequestParams.subscriptionRegion]=P,w?T[this.privRequestParams.subscriptionKey]=w:E?T[this.privRequestParams.authorization]=`Bearer ${E}`:i.Contracts.throwIfNullOrUndefined(w,this.privErrors.authInvalidSubscriptionKey));const A={};A.headers=T,this.privRestAdapter.options=A;const M=`https://${m}${this.privRestPath}`;this.privRestAdapter.request(r.RestRequestType.Post,M,C,null).then(j=>{const L=r.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,j.headers);if(!j.ok){if(d){let U=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",j.status.toString()),se;try{se=JSON.parse(j.data),U+=` [${se.error.code}: ${se.error.message}]`}catch{U+=` [${j.data}]`}L&&(U+=` ${L}`),d(U)}return}const K=JSON.parse(j.data);if(K&&(K.requestId=L),u){try{u(K)}catch(U){d&&d(U)}u=void 0}}).catch(()=>{})}catch(v){if(d)if(v instanceof Error){const g=v;d(g.name+": "+g.message)}else d(v)}}leave(c,o){return new Promise((u,d)=>{try{i.Contracts.throwIfNullOrUndefined(c,this.privErrors.invalidArgs.replace("{arg}","config")),i.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","token"));const v=c.getProperty(s.PropertyId.ConversationTranslator_Host,this.privHost),g=c.getProperty(s.PropertyId.ConversationTranslator_CorrelationId),m={};m[this.privRequestParams.apiVersion]=this.privApiVersion,m[this.privRequestParams.sessionToken]=o;const y={};g&&(y[this.privRequestParams.correlationId]=g);const w={};w.headers=y,this.privRestAdapter.options=w;const P=`https://${v}${this.privRestPath}`;this.privRestAdapter.request(r.RestRequestType.Delete,P,m,null).then(E=>{E.ok,u()}).catch(()=>{})}catch(v){if(v instanceof Error){const g=v;d(g.name+": "+g.message)}else d(v)}})}};return aa.ConversationManager=a,aa}var nn={},ua={},la={},pa={},AS;function QC(){if(AS)return pa;AS=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.ConversationConnectionMessage=void 0;const r=ie();let i=class extends r.ConnectionMessage{constructor(h,a,p,c){super(h,a,p,c);const o=JSON.parse(this.textBody);o.type!==void 0&&(this.privConversationMessageType=o.type)}get conversationMessageType(){return this.privConversationMessageType}};return pa.ConversationConnectionMessage=i,pa}var _S;function TT(){if(_S)return la;_S=1,Object.defineProperty(la,"__esModule",{value:!0}),la.ConversationWebsocketMessageFormatter=void 0;const r=ie(),i=QC();let s=class{toConnectionMessage(a){const p=new r.Deferred;try{if(a.messageType===r.MessageType.Text){const c=new i.ConversationConnectionMessage(a.messageType,a.textContent,{},a.id);p.resolve(c)}else a.messageType===r.MessageType.Binary&&p.resolve(new i.ConversationConnectionMessage(a.messageType,a.binaryContent,void 0,a.id))}catch(c){p.reject(`Error formatting the message. Error: ${c}`)}return p.promise}fromConnectionMessage(a){const p=new r.Deferred;try{if(a.messageType===r.MessageType.Text){const c=`${a.textBody?a.textBody:""}`;p.resolve(new r.RawWebsocketMessage(r.MessageType.Text,c,a.id))}}catch(c){p.reject(`Error formatting the message. ${c}`)}return p.promise}};return la.ConversationWebsocketMessageFormatter=s,la}var IS;function AT(){if(IS)return ua;IS=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.ConversationConnectionFactory=void 0;const r=ct(),i=ie(),s=he(),h=V(),a=$t(),p=Pd(),c=TT();let o=class extends a.ConnectionFactoryBase{create(d,v,g){const m=d.parameters.getProperty(h.PropertyId.ConversationTranslator_Host,p.ConversationConnectionConfig.host),y=d.parameters.getProperty(h.PropertyId.ConversationTranslator_CorrelationId,(0,i.createGuid)()),w=`wss://${m}${p.ConversationConnectionConfig.webSocketPath}`,P=d.parameters.getProperty(h.PropertyId.ConversationTranslator_Token,void 0);s.Contracts.throwIfNullOrUndefined(P,"token");const E={};E[p.ConversationConnectionConfig.configParams.apiVersion]=p.ConversationConnectionConfig.apiVersion,E[p.ConversationConnectionConfig.configParams.token]=P,E[p.ConversationConnectionConfig.configParams.correlationId]=y;const C=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(w,E,{},new c.ConversationWebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(d),C,g))}};return ua.ConversationConnectionFactory=o,ua}var da={},ha={},kS;function _T(){if(kS)return ha;kS=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.ConversationRequestSession=void 0;const r=ie();let i=class{constructor(h){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=h,this.privRequestId=(0,r.createNoDashGuid)(),this.privRequestCompletionDeferral=new r.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(h,a){this.privSessionId=a}onAuthCompleted(h){h&&this.onComplete()}onConnectionEstablishCompleted(h){h!==200&&h===403&&this.onComplete()}onServiceTurnEndResponse(h){h?this.privRequestId=(0,r.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const h of this.privDetachables)await h.detach()}}onComplete(){}};return ha.ConversationRequestSession=i,ha}var tt={},bS;function YC(){if(bS)return tt;bS=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.ConversationReceivedTranslationEventArgs=tt.ParticipantsListEventArgs=tt.ParticipantAttributeEventArgs=tt.ParticipantEventArgs=tt.LockRoomEventArgs=tt.MuteAllEventArgs=void 0;const r=V();class i extends r.SessionEventArgs{constructor(u,d){super(d),this.privIsMuted=u}get isMuted(){return this.privIsMuted}}tt.MuteAllEventArgs=i;class s extends r.SessionEventArgs{constructor(u,d){super(d),this.privIsLocked=u}get isMuted(){return this.privIsLocked}}tt.LockRoomEventArgs=s;class h extends r.SessionEventArgs{constructor(u,d){super(d),this.privParticipant=u}get participant(){return this.privParticipant}}tt.ParticipantEventArgs=h;class a extends r.SessionEventArgs{constructor(u,d,v,g){super(g),this.privKey=d,this.privValue=v,this.privParticipantId=u}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}tt.ParticipantAttributeEventArgs=a;class p extends r.SessionEventArgs{constructor(u,d,v,g,m,y,w,P,E){super(E),this.privRoomId=u,this.privSessionToken=d,this.privTranslateTo=v,this.privProfanityFilter=g,this.privRoomProfanityFilter=m,this.privIsRoomLocked=y,this.privIsRoomLocked=w,this.privParticipants=P}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}tt.ParticipantsListEventArgs=p;class c{constructor(u,d,v){this.privPayload=d,this.privCommand=u,this.privSessionId=v}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return tt.ConversationReceivedTranslationEventArgs=c,tt}var Zt={},MS;function XC(){if(MS)return Zt;MS=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.ConversationTranslatorCommandTypes=Zt.ConversationTranslatorMessageTypes=Zt.InternalParticipants=void 0;class r{constructor(s=[],h){this.participants=s,this.meId=h}addOrUpdateParticipant(s){if(s===void 0)return;const h=this.getParticipantIndex(s.id);return h>-1?this.participants.splice(h,1,s):this.participants.push(s),this.getParticipant(s.id)}getParticipantIndex(s){return this.participants.findIndex(h=>h.id===s)}getParticipant(s){return this.participants.find(h=>h.id===s)}deleteParticipant(s){this.participants=this.participants.filter(h=>h.id!==s)}get host(){return this.participants.find(s=>s.isHost===!0)}get me(){return this.getParticipant(this.meId)}}return Zt.InternalParticipants=r,Zt.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},Zt.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"},Zt}var ed={},va={},OS;function IT(){if(OS)return va;OS=1,Object.defineProperty(va,"__esModule",{value:!0}),va.CommandResponsePayload=void 0;const r=s=>JSON.parse(s);let i=class ZC{constructor(h){this.privCommandResponse=r(h)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(h){return new ZC(h)}};return va.CommandResponsePayload=i,va}var on={},DS;function kT(){if(DS)return on;DS=1,Object.defineProperty(on,"__esModule",{value:!0}),on.ParticipantPayloadResponse=on.ParticipantsListPayloadResponse=void 0;const r=a=>JSON.parse(a),i=a=>JSON.parse(a);class s{constructor(p){this.privParticipantsPayloadResponse=r(p)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(p){return new s(p)}}on.ParticipantsListPayloadResponse=s;class h{constructor(p){this.privParticipantPayloadResponse=i(p)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(p){return new h(p)}}return on.ParticipantPayloadResponse=h,on}var sn={},NS;function bT(){if(NS)return sn;NS=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.TextResponsePayload=sn.SpeechResponsePayload=void 0;const r=a=>JSON.parse(a),i=a=>JSON.parse(a);class s{constructor(p){this.privSpeechResponse=r(p)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(p){return new s(p)}}sn.SpeechResponsePayload=s;class h{constructor(p){this.privTextResponse=i(p)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(p){return new h(p)}}return sn.TextResponsePayload=h,sn}var zS;function MT(){return zS||(zS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TextResponsePayload=r.SpeechResponsePayload=r.ParticipantPayloadResponse=r.ParticipantsListPayloadResponse=r.CommandResponsePayload=void 0;var i=IT();Object.defineProperty(r,"CommandResponsePayload",{enumerable:!0,get:function(){return i.CommandResponsePayload}});var s=kT();Object.defineProperty(r,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return s.ParticipantsListPayloadResponse}}),Object.defineProperty(r,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return s.ParticipantPayloadResponse}});var h=bT();Object.defineProperty(r,"SpeechResponsePayload",{enumerable:!0,get:function(){return h.SpeechResponsePayload}}),Object.defineProperty(r,"TextResponsePayload",{enumerable:!0,get:function(){return h.TextResponsePayload}})})(ed)),ed}var jS;function OT(){if(jS)return da;jS=1,Object.defineProperty(da,"__esModule",{value:!0}),da.ConversationServiceAdapter=void 0;const r=ie(),i=V(),s=ee(),h=QC(),a=_T(),p=YC(),c=XC(),o=MT();let u=class extends s.ServiceRecognizerBase{constructor(v,g,m,y,w){super(v,g,m,y,w),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=w,this.privConversationAuthentication=v,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=P=>this.conversationConnectImpl(P),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new a.ConversationRequestSession((0,r.createNoDashGuid)()),this.privConversationConnectionFactory=g,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(v){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(v),await super.dispose(v)}async sendMessage(v){return(await this.fetchConnection()).send(new h.ConversationConnectionMessage(r.MessageType.Text,v))}async sendMessageAsync(v){await(await this.fetchConnection()).send(new h.ConversationConnectionMessage(r.MessageType.Text,v))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(v,g,m,y,w){this.terminateMessageLoop=!0;const P=new i.ConversationTranslationCanceledEventArgs(m,w,y,void 0,v);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,P)}catch{}}async conversationConnectImpl(v){return this.privConnectionLoop=this.startMessageLoop(),v}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const v=new r.Deferred;try{const m=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return v.resolve(),Promise.resolve();if(!m)return this.receiveConversationMessageOverride();const y=this.privConversationRequestSession.sessionId,w=m.conversationMessageType.toLowerCase();let P=!1;try{switch(w){case"info":case"participant_command":case"command":const E=o.CommandResponsePayload.fromJSON(m.textBody);switch(E.command.toLowerCase()){case"participantlist":const L=o.ParticipantsListPayloadResponse.fromJSON(m.textBody),K=L.participants.map(te=>({avatar:te.avatar,displayName:te.nickname,id:te.participantId,isHost:te.ishost,isMuted:te.ismuted,isUsingTts:te.usetts,preferredLanguage:te.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new p.ParticipantsListEventArgs(L.roomid,L.token,L.translateTo,L.profanityFilter,L.roomProfanityFilter,L.roomLocked,L.muteAll,K,y));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new p.ParticipantAttributeEventArgs(E.participantId,c.ConversationTranslatorCommandTypes.setTranslateToLanguages,E.value,y));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new p.ParticipantAttributeEventArgs(E.participantId,c.ConversationTranslatorCommandTypes.setProfanityFiltering,E.value,y));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new p.ParticipantAttributeEventArgs(E.participantId,c.ConversationTranslatorCommandTypes.setMute,E.value,y));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new p.MuteAllEventArgs(E.value,y));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new i.ConversationExpirationEventArgs(E.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new p.ParticipantAttributeEventArgs(E.participantId,c.ConversationTranslatorCommandTypes.setUseTTS,E.value,y));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new p.LockRoomEventArgs(E.value,y));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new p.ParticipantAttributeEventArgs(E.participantId,c.ConversationTranslatorCommandTypes.changeNickname,E.value,y));break;case"joinsession":const U=o.ParticipantPayloadResponse.fromJSON(m.textBody),se={avatar:U.avatar,displayName:U.nickname,id:U.participantId,isHost:U.ishost,isMuted:U.ismuted,isUsingTts:U.usetts,preferredLanguage:U.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new p.ParticipantEventArgs(se,y));break;case"leavesession":const ve={id:E.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new p.ParticipantEventArgs(ve,y));break;case"disconnectsession":const pe={id:E.participantId};break;case"token":const fe=new s.CognitiveTokenAuthentication(()=>{const te=E.token;return Promise.resolve(te)},()=>{const te=E.token;return Promise.resolve(te)});this.authentication=fe,this.privConversationServiceConnector.onToken(fe);break;default:break}break;case"partial":case"final":const C=o.SpeechResponsePayload.fromJSON(m.textBody),T=w==="final"?i.ResultReason.TranslatedParticipantSpeech:i.ResultReason.TranslatingParticipantSpeech,A=new i.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,C.id,T,C.recognition,void 0,void 0,m.textBody,void 0);C.isFinal?((A.text!==void 0&&A.text.length>0||C.id===this.privLastPartialUtteranceId)&&(P=!0),P&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new p.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.final,A,y))):A.text!==void 0&&(this.privLastPartialUtteranceId=C.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new p.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.partial,A,y)));break;case"translated_message":const M=o.TextResponsePayload.fromJSON(m.textBody),j=new i.ConversationTranslationResult(M.participantId,this.getTranslations(M.translations),M.language,void 0,void 0,M.originalText,void 0,void 0,void 0,m.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new p.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.instantMessage,j,y));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return v.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const v=this.receiveConversationMessageOverride();try{return await v}catch(g){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,g),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(v=>v.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(v=>v),this.privConnectionConfigPromise)}getTranslations(v){let g;if(v!==void 0){g=new i.Translations;for(const m of v)g.set(m.lang,m.translation)}return g}};return da.ConversationServiceAdapter=u,da}var LS;function DT(){if(LS)return nn;LS=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ConversationTranslatorRecognizer=nn.ConversationRecognizerFactory=void 0;const r=ee(),i=ie(),s=he(),h=V(),a=AT(),p=OT();class c{static fromConfig(d,v,g){return new o(d,v,g)}}nn.ConversationRecognizerFactory=c;let o=class extends h.Recognizer{constructor(d,v,g){const m=v;s.Contracts.throwIfNull(m,"speechConfig");const y=d;s.Contracts.throwIfNull(y,"conversationImpl"),super(g,m.properties,new a.ConversationConnectionFactory),this.privConversation=y,this.privIsDisposed=!1,this.privProperties=m.properties.clone(),this.privConnection=h.Connection.fromRecognizer(this),this.privProperties.getProperty(h.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=i.Timeout.setTimeout,this.privClearTimeout=i.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(d){this.privConnection.connected=d}set disconnected(d){this.privConnection.disconnected=d}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(d,v,g){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfNullOrWhitespace(d,"token"),this.privReco.conversationTranslatorToken=d,this.resetConversationTimeout(),this.privReco.connectAsync(v,g)}catch(m){if(g)if(m instanceof Error){const y=m;g(y.name+": "+y.message)}else g(m)}}disconnect(d,v){try{s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{d&&d()},g=>{v&&v(g)})}catch(g){if(v)if(g instanceof Error){const m=g;v(m.name+": "+m.message)}else v(g);this.dispose(!0).catch(m=>{i.Events.instance.onEvent(new i.BackgroundEvent(m))})}}sendRequest(d,v,g){try{s.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(d,v,g)}catch(m){if(g)if(m instanceof Error){const y=m;g(y.name+": "+y.message)}else g(m);this.dispose(!0).catch(y=>{i.Events.instance.onEvent(new i.BackgroundEvent(y))})}}onToken(d){this.privConversation.onToken(d)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(d){this.privIsDisposed||d&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(d))}createRecognizerConfig(d){return new r.RecognizerConfig(d,this.privProperties)}createServiceRecognizer(d,v,g,m){const y=g;return new p.ConversationServiceAdapter(d,v,y,m,this)}sendMessage(d,v,g){const m=this.privReco;((w,P,E)=>{w!==void 0?w.then(()=>{try{P&&P()}catch(C){E&&E(`'Unhandled error on promise callback: ${C}'`)}},C=>{try{E&&E(C)}catch{}}):E&&E("Null promise")})(m.sendMessageAsync(d),v,g),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return nn.ConversationTranslatorRecognizer=o,nn}var fa={},xS;function NT(){if(xS)return fa;xS=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.TranscriberRecognizer=void 0;const r=ie(),i=he(),s=V(),h=ee(),a=Dt();let p=class extends s.Recognizer{constructor(o,u){const d=o;i.Contracts.throwIfNull(d,"speechTranslationConfig");const v=u;i.Contracts.throwIfNull(v,"audioConfigImpl"),i.Contracts.throwIfNullOrWhitespace(d.speechRecognitionLanguage,s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new h.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){i.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,o)}set conversation(o){i.Contracts.throwIfNullOrUndefined(o,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=o}getConversationInfo(){return i.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(o){i.Contracts.throwIfNullOrUndefined(o,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=o}getMeetingInfo(){return i.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(o,u){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(a.RecognitionMode.Conversation),o,u)}stopContinuousRecognitionAsync(o,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,u)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(o,u){const d=this.privReco;i.Contracts.throwIfNullOrUndefined(d,"serviceRecognizer"),await d.sendSpeechEventAsync(o,u)}async pushMeetingEvent(o,u){const d=this.privReco;i.Contracts.throwIfNullOrUndefined(d,"serviceRecognizer"),await d.sendMeetingSpeechEventAsync(o,u)}async enforceAudioGating(){const d=(await this.audioConfig.format).channels;if(d===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(d!==8)throw new Error(`Unsupported audio configuration: Detected ${d}-channel audio`)}connectMeetingCallbacks(o){this.isMeetingRecognizer=!0,this.canceled=(u,d)=>{o.canceled&&o.canceled(o,d)},this.recognizing=(u,d)=>{o.transcribing&&o.transcribing(o,d)},this.recognized=(u,d)=>{o.transcribed&&o.transcribed(o,d)},this.sessionStarted=(u,d)=>{o.sessionStarted&&o.sessionStarted(o,d)},this.sessionStopped=(u,d)=>{o.sessionStopped&&o.sessionStopped(o,d)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(o){this.privDisposedRecognizer||(o&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(o))}createRecognizerConfig(o){return new h.RecognizerConfig(o,this.properties)}createServiceRecognizer(o,u,d,v){const g=d;return new h.TranscriptionServiceRecognizer(o,u,g,v,this)}};return fa.TranscriberRecognizer=p,fa}var qS;function zT(){return qS||(qS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.InternalParticipants=r.ConversationTranslatorMessageTypes=r.ConversationTranslatorCommandTypes=r.ParticipantsListEventArgs=r.ParticipantEventArgs=r.ParticipantAttributeEventArgs=r.MuteAllEventArgs=r.LockRoomEventArgs=r.ConversationReceivedTranslationEventArgs=r.TranscriberRecognizer=r.ConversationRecognizerFactory=r.ConversationConnectionConfig=r.ConversationManager=void 0;var i=ET();Object.defineProperty(r,"ConversationManager",{enumerable:!0,get:function(){return i.ConversationManager}});var s=Pd();Object.defineProperty(r,"ConversationConnectionConfig",{enumerable:!0,get:function(){return s.ConversationConnectionConfig}});var h=DT();Object.defineProperty(r,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return h.ConversationRecognizerFactory}});var a=NT();Object.defineProperty(r,"TranscriberRecognizer",{enumerable:!0,get:function(){return a.TranscriberRecognizer}});var p=YC();Object.defineProperty(r,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return p.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(r,"LockRoomEventArgs",{enumerable:!0,get:function(){return p.LockRoomEventArgs}}),Object.defineProperty(r,"MuteAllEventArgs",{enumerable:!0,get:function(){return p.MuteAllEventArgs}}),Object.defineProperty(r,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return p.ParticipantAttributeEventArgs}}),Object.defineProperty(r,"ParticipantEventArgs",{enumerable:!0,get:function(){return p.ParticipantEventArgs}}),Object.defineProperty(r,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return p.ParticipantsListEventArgs}});var c=XC();Object.defineProperty(r,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorCommandTypes}}),Object.defineProperty(r,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorMessageTypes}}),Object.defineProperty(r,"InternalParticipants",{enumerable:!0,get:function(){return c.InternalParticipants}})})($p)),$p}var td={},BS;function $C(){return BS||(BS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SynthesisAudioMetadata=r.MetadataType=void 0,(function(s){s.WordBoundary="WordBoundary",s.Bookmark="Bookmark",s.Viseme="Viseme",s.SentenceBoundary="SentenceBoundary",s.SessionEnd="SessionEnd",s.AvatarSignal="TalkingAvatarSignal"})(r.MetadataType||(r.MetadataType={}));class i{constructor(h){this.privSynthesisAudioMetadata=JSON.parse(h)}static fromJSON(h){return new i(h)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}r.SynthesisAudioMetadata=i})(td)),td}var ga={},Ot={},FS;function jT(){if(FS)return Ot;FS=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.SynthesisStartedEvent=Ot.ConnectingToSynthesisServiceEvent=Ot.SynthesisTriggeredEvent=Ot.SpeechSynthesisEvent=void 0;const r=ie();class i extends r.PlatformEvent{constructor(c,o,u=r.EventType.Info){super(c,u),this.privRequestId=o}get requestId(){return this.privRequestId}}Ot.SpeechSynthesisEvent=i;class s extends i{constructor(c,o,u){super("SynthesisTriggeredEvent",c),this.privSessionAudioDestinationId=o,this.privTurnAudioDestinationId=u}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Ot.SynthesisTriggeredEvent=s;class h extends i{constructor(c,o){super("ConnectingToSynthesisServiceEvent",c),this.privAuthFetchEventId=o}get authFetchEventId(){return this.privAuthFetchEventId}}Ot.ConnectingToSynthesisServiceEvent=h;class a extends i{constructor(c,o){super("SynthesisStartedEvent",c),this.privAuthFetchEventId=o}get authFetchEventId(){return this.privAuthFetchEventId}}return Ot.SynthesisStartedEvent=a,Ot}var US;function LT(){if(US)return ga;US=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.SynthesisTurn=void 0;const r=ie(),i=qn(),s=V(),h=$C(),a=jT();let p=class dd{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,r.createNoDashGuid)(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(o){this.privStreamId=o}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(o){this.privAudioOutputFormat=o}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const o=new s.PropertyCollection;return o.setProperty(s.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),o}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const o=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(o),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(o,u,d,v){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=o,this.privRawText=u,this.privIsSSML=d,this.privAudioOutputStream=new i.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",v!==void 0&&(this.privTurnAudioDestination=v,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new a.SynthesisTriggeredEvent(this.requestId,void 0,v===void 0?void 0:v.id()))}onPreConnectionStart(o){this.privAuthFetchEventId=o,this.onEvent(new a.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(o){o&&this.onComplete()}onConnectionEstablishCompleted(o){if(o===200){this.onEvent(new a.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else o===403&&this.onComplete()}onServiceResponseMessage(o){const u=JSON.parse(o);this.streamId=u.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(o){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred;const u=JSON.parse(o);u.webrtc&&(this.privWebRTCSDP=u.webrtc.connectionString)}onAudioChunkReceived(o){this.isSynthesizing&&(this.privAudioOutputStream.write(o),this.privBytesReceived+=o.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(o))}onTextBoundaryEvent(o){this.updateTextOffset(o.Data.text.Text,o.Type)}onVisemeMetadataReceived(o){o.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=o.Data.AnimationChunk)}onSessionEnd(o){this.privAudioDuration=o.Data.Offset}async constructSynthesisResult(){const o=await this.getAllReceivedAudioWithHeader();return new s.SpeechSynthesisResult(this.requestId,s.ResultReason.SynthesizingAudioCompleted,o,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const o=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",o}onEvent(o){r.Events.instance.onEvent(o)}static isXmlTag(o){return o.length>=2&&o[0]==="<"&&o[o.length-1]===">"}updateTextOffset(o,u){u===h.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(o,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!dd.isXmlTag(o)&&this.updateTextOffset(o,u))):(this.privSentenceOffset=this.privRawText.indexOf(o,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!dd.isXmlTag(o)&&this.updateTextOffset(o,u)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(o){return this.privRawText.indexOf("<",o+1)>this.privRawText.indexOf(">",o+1)}};return ga.SynthesisTurn=p,ga}var ma={},WS;function xT(){if(WS)return ma;WS=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.SynthesisAdapterBase=void 0;const r=ie(),i=V(),s=ee(),h=Xc();let a=class{constructor(c,o,u,d){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!c)throw new r.ArgumentNullError("authentication");if(!o)throw new r.ArgumentNullError("connectionFactory");if(!u)throw new r.ArgumentNullError("synthesizerConfig");this.privAuthentication=c,this.privConnectionFactory=o,this.privSynthesizerConfig=u,this.privIsDisposed=!1,this.privSessionAudioDestination=d,this.privSynthesisTurn=new s.SynthesisTurn,this.privConnectionEvents=new r.EventSource,this.privServiceEvents=new r.EventSource,this.privSynthesisContext=new s.SynthesisContext,this.privAgentConfig=new s.AgentConfig,this.connectionEvents.attach(v=>{if(v.name==="ConnectionClosedEvent"){const g=v;g.statusCode!==1e3&&this.cancelSynthesisLocal(i.CancellationReason.Error,g.statusCode===1007?i.CancellationErrorCode.BadRequestParameters:i.CancellationErrorCode.ConnectionFailure,`${g.reason} websocket error code: ${g.statusCode}`)}})}get synthesizerConfig(){return this.privSynthesizerConfig}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(c){this.privActivityTemplate=c}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(c){this.privAudioOutputFormat=c,this.privSynthesisTurn.audioOutputFormat=c,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=c),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=c)}isDisposed(){return this.privIsDisposed}async dispose(c){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(c)}async connect(){await this.connectImpl()}async sendNetworkMessage(c,o){const u=typeof o=="string"?r.MessageType.Text:r.MessageType.Binary,d=typeof o=="string"?"application/json":"";return(await this.fetchConnection()).send(new h.SpeechConnectionMessage(u,c,this.privSynthesisTurn.requestId,d,o))}async Speak(c,o,u,d,v,g){let m;if(o?m=c:m=this.privSynthesizer.buildSsml(c),this.speakOverride!==void 0)return this.speakOverride(m,u,d,v);this.privSuccessCallback=d,this.privErrorCallback=v,this.privSynthesisTurn.startNewSynthesis(u,c,o,g);try{await this.connectImpl();const y=await this.fetchConnection();await this.sendSynthesisContext(y),await this.sendSsmlMessage(y,m,u),this.onSynthesisStarted(u),this.receiveMessage()}catch(y){return this.cancelSynthesisLocal(i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,y),Promise.reject(y)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new h.SpeechConnectionMessage(r.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(c,o,u,d){const v=new i.PropertyCollection;v.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[u]);const g=new i.SpeechSynthesisResult(c,i.ResultReason.Canceled,void 0,d,v);if(this.onSynthesisCancelled(g),this.privSuccessCallback)try{this.privSuccessCallback(g)}catch{}}cancelSynthesisLocal(c,o,u){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,c,o,u))}processTypeSpecificMessages(c){return!0}async receiveMessage(){try{const o=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!o)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const u=h.SpeechConnectionMessage.fromConnectionMessage(o);if(u.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(u.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(u.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===u.streamId.toLowerCase()&&u.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(u.binaryBody),this.onSynthesizing(u.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(u.binaryBody));break;case"audio.metadata":const d=s.SynthesisAudioMetadata.fromJSON(u.textBody).Metadata;for(const g of d)switch(g.Type){case s.MetadataType.WordBoundary:case s.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(g);const m=new i.SpeechSynthesisWordBoundaryEventArgs(g.Data.Offset,g.Data.Duration,g.Data.text.Text,g.Data.text.Length,g.Type===s.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,g.Data.text.BoundaryType);this.onWordBoundary(m);break;case s.MetadataType.Bookmark:const y=new i.SpeechSynthesisBookmarkEventArgs(g.Data.Offset,g.Data.Bookmark);this.onBookmarkReached(y);break;case s.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(g),g.Data.IsLastAnimation){const w=new i.SpeechSynthesisVisemeEventArgs(g.Data.Offset,g.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(w)}break;case s.MetadataType.AvatarSignal:this.onAvatarEvent(g);break;case s.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(g);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let v;try{v=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(v)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.onSynthesisCompleted(v);break;default:this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(c){this.setSynthesisContextSynthesisSection();const o=this.synthesisContext.toJSON();if(o)return c.send(new h.SpeechConnectionMessage(r.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",o))}setSpeechConfigSynthesisSection(){}connectImpl(c=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(u=>u.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,r.createNoDashGuid)(),this.privConnectionId=(0,r.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const o=c?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=o.then(async u=>{this.privSynthesisTurn.onAuthCompleted(!1);const d=await this.privConnectionFactory.create(this.privSynthesizerConfig,u,this.privConnectionId);d.events.attach(g=>{this.connectionEvents.onEvent(g)});const v=await d.open();return v.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(v.statusCode),Promise.resolve(d)):v.statusCode===403&&!c?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(v.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${v.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Url)} Reason: ${v.reason}`))},u=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(u)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(c,o){if(o)return c.send(new h.SpeechConnectionMessage(r.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",o))}sendSsmlMessage(c,o,u){return c.send(new h.SpeechConnectionMessage(r.MessageType.Text,"ssml",u,"application/ssml+xml",o))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(c=>c.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const c=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(c):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(c,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),c)}onAvatarEvent(c){}onSynthesisStarted(c){}onSynthesizing(c){}onSynthesisCancelled(c){}onSynthesisCompleted(c){}onWordBoundary(c){}onVisemeReceived(c){}onBookmarkReached(c){}};return ma.SynthesisAdapterBase=a,a.telemetryDataEnabled=!0,ma}var ya={},HS;function qT(){if(HS)return ya;HS=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.AvatarSynthesisAdapter=void 0;const r=V(),i=ee();let s=class extends i.SynthesisAdapterBase{constructor(a,p,c,o,u){super(a,p,c,void 0),this.privAvatarSynthesizer=o,this.privSynthesizer=o,this.privAvatarConfig=u}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var a,p,c,o,u,d,v,g,m,y,w,P,E,C,T,A,M;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(a=this.privAvatarConfig.videoFormat)==null?void 0:a.bitrate,codec:(p=this.privAvatarConfig.videoFormat)==null?void 0:p.codec,crop:{bottomRight:{x:(u=(o=(c=this.privAvatarConfig.videoFormat)==null?void 0:c.cropRange)==null?void 0:o.bottomRight)==null?void 0:u.x,y:(g=(v=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:v.bottomRight)==null?void 0:g.y},topLeft:{x:(w=(y=(m=this.privAvatarConfig.videoFormat)==null?void 0:m.cropRange)==null?void 0:y.topLeft)==null?void 0:w.x,y:(C=(E=(P=this.privAvatarConfig.videoFormat)==null?void 0:P.cropRange)==null?void 0:E.topLeft)==null?void 0:C.y}},resolution:{height:(T=this.privAvatarConfig.videoFormat)==null?void 0:T.height,width:(A=this.privAvatarConfig.videoFormat)==null?void 0:A.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(M=this.privAvatarConfig.backgroundImage)==null?void 0:M.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,photoAvatarBaseModel:this.privAvatarConfig.photoAvatarBaseModel,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(a){if(this.privAvatarSynthesizer.avatarEventReceived){const p=new r.AvatarEventArgs(a.Data.Offset,a.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,p)}catch{}}}};return ya.AvatarSynthesisAdapter=s,ya}var Sa={},VS;function BT(){if(VS)return Sa;VS=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.SpeechSynthesisAdapter=void 0;const r=V(),i=ee();let s=class extends i.SynthesisAdapterBase{constructor(a,p,c,o,u){super(a,p,c,u),this.privSpeechSynthesizer=o,this.privSynthesizer=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(a){const p=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(a,r.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,p)}onSynthesizing(a){if(this.privSpeechSynthesizer.synthesizing)try{const p=this.privSynthesisTurn.audioOutputFormat.addHeader(a),c=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(this.privSynthesisTurn.requestId,r.ResultReason.SynthesizingAudio,p));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,c)}catch{}}onSynthesisCancelled(a){if(this.privSpeechSynthesizer.SynthesisCanceled){const p=new r.SpeechSynthesisEventArgs(a);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,p)}catch{}}}onSynthesisCompleted(a){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new r.SpeechSynthesisEventArgs(a))}catch{}}onWordBoundary(a){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,a)}catch{}}onVisemeReceived(a){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,a)}catch{}}onBookmarkReached(a){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,a)}catch{}}};return Sa.SpeechSynthesisAdapter=s,Sa}var Ca={},KS;function FT(){if(KS)return Ca;KS=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.SynthesisRestAdapter=void 0;const r=ct(),i=V(),s=$t(),h=gt();let a=class{constructor(c,o){let u=c.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!u){const v=c.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,"westus"),g=s.ConnectionFactoryBase.getHostSuffix(v);u=c.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,`https://${v}.tts.speech${g}`)}this.privUri=`${u}/cognitiveservices/voices/list`;const d=r.RestConfigBase.requestOptions;this.privRestAdapter=new r.RestMessageAdapter(d),this.privAuthentication=o}getVoicesList(c){return this.privRestAdapter.setHeaders(h.HeaderNames.ConnectionId,c),this.privAuthentication.fetch(c).then(o=>(this.privRestAdapter.setHeaders(o.headerName,o.token),this.privRestAdapter.request(r.RestRequestType.Get,this.privUri)))}};return Ca.SynthesisRestAdapter=a,Ca}var rd={},JS;function UT(){return JS||(JS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SynthesizerConfig=r.SynthesisServiceType=void 0;const i=ee();var s;(function(a){a[a.Standard=0]="Standard",a[a.Custom=1]="Custom"})(s=r.SynthesisServiceType||(r.SynthesisServiceType={}));class h{constructor(p,c){this.privSynthesisServiceType=s.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=p||new i.SpeechServiceConfig(new i.Context(null)),this.privParameters=c}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(p){this.privSynthesisServiceType=p}set synthesisVideoSection(p){this.privSpeechServiceConfig.Context.synthesis={video:p}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}setContextFromJson(p){const c=JSON.parse(p);c.system&&(this.privSpeechServiceConfig.Context.system=c.system),c.os&&(this.privSpeechServiceConfig.Context.os=c.os),c.audio&&(this.privSpeechServiceConfig.Context.audio=c.audio),c.synthesis&&(this.privSpeechServiceConfig.Context.synthesis=c.synthesis)}}r.SynthesizerConfig=h})(rd)),rd}var Pa={},GS;function WT(){if(GS)return Pa;GS=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.SynthesisContext=void 0;const r=V();let i=class{constructor(){this.privContext={}}setSection(h,a){this.privContext[h]=a}set audioOutputFormat(h){this.privAudioOutputFormat=h}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(h){const a=this.buildSynthesisContext(h);this.setSection("synthesis",a)}buildSynthesisContext(h){return{audio:{metadataOptions:{bookmarkEnabled:!!(h!=null&&h.bookmarkReached),punctuationBoundaryEnabled:h==null?void 0:h.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(h!=null&&h.wordBoundary)),sentenceBoundaryEnabled:h==null?void 0:h.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(h!=null&&h.visemeReceived),wordBoundaryEnabled:h==null?void 0:h.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(h!=null&&h.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:h==null?void 0:h.autoDetectSourceLanguage}}}};return Pa.SynthesisContext=i,Pa}var nd={},QS;function HT(){return QS||(QS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.type=r.connectivity=r.Device=r.OS=r.System=r.Context=r.SpeechServiceConfig=void 0;class i{constructor(o){this.context=o}serialize(){return JSON.stringify(this,(o,u)=>{if(u&&typeof u=="object"&&!Array.isArray(u)){const d={};for(const v in u)Object.hasOwnProperty.call(u,v)&&(d[v&&v.charAt(0).toLowerCase()+v.substring(1)]=u[v]);return d}return u})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(o){this.recognition=o.toLowerCase()}}r.SpeechServiceConfig=i;class s{constructor(o){this.system=new h,this.os=o}}r.Context=s;class h{constructor(){const o="1.47.0";this.name="SpeechSDK",this.version=o,this.build="JavaScript",this.lang="JavaScript"}}r.System=h;class a{constructor(o,u,d){this.platform=o,this.name=u,this.version=d}}r.OS=a;class p{constructor(o,u,d){this.manufacturer=o,this.model=u,this.version=d}}r.Device=p,(function(c){c.Bluetooth="Bluetooth",c.Wired="Wired",c.WiFi="WiFi",c.Cellular="Cellular",c.InBuilt="InBuilt",c.Unknown="Unknown"})(r.connectivity||(r.connectivity={})),(function(c){c.Phone="Phone",c.Speaker="Speaker",c.Car="Car",c.Headset="Headset",c.Thermostat="Thermostat",c.Microphones="Microphones",c.Deskphone="Deskphone",c.RemoteControl="RemoteControl",c.Unknown="Unknown",c.File="File",c.Stream="Stream"})(r.type||(r.type={}))})(nd)),nd}var YS;function ee(){return YS||(YS=1,(function(r){var i=Wr&&Wr.__createBinding||(Object.create?(function(p,c,o,u){u===void 0&&(u=o),Object.defineProperty(p,u,{enumerable:!0,get:function(){return c[o]}})}):(function(p,c,o,u){u===void 0&&(u=o),p[u]=c[o]})),s=Wr&&Wr.__exportStar||function(p,c){for(var o in p)o!=="default"&&!Object.prototype.hasOwnProperty.call(c,o)&&i(c,p,o)};Object.defineProperty(r,"__esModule",{value:!0}),r.AutoDetectSourceLanguagesOpenRangeOptionName=r.ForceDictationPropertyName=r.ServicePropertiesPropertyName=r.CancellationErrorCodePropertyName=r.OutputFormatPropertyName=r.SpeechSynthesisAdapter=r.AvatarSynthesisAdapter=void 0,s(Uw(),r),s(Ww(),r),s(fd(),r),s(Hw(),r),s(Vw(),r),s(gd(),r),s(U0(),r),s(W0(),r),s(H0(),r),s(V0(),r),s(K0(),r),s(J0(),r),s(G0(),r),s(Q0(),r),s(Y0(),r),s(qC(),r),s(X0(),r),s(Z0(),r),s($0(),r),s(eT(),r),s(tT(),r),s(rT(),r),s(nT(),r),s(iT(),r),s(oT(),r),s(sT(),r),s(cT(),r),s(uT(),r),s(lT(),r),s(pT(),r),s(hT(),r),s(fT(),r),s(mT(),r),s(RT(),r),s(wT(),r),s(zT(),r),s($C(),r),s(LT(),r),s(xT(),r);var h=qT();Object.defineProperty(r,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return h.AvatarSynthesisAdapter}});var a=BT();Object.defineProperty(r,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return a.SpeechSynthesisAdapter}}),s(FT(),r),s(UT(),r),s(WT(),r),s(HT(),r),r.OutputFormatPropertyName="OutputFormat",r.CancellationErrorCodePropertyName="CancellationErrorCode",r.ServicePropertiesPropertyName="ServiceProperties",r.ForceDictationPropertyName="ForceDictation",r.AutoDetectSourceLanguagesOpenRangeOptionName="UND"})(Wr)),Wr}var XS;function VT(){return XS||(XS=1,(function(r){var i=Ur&&Ur.__createBinding||(Object.create?(function(a,p,c,o){o===void 0&&(o=c),Object.defineProperty(a,o,{enumerable:!0,get:function(){return p[c]}})}):(function(a,p,c,o){o===void 0&&(o=c),a[o]=p[c]})),s=Ur&&Ur.__exportStar||function(a,p){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(p,c)&&i(p,a,c)};Object.defineProperty(r,"__esModule",{value:!0});const h=ee();new h.AgentConfig,s(V(),r)})(Ur)),Ur}var xn=VT();function KT(r){const[i,s]=le.useState("idle"),[h,a]=le.useState(""),[p,c]=le.useState([]),[o,u]=le.useState(-1),[d,v]=le.useState(null),g=le.useRef(null),m=le.useRef(null),y=le.useRef([]),w=le.useRef(0),P=le.useRef(null),E=le.useRef(!1),C=le.useRef([]),T=le.useRef(!1),A=le.useRef(!1),M=le.useRef(!1),j=le.useCallback(()=>{g.current&&g.current.close(),console.log("Initializing synthesizer with voice:",r.selectedVoice);const pe=xn.SpeechConfig.fromSubscription(r.apiKey,r.region);pe.speechSynthesisVoiceName=r.selectedVoice,pe.speechSynthesisOutputFormat=xn.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3;const fe=new xn.SpeakerAudioDestination;m.current=fe;const te=xn.AudioConfig.fromSpeakerOutput(fe),we=new xn.SpeechSynthesizer(pe,te);return g.current=we,we},[r]),L=le.useCallback(()=>{if(!E.current){console.log("Stopped tracking - not playing");return}let pe=Date.now()-w.current;if(m.current&&m.current.currentTime)try{const te=m.current.currentTime;te>0&&(pe=te*1e3)}catch{}let fe=-1;for(let te=0;te<C.current.length&&C.current[te].audioOffset<=pe+300;te++)fe=te;if(fe!==-1&&(u(fe),A.current&&fe===C.current.length-1)){const te=C.current[fe];if(pe>te.audioOffset+1e3){console.log(` Audio playback ended (1s after last word highlighted). Current time: ${pe}ms, Last word at: ${te.audioOffset}ms`),E.current=!1,P.current&&(cancelAnimationFrame(P.current),P.current=null),s("idle"),u(-1);return}}if(Math.floor(pe/500)!==Math.floor((pe-16)/500)){const te=fe>=0?C.current[fe]:null;console.log(` ${pe.toFixed(0)}ms | Word [${fe}]: "${te==null?void 0:te.text}" @ ${te==null?void 0:te.audioOffset}ms | Total: ${C.current.length} | Complete: ${A.current}`)}E.current&&(P.current=requestAnimationFrame(L))},[]),K=le.useCallback(pe=>{if(!pe.trim()){a("Please enter some text to synthesize");return}s("synthesizing"),a(""),c([]),u(-1),y.current=[],C.current=[],E.current=!1,T.current=!1,A.current=!1,M.current=!1;const fe=j(),te=setTimeout(()=>{C.current.length===0&&(console.log(" No word boundary received within 1 second - will start playback when audio arrives"),M.current=!0)},1e3);fe.wordBoundary=(we,be)=>{const Te={text:be.text,offset:be.textOffset,length:be.wordLength,audioOffset:be.audioOffset/1e4};if(C.current.push(Te),c([...C.current]),console.log(` Word boundary: "${Te.text}" at ${Te.audioOffset}ms (text offset: ${Te.offset})`),C.current.length===1){clearTimeout(te),M.current=!1;const Pe=Date.now(),H=Pe-Te.audioOffset;w.current=H,console.log(" FIRST word boundary - starting playback. Word:",Te.text,"offset:",Te.audioOffset,"ms. Playback start:",H,"Current time:",Pe),E.current?(console.log(" Switching from fallback mode to word boundary mode - restarting tracking"),L()):(E.current=!0,s("playing"),L())}},fe.synthesizing=(we,be)=>{be.result.audioData&&(y.current.push(new Uint8Array(be.result.audioData)),M.current&&!E.current&&y.current.length===1&&(console.log(" First audio chunk received (fallback mode) - starting playback"),w.current=Date.now(),E.current=!0,s("playing")))},fe.synthesisStarted=()=>{s("synthesizing"),console.log("Synthesis started")},fe.synthesisCompleted=(we,be)=>{const Te=y.current.reduce(($,J)=>$+J.length,0),Pe=new Uint8Array(Te);let H=0;for(const $ of y.current)Pe.set($,H),H+=$.length;if(v(Pe.buffer),A.current=!0,console.log(" Synthesis completed - now have all",C.current.length,"word boundaries"),C.current.length===0){console.log(" No word boundaries received - using fallback audio duration detection"),E.current||(w.current=Date.now(),E.current=!0,s("playing"));const $=Te*8/48e3*1e3,J=Date.now()-w.current,b=Math.max(0,$-J+500);console.log(` Estimated audio duration: ${$}ms, current playback: ${J}ms, will stop in: ${b}ms`),setTimeout(()=>{E.current&&(console.log(" Audio playback ended (fallback timeout)"),E.current=!1,P.current&&(cancelAnimationFrame(P.current),P.current=null),s("idle"),u(-1))},b)}},fe.SynthesisCanceled=(we,be)=>{console.error("Synthesis canceled:",be.errorDetails),a(be.errorDetails||"Synthesis was canceled"),s("error"),u(-1),E.current=!1,P.current&&cancelAnimationFrame(P.current)},fe.speakTextAsync(pe,we=>{we.reason===xn.ResultReason.SynthesizingAudioCompleted?console.log("Synthesis completed successfully"):(console.error("Synthesis failed:",we.errorDetails),a(we.errorDetails||"Synthesis failed"),s("error"))},we=>{console.error("Synthesis error:",we),a(we),s("error")})},[j,L]),U=le.useCallback(()=>{m.current&&i==="playing"&&(m.current.pause(),s("paused"),E.current=!1,P.current&&(cancelAnimationFrame(P.current),P.current=null))},[i]),se=le.useCallback(()=>{m.current&&i==="paused"&&(m.current.resume(),s("playing"),E.current=!0,L())},[i,L]),ve=le.useCallback(()=>{console.log(" Stop called - cleaning up"),E.current=!1,P.current&&(cancelAnimationFrame(P.current),P.current=null),m.current&&m.current.pause(),g.current&&(g.current.close(),g.current=null),s("idle"),u(-1)},[]);return{state:i,error:h,wordBoundaries:p,currentWordIndex:o,audioData:d,synthesize:K,pause:U,resume:se,stop:ve}}async function JT(r,i){try{console.log("Fetching voices with region:",i);const s=`https://${i}.tts.speech.microsoft.com/cognitiveservices/voices/list`,h=await fetch(s,{headers:{"Ocp-Apim-Subscription-Key":r}});if(!h.ok)throw new Error(`Failed to fetch voices: ${h.status} ${h.statusText}`);const a=await h.json();console.log("Fetched voices - total count:",a.length),console.log("First voice full structure:",JSON.stringify(a[0],null,2));const p=[...new Set(a.map(o=>o.VoiceType))];console.log("Available VoiceType values:",p),p.forEach(o=>{const u=a.find(d=>d.VoiceType===o);u&&console.log(`Sample ${o} voice:`,u.ShortName,u)});const c=a.map(o=>{var g,m;const u=((g=o.ShortName)==null?void 0:g.includes("HD"))||((m=o.Name)==null?void 0:m.includes("HD")),d=o.WordsPerMinute||o.SecondaryLocaleList||[];let v="Female";return typeof o.Gender=="number"?v=o.Gender===1?"Female":"Male":typeof o.Gender=="string"&&(v=o.Gender),{name:o.ShortName||o.Name||"Unknown",locale:String(o.Locale||"en-US"),gender:v,description:`${o.LocalName||o.DisplayName||o.Name||"Unknown"} (${o.Locale||"Unknown"})`,styleList:o.StyleList||[],isFeatured:u,voiceType:o.VoiceType,isNeuralHD:u,keywords:Array.isArray(d)?d:[],wordsPer:o.WordsPerMinute,voiceTag:o.VoiceTag||{}}});return(i.toLowerCase()==="eastus"||i==="East US")&&(console.log("Adding hardcoded MAI voices for East US region"),c.unshift({name:"en-us-phoebe:mai-voice-1",locale:"en-US",gender:"Female",description:"Phoebe MAI Voice (en-US)",styleList:[],isFeatured:!0,voiceType:"Neural",isNeuralHD:!0,keywords:["MAI"],wordsPer:void 0},{name:"en-us-benjamin:mai-voice-1",locale:"en-US",gender:"Male",description:"Benjamin MAI Voice (en-US)",styleList:[],isFeatured:!0,voiceType:"Neural",isNeuralHD:!0,keywords:["MAI"],wordsPer:void 0})),c.sort((o,u)=>o.isFeatured&&!u.isFeatured?-1:!o.isFeatured&&u.isFeatured?1:o.name.localeCompare(u.name)),console.log("Successfully processed voices:",c.length),c}catch(s){throw console.error("Failed to fetch voices:",s),s}}function GT({apiKey:r,region:i,selectedVoice:s,onVoiceChange:h}){const[a,p]=le.useState([]),[c,o]=le.useState(!1),[u,d]=le.useState(""),[v,g]=le.useState(""),[m,y]=le.useState("");le.useEffect(()=>{r&&i&&(o(!0),d(""),JT(r,i).then(P=>{p(P),o(!1)}).catch(P=>{console.error("Failed to fetch voices:",P),d("Failed to load voices from Azure."),p([]),o(!1)}))},[r,i]);const w=a.filter(P=>{var T,A;if(m)switch(m){case"MAI":if(!P.name.toLowerCase().includes("mai-voice"))return!1;break;case"HD":if(!P.isNeuralHD)return!1;break;case"NonHD":if(P.isNeuralHD)return!1;break}if(!v)return!0;const E=v.toLowerCase().trim(),C=M=>M.toLowerCase().split(/\s+/).some(L=>L===E);return P.name.toLowerCase().includes(E)||P.description.toLowerCase().includes(E)||C(P.locale)||P.gender&&C(P.gender)||((T=P.styleList)==null?void 0:T.some(M=>C(M)))||((A=P.keywords)==null?void 0:A.some(M=>C(String(M))))});return le.useEffect(()=>{if(w.length>0){const P=w[0],E=w.some(C=>C.name===s);(v||m)&&!E&&(console.log("Auto-selecting top voice from filtered list:",P.name),h(P.name))}},[v,w.length,m]),D.jsxs("div",{className:"space-y-2",children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Voice"}),u&&D.jsx("div",{className:"text-sm text-yellow-600 bg-yellow-50 p-2 rounded",children:u}),D.jsxs("div",{className:"flex gap-2 flex-wrap",children:[D.jsx("button",{onClick:()=>y(""),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${m===""?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All"}),D.jsx("button",{onClick:()=>y(m==="HD"?"":"HD"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${m==="HD"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"HD"}),D.jsx("button",{onClick:()=>y(m==="MAI"?"":"MAI"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${m==="MAI"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"MAI"}),D.jsx("button",{onClick:()=>y(m==="NonHD"?"":"NonHD"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${m==="NonHD"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Non-HD"})]}),D.jsx("input",{type:"text",placeholder:"Search voices...",value:v,onChange:P=>{console.log("Search term changed to:",P.target.value),g(P.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),D.jsxs("select",{value:s,onChange:P=>{console.log("Voice changed to:",P.target.value),h(P.target.value)},disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[c&&D.jsx("option",{children:"Loading voices..."}),!c&&w.length===0&&D.jsx("option",{children:"No voices found"}),!c&&w.map(P=>{var T,A;const E=[];(T=P.voiceTag)!=null&&T.ContentCategories&&E.push(...P.voiceTag.ContentCategories),(A=P.voiceTag)!=null&&A.VoicePersonalities&&E.push(...P.voiceTag.VoicePersonalities);const C=E.length>0?` [${E.join(", ")}]`:"";return D.jsxs("option",{value:P.name,children:[P.isFeatured?" ":"",P.name," - ",P.description,C]},P.name)})]}),D.jsxs("div",{className:"text-xs text-gray-500",children:[w.length," voice",w.length!==1?"s":""," available",v&&` (filtered from ${a.length})`]})]})}const QT=[{value:"eastus",label:"East US"},{value:"westus",label:"West US"},{value:"westus2",label:"West US 2"},{value:"eastus2",label:"East US 2"},{value:"centralus",label:"Central US"},{value:"northeurope",label:"North Europe"},{value:"westeurope",label:"West Europe"},{value:"southeastasia",label:"Southeast Asia"},{value:"eastasia",label:"East Asia"},{value:"japaneast",label:"Japan East"},{value:"australiaeast",label:"Australia East"}];function YT({settings:r,onSettingsChange:i}){return D.jsxs("div",{className:"h-full bg-gray-50 border-r border-gray-200 p-6 overflow-y-auto",children:[D.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Settings"}),D.jsxs("div",{className:"space-y-6",children:[D.jsxs("div",{className:"space-y-2",children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Azure API Key"}),D.jsx("input",{type:"password",value:r.apiKey,onChange:s=>i({apiKey:s.target.value}),placeholder:"Enter your Azure Speech API key",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),D.jsxs("p",{className:"text-xs text-gray-500",children:["Your API key is stored locally in your browser."," ",D.jsx("a",{href:"https://portal.azure.com/#view/Microsoft_Azure_ProjectOxford/CognitiveServicesHub/~/SpeechServices",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Get your API key from Azure Portal"})]})]}),D.jsxs("div",{className:"space-y-2",children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Azure Region"}),D.jsx("select",{value:r.region,onChange:s=>i({region:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:QT.map(s=>D.jsx("option",{value:s.value,children:s.label},s.value))})]}),D.jsx(GT,{apiKey:r.apiKey,region:r.region,selectedVoice:r.selectedVoice,onVoiceChange:s=>{console.log("SettingsPanel: Voice changed to:",s),i({selectedVoice:s})}}),D.jsxs("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[D.jsx("h3",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"Security Notice"}),D.jsx("p",{className:"text-xs text-yellow-700",children:"This app stores your API key in browser localStorage. Never share your API key or use this app on untrusted devices. Consider using Azure's authentication tokens for production applications."})]}),D.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[D.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Getting Started"}),D.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[D.jsx("li",{children:D.jsx("a",{href:"https://portal.azure.com/#view/Microsoft_Azure_ProjectOxford/CognitiveServicesHub/~/SpeechServices",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Get your API key from Azure Portal"})}),D.jsx("li",{children:"Select your Azure region"}),D.jsx("li",{children:"Choose a voice from the list"}),D.jsx("li",{children:"Enter text and click Play"})]})]})]})]})}const ZS={"en-GB":"Welcome to our programme exploring the fascinating world of marine biology. From the depths of the ocean to coastal waters, we'll discover the wonders of underwater life.","en-AU":"G'day and welcome to our show about the amazing world of marine biology. From the deep blue ocean to our beautiful coastlines, we'll explore the incredible underwater world.","en-CA":"Welcome to our podcast about the wonderful world of marine biology. From the depths of the ocean to our coastal waters, we'll explore the amazing underwater ecosystems.","en-IN":"Welcome to our programme on marine biology. We will explore the fascinating world beneath the oceans, from the deepest waters to coastal regions.","hi-IN":"                ,           ","es-ES":"Bienvenidos a nuestro programa sobre el fascinante mundo de la biologa marina. Desde las profundidades del ocano hasta las costas, exploraremos las maravillas del mundo submarino.","es-MX":"Bienvenidos a nuestro podcast sobre el fascinante mundo de la biologa marina. Desde las profundidades del mar hasta nuestras costas, exploraremos las maravillas del mundo submarino.","ja-JP":"","fr-FR":"Bienvenue dans notre mission sur le monde fascinant de la biologie marine. Des profondeurs ocaniques aux ctes, nous explorerons les merveilles du monde sous-marin.","fr-CA":"Bienvenue  notre mission sur le merveilleux monde de la biologie marine. Des profondeurs de l'ocan jusqu'aux ctes, nous explorerons les merveilles du monde sous-marin.","pt-BR":"Bem-vindos ao nosso podcast sobre o fascinante mundo da biologia marinha. Das profundezas do oceano at as costas, vamos explorar as maravilhas do mundo submarino.","pt-PT":"Bem-vindos ao nosso programa sobre o fascinante mundo da biologia marinha. Desde as profundezas do oceano at s costas, iremos explorar as maravilhas do mundo submarino.","it-IT":"Benvenuti al nostro programma sul affascinante mondo della biologia marina. Dalle profondit dell'oceano alle coste, esploreremo le meraviglie del mondo sottomarino.","zh-TW":",","ko-KR":"      .   ,          .","nl-NL":"Welkom bij ons programma over de fascinerende wereld van de mariene biologie. Van de diepten van de oceaan tot de kustlijnen, we verkennen de wonderen van de onderwaterwereld.","sv-SE":"Vlkommen till vrt program om den fascinerande vrlden av marinbiologi. Frn havets djup till kusterna kommer vi att utforska undervattensvrldens under.","pl-PL":"Witamy w naszym programie o fascynujcym wiecie biologii morskiej. Od gbin oceanu po wybrzea, bdziemy odkrywa cuda podwodnego wiata.","nb-NO":"Velkommen til vrt program om den fascinerende verden av marinbiologi. Fra havets dyp til kystene vil vi utforske undervannens underverker.","da-DK":"Velkommen til vores program om den fascinerende verden af marinbiologi. Fra havets dybder til kysterne vil vi udforske undervandensverdenens vidundere.","fi-FI":"Tervetuloa ohjelmaammme meribiologian kiehtovasta maailmasta. Valtameren syvyyksist rannikoille tutkimme vedenalaisen maailman ihmeit.","ru-RU":"         .           .","ca-ES":"Benvinguts al nostre programa sobre el fascinant mn de la biologia marina. Des de les profunditats de l'oce fins a les costes, explorarem les meravelles del mn submar.","tr-TR":"Deniz biyolojisinin byleyici dnyas hakkndaki programmza ho geldiniz. Okyanusun derinliklerinden kylara kadar, su alt dnyasnn harikalarn kefedeceiz.","ar-SA":"        .          .","ar-EG":"        .           .","th-TH":"  ","he-IL":"         .    ,      -.","cs-CZ":"Vtejte v naem poadu o fascinujcm svt mosk biologie. Od hlubin ocenu a po pobe budeme zkoumat zzraky podmoskho svta.","hu-HU":"dvzljk msorunkban a tengeri biolgia lenygz vilgrl. Az cen mlytl a partokig felfedezzk a vz alatti vilg csodit.","uk-UA":"         .          .","cy-GB":"Croeso i'n rhaglen am fyd hynod ddiddorol bioleg forol. O ddyfnderoedd y cefnfor i'r arfordiroedd, byddwn yn archwilio rhyfeddodau'r byd tanddwr.","vi-VN":"Cho mng n vi chng trnh ca chng ti v th gii hp dn ca sinh hc bin. T  su ca i dng n b bin, chng ta s khm ph nhng k quan ca th gii di nc.","sl-SI":"Dobrodoli v naem programu o fascinantnem svetu morske biologije. Od globin oceana do obal bomo raziskovali udee podvodnega sveta.","id-ID":"Selamat datang di program kami tentang dunia biologi laut yang menarik. Dari kedalaman samudra hingga garis pantai, kami akan menjelajahi keajaiban dunia bawah laut.","el-GR":"           .        ,       .","sk-SK":"Vitajte v naom programe o fascinujcom svete morskej biolgie. Od hlbn ocenu a po pobreia budeme skma zzraky podmorskho sveta.","hr-HR":"Dobrodoli u na program o fascinantnom svijetu morske biologije. Od dubina oceana do obala, istrait emo uda podvodnog svijeta.","ro-RO":"Bun venit la programul nostru despre lumea fascinant a biologiei marine. De la adncurile oceanului pn la coaste, vom explora minunile lumii subacvatice.","lt-LT":"Sveiki atvyk  ms program apie av jr biologijos pasaul. Nuo vandenyno gelmi iki krant tyrinsime povandeninio pasaulio stebuklus.","bg-BG":"      fascinating world   .            .","lv-LV":"Laipni ldzam msu programm par aizraujoo jras bioloijas pasauli. No okena dziumiem ldz krastiem ms izptsim zemdens pasaules brnumus.","et-EE":"Tere tulemast meie saatesse pnevast merebioloogia maailmast. Ookeani sgavustest kuni rannikualadeni uurime veealuse maailma imesid.","sr-RS":"Dobrodoli u na program o fascinantnom svetu morske biologije. Od dubina okeana do obala, istraiemo uda podvodnog sveta."},id={"en-US":{podcast:"Welcome to One Fish, Two Fish, the podcast that aims to make you laugh as you learn about the fascinating world of marine biology. From the depths of the deep blue to the shores of our coastlines, we'll explore the wonders of the underwater world and the creatures that call it home.",education:"Welcome to today's online math lesson! In this session, we'll delve into the fascinating world of algebra. We'll start by exploring the basics, from solving simple equations like 2x plus 5 equals 11, to understanding variables and coefficients.",instructions:"As you complete the inspection, take clear and comprehensive notes. Use our standardized checklist as a guide, noting any deviations or areas of concern. If possible, take photographs to visually document any hazards or non-compliance issues.",story:"A gentle melancholy weighed on her heart, woven from memories of a time when laughter echoed through these very meadows. She traced the delicate petals of a forgotten daisy, lost in thought until a soft voice broke the silence.",ads:"Introducing the all-new iPhone, setting the standard for Innovation Redefined. Boasting a sleek design and cutting-edge features, this iPhone redefines the pinnacle of technology.",news:"Turning to international news, NASA's recent successful mission to send a rover to explore Mars has captured the world's attention. The rover, named 'Perseverance,' touched down on the Martian surface earlier this week.",promotional:"Ladies, it's time for some self-pampering! Treat yourself to a moment of bliss with our exclusive Winter Spa Package. Indulge in a rejuvenating spa day like never before, and let your worries melt away.",vlog:"Hey, beautiful people! Welcome back to my channel. Today, we're about to spill all the tea on the latest makeup must-haves. Whether you're a makeup enthusiast or just looking to up your glam game, you're in the right place.",business:"Winnebago Industries is a company that manufactures motor homes, travel trailers, and other recreational vehicles. Its stock ticker symbol is WGO and it is traded on the New York Stock Exchange.",standup:"Oh boy, here we go. You know, I walked into this improv show, and I thought, 'Hey, this could be fun. Maybe they'll have a surprise for me.' Well, guess what? The surprise was that I got roped into doing standup for you folks.",enthusiastic:"Oh my gosh, that's AMAZING news! Congratulations! How are you feeling about it all? Any excitement, nerves, or a mix of both? Tell me everything!",casual:"Oh no, I didn't mean to disappoint! How about this: If you want something quirky and fun with lots of laughs, go for Blue Man Group. If you're looking for something awe-inspiring and magical, Cirque du Soleil is your best bet.",hesitant:"So, uh, I was thinkingno, I mean, I was wondering if, um, if you might want to go to the, uh, the new Italian restaurant on Friday? I've heard it's reallywhat's the wordoh, exquisite."},"zh-CN":{podcast:",",education:"",instructions:"",story:"",ads:"iPhoneiPhone",news:"NASA",promotional:"",vlog:"",business:"Winnebago IndustriesWGO",standup:"",enthusiastic:"",casual:"",hesitant:""},"de-DE":{podcast:"Willkommen zu unserem Podcast ber die faszinierende Welt der Meeresbiologie. Von den Tiefen des Ozeans bis zu den Ksten werden wir die Wunder der Unterwasserwelt und die erstaunlichen Kreaturen erkunden.",education:"Willkommen zur heutigen Online-Mathematikstunde! In dieser Sitzung werden wir in die faszinierende Welt der Algebra eintauchen. Wir beginnen mit den Grundlagen, vom Lsen einfacher Gleichungen bis zum Verstndnis von Variablen.",instructions:"Machen Sie bei der Durchfhrung der Inspektion klare und umfassende Notizen. Verwenden Sie unsere standardisierte Checkliste als Leitfaden und notieren Sie Abweichungen oder Problembereiche.",story:"Eine sanfte Melancholie lag auf ihrem Herzen, gewebt aus Erinnerungen an eine Zeit, als Lachen durch diese Wiesen hallte. Sie strich ber die zarten Bltenbltter eines vergessenen Gnseblmchens.",ads:"Wir prsentieren das brandneue iPhone, das den Standard fr neu definierte Innovation setzt. Mit elegantem Design und modernsten Funktionen definiert dieses iPhone den Gipfel der Technologie neu.",news:"In den internationalen Nachrichten hat die erfolgreiche Mission der NASA, einen Rover zum Mars zu schicken, weltweite Aufmerksamkeit erregt. Der Rover namens Perseverance landete diese Woche auf der Marsoberflche.",promotional:"Meine Damen, es ist Zeit fr etwas Selbstverwhnung! Gnnen Sie sich einen Moment der Glckseligkeit mit unserem exklusiven Winter-Spa-Paket.",vlog:"Hallo, ihr Lieben! Willkommen zurck auf meinem Kanal. Heute werden wir ber die neuesten Make-up-Must-haves sprechen.",business:"Winnebago Industries ist ein Unternehmen, das Wohnmobile, Reiseanhnger und andere Freizeitfahrzeuge herstellt. Das Brsenkrzel lautet WGO und wird an der New Yorker Brse gehandelt.",standup:"Oh je, jetzt geht's los. Wissen Sie, ich kam zu dieser Improv-Show und dachte: 'Hey, das knnte lustig werden.' Die berraschung war, dass ich hier Stand-up fr Sie machen muss.",enthusiastic:"Oh mein Gott, das sind ja fantastische Neuigkeiten! Herzlichen Glckwunsch! Wie fhlen Sie sich dabei? Aufgeregt, nervs oder beides?",casual:"Oh nein, das wollte ich nicht! Wie wre es damit: Wenn Sie etwas Skurriles mit viel Lachen wollen, nehmen Sie die Blue Man Group. Fr etwas Magisches ist Cirque du Soleil die beste Wahl.",hesitant:"Also, h, ich habe gedachtnein, ich meine, ich habe mich gefragt, ob, hm, ob Sie vielleicht Freitag in das, h, neue italienische Restaurant gehen mchten?"}};function XT(r){const i=r.match(/^([a-z]{2}-[A-Z]{2})/i);if(i){const s=i[1].split("-");return`${s[0].toLowerCase()}-${s[1].toUpperCase()}`}return"en-US"}function ZT(r){if(id[r])return id[r];if(ZS[r]){const i=ZS[r];return{podcast:i,education:i,instructions:i,story:i,ads:i,news:i,promotional:i,vlog:i,business:i,standup:i,enthusiastic:i,casual:i,hesitant:i}}return id["en-US"]}function $T({text:r,onTextChange:i,wordBoundaries:s,currentWordIndex:h,selectedVoice:a,state:p}){const c=le.useRef(null),o=le.useRef(null),[u,d]=le.useState(!1),[v,g]=le.useState(""),m=r.trim()?r.trim().split(/\s+/).length:0,y=r.length,w=XT(a),E=ZT(v||w),C=L=>{const K=E[L];K&&(i(K),d(!1))},T=p==="synthesizing"||p==="playing";le.useEffect(()=>{if(h>=0&&h<s.length){const L=s[h];if(c.current){const K=c.current,pe=(r.substring(0,L.offset).split(`
`).length-1)*24;K.scrollTop=Math.max(0,pe-K.clientHeight/2)}}},[h,s,r]);const A=()=>{if(h<0||h>=s.length)return r;const L=s[h],K=r.substring(0,L.offset),U=r.substring(L.offset,L.offset+L.length),se=r.substring(L.offset+L.length);return D.jsxs(D.Fragment,{children:[K,D.jsx("span",{className:"bg-yellow-300 font-semibold",children:U}),se]})},j=u?`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US">
  <voice name="${a}">
    ${r}
  </voice>
</speak>`:r;return D.jsxs("div",{className:"h-full flex flex-col",children:[D.jsxs("div",{className:"flex items-center justify-between mb-4",children:[D.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Text to Synthesize"}),D.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[D.jsxs("span",{children:[m," word",m!==1?"s":""]}),D.jsxs("span",{children:[y," char",y!==1?"s":""]})]})]}),D.jsxs("div",{className:"mb-3 grid grid-cols-[200px_1fr] gap-3",children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preset Language"}),D.jsxs("select",{value:v,onChange:L=>g(L.target.value),disabled:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:[D.jsxs("option",{value:"",children:["Voice Language (",w,")"]}),D.jsx("option",{value:"en-US",children:"English (US)"}),D.jsx("option",{value:"zh-CN",children:"Chinese (Mandarin)"}),D.jsx("option",{value:"de-DE",children:"German"}),D.jsx("option",{value:"es-ES",children:"Spanish (Spain)"}),D.jsx("option",{value:"fr-FR",children:"French"}),D.jsx("option",{value:"it-IT",children:"Italian"}),D.jsx("option",{value:"ja-JP",children:"Japanese"}),D.jsx("option",{value:"ko-KR",children:"Korean"}),D.jsx("option",{value:"pt-BR",children:"Portuguese (Brazil)"}),D.jsx("option",{value:"ru-RU",children:"Russian"}),D.jsx("option",{value:"ar-SA",children:"Arabic"}),D.jsx("option",{value:"hi-IN",children:"Hindi"})]})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Load Preset Text"}),D.jsxs("select",{onChange:L=>C(L.target.value),disabled:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",defaultValue:"",children:[D.jsx("option",{value:"",children:"-- Select a preset --"}),D.jsx("option",{value:"podcast",children:"Podcast"}),D.jsx("option",{value:"education",children:"Education/Learning"}),D.jsx("option",{value:"instructions",children:"Instructions/Guidance"}),D.jsx("option",{value:"story",children:"Story/Narrative"}),D.jsx("option",{value:"ads",children:"Advertisement"}),D.jsx("option",{value:"news",children:"News Report"}),D.jsx("option",{value:"promotional",children:"Promotional/Marketing"}),D.jsx("option",{value:"vlog",children:"Vlog/Social Media"}),D.jsx("option",{value:"business",children:"Business/Professional"}),D.jsx("option",{value:"standup",children:"Stand-up Comedy"}),D.jsx("option",{value:"enthusiastic",children:"Enthusiastic/Excited"}),D.jsx("option",{value:"casual",children:"Casual Conversation"}),D.jsx("option",{value:"hesitant",children:"Hesitant/Uncertain"})]})]})]}),D.jsxs("div",{className:"flex-1 relative",children:[h>=0&&D.jsx("div",{ref:o,className:"absolute inset-0 px-3 py-2 pointer-events-none overflow-hidden whitespace-pre-wrap break-words font-mono text-base leading-6 text-transparent",style:{zIndex:1},children:A()}),D.jsx("textarea",{ref:c,value:j,onChange:L=>!u&&i(L.target.value),placeholder:"Enter text here to convert to speech...",readOnly:u,className:"w-full h-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none font-mono text-base leading-6",style:{position:"relative",zIndex:2,background:u?"#f9fafb":"transparent"}})]}),D.jsxs("div",{className:"mt-4 flex gap-2",children:[D.jsx("button",{onClick:()=>d(!u),disabled:!r,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Show Plain Text":"Show SSML"}),D.jsx("button",{onClick:()=>i(""),disabled:!r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Text"})]})]})}function eA(r,i){const s=new Blob([r],{type:"audio/mpeg"}),h=URL.createObjectURL(s),p=`tts-output-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.mp3`,c=document.createElement("a");c.href=h,c.download=p,document.body.appendChild(c),c.click(),document.body.removeChild(c),setTimeout(()=>URL.revokeObjectURL(h),100)}function tA({state:r,error:i,audioData:s,hasText:h,isConfigured:a,onPlay:p,onPause:c,onResume:o,onStop:u}){const d=h&&a&&r==="idle",v=r==="playing",g=r==="paused",m=r==="playing"||r==="paused"||r==="synthesizing",y=s!==null&&r==="idle",w=()=>{s&&eA(s)},P=()=>{switch(r){case"idle":return"Ready";case"synthesizing":return"Synthesizing...";case"playing":return"Playing";case"paused":return"Paused";case"error":return"Error";default:return"Unknown"}},E=()=>{switch(r){case"idle":return"text-gray-600";case"synthesizing":return"text-blue-600";case"playing":return"text-green-600";case"paused":return"text-yellow-600";case"error":return"text-red-600";default:return"text-gray-600"}};return D.jsxs("div",{className:"space-y-4",children:[D.jsx("div",{className:"flex items-center justify-between",children:D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),D.jsx("span",{className:`text-sm font-semibold ${E()}`,children:P()}),r==="synthesizing"&&D.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"})]})}),i&&D.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:[D.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Error:"}),D.jsx("p",{className:"text-xs text-red-600 mt-1",children:i})]}),!a&&D.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:D.jsx("p",{className:"text-sm text-yellow-700",children:"Please configure your API key and region in the settings panel."})}),D.jsxs("div",{className:"flex gap-2 flex-wrap",children:[D.jsx("button",{onClick:p,disabled:!d,className:"flex-1 min-w-[100px] px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600",title:h?a?"Play":"Configure settings first":"Enter text first",children:" Play"}),g?D.jsx("button",{onClick:o,className:"flex-1 min-w-[100px] px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:" Resume"}):D.jsx("button",{onClick:c,disabled:!v,className:"flex-1 min-w-[100px] px-4 py-2 text-sm font-medium text-white bg-yellow-600 rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-yellow-600",children:" Pause"}),D.jsx("button",{onClick:u,disabled:!m,className:"flex-1 min-w-[100px] px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-600",children:" Stop"})]}),D.jsx("div",{className:"pt-2 border-t border-gray-200",children:D.jsx("button",{onClick:w,disabled:!y,className:"w-full px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-purple-600",title:s?"Save as MP3":"Play audio first to enable saving",children:" Save as MP3"})}),D.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[D.jsx("p",{children:" Click Play to start synthesis and playback"}),D.jsx("p",{children:" Word highlighting shows the current word being spoken"}),D.jsx("p",{children:" Save the audio after playback completes"})]})]})}function rA({text:r,selectedVoice:i,region:s,audioData:h}){const[a,p]=le.useState(!1),c=()=>`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US">
  <voice name="${i}">
    ${r}
  </voice>
</speak>`,o=async()=>{try{const v=c(),g=`
Voice: ${i}
Region: ${s}

SSML:
${v}

Text:
${r}

${h?"Please find the audio file attached (downloaded separately).":"[No audio generated yet]"}
      `.trim(),m=encodeURIComponent(`Azure Voice Playground Feedback - ${i}`),y=encodeURIComponent(g),w=`mailto:ttsvoicefeedback@microsoft.com?subject=${m}&body=${y}`;if(h){const P=new Blob([h],{type:"audio/mpeg"}),E=URL.createObjectURL(P),C=document.createElement("a");C.href=E,C.download=`feedback-${i}-${Date.now()}.mp3`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(E)}navigator.clipboard&&await navigator.clipboard.writeText(v),window.open(w,"_blank"),h&&alert(` Audio file downloaded!

Please attach it to your email manually before sending.`),p(!1)}catch(v){console.error("Error sending feedback:",v),alert("Error preparing feedback. Please try again.")}},u=async()=>{try{const v=c(),g=`Azure Voice Playground Feedback
================================

Voice: ${i}
Region: ${s}
Date: ${new Date().toISOString()}

SSML:
${v}

Text:
${r}
`,m=new Blob([g],{type:"text/plain"}),y=URL.createObjectURL(m),w=document.createElement("a");if(w.href=y,w.download=`feedback-${i}-${Date.now()}.txt`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(y),h){const P=new Blob([h],{type:"audio/mpeg"}),E=URL.createObjectURL(P),C=document.createElement("a");C.href=E,C.download=`feedback-${i}-${Date.now()}.mp3`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(E),alert(` Feedback package downloaded!

Files saved:
- Feedback text file (.txt)
- Audio file (.mp3)

You can now attach both files to your email.`)}else alert(` Feedback text file downloaded!

Note: No audio has been generated yet.`);p(!1)}catch(v){console.error("Error downloading package:",v),alert("Error creating feedback package. Please try again.")}},d=async()=>{try{const v=c(),g=`Voice: ${i}
Region: ${s}

SSML:
${v}

Text:
${r}`;await navigator.clipboard.writeText(g),alert(` Feedback copied to clipboard!

You can paste it into your email.`),p(!1)}catch(v){console.error("Error copying to clipboard:",v),alert("Error copying to clipboard. Please try again.")}};return D.jsxs("div",{className:"relative",children:[D.jsxs("button",{onClick:()=>p(!a),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200 text-sm font-medium",title:"Send feedback with SSML and audio",children:[D.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[D.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),D.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Send Feedback",D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 transition-transform ${a?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:D.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),a&&D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),D.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 z-20 overflow-hidden",children:D.jsxs("div",{className:"p-2",children:[D.jsxs("button",{onClick:o,className:"w-full text-left px-4 py-3 hover:bg-gray-50 rounded-md transition-colors flex items-start gap-3",children:[D.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:[D.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),D.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),D.jsxs("div",{children:[D.jsx("div",{className:"font-medium text-sm text-gray-900",children:"Open Email + Download Audio"}),D.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"Opens email client and downloads audio file"})]})]}),D.jsxs("button",{onClick:u,className:"w-full text-left px-4 py-3 hover:bg-gray-50 rounded-md transition-colors flex items-start gap-3",children:[D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:D.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),D.jsxs("div",{children:[D.jsx("div",{className:"font-medium text-sm text-gray-900",children:"Download Feedback Package"}),D.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"Downloads text + audio files separately"})]})]}),D.jsxs("button",{onClick:d,className:"w-full text-left px-4 py-3 hover:bg-gray-50 rounded-md transition-colors flex items-start gap-3",children:[D.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-600 flex-shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:[D.jsx("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),D.jsx("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]}),D.jsxs("div",{children:[D.jsx("div",{className:"font-medium text-sm text-gray-900",children:"Copy to Clipboard"}),D.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"Copy feedback text only"})]})]})]})})]})]})}function nA(){const{settings:r,updateSettings:i,isConfigured:s}=aw(),[h,a]=le.useState("Welcome to Azure Voice Playground. Select a voice and choose a preset text to get started, or type your own text."),{state:p,error:c,wordBoundaries:o,currentWordIndex:u,audioData:d,synthesize:v,pause:g,resume:m,stop:y}=KT(r),w=()=>{v(h)};return D.jsxs("div",{className:"h-screen flex flex-col md:flex-row overflow-hidden bg-white",children:[D.jsx("div",{className:"w-full md:w-80 flex-shrink-0",children:D.jsx(YT,{settings:r,onSettingsChange:i})}),D.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[D.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 shadow-md",children:[D.jsx("h1",{className:"text-3xl font-bold",children:"Azure Voice Playground"}),D.jsx("p",{className:"text-blue-100 mt-1",children:"Text-to-Speech with real-time word highlighting and MP3 export"})]}),D.jsxs("div",{className:"flex-1 grid grid-rows-[1fr_auto] gap-6 p-6 overflow-hidden",children:[D.jsx("div",{className:"overflow-hidden",children:D.jsx($T,{text:h,onTextChange:a,wordBoundaries:o,currentWordIndex:u,selectedVoice:r.selectedVoice,state:p})}),D.jsx("div",{className:"border-t border-gray-200 pt-6",children:D.jsx(tA,{state:p,error:c,audioData:d,hasText:h.trim().length>0,isConfigured:s,onPlay:w,onPause:g,onResume:m,onStop:y})})]}),D.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-3",children:D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("p",{className:"text-xs text-gray-600",children:"Built with React, TypeScript, and Azure Cognitive Services Speech SDK"}),D.jsx(rA,{text:h,selectedVoice:r.selectedVoice,region:r.region,audioData:d})]})})]})]})}ow.createRoot(document.getElementById("root")).render(D.jsx(ZR.StrictMode,{children:D.jsx(nA,{})}));
