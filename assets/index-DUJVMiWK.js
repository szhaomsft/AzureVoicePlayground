(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&h(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function h(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();function oC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function ow(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var s=function h(){return this instanceof h?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(r).forEach(function(h){var a=Object.getOwnPropertyDescriptor(r,h);Object.defineProperty(s,h,a.get?a:{enumerable:!0,get:function(){return r[h]}})}),s}var Ll={exports:{}},xi={},ql={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af;function sw(){if(af)return ve;af=1;var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),f=Symbol.iterator;function m(M){return M===null||typeof M!="object"?null:(M=f&&M[f]||M["@@iterator"],typeof M=="function"?M:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,P={};function T(M,U,le){this.props=M,this.context=U,this.refs=P,this.updater=le||y}T.prototype.isReactComponent={},T.prototype.setState=function(M,U){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,U,"setState")},T.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function R(){}R.prototype=T.prototype;function A(M,U,le){this.props=M,this.context=U,this.refs=P,this.updater=le||y}var b=A.prototype=new R;b.constructor=A,w(b,T.prototype),b.isPureReactComponent=!0;var x=Array.isArray,z=Object.prototype.hasOwnProperty,N={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function B(M,U,le){var de,ye={},Ce=null,Ae=null;if(U!=null)for(de in U.ref!==void 0&&(Ae=U.ref),U.key!==void 0&&(Ce=""+U.key),U)z.call(U,de)&&!F.hasOwnProperty(de)&&(ye[de]=U[de]);var Ee=arguments.length-2;if(Ee===1)ye.children=le;else if(1<Ee){for(var be=Array(Ee),Ze=0;Ze<Ee;Ze++)be[Ze]=arguments[Ze+2];ye.children=be}if(M&&M.defaultProps)for(de in Ee=M.defaultProps,Ee)ye[de]===void 0&&(ye[de]=Ee[de]);return{$$typeof:r,type:M,key:Ce,ref:Ae,props:ye,_owner:N.current}}function re(M,U){return{$$typeof:r,type:M.type,key:U,ref:M.ref,props:M.props,_owner:M._owner}}function se(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function pe(M){var U={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return U[le]})}var Re=/\/+/g;function ee(M,U){return typeof M=="object"&&M!==null&&M.key!=null?pe(""+M.key):U.toString(36)}function ue(M,U,le,de,ye){var Ce=typeof M;(Ce==="undefined"||Ce==="boolean")&&(M=null);var Ae=!1;if(M===null)Ae=!0;else switch(Ce){case"string":case"number":Ae=!0;break;case"object":switch(M.$$typeof){case r:case n:Ae=!0}}if(Ae)return Ae=M,ye=ye(Ae),M=de===""?"."+ee(Ae,0):de,x(ye)?(le="",M!=null&&(le=M.replace(Re,"$&/")+"/"),ue(ye,U,le,"",function(Ze){return Ze})):ye!=null&&(se(ye)&&(ye=re(ye,le+(!ye.key||Ae&&Ae.key===ye.key?"":(""+ye.key).replace(Re,"$&/")+"/")+M)),U.push(ye)),1;if(Ae=0,de=de===""?".":de+":",x(M))for(var Ee=0;Ee<M.length;Ee++){Ce=M[Ee];var be=de+ee(Ce,Ee);Ae+=ue(Ce,U,le,be,ye)}else if(be=m(M),typeof be=="function")for(M=be.call(M),Ee=0;!(Ce=M.next()).done;)Ce=Ce.value,be=de+ee(Ce,Ee++),Ae+=ue(Ce,U,le,be,ye);else if(Ce==="object")throw U=String(M),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Ae}function fe(M,U,le){if(M==null)return M;var de=[],ye=0;return ue(M,de,"","",function(Ce){return U.call(le,Ce,ye++)}),de}function Se(M){if(M._status===-1){var U=M._result;U=U(),U.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=U)}if(M._status===1)return M._result.default;throw M._result}var he={current:null},q={transition:null},Q={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:q,ReactCurrentOwner:N};function G(){throw Error("act(...) is not supported in production builds of React.")}return ve.Children={map:fe,forEach:function(M,U,le){fe(M,function(){U.apply(this,arguments)},le)},count:function(M){var U=0;return fe(M,function(){U++}),U},toArray:function(M){return fe(M,function(U){return U})||[]},only:function(M){if(!se(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ve.Component=T,ve.Fragment=s,ve.Profiler=a,ve.PureComponent=A,ve.StrictMode=h,ve.Suspense=u,ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,ve.act=G,ve.cloneElement=function(M,U,le){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var de=w({},M.props),ye=M.key,Ce=M.ref,Ae=M._owner;if(U!=null){if(U.ref!==void 0&&(Ce=U.ref,Ae=N.current),U.key!==void 0&&(ye=""+U.key),M.type&&M.type.defaultProps)var Ee=M.type.defaultProps;for(be in U)z.call(U,be)&&!F.hasOwnProperty(be)&&(de[be]=U[be]===void 0&&Ee!==void 0?Ee[be]:U[be])}var be=arguments.length-2;if(be===1)de.children=le;else if(1<be){Ee=Array(be);for(var Ze=0;Ze<be;Ze++)Ee[Ze]=arguments[Ze+2];de.children=Ee}return{$$typeof:r,type:M.type,key:ye,ref:Ce,props:de,_owner:Ae}},ve.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},ve.createElement=B,ve.createFactory=function(M){var U=B.bind(null,M);return U.type=M,U},ve.createRef=function(){return{current:null}},ve.forwardRef=function(M){return{$$typeof:o,render:M}},ve.isValidElement=se,ve.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:Se}},ve.memo=function(M,U){return{$$typeof:d,type:M,compare:U===void 0?null:U}},ve.startTransition=function(M){var U=q.transition;q.transition={};try{M()}finally{q.transition=U}},ve.unstable_act=G,ve.useCallback=function(M,U){return he.current.useCallback(M,U)},ve.useContext=function(M){return he.current.useContext(M)},ve.useDebugValue=function(){},ve.useDeferredValue=function(M){return he.current.useDeferredValue(M)},ve.useEffect=function(M,U){return he.current.useEffect(M,U)},ve.useId=function(){return he.current.useId()},ve.useImperativeHandle=function(M,U,le){return he.current.useImperativeHandle(M,U,le)},ve.useInsertionEffect=function(M,U){return he.current.useInsertionEffect(M,U)},ve.useLayoutEffect=function(M,U){return he.current.useLayoutEffect(M,U)},ve.useMemo=function(M,U){return he.current.useMemo(M,U)},ve.useReducer=function(M,U,le){return he.current.useReducer(M,U,le)},ve.useRef=function(M){return he.current.useRef(M)},ve.useState=function(M){return he.current.useState(M)},ve.useSyncExternalStore=function(M,U,le){return he.current.useSyncExternalStore(M,U,le)},ve.useTransition=function(){return he.current.useTransition()},ve.version="18.3.1",ve}var cf;function vp(){return cf||(cf=1,ql.exports=sw()),ql.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf;function aw(){if(uf)return xi;uf=1;var r=vp(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(o,u,d){var v,f={},m=null,y=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(y=u.ref);for(v in u)h.call(u,v)&&!l.hasOwnProperty(v)&&(f[v]=u[v]);if(o&&o.defaultProps)for(v in u=o.defaultProps,u)f[v]===void 0&&(f[v]=u[v]);return{$$typeof:n,type:o,key:m,ref:y,props:f,_owner:a.current}}return xi.Fragment=s,xi.jsx=c,xi.jsxs=c,xi}var lf;function cw(){return lf||(lf=1,Ll.exports=aw()),Ll.exports}var C=cw(),L=vp();const uw=oC(L);var Kc={},Bl={exports:{}},at={},Fl={exports:{}},Ul={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df;function lw(){return df||(df=1,(function(r){function n(q,Q){var G=q.length;q.push(Q);e:for(;0<G;){var M=G-1>>>1,U=q[M];if(0<a(U,Q))q[M]=Q,q[G]=U,G=M;else break e}}function s(q){return q.length===0?null:q[0]}function h(q){if(q.length===0)return null;var Q=q[0],G=q.pop();if(G!==Q){q[0]=G;e:for(var M=0,U=q.length,le=U>>>1;M<le;){var de=2*(M+1)-1,ye=q[de],Ce=de+1,Ae=q[Ce];if(0>a(ye,G))Ce<U&&0>a(Ae,ye)?(q[M]=Ae,q[Ce]=G,M=Ce):(q[M]=ye,q[de]=G,M=de);else if(Ce<U&&0>a(Ae,G))q[M]=Ae,q[Ce]=G,M=Ce;else break e}}return Q}function a(q,Q){var G=q.sortIndex-Q.sortIndex;return G!==0?G:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,o=c.now();r.unstable_now=function(){return c.now()-o}}var u=[],d=[],v=1,f=null,m=3,y=!1,w=!1,P=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(q){for(var Q=s(d);Q!==null;){if(Q.callback===null)h(d);else if(Q.startTime<=q)h(d),Q.sortIndex=Q.expirationTime,n(u,Q);else break;Q=s(d)}}function x(q){if(P=!1,b(q),!w)if(s(u)!==null)w=!0,Se(z);else{var Q=s(d);Q!==null&&he(x,Q.startTime-q)}}function z(q,Q){w=!1,P&&(P=!1,R(B),B=-1),y=!0;var G=m;try{for(b(Q),f=s(u);f!==null&&(!(f.expirationTime>Q)||q&&!pe());){var M=f.callback;if(typeof M=="function"){f.callback=null,m=f.priorityLevel;var U=M(f.expirationTime<=Q);Q=r.unstable_now(),typeof U=="function"?f.callback=U:f===s(u)&&h(u),b(Q)}else h(u);f=s(u)}if(f!==null)var le=!0;else{var de=s(d);de!==null&&he(x,de.startTime-Q),le=!1}return le}finally{f=null,m=G,y=!1}}var N=!1,F=null,B=-1,re=5,se=-1;function pe(){return!(r.unstable_now()-se<re)}function Re(){if(F!==null){var q=r.unstable_now();se=q;var Q=!0;try{Q=F(!0,q)}finally{Q?ee():(N=!1,F=null)}}else N=!1}var ee;if(typeof A=="function")ee=function(){A(Re)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,fe=ue.port2;ue.port1.onmessage=Re,ee=function(){fe.postMessage(null)}}else ee=function(){T(Re,0)};function Se(q){F=q,N||(N=!0,ee())}function he(q,Q){B=T(function(){q(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_continueExecution=function(){w||y||(w=!0,Se(z))},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return s(u)},r.unstable_next=function(q){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var G=m;m=Q;try{return q()}finally{m=G}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=m;m=q;try{return Q()}finally{m=G}},r.unstable_scheduleCallback=function(q,Q,G){var M=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?M+G:M):G=M,q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=G+U,q={id:v++,callback:Q,priorityLevel:q,startTime:G,expirationTime:U,sortIndex:-1},G>M?(q.sortIndex=G,n(d,q),s(u)===null&&q===s(d)&&(P?(R(B),B=-1):P=!0,he(x,G-M))):(q.sortIndex=U,n(u,q),w||y||(w=!0,Se(z))),q},r.unstable_shouldYield=pe,r.unstable_wrapCallback=function(q){var Q=m;return function(){var G=m;m=Q;try{return q.apply(this,arguments)}finally{m=G}}}})(Ul)),Ul}var pf;function dw(){return pf||(pf=1,Fl.exports=lw()),Fl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf;function pw(){if(hf)return at;hf=1;var r=vp(),n=dw();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)h.add(t[e])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},f={};function m(e){return u.call(f,e)?!0:u.call(v,e)?!1:d.test(e)?f[e]=!0:(v[e]=!0,!1)}function y(e,t,i,p){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return p?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w(e,t,i,p){if(t===null||typeof t>"u"||y(e,t,i,p))return!0;if(p)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,i,p,g,S,E){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=S,this.removeEmptyString=E}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){T[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];T[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){T[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){T[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){T[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){T[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){T[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){T[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){T[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function A(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(R,A);T[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(R,A);T[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(R,A);T[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){T[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),T.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){T[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function b(e,t,i,p){var g=T.hasOwnProperty(t)?T[t]:null;(g!==null?g.type!==0:p||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(w(t,i,g,p)&&(i=null),p||g===null?m(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):g.mustUseProperty?e[g.propertyName]=i===null?g.type===3?!1:"":i:(t=g.attributeName,p=g.attributeNamespace,i===null?e.removeAttribute(t):(g=g.type,i=g===3||g===4&&i===!0?"":""+i,p?e.setAttributeNS(p,t,i):e.setAttribute(t,i))))}var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),N=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),pe=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),q=Symbol.iterator;function Q(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,M;function U(e){if(M===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return`
`+M+e}var le=!1;function de(e,t){if(!e||le)return"";le=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(D){var p=D}Reflect.construct(e,[],t)}else{try{t.call()}catch(D){p=D}e.call(t.prototype)}else{try{throw Error()}catch(D){p=D}e()}}catch(D){if(D&&p&&typeof D.stack=="string"){for(var g=D.stack.split(`
`),S=p.stack.split(`
`),E=g.length-1,I=S.length-1;1<=E&&0<=I&&g[E]!==S[I];)I--;for(;1<=E&&0<=I;E--,I--)if(g[E]!==S[I]){if(E!==1||I!==1)do if(E--,I--,0>I||g[E]!==S[I]){var _=`
`+g[E].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=E&&0<=I);break}}}finally{le=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?U(e):""}function ye(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=de(e.type,!1),e;case 11:return e=de(e.type.render,!1),e;case 1:return e=de(e.type,!0),e;default:return""}}function Ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case N:return"Portal";case re:return"Profiler";case B:return"StrictMode";case ee:return"Suspense";case ue:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pe:return(e.displayName||"Context")+".Consumer";case se:return(e._context.displayName||"Context")+".Provider";case Re:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return t=e.displayName||null,t!==null?t:Ce(e.type)||"Memo";case Se:t=e._payload,e=e._init;try{return Ce(e(t))}catch{}}return null}function Ae(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(t);case 8:return t===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ee(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ze(e){var t=be(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),p=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var g=i.get,S=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return g.call(this)},set:function(E){p=""+E,S.call(this,E)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return p},setValue:function(E){p=""+E},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pn(e){e._valueTracker||(e._valueTracker=Ze(e))}function ba(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),p="";return e&&(p=be(e)?e.checked?"true":"false":e.value),e=p,e!==i?(t.setValue(e),!0):!1}function hn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bn(e,t){var i=t.checked;return G({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Ia(e,t){var i=t.defaultValue==null?"":t.defaultValue,p=t.checked!=null?t.checked:t.defaultChecked;i=Ee(t.value!=null?t.value:i),e._wrapperState={initialChecked:p,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _a(e,t){t=t.checked,t!=null&&b(e,"checked",t,!1)}function Ue(e,t){_a(e,t);var i=Ee(t.value),p=t.type;if(i!=null)p==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(p==="submit"||p==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fn(e,t.type,i):t.hasOwnProperty("defaultValue")&&Fn(e,t.type,Ee(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ka(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var p=t.type;if(!(p!=="submit"&&p!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Fn(e,t,i){(t!=="number"||hn(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var br=Array.isArray;function tr(e,t,i,p){if(e=e.options,t){t={};for(var g=0;g<i.length;g++)t["$"+i[g]]=!0;for(i=0;i<e.length;i++)g=t.hasOwnProperty("$"+e[i].value),e[i].selected!==g&&(e[i].selected=g),g&&p&&(e[i].defaultSelected=!0)}else{for(i=""+Ee(i),t=null,g=0;g<e.length;g++){if(e[g].value===i){e[g].selected=!0,p&&(e[g].defaultSelected=!0);return}t!==null||e[g].disabled||(t=e[g])}t!==null&&(t.selected=!0)}}function Un(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return G({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xa(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(s(92));if(br(i)){if(1<i.length)throw Error(s(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Ee(i)}}function Ma(e,t){var i=Ee(t.value),p=Ee(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),p!=null&&(e.defaultValue=""+p)}function Na(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Oa(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Oa(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vn,fn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,p,g){MSApp.execUnsafeLocalFunction(function(){return e(t,i,p,g)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vn=vn||document.createElement("div"),vn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ir(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var _r={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$c=["Webkit","ms","Moz","O"];Object.keys(_r).forEach(function(e){$c.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_r[t]=_r[e]})});function ja(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||_r.hasOwnProperty(e)&&_r[e]?(""+t).trim():t+"px"}function Da(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var p=i.indexOf("--")===0,g=ja(i,t[i],p);i==="float"&&(i="cssFloat"),p?e.setProperty(i,g):e[i]=g}}var eu=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hn(e,t){if(t){if(eu[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Vn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kn=null;function Gn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jn=null,Ft=null,rr=null;function za(e){if(e=gi(e)){if(typeof Jn!="function")throw Error(s(280));var t=e.stateNode;t&&(t=ac(t),Jn(e.stateNode,e.type,t))}}function La(e){Ft?rr?rr.push(e):rr=[e]:Ft=e}function Tp(){if(Ft){var e=Ft,t=rr;if(rr=Ft=null,za(e),t)for(e=0;e<t.length;e++)za(t[e])}}function Ap(e,t){return e(t)}function bp(){}var tu=!1;function Ip(e,t,i){if(tu)return e(t,i);tu=!0;try{return Ap(e,t,i)}finally{tu=!1,(Ft!==null||rr!==null)&&(bp(),Tp())}}function Qn(e,t){var i=e.stateNode;if(i===null)return null;var p=ac(i);if(p===null)return null;i=p[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(e=e.type,p=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!p;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var ru=!1;if(o)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){ru=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{ru=!1}function d0(e,t,i,p,g,S,E,I,_){var D=Array.prototype.slice.call(arguments,3);try{t.apply(i,D)}catch(H){this.onError(H)}}var Xn=!1,qa=null,Ba=!1,nu=null,p0={onError:function(e){Xn=!0,qa=e}};function h0(e,t,i,p,g,S,E,I,_){Xn=!1,qa=null,d0.apply(p0,arguments)}function v0(e,t,i,p,g,S,E,I,_){if(h0.apply(this,arguments),Xn){if(Xn){var D=qa;Xn=!1,qa=null}else throw Error(s(198));Ba||(Ba=!0,nu=D)}}function kr(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function _p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function kp(e){if(kr(e)!==e)throw Error(s(188))}function f0(e){var t=e.alternate;if(!t){if(t=kr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,p=t;;){var g=i.return;if(g===null)break;var S=g.alternate;if(S===null){if(p=g.return,p!==null){i=p;continue}break}if(g.child===S.child){for(S=g.child;S;){if(S===i)return kp(g),e;if(S===p)return kp(g),t;S=S.sibling}throw Error(s(188))}if(i.return!==p.return)i=g,p=S;else{for(var E=!1,I=g.child;I;){if(I===i){E=!0,i=g,p=S;break}if(I===p){E=!0,p=g,i=S;break}I=I.sibling}if(!E){for(I=S.child;I;){if(I===i){E=!0,i=S,p=g;break}if(I===p){E=!0,p=S,i=g;break}I=I.sibling}if(!E)throw Error(s(189))}}if(i.alternate!==p)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function xp(e){return e=f0(e),e!==null?Mp(e):null}function Mp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Mp(e);if(t!==null)return t;e=e.sibling}return null}var Np=n.unstable_scheduleCallback,Op=n.unstable_cancelCallback,g0=n.unstable_shouldYield,m0=n.unstable_requestPaint,ze=n.unstable_now,y0=n.unstable_getCurrentPriorityLevel,iu=n.unstable_ImmediatePriority,jp=n.unstable_UserBlockingPriority,Fa=n.unstable_NormalPriority,S0=n.unstable_LowPriority,Dp=n.unstable_IdlePriority,Ua=null,jt=null;function C0(e){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(Ua,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:R0,P0=Math.log,w0=Math.LN2;function R0(e){return e>>>=0,e===0?32:31-(P0(e)/w0|0)|0}var Wa=64,Ha=4194304;function Zn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Va(e,t){var i=e.pendingLanes;if(i===0)return 0;var p=0,g=e.suspendedLanes,S=e.pingedLanes,E=i&268435455;if(E!==0){var I=E&~g;I!==0?p=Zn(I):(S&=E,S!==0&&(p=Zn(S)))}else E=i&~g,E!==0?p=Zn(E):S!==0&&(p=Zn(S));if(p===0)return 0;if(t!==0&&t!==p&&(t&g)===0&&(g=p&-p,S=t&-t,g>=S||g===16&&(S&4194240)!==0))return t;if((p&4)!==0&&(p|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=p;0<t;)i=31-Et(t),g=1<<i,p|=e[i],t&=~g;return p}function E0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T0(e,t){for(var i=e.suspendedLanes,p=e.pingedLanes,g=e.expirationTimes,S=e.pendingLanes;0<S;){var E=31-Et(S),I=1<<E,_=g[E];_===-1?((I&i)===0||(I&p)!==0)&&(g[E]=E0(I,t)):_<=t&&(e.expiredLanes|=I),S&=~I}}function ou(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zp(){var e=Wa;return Wa<<=1,(Wa&4194240)===0&&(Wa=64),e}function su(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function $n(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=i}function A0(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var p=e.eventTimes;for(e=e.expirationTimes;0<i;){var g=31-Et(i),S=1<<g;t[g]=0,p[g]=-1,e[g]=-1,i&=~S}}function au(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var p=31-Et(i),g=1<<p;g&t|e[p]&t&&(e[p]|=t),i&=~g}}var Te=0;function Lp(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var qp,cu,Bp,Fp,Up,uu=!1,Ka=[],nr=null,ir=null,or=null,ei=new Map,ti=new Map,sr=[],b0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wp(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(t.pointerId)}}function ri(e,t,i,p,g,S){return e===null||e.nativeEvent!==S?(e={blockedOn:t,domEventName:i,eventSystemFlags:p,nativeEvent:S,targetContainers:[g]},t!==null&&(t=gi(t),t!==null&&cu(t)),e):(e.eventSystemFlags|=p,t=e.targetContainers,g!==null&&t.indexOf(g)===-1&&t.push(g),e)}function I0(e,t,i,p,g){switch(t){case"focusin":return nr=ri(nr,e,t,i,p,g),!0;case"dragenter":return ir=ri(ir,e,t,i,p,g),!0;case"mouseover":return or=ri(or,e,t,i,p,g),!0;case"pointerover":var S=g.pointerId;return ei.set(S,ri(ei.get(S)||null,e,t,i,p,g)),!0;case"gotpointercapture":return S=g.pointerId,ti.set(S,ri(ti.get(S)||null,e,t,i,p,g)),!0}return!1}function Hp(e){var t=xr(e.target);if(t!==null){var i=kr(t);if(i!==null){if(t=i.tag,t===13){if(t=_p(i),t!==null){e.blockedOn=t,Up(e.priority,function(){Bp(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ga(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=du(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var p=new i.constructor(i.type,i);Kn=p,i.target.dispatchEvent(p),Kn=null}else return t=gi(i),t!==null&&cu(t),e.blockedOn=i,!1;t.shift()}return!0}function Vp(e,t,i){Ga(e)&&i.delete(t)}function _0(){uu=!1,nr!==null&&Ga(nr)&&(nr=null),ir!==null&&Ga(ir)&&(ir=null),or!==null&&Ga(or)&&(or=null),ei.forEach(Vp),ti.forEach(Vp)}function ni(e,t){e.blockedOn===t&&(e.blockedOn=null,uu||(uu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_0)))}function ii(e){function t(g){return ni(g,e)}if(0<Ka.length){ni(Ka[0],e);for(var i=1;i<Ka.length;i++){var p=Ka[i];p.blockedOn===e&&(p.blockedOn=null)}}for(nr!==null&&ni(nr,e),ir!==null&&ni(ir,e),or!==null&&ni(or,e),ei.forEach(t),ti.forEach(t),i=0;i<sr.length;i++)p=sr[i],p.blockedOn===e&&(p.blockedOn=null);for(;0<sr.length&&(i=sr[0],i.blockedOn===null);)Hp(i),i.blockedOn===null&&sr.shift()}var gn=x.ReactCurrentBatchConfig,Ja=!0;function k0(e,t,i,p){var g=Te,S=gn.transition;gn.transition=null;try{Te=1,lu(e,t,i,p)}finally{Te=g,gn.transition=S}}function x0(e,t,i,p){var g=Te,S=gn.transition;gn.transition=null;try{Te=4,lu(e,t,i,p)}finally{Te=g,gn.transition=S}}function lu(e,t,i,p){if(Ja){var g=du(e,t,i,p);if(g===null)Iu(e,t,p,Qa,i),Wp(e,p);else if(I0(g,e,t,i,p))p.stopPropagation();else if(Wp(e,p),t&4&&-1<b0.indexOf(e)){for(;g!==null;){var S=gi(g);if(S!==null&&qp(S),S=du(e,t,i,p),S===null&&Iu(e,t,p,Qa,i),S===g)break;g=S}g!==null&&p.stopPropagation()}else Iu(e,t,p,null,i)}}var Qa=null;function du(e,t,i,p){if(Qa=null,e=Gn(p),e=xr(e),e!==null)if(t=kr(e),t===null)e=null;else if(i=t.tag,i===13){if(e=_p(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qa=e,null}function Kp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(y0()){case iu:return 1;case jp:return 4;case Fa:case S0:return 16;case Dp:return 536870912;default:return 16}default:return 16}}var ar=null,pu=null,Ya=null;function Gp(){if(Ya)return Ya;var e,t=pu,i=t.length,p,g="value"in ar?ar.value:ar.textContent,S=g.length;for(e=0;e<i&&t[e]===g[e];e++);var E=i-e;for(p=1;p<=E&&t[i-p]===g[S-p];p++);return Ya=g.slice(e,1<p?1-p:void 0)}function Xa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Za(){return!0}function Jp(){return!1}function ut(e){function t(i,p,g,S,E){this._reactName=i,this._targetInst=g,this.type=p,this.nativeEvent=S,this.target=E,this.currentTarget=null;for(var I in e)e.hasOwnProperty(I)&&(i=e[I],this[I]=i?i(S):S[I]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Za:Jp,this.isPropagationStopped=Jp,this}return G(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),t}var mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=ut(mn),oi=G({},mn,{view:0,detail:0}),M0=ut(oi),vu,fu,si,$a=G({},oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&e.type==="mousemove"?(vu=e.screenX-si.screenX,fu=e.screenY-si.screenY):fu=vu=0,si=e),vu)},movementY:function(e){return"movementY"in e?e.movementY:fu}}),Qp=ut($a),N0=G({},$a,{dataTransfer:0}),O0=ut(N0),j0=G({},oi,{relatedTarget:0}),gu=ut(j0),D0=G({},mn,{animationName:0,elapsedTime:0,pseudoElement:0}),z0=ut(D0),L0=G({},mn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),q0=ut(L0),B0=G({},mn,{data:0}),Yp=ut(B0),F0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=W0[e])?!!t[e]:!1}function mu(){return H0}var V0=G({},oi,{key:function(e){if(e.key){var t=F0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?U0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mu,charCode:function(e){return e.type==="keypress"?Xa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),K0=ut(V0),G0=G({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xp=ut(G0),J0=G({},oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mu}),Q0=ut(J0),Y0=G({},mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),X0=ut(Y0),Z0=G({},$a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$0=ut(Z0),eP=[9,13,27,32],yu=o&&"CompositionEvent"in window,ai=null;o&&"documentMode"in document&&(ai=document.documentMode);var tP=o&&"TextEvent"in window&&!ai,Zp=o&&(!yu||ai&&8<ai&&11>=ai),$p=" ",eh=!1;function th(e,t){switch(e){case"keyup":return eP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yn=!1;function rP(e,t){switch(e){case"compositionend":return rh(t);case"keypress":return t.which!==32?null:(eh=!0,$p);case"textInput":return e=t.data,e===$p&&eh?null:e;default:return null}}function nP(e,t){if(yn)return e==="compositionend"||!yu&&th(e,t)?(e=Gp(),Ya=pu=ar=null,yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zp&&t.locale!=="ko"?null:t.data;default:return null}}var iP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iP[e.type]:t==="textarea"}function ih(e,t,i,p){La(p),t=ic(t,"onChange"),0<t.length&&(i=new hu("onChange","change",null,i,p),e.push({event:i,listeners:t}))}var ci=null,ui=null;function oP(e){wh(e,0)}function ec(e){var t=Rn(e);if(ba(t))return e}function sP(e,t){if(e==="change")return t}var oh=!1;if(o){var Su;if(o){var Cu="oninput"in document;if(!Cu){var sh=document.createElement("div");sh.setAttribute("oninput","return;"),Cu=typeof sh.oninput=="function"}Su=Cu}else Su=!1;oh=Su&&(!document.documentMode||9<document.documentMode)}function ah(){ci&&(ci.detachEvent("onpropertychange",ch),ui=ci=null)}function ch(e){if(e.propertyName==="value"&&ec(ui)){var t=[];ih(t,ui,e,Gn(e)),Ip(oP,t)}}function aP(e,t,i){e==="focusin"?(ah(),ci=t,ui=i,ci.attachEvent("onpropertychange",ch)):e==="focusout"&&ah()}function cP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ec(ui)}function uP(e,t){if(e==="click")return ec(t)}function lP(e,t){if(e==="input"||e==="change")return ec(t)}function dP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:dP;function li(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),p=Object.keys(t);if(i.length!==p.length)return!1;for(p=0;p<i.length;p++){var g=i[p];if(!u.call(t,g)||!Tt(e[g],t[g]))return!1}return!0}function uh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lh(e,t){var i=uh(e);e=0;for(var p;i;){if(i.nodeType===3){if(p=e+i.textContent.length,e<=t&&p>=t)return{node:i,offset:t-e};e=p}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=uh(i)}}function dh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ph(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=hn(e.document)}return t}function Pu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pP(e){var t=ph(),i=e.focusedElem,p=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&dh(i.ownerDocument.documentElement,i)){if(p!==null&&Pu(i)){if(t=p.start,e=p.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var g=i.textContent.length,S=Math.min(p.start,g);p=p.end===void 0?S:Math.min(p.end,g),!e.extend&&S>p&&(g=p,p=S,S=g),g=lh(i,S);var E=lh(i,p);g&&E&&(e.rangeCount!==1||e.anchorNode!==g.node||e.anchorOffset!==g.offset||e.focusNode!==E.node||e.focusOffset!==E.offset)&&(t=t.createRange(),t.setStart(g.node,g.offset),e.removeAllRanges(),S>p?(e.addRange(t),e.extend(E.node,E.offset)):(t.setEnd(E.node,E.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hP=o&&"documentMode"in document&&11>=document.documentMode,Sn=null,wu=null,di=null,Ru=!1;function hh(e,t,i){var p=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ru||Sn==null||Sn!==hn(p)||(p=Sn,"selectionStart"in p&&Pu(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),di&&li(di,p)||(di=p,p=ic(wu,"onSelect"),0<p.length&&(t=new hu("onSelect","select",null,t,i),e.push({event:t,listeners:p}),t.target=Sn)))}function tc(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Cn={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionend:tc("Transition","TransitionEnd")},Eu={},vh={};o&&(vh=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);function rc(e){if(Eu[e])return Eu[e];if(!Cn[e])return e;var t=Cn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in vh)return Eu[e]=t[i];return e}var fh=rc("animationend"),gh=rc("animationiteration"),mh=rc("animationstart"),yh=rc("transitionend"),Sh=new Map,Ch="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(e,t){Sh.set(e,t),l(t,[e])}for(var Tu=0;Tu<Ch.length;Tu++){var Au=Ch[Tu],vP=Au.toLowerCase(),fP=Au[0].toUpperCase()+Au.slice(1);cr(vP,"on"+fP)}cr(fh,"onAnimationEnd"),cr(gh,"onAnimationIteration"),cr(mh,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(yh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gP=new Set("cancel close invalid load scroll toggle".split(" ").concat(pi));function Ph(e,t,i){var p=e.type||"unknown-event";e.currentTarget=i,v0(p,t,void 0,e),e.currentTarget=null}function wh(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var p=e[i],g=p.event;p=p.listeners;e:{var S=void 0;if(t)for(var E=p.length-1;0<=E;E--){var I=p[E],_=I.instance,D=I.currentTarget;if(I=I.listener,_!==S&&g.isPropagationStopped())break e;Ph(g,I,D),S=_}else for(E=0;E<p.length;E++){if(I=p[E],_=I.instance,D=I.currentTarget,I=I.listener,_!==S&&g.isPropagationStopped())break e;Ph(g,I,D),S=_}}}if(Ba)throw e=nu,Ba=!1,nu=null,e}function _e(e,t){var i=t[Ou];i===void 0&&(i=t[Ou]=new Set);var p=e+"__bubble";i.has(p)||(Rh(t,e,2,!1),i.add(p))}function bu(e,t,i){var p=0;t&&(p|=4),Rh(i,e,p,t)}var nc="_reactListening"+Math.random().toString(36).slice(2);function hi(e){if(!e[nc]){e[nc]=!0,h.forEach(function(i){i!=="selectionchange"&&(gP.has(i)||bu(i,!1,e),bu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nc]||(t[nc]=!0,bu("selectionchange",!1,t))}}function Rh(e,t,i,p){switch(Kp(t)){case 1:var g=k0;break;case 4:g=x0;break;default:g=lu}i=g.bind(null,t,i,e),g=void 0,!ru||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(g=!0),p?g!==void 0?e.addEventListener(t,i,{capture:!0,passive:g}):e.addEventListener(t,i,!0):g!==void 0?e.addEventListener(t,i,{passive:g}):e.addEventListener(t,i,!1)}function Iu(e,t,i,p,g){var S=p;if((t&1)===0&&(t&2)===0&&p!==null)e:for(;;){if(p===null)return;var E=p.tag;if(E===3||E===4){var I=p.stateNode.containerInfo;if(I===g||I.nodeType===8&&I.parentNode===g)break;if(E===4)for(E=p.return;E!==null;){var _=E.tag;if((_===3||_===4)&&(_=E.stateNode.containerInfo,_===g||_.nodeType===8&&_.parentNode===g))return;E=E.return}for(;I!==null;){if(E=xr(I),E===null)return;if(_=E.tag,_===5||_===6){p=S=E;continue e}I=I.parentNode}}p=p.return}Ip(function(){var D=S,H=Gn(i),V=[];e:{var W=Sh.get(e);if(W!==void 0){var Y=hu,Z=e;switch(e){case"keypress":if(Xa(i)===0)break e;case"keydown":case"keyup":Y=K0;break;case"focusin":Z="focus",Y=gu;break;case"focusout":Z="blur",Y=gu;break;case"beforeblur":case"afterblur":Y=gu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Qp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=O0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Q0;break;case fh:case gh:case mh:Y=z0;break;case yh:Y=X0;break;case"scroll":Y=M0;break;case"wheel":Y=$0;break;case"copy":case"cut":case"paste":Y=q0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Xp}var $=(t&4)!==0,Le=!$&&e==="scroll",O=$?W!==null?W+"Capture":null:W;$=[];for(var k=D,j;k!==null;){j=k;var K=j.stateNode;if(j.tag===5&&K!==null&&(j=K,O!==null&&(K=Qn(k,O),K!=null&&$.push(vi(k,K,j)))),Le)break;k=k.return}0<$.length&&(W=new Y(W,Z,null,i,H),V.push({event:W,listeners:$}))}}if((t&7)===0){e:{if(W=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",W&&i!==Kn&&(Z=i.relatedTarget||i.fromElement)&&(xr(Z)||Z[Ut]))break e;if((Y||W)&&(W=H.window===H?H:(W=H.ownerDocument)?W.defaultView||W.parentWindow:window,Y?(Z=i.relatedTarget||i.toElement,Y=D,Z=Z?xr(Z):null,Z!==null&&(Le=kr(Z),Z!==Le||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(Y=null,Z=D),Y!==Z)){if($=Qp,K="onMouseLeave",O="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&($=Xp,K="onPointerLeave",O="onPointerEnter",k="pointer"),Le=Y==null?W:Rn(Y),j=Z==null?W:Rn(Z),W=new $(K,k+"leave",Y,i,H),W.target=Le,W.relatedTarget=j,K=null,xr(H)===D&&($=new $(O,k+"enter",Z,i,H),$.target=j,$.relatedTarget=Le,K=$),Le=K,Y&&Z)t:{for($=Y,O=Z,k=0,j=$;j;j=Pn(j))k++;for(j=0,K=O;K;K=Pn(K))j++;for(;0<k-j;)$=Pn($),k--;for(;0<j-k;)O=Pn(O),j--;for(;k--;){if($===O||O!==null&&$===O.alternate)break t;$=Pn($),O=Pn(O)}$=null}else $=null;Y!==null&&Eh(V,W,Y,$,!1),Z!==null&&Le!==null&&Eh(V,Le,Z,$,!0)}}e:{if(W=D?Rn(D):window,Y=W.nodeName&&W.nodeName.toLowerCase(),Y==="select"||Y==="input"&&W.type==="file")var te=sP;else if(nh(W))if(oh)te=lP;else{te=cP;var ie=aP}else(Y=W.nodeName)&&Y.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(te=uP);if(te&&(te=te(e,D))){ih(V,te,i,H);break e}ie&&ie(e,W,D),e==="focusout"&&(ie=W._wrapperState)&&ie.controlled&&W.type==="number"&&Fn(W,"number",W.value)}switch(ie=D?Rn(D):window,e){case"focusin":(nh(ie)||ie.contentEditable==="true")&&(Sn=ie,wu=D,di=null);break;case"focusout":di=wu=Sn=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,hh(V,i,H);break;case"selectionchange":if(hP)break;case"keydown":case"keyup":hh(V,i,H)}var oe;if(yu)e:{switch(e){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else yn?th(e,i)&&(ce="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ce="onCompositionStart");ce&&(Zp&&i.locale!=="ko"&&(yn||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&yn&&(oe=Gp()):(ar=H,pu="value"in ar?ar.value:ar.textContent,yn=!0)),ie=ic(D,ce),0<ie.length&&(ce=new Yp(ce,e,null,i,H),V.push({event:ce,listeners:ie}),oe?ce.data=oe:(oe=rh(i),oe!==null&&(ce.data=oe)))),(oe=tP?rP(e,i):nP(e,i))&&(D=ic(D,"onBeforeInput"),0<D.length&&(H=new Yp("onBeforeInput","beforeinput",null,i,H),V.push({event:H,listeners:D}),H.data=oe))}wh(V,t)})}function vi(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ic(e,t){for(var i=t+"Capture",p=[];e!==null;){var g=e,S=g.stateNode;g.tag===5&&S!==null&&(g=S,S=Qn(e,i),S!=null&&p.unshift(vi(e,S,g)),S=Qn(e,t),S!=null&&p.push(vi(e,S,g))),e=e.return}return p}function Pn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Eh(e,t,i,p,g){for(var S=t._reactName,E=[];i!==null&&i!==p;){var I=i,_=I.alternate,D=I.stateNode;if(_!==null&&_===p)break;I.tag===5&&D!==null&&(I=D,g?(_=Qn(i,S),_!=null&&E.unshift(vi(i,_,I))):g||(_=Qn(i,S),_!=null&&E.push(vi(i,_,I)))),i=i.return}E.length!==0&&e.push({event:t,listeners:E})}var mP=/\r\n?/g,yP=/\u0000|\uFFFD/g;function Th(e){return(typeof e=="string"?e:""+e).replace(mP,`
`).replace(yP,"")}function oc(e,t,i){if(t=Th(t),Th(e)!==t&&i)throw Error(s(425))}function sc(){}var _u=null,ku=null;function xu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,SP=typeof clearTimeout=="function"?clearTimeout:void 0,Ah=typeof Promise=="function"?Promise:void 0,CP=typeof queueMicrotask=="function"?queueMicrotask:typeof Ah<"u"?function(e){return Ah.resolve(null).then(e).catch(PP)}:Mu;function PP(e){setTimeout(function(){throw e})}function Nu(e,t){var i=t,p=0;do{var g=i.nextSibling;if(e.removeChild(i),g&&g.nodeType===8)if(i=g.data,i==="/$"){if(p===0){e.removeChild(g),ii(t);return}p--}else i!=="$"&&i!=="$?"&&i!=="$!"||p++;i=g}while(i);ii(t)}function ur(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var wn=Math.random().toString(36).slice(2),Dt="__reactFiber$"+wn,fi="__reactProps$"+wn,Ut="__reactContainer$"+wn,Ou="__reactEvents$"+wn,wP="__reactListeners$"+wn,RP="__reactHandles$"+wn;function xr(e){var t=e[Dt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ut]||i[Dt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=bh(e);e!==null;){if(i=e[Dt])return i;e=bh(e)}return t}e=i,i=e.parentNode}return null}function gi(e){return e=e[Dt]||e[Ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function ac(e){return e[fi]||null}var ju=[],En=-1;function lr(e){return{current:e}}function ke(e){0>En||(e.current=ju[En],ju[En]=null,En--)}function Ie(e,t){En++,ju[En]=e.current,e.current=t}var dr={},Je=lr(dr),rt=lr(!1),Mr=dr;function Tn(e,t){var i=e.type.contextTypes;if(!i)return dr;var p=e.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===t)return p.__reactInternalMemoizedMaskedChildContext;var g={},S;for(S in i)g[S]=t[S];return p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=g),g}function nt(e){return e=e.childContextTypes,e!=null}function cc(){ke(rt),ke(Je)}function Ih(e,t,i){if(Je.current!==dr)throw Error(s(168));Ie(Je,t),Ie(rt,i)}function _h(e,t,i){var p=e.stateNode;if(t=t.childContextTypes,typeof p.getChildContext!="function")return i;p=p.getChildContext();for(var g in p)if(!(g in t))throw Error(s(108,Ae(e)||"Unknown",g));return G({},i,p)}function uc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,Mr=Je.current,Ie(Je,e),Ie(rt,rt.current),!0}function kh(e,t,i){var p=e.stateNode;if(!p)throw Error(s(169));i?(e=_h(e,t,Mr),p.__reactInternalMemoizedMergedChildContext=e,ke(rt),ke(Je),Ie(Je,e)):ke(rt),Ie(rt,i)}var Wt=null,lc=!1,Du=!1;function xh(e){Wt===null?Wt=[e]:Wt.push(e)}function EP(e){lc=!0,xh(e)}function pr(){if(!Du&&Wt!==null){Du=!0;var e=0,t=Te;try{var i=Wt;for(Te=1;e<i.length;e++){var p=i[e];do p=p(!0);while(p!==null)}Wt=null,lc=!1}catch(g){throw Wt!==null&&(Wt=Wt.slice(e+1)),Np(iu,pr),g}finally{Te=t,Du=!1}}return null}var An=[],bn=0,dc=null,pc=0,mt=[],yt=0,Nr=null,Ht=1,Vt="";function Or(e,t){An[bn++]=pc,An[bn++]=dc,dc=e,pc=t}function Mh(e,t,i){mt[yt++]=Ht,mt[yt++]=Vt,mt[yt++]=Nr,Nr=e;var p=Ht;e=Vt;var g=32-Et(p)-1;p&=~(1<<g),i+=1;var S=32-Et(t)+g;if(30<S){var E=g-g%5;S=(p&(1<<E)-1).toString(32),p>>=E,g-=E,Ht=1<<32-Et(t)+g|i<<g|p,Vt=S+e}else Ht=1<<S|i<<g|p,Vt=e}function zu(e){e.return!==null&&(Or(e,1),Mh(e,1,0))}function Lu(e){for(;e===dc;)dc=An[--bn],An[bn]=null,pc=An[--bn],An[bn]=null;for(;e===Nr;)Nr=mt[--yt],mt[yt]=null,Vt=mt[--yt],mt[yt]=null,Ht=mt[--yt],mt[yt]=null}var lt=null,dt=null,xe=!1,At=null;function Nh(e,t){var i=wt(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Oh(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,lt=e,dt=ur(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,lt=e,dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Nr!==null?{id:Ht,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=wt(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,lt=e,dt=null,!0):!1;default:return!1}}function qu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Bu(e){if(xe){var t=dt;if(t){var i=t;if(!Oh(e,t)){if(qu(e))throw Error(s(418));t=ur(i.nextSibling);var p=lt;t&&Oh(e,t)?Nh(p,i):(e.flags=e.flags&-4097|2,xe=!1,lt=e)}}else{if(qu(e))throw Error(s(418));e.flags=e.flags&-4097|2,xe=!1,lt=e}}}function jh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lt=e}function hc(e){if(e!==lt)return!1;if(!xe)return jh(e),xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xu(e.type,e.memoizedProps)),t&&(t=dt)){if(qu(e))throw Dh(),Error(s(418));for(;t;)Nh(e,t),t=ur(t.nextSibling)}if(jh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){dt=ur(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}dt=null}}else dt=lt?ur(e.stateNode.nextSibling):null;return!0}function Dh(){for(var e=dt;e;)e=ur(e.nextSibling)}function In(){dt=lt=null,xe=!1}function Fu(e){At===null?At=[e]:At.push(e)}var TP=x.ReactCurrentBatchConfig;function mi(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(s(309));var p=i.stateNode}if(!p)throw Error(s(147,e));var g=p,S=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===S?t.ref:(t=function(E){var I=g.refs;E===null?delete I[S]:I[S]=E},t._stringRef=S,t)}if(typeof e!="string")throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function vc(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zh(e){var t=e._init;return t(e._payload)}function Lh(e){function t(O,k){if(e){var j=O.deletions;j===null?(O.deletions=[k],O.flags|=16):j.push(k)}}function i(O,k){if(!e)return null;for(;k!==null;)t(O,k),k=k.sibling;return null}function p(O,k){for(O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function g(O,k){return O=Cr(O,k),O.index=0,O.sibling=null,O}function S(O,k,j){return O.index=j,e?(j=O.alternate,j!==null?(j=j.index,j<k?(O.flags|=2,k):j):(O.flags|=2,k)):(O.flags|=1048576,k)}function E(O){return e&&O.alternate===null&&(O.flags|=2),O}function I(O,k,j,K){return k===null||k.tag!==6?(k=Ml(j,O.mode,K),k.return=O,k):(k=g(k,j),k.return=O,k)}function _(O,k,j,K){var te=j.type;return te===F?H(O,k,j.props.children,K,j.key):k!==null&&(k.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Se&&zh(te)===k.type)?(K=g(k,j.props),K.ref=mi(O,k,j),K.return=O,K):(K=Lc(j.type,j.key,j.props,null,O.mode,K),K.ref=mi(O,k,j),K.return=O,K)}function D(O,k,j,K){return k===null||k.tag!==4||k.stateNode.containerInfo!==j.containerInfo||k.stateNode.implementation!==j.implementation?(k=Nl(j,O.mode,K),k.return=O,k):(k=g(k,j.children||[]),k.return=O,k)}function H(O,k,j,K,te){return k===null||k.tag!==7?(k=Ur(j,O.mode,K,te),k.return=O,k):(k=g(k,j),k.return=O,k)}function V(O,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Ml(""+k,O.mode,j),k.return=O,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case z:return j=Lc(k.type,k.key,k.props,null,O.mode,j),j.ref=mi(O,null,k),j.return=O,j;case N:return k=Nl(k,O.mode,j),k.return=O,k;case Se:var K=k._init;return V(O,K(k._payload),j)}if(br(k)||Q(k))return k=Ur(k,O.mode,j,null),k.return=O,k;vc(O,k)}return null}function W(O,k,j,K){var te=k!==null?k.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return te!==null?null:I(O,k,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case z:return j.key===te?_(O,k,j,K):null;case N:return j.key===te?D(O,k,j,K):null;case Se:return te=j._init,W(O,k,te(j._payload),K)}if(br(j)||Q(j))return te!==null?null:H(O,k,j,K,null);vc(O,j)}return null}function Y(O,k,j,K,te){if(typeof K=="string"&&K!==""||typeof K=="number")return O=O.get(j)||null,I(k,O,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case z:return O=O.get(K.key===null?j:K.key)||null,_(k,O,K,te);case N:return O=O.get(K.key===null?j:K.key)||null,D(k,O,K,te);case Se:var ie=K._init;return Y(O,k,j,ie(K._payload),te)}if(br(K)||Q(K))return O=O.get(j)||null,H(k,O,K,te,null);vc(k,K)}return null}function Z(O,k,j,K){for(var te=null,ie=null,oe=k,ce=k=0,Ve=null;oe!==null&&ce<j.length;ce++){oe.index>ce?(Ve=oe,oe=null):Ve=oe.sibling;var we=W(O,oe,j[ce],K);if(we===null){oe===null&&(oe=Ve);break}e&&oe&&we.alternate===null&&t(O,oe),k=S(we,k,ce),ie===null?te=we:ie.sibling=we,ie=we,oe=Ve}if(ce===j.length)return i(O,oe),xe&&Or(O,ce),te;if(oe===null){for(;ce<j.length;ce++)oe=V(O,j[ce],K),oe!==null&&(k=S(oe,k,ce),ie===null?te=oe:ie.sibling=oe,ie=oe);return xe&&Or(O,ce),te}for(oe=p(O,oe);ce<j.length;ce++)Ve=Y(oe,O,ce,j[ce],K),Ve!==null&&(e&&Ve.alternate!==null&&oe.delete(Ve.key===null?ce:Ve.key),k=S(Ve,k,ce),ie===null?te=Ve:ie.sibling=Ve,ie=Ve);return e&&oe.forEach(function(Pr){return t(O,Pr)}),xe&&Or(O,ce),te}function $(O,k,j,K){var te=Q(j);if(typeof te!="function")throw Error(s(150));if(j=te.call(j),j==null)throw Error(s(151));for(var ie=te=null,oe=k,ce=k=0,Ve=null,we=j.next();oe!==null&&!we.done;ce++,we=j.next()){oe.index>ce?(Ve=oe,oe=null):Ve=oe.sibling;var Pr=W(O,oe,we.value,K);if(Pr===null){oe===null&&(oe=Ve);break}e&&oe&&Pr.alternate===null&&t(O,oe),k=S(Pr,k,ce),ie===null?te=Pr:ie.sibling=Pr,ie=Pr,oe=Ve}if(we.done)return i(O,oe),xe&&Or(O,ce),te;if(oe===null){for(;!we.done;ce++,we=j.next())we=V(O,we.value,K),we!==null&&(k=S(we,k,ce),ie===null?te=we:ie.sibling=we,ie=we);return xe&&Or(O,ce),te}for(oe=p(O,oe);!we.done;ce++,we=j.next())we=Y(oe,O,ce,we.value,K),we!==null&&(e&&we.alternate!==null&&oe.delete(we.key===null?ce:we.key),k=S(we,k,ce),ie===null?te=we:ie.sibling=we,ie=we);return e&&oe.forEach(function(iw){return t(O,iw)}),xe&&Or(O,ce),te}function Le(O,k,j,K){if(typeof j=="object"&&j!==null&&j.type===F&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case z:e:{for(var te=j.key,ie=k;ie!==null;){if(ie.key===te){if(te=j.type,te===F){if(ie.tag===7){i(O,ie.sibling),k=g(ie,j.props.children),k.return=O,O=k;break e}}else if(ie.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Se&&zh(te)===ie.type){i(O,ie.sibling),k=g(ie,j.props),k.ref=mi(O,ie,j),k.return=O,O=k;break e}i(O,ie);break}else t(O,ie);ie=ie.sibling}j.type===F?(k=Ur(j.props.children,O.mode,K,j.key),k.return=O,O=k):(K=Lc(j.type,j.key,j.props,null,O.mode,K),K.ref=mi(O,k,j),K.return=O,O=K)}return E(O);case N:e:{for(ie=j.key;k!==null;){if(k.key===ie)if(k.tag===4&&k.stateNode.containerInfo===j.containerInfo&&k.stateNode.implementation===j.implementation){i(O,k.sibling),k=g(k,j.children||[]),k.return=O,O=k;break e}else{i(O,k);break}else t(O,k);k=k.sibling}k=Nl(j,O.mode,K),k.return=O,O=k}return E(O);case Se:return ie=j._init,Le(O,k,ie(j._payload),K)}if(br(j))return Z(O,k,j,K);if(Q(j))return $(O,k,j,K);vc(O,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,k!==null&&k.tag===6?(i(O,k.sibling),k=g(k,j),k.return=O,O=k):(i(O,k),k=Ml(j,O.mode,K),k.return=O,O=k),E(O)):i(O,k)}return Le}var _n=Lh(!0),qh=Lh(!1),fc=lr(null),gc=null,kn=null,Uu=null;function Wu(){Uu=kn=gc=null}function Hu(e){var t=fc.current;ke(fc),e._currentValue=t}function Vu(e,t,i){for(;e!==null;){var p=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,p!==null&&(p.childLanes|=t)):p!==null&&(p.childLanes&t)!==t&&(p.childLanes|=t),e===i)break;e=e.return}}function xn(e,t){gc=e,Uu=kn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(it=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(Uu!==e)if(e={context:e,memoizedValue:t,next:null},kn===null){if(gc===null)throw Error(s(308));kn=e,gc.dependencies={lanes:0,firstContext:e}}else kn=kn.next=e;return t}var jr=null;function Ku(e){jr===null?jr=[e]:jr.push(e)}function Bh(e,t,i,p){var g=t.interleaved;return g===null?(i.next=i,Ku(t)):(i.next=g.next,g.next=i),t.interleaved=i,Kt(e,p)}function Kt(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var hr=!1;function Gu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vr(e,t,i){var p=e.updateQueue;if(p===null)return null;if(p=p.shared,(Pe&2)!==0){var g=p.pending;return g===null?t.next=t:(t.next=g.next,g.next=t),p.pending=t,Kt(e,i)}return g=p.interleaved,g===null?(t.next=t,Ku(p)):(t.next=g.next,g.next=t),p.interleaved=t,Kt(e,i)}function mc(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var p=t.lanes;p&=e.pendingLanes,i|=p,t.lanes=i,au(e,i)}}function Uh(e,t){var i=e.updateQueue,p=e.alternate;if(p!==null&&(p=p.updateQueue,i===p)){var g=null,S=null;if(i=i.firstBaseUpdate,i!==null){do{var E={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};S===null?g=S=E:S=S.next=E,i=i.next}while(i!==null);S===null?g=S=t:S=S.next=t}else g=S=t;i={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:S,shared:p.shared,effects:p.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function yc(e,t,i,p){var g=e.updateQueue;hr=!1;var S=g.firstBaseUpdate,E=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var _=I,D=_.next;_.next=null,E===null?S=D:E.next=D,E=_;var H=e.alternate;H!==null&&(H=H.updateQueue,I=H.lastBaseUpdate,I!==E&&(I===null?H.firstBaseUpdate=D:I.next=D,H.lastBaseUpdate=_))}if(S!==null){var V=g.baseState;E=0,H=D=_=null,I=S;do{var W=I.lane,Y=I.eventTime;if((p&W)===W){H!==null&&(H=H.next={eventTime:Y,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var Z=e,$=I;switch(W=t,Y=i,$.tag){case 1:if(Z=$.payload,typeof Z=="function"){V=Z.call(Y,V,W);break e}V=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=$.payload,W=typeof Z=="function"?Z.call(Y,V,W):Z,W==null)break e;V=G({},V,W);break e;case 2:hr=!0}}I.callback!==null&&I.lane!==0&&(e.flags|=64,W=g.effects,W===null?g.effects=[I]:W.push(I))}else Y={eventTime:Y,lane:W,tag:I.tag,payload:I.payload,callback:I.callback,next:null},H===null?(D=H=Y,_=V):H=H.next=Y,E|=W;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;W=I,I=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);if(H===null&&(_=V),g.baseState=_,g.firstBaseUpdate=D,g.lastBaseUpdate=H,t=g.shared.interleaved,t!==null){g=t;do E|=g.lane,g=g.next;while(g!==t)}else S===null&&(g.shared.lanes=0);Lr|=E,e.lanes=E,e.memoizedState=V}}function Wh(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var p=e[t],g=p.callback;if(g!==null){if(p.callback=null,p=i,typeof g!="function")throw Error(s(191,g));g.call(p)}}}var yi={},zt=lr(yi),Si=lr(yi),Ci=lr(yi);function Dr(e){if(e===yi)throw Error(s(174));return e}function Ju(e,t){switch(Ie(Ci,t),Ie(Si,e),Ie(zt,yi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wn(t,e)}ke(zt),Ie(zt,t)}function Mn(){ke(zt),ke(Si),ke(Ci)}function Hh(e){Dr(Ci.current);var t=Dr(zt.current),i=Wn(t,e.type);t!==i&&(Ie(Si,e),Ie(zt,i))}function Qu(e){Si.current===e&&(ke(zt),ke(Si))}var Me=lr(0);function Sc(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yu=[];function Xu(){for(var e=0;e<Yu.length;e++)Yu[e]._workInProgressVersionPrimary=null;Yu.length=0}var Cc=x.ReactCurrentDispatcher,Zu=x.ReactCurrentBatchConfig,zr=0,Ne=null,Be=null,We=null,Pc=!1,Pi=!1,wi=0,AP=0;function Qe(){throw Error(s(321))}function $u(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Tt(e[i],t[i]))return!1;return!0}function el(e,t,i,p,g,S){if(zr=S,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cc.current=e===null||e.memoizedState===null?kP:xP,e=i(p,g),Pi){S=0;do{if(Pi=!1,wi=0,25<=S)throw Error(s(301));S+=1,We=Be=null,t.updateQueue=null,Cc.current=MP,e=i(p,g)}while(Pi)}if(Cc.current=Ec,t=Be!==null&&Be.next!==null,zr=0,We=Be=Ne=null,Pc=!1,t)throw Error(s(300));return e}function tl(){var e=wi!==0;return wi=0,e}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ne.memoizedState=We=e:We=We.next=e,We}function Ct(){if(Be===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=We===null?Ne.memoizedState:We.next;if(t!==null)We=t,Be=e;else{if(e===null)throw Error(s(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},We===null?Ne.memoizedState=We=e:We=We.next=e}return We}function Ri(e,t){return typeof t=="function"?t(e):t}function rl(e){var t=Ct(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var p=Be,g=p.baseQueue,S=i.pending;if(S!==null){if(g!==null){var E=g.next;g.next=S.next,S.next=E}p.baseQueue=g=S,i.pending=null}if(g!==null){S=g.next,p=p.baseState;var I=E=null,_=null,D=S;do{var H=D.lane;if((zr&H)===H)_!==null&&(_=_.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),p=D.hasEagerState?D.eagerState:e(p,D.action);else{var V={lane:H,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};_===null?(I=_=V,E=p):_=_.next=V,Ne.lanes|=H,Lr|=H}D=D.next}while(D!==null&&D!==S);_===null?E=p:_.next=I,Tt(p,t.memoizedState)||(it=!0),t.memoizedState=p,t.baseState=E,t.baseQueue=_,i.lastRenderedState=p}if(e=i.interleaved,e!==null){g=e;do S=g.lane,Ne.lanes|=S,Lr|=S,g=g.next;while(g!==e)}else g===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function nl(e){var t=Ct(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var p=i.dispatch,g=i.pending,S=t.memoizedState;if(g!==null){i.pending=null;var E=g=g.next;do S=e(S,E.action),E=E.next;while(E!==g);Tt(S,t.memoizedState)||(it=!0),t.memoizedState=S,t.baseQueue===null&&(t.baseState=S),i.lastRenderedState=S}return[S,p]}function Vh(){}function Kh(e,t){var i=Ne,p=Ct(),g=t(),S=!Tt(p.memoizedState,g);if(S&&(p.memoizedState=g,it=!0),p=p.queue,il(Qh.bind(null,i,p,e),[e]),p.getSnapshot!==t||S||We!==null&&We.memoizedState.tag&1){if(i.flags|=2048,Ei(9,Jh.bind(null,i,p,g,t),void 0,null),He===null)throw Error(s(349));(zr&30)!==0||Gh(i,t,g)}return g}function Gh(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Jh(e,t,i,p){t.value=i,t.getSnapshot=p,Yh(t)&&Xh(e)}function Qh(e,t,i){return i(function(){Yh(t)&&Xh(e)})}function Yh(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Tt(e,i)}catch{return!0}}function Xh(e){var t=Kt(e,1);t!==null&&kt(t,e,1,-1)}function Zh(e){var t=Lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:e},t.queue=e,e=e.dispatch=_P.bind(null,Ne,e),[t.memoizedState,e]}function Ei(e,t,i,p){return e={tag:e,create:t,destroy:i,deps:p,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(p=i.next,i.next=e,e.next=p,t.lastEffect=e)),e}function $h(){return Ct().memoizedState}function wc(e,t,i,p){var g=Lt();Ne.flags|=e,g.memoizedState=Ei(1|t,i,void 0,p===void 0?null:p)}function Rc(e,t,i,p){var g=Ct();p=p===void 0?null:p;var S=void 0;if(Be!==null){var E=Be.memoizedState;if(S=E.destroy,p!==null&&$u(p,E.deps)){g.memoizedState=Ei(t,i,S,p);return}}Ne.flags|=e,g.memoizedState=Ei(1|t,i,S,p)}function ev(e,t){return wc(8390656,8,e,t)}function il(e,t){return Rc(2048,8,e,t)}function tv(e,t){return Rc(4,2,e,t)}function rv(e,t){return Rc(4,4,e,t)}function nv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iv(e,t,i){return i=i!=null?i.concat([e]):null,Rc(4,4,nv.bind(null,t,e),i)}function ol(){}function ov(e,t){var i=Ct();t=t===void 0?null:t;var p=i.memoizedState;return p!==null&&t!==null&&$u(t,p[1])?p[0]:(i.memoizedState=[e,t],e)}function sv(e,t){var i=Ct();t=t===void 0?null:t;var p=i.memoizedState;return p!==null&&t!==null&&$u(t,p[1])?p[0]:(e=e(),i.memoizedState=[e,t],e)}function av(e,t,i){return(zr&21)===0?(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=i):(Tt(i,t)||(i=zp(),Ne.lanes|=i,Lr|=i,e.baseState=!0),t)}function bP(e,t){var i=Te;Te=i!==0&&4>i?i:4,e(!0);var p=Zu.transition;Zu.transition={};try{e(!1),t()}finally{Te=i,Zu.transition=p}}function cv(){return Ct().memoizedState}function IP(e,t,i){var p=yr(e);if(i={lane:p,action:i,hasEagerState:!1,eagerState:null,next:null},uv(e))lv(t,i);else if(i=Bh(e,t,i,p),i!==null){var g=et();kt(i,e,p,g),dv(i,t,p)}}function _P(e,t,i){var p=yr(e),g={lane:p,action:i,hasEagerState:!1,eagerState:null,next:null};if(uv(e))lv(t,g);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=t.lastRenderedReducer,S!==null))try{var E=t.lastRenderedState,I=S(E,i);if(g.hasEagerState=!0,g.eagerState=I,Tt(I,E)){var _=t.interleaved;_===null?(g.next=g,Ku(t)):(g.next=_.next,_.next=g),t.interleaved=g;return}}catch{}finally{}i=Bh(e,t,g,p),i!==null&&(g=et(),kt(i,e,p,g),dv(i,t,p))}}function uv(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function lv(e,t){Pi=Pc=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function dv(e,t,i){if((i&4194240)!==0){var p=t.lanes;p&=e.pendingLanes,i|=p,t.lanes=i,au(e,i)}}var Ec={readContext:St,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},kP={readContext:St,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:ev,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,wc(4194308,4,nv.bind(null,t,e),i)},useLayoutEffect:function(e,t){return wc(4194308,4,e,t)},useInsertionEffect:function(e,t){return wc(4,2,e,t)},useMemo:function(e,t){var i=Lt();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var p=Lt();return t=i!==void 0?i(t):t,p.memoizedState=p.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},p.queue=e,e=e.dispatch=IP.bind(null,Ne,e),[p.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:Zh,useDebugValue:ol,useDeferredValue:function(e){return Lt().memoizedState=e},useTransition:function(){var e=Zh(!1),t=e[0];return e=bP.bind(null,e[1]),Lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var p=Ne,g=Lt();if(xe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),He===null)throw Error(s(349));(zr&30)!==0||Gh(p,t,i)}g.memoizedState=i;var S={value:i,getSnapshot:t};return g.queue=S,ev(Qh.bind(null,p,S,e),[e]),p.flags|=2048,Ei(9,Jh.bind(null,p,S,i,t),void 0,null),i},useId:function(){var e=Lt(),t=He.identifierPrefix;if(xe){var i=Vt,p=Ht;i=(p&~(1<<32-Et(p)-1)).toString(32)+i,t=":"+t+"R"+i,i=wi++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=AP++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xP={readContext:St,useCallback:ov,useContext:St,useEffect:il,useImperativeHandle:iv,useInsertionEffect:tv,useLayoutEffect:rv,useMemo:sv,useReducer:rl,useRef:$h,useState:function(){return rl(Ri)},useDebugValue:ol,useDeferredValue:function(e){var t=Ct();return av(t,Be.memoizedState,e)},useTransition:function(){var e=rl(Ri)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Vh,useSyncExternalStore:Kh,useId:cv,unstable_isNewReconciler:!1},MP={readContext:St,useCallback:ov,useContext:St,useEffect:il,useImperativeHandle:iv,useInsertionEffect:tv,useLayoutEffect:rv,useMemo:sv,useReducer:nl,useRef:$h,useState:function(){return nl(Ri)},useDebugValue:ol,useDeferredValue:function(e){var t=Ct();return Be===null?t.memoizedState=e:av(t,Be.memoizedState,e)},useTransition:function(){var e=nl(Ri)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Vh,useSyncExternalStore:Kh,useId:cv,unstable_isNewReconciler:!1};function bt(e,t){if(e&&e.defaultProps){t=G({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function sl(e,t,i,p){t=e.memoizedState,i=i(p,t),i=i==null?t:G({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Tc={isMounted:function(e){return(e=e._reactInternals)?kr(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var p=et(),g=yr(e),S=Gt(p,g);S.payload=t,i!=null&&(S.callback=i),t=vr(e,S,g),t!==null&&(kt(t,e,g,p),mc(t,e,g))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var p=et(),g=yr(e),S=Gt(p,g);S.tag=1,S.payload=t,i!=null&&(S.callback=i),t=vr(e,S,g),t!==null&&(kt(t,e,g,p),mc(t,e,g))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=et(),p=yr(e),g=Gt(i,p);g.tag=2,t!=null&&(g.callback=t),t=vr(e,g,p),t!==null&&(kt(t,e,p,i),mc(t,e,p))}};function pv(e,t,i,p,g,S,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(p,S,E):t.prototype&&t.prototype.isPureReactComponent?!li(i,p)||!li(g,S):!0}function hv(e,t,i){var p=!1,g=dr,S=t.contextType;return typeof S=="object"&&S!==null?S=St(S):(g=nt(t)?Mr:Je.current,p=t.contextTypes,S=(p=p!=null)?Tn(e,g):dr),t=new t(i,S),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tc,e.stateNode=t,t._reactInternals=e,p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=g,e.__reactInternalMemoizedMaskedChildContext=S),t}function vv(e,t,i,p){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,p),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,p),t.state!==e&&Tc.enqueueReplaceState(t,t.state,null)}function al(e,t,i,p){var g=e.stateNode;g.props=i,g.state=e.memoizedState,g.refs={},Gu(e);var S=t.contextType;typeof S=="object"&&S!==null?g.context=St(S):(S=nt(t)?Mr:Je.current,g.context=Tn(e,S)),g.state=e.memoizedState,S=t.getDerivedStateFromProps,typeof S=="function"&&(sl(e,t,S,i),g.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(t=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),t!==g.state&&Tc.enqueueReplaceState(g,g.state,null),yc(e,i,g,p),g.state=e.memoizedState),typeof g.componentDidMount=="function"&&(e.flags|=4194308)}function Nn(e,t){try{var i="",p=t;do i+=ye(p),p=p.return;while(p);var g=i}catch(S){g=`
Error generating stack: `+S.message+`
`+S.stack}return{value:e,source:t,stack:g,digest:null}}function cl(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function ul(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var NP=typeof WeakMap=="function"?WeakMap:Map;function fv(e,t,i){i=Gt(-1,i),i.tag=3,i.payload={element:null};var p=t.value;return i.callback=function(){Mc||(Mc=!0,El=p),ul(e,t)},i}function gv(e,t,i){i=Gt(-1,i),i.tag=3;var p=e.type.getDerivedStateFromError;if(typeof p=="function"){var g=t.value;i.payload=function(){return p(g)},i.callback=function(){ul(e,t)}}var S=e.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){ul(e,t),typeof p!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var E=t.stack;this.componentDidCatch(t.value,{componentStack:E!==null?E:""})}),i}function mv(e,t,i){var p=e.pingCache;if(p===null){p=e.pingCache=new NP;var g=new Set;p.set(t,g)}else g=p.get(t),g===void 0&&(g=new Set,p.set(t,g));g.has(i)||(g.add(i),e=GP.bind(null,e,t,i),t.then(e,e))}function yv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sv(e,t,i,p,g){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Gt(-1,1),t.tag=2,vr(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=g,e)}var OP=x.ReactCurrentOwner,it=!1;function $e(e,t,i,p){t.child=e===null?qh(t,null,i,p):_n(t,e.child,i,p)}function Cv(e,t,i,p,g){i=i.render;var S=t.ref;return xn(t,g),p=el(e,t,i,p,S,g),i=tl(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~g,Jt(e,t,g)):(xe&&i&&zu(t),t.flags|=1,$e(e,t,p,g),t.child)}function Pv(e,t,i,p,g){if(e===null){var S=i.type;return typeof S=="function"&&!xl(S)&&S.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=S,wv(e,t,S,p,g)):(e=Lc(i.type,null,p,t,t.mode,g),e.ref=t.ref,e.return=t,t.child=e)}if(S=e.child,(e.lanes&g)===0){var E=S.memoizedProps;if(i=i.compare,i=i!==null?i:li,i(E,p)&&e.ref===t.ref)return Jt(e,t,g)}return t.flags|=1,e=Cr(S,p),e.ref=t.ref,e.return=t,t.child=e}function wv(e,t,i,p,g){if(e!==null){var S=e.memoizedProps;if(li(S,p)&&e.ref===t.ref)if(it=!1,t.pendingProps=p=S,(e.lanes&g)!==0)(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,Jt(e,t,g)}return ll(e,t,i,p,g)}function Rv(e,t,i){var p=t.pendingProps,g=p.children,S=e!==null?e.memoizedState:null;if(p.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(jn,pt),pt|=i;else{if((i&1073741824)===0)return e=S!==null?S.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(jn,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=S!==null?S.baseLanes:i,Ie(jn,pt),pt|=p}else S!==null?(p=S.baseLanes|i,t.memoizedState=null):p=i,Ie(jn,pt),pt|=p;return $e(e,t,g,i),t.child}function Ev(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function ll(e,t,i,p,g){var S=nt(i)?Mr:Je.current;return S=Tn(t,S),xn(t,g),i=el(e,t,i,p,S,g),p=tl(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~g,Jt(e,t,g)):(xe&&p&&zu(t),t.flags|=1,$e(e,t,i,g),t.child)}function Tv(e,t,i,p,g){if(nt(i)){var S=!0;uc(t)}else S=!1;if(xn(t,g),t.stateNode===null)bc(e,t),hv(t,i,p),al(t,i,p,g),p=!0;else if(e===null){var E=t.stateNode,I=t.memoizedProps;E.props=I;var _=E.context,D=i.contextType;typeof D=="object"&&D!==null?D=St(D):(D=nt(i)?Mr:Je.current,D=Tn(t,D));var H=i.getDerivedStateFromProps,V=typeof H=="function"||typeof E.getSnapshotBeforeUpdate=="function";V||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I!==p||_!==D)&&vv(t,E,p,D),hr=!1;var W=t.memoizedState;E.state=W,yc(t,p,E,g),_=t.memoizedState,I!==p||W!==_||rt.current||hr?(typeof H=="function"&&(sl(t,i,H,p),_=t.memoizedState),(I=hr||pv(t,i,I,p,W,_,D))?(V||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(t.flags|=4194308)):(typeof E.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=p,t.memoizedState=_),E.props=p,E.state=_,E.context=D,p=I):(typeof E.componentDidMount=="function"&&(t.flags|=4194308),p=!1)}else{E=t.stateNode,Fh(e,t),I=t.memoizedProps,D=t.type===t.elementType?I:bt(t.type,I),E.props=D,V=t.pendingProps,W=E.context,_=i.contextType,typeof _=="object"&&_!==null?_=St(_):(_=nt(i)?Mr:Je.current,_=Tn(t,_));var Y=i.getDerivedStateFromProps;(H=typeof Y=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I!==V||W!==_)&&vv(t,E,p,_),hr=!1,W=t.memoizedState,E.state=W,yc(t,p,E,g);var Z=t.memoizedState;I!==V||W!==Z||rt.current||hr?(typeof Y=="function"&&(sl(t,i,Y,p),Z=t.memoizedState),(D=hr||pv(t,i,D,p,W,Z,_)||!1)?(H||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,Z,_),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,Z,_)),typeof E.componentDidUpdate=="function"&&(t.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof E.componentDidUpdate!="function"||I===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),t.memoizedProps=p,t.memoizedState=Z),E.props=p,E.state=Z,E.context=_,p=D):(typeof E.componentDidUpdate!="function"||I===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),p=!1)}return dl(e,t,i,p,S,g)}function dl(e,t,i,p,g,S){Ev(e,t);var E=(t.flags&128)!==0;if(!p&&!E)return g&&kh(t,i,!1),Jt(e,t,S);p=t.stateNode,OP.current=t;var I=E&&typeof i.getDerivedStateFromError!="function"?null:p.render();return t.flags|=1,e!==null&&E?(t.child=_n(t,e.child,null,S),t.child=_n(t,null,I,S)):$e(e,t,I,S),t.memoizedState=p.state,g&&kh(t,i,!0),t.child}function Av(e){var t=e.stateNode;t.pendingContext?Ih(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ih(e,t.context,!1),Ju(e,t.containerInfo)}function bv(e,t,i,p,g){return In(),Fu(g),t.flags|=256,$e(e,t,i,p),t.child}var pl={dehydrated:null,treeContext:null,retryLane:0};function hl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Iv(e,t,i){var p=t.pendingProps,g=Me.current,S=!1,E=(t.flags&128)!==0,I;if((I=E)||(I=e!==null&&e.memoizedState===null?!1:(g&2)!==0),I?(S=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(g|=1),Ie(Me,g&1),e===null)return Bu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(E=p.children,e=p.fallback,S?(p=t.mode,S=t.child,E={mode:"hidden",children:E},(p&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=E):S=qc(E,p,0,null),e=Ur(e,p,i,null),S.return=t,e.return=t,S.sibling=e,t.child=S,t.child.memoizedState=hl(i),t.memoizedState=pl,e):vl(t,E));if(g=e.memoizedState,g!==null&&(I=g.dehydrated,I!==null))return jP(e,t,E,p,I,g,i);if(S){S=p.fallback,E=t.mode,g=e.child,I=g.sibling;var _={mode:"hidden",children:p.children};return(E&1)===0&&t.child!==g?(p=t.child,p.childLanes=0,p.pendingProps=_,t.deletions=null):(p=Cr(g,_),p.subtreeFlags=g.subtreeFlags&14680064),I!==null?S=Cr(I,S):(S=Ur(S,E,i,null),S.flags|=2),S.return=t,p.return=t,p.sibling=S,t.child=p,p=S,S=t.child,E=e.child.memoizedState,E=E===null?hl(i):{baseLanes:E.baseLanes|i,cachePool:null,transitions:E.transitions},S.memoizedState=E,S.childLanes=e.childLanes&~i,t.memoizedState=pl,p}return S=e.child,e=S.sibling,p=Cr(S,{mode:"visible",children:p.children}),(t.mode&1)===0&&(p.lanes=i),p.return=t,p.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=p,t.memoizedState=null,p}function vl(e,t){return t=qc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ac(e,t,i,p){return p!==null&&Fu(p),_n(t,e.child,null,i),e=vl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jP(e,t,i,p,g,S,E){if(i)return t.flags&256?(t.flags&=-257,p=cl(Error(s(422))),Ac(e,t,E,p)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(S=p.fallback,g=t.mode,p=qc({mode:"visible",children:p.children},g,0,null),S=Ur(S,g,E,null),S.flags|=2,p.return=t,S.return=t,p.sibling=S,t.child=p,(t.mode&1)!==0&&_n(t,e.child,null,E),t.child.memoizedState=hl(E),t.memoizedState=pl,S);if((t.mode&1)===0)return Ac(e,t,E,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var I=p.dgst;return p=I,S=Error(s(419)),p=cl(S,p,void 0),Ac(e,t,E,p)}if(I=(E&e.childLanes)!==0,it||I){if(p=He,p!==null){switch(E&-E){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|E))!==0?0:g,g!==0&&g!==S.retryLane&&(S.retryLane=g,Kt(e,g),kt(p,e,g,-1))}return kl(),p=cl(Error(s(421))),Ac(e,t,E,p)}return g.data==="$?"?(t.flags|=128,t.child=e.child,t=JP.bind(null,e),g._reactRetry=t,null):(e=S.treeContext,dt=ur(g.nextSibling),lt=t,xe=!0,At=null,e!==null&&(mt[yt++]=Ht,mt[yt++]=Vt,mt[yt++]=Nr,Ht=e.id,Vt=e.overflow,Nr=t),t=vl(t,p.children),t.flags|=4096,t)}function _v(e,t,i){e.lanes|=t;var p=e.alternate;p!==null&&(p.lanes|=t),Vu(e.return,t,i)}function fl(e,t,i,p,g){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:p,tail:i,tailMode:g}:(S.isBackwards=t,S.rendering=null,S.renderingStartTime=0,S.last=p,S.tail=i,S.tailMode=g)}function kv(e,t,i){var p=t.pendingProps,g=p.revealOrder,S=p.tail;if($e(e,t,p.children,i),p=Me.current,(p&2)!==0)p=p&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_v(e,i,t);else if(e.tag===19)_v(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}p&=1}if(Ie(Me,p),(t.mode&1)===0)t.memoizedState=null;else switch(g){case"forwards":for(i=t.child,g=null;i!==null;)e=i.alternate,e!==null&&Sc(e)===null&&(g=i),i=i.sibling;i=g,i===null?(g=t.child,t.child=null):(g=i.sibling,i.sibling=null),fl(t,!1,g,i,S);break;case"backwards":for(i=null,g=t.child,t.child=null;g!==null;){if(e=g.alternate,e!==null&&Sc(e)===null){t.child=g;break}e=g.sibling,g.sibling=i,i=g,g=e}fl(t,!0,i,null,S);break;case"together":fl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bc(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Lr|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Cr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Cr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function DP(e,t,i){switch(t.tag){case 3:Av(t),In();break;case 5:Hh(t);break;case 1:nt(t.type)&&uc(t);break;case 4:Ju(t,t.stateNode.containerInfo);break;case 10:var p=t.type._context,g=t.memoizedProps.value;Ie(fc,p._currentValue),p._currentValue=g;break;case 13:if(p=t.memoizedState,p!==null)return p.dehydrated!==null?(Ie(Me,Me.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?Iv(e,t,i):(Ie(Me,Me.current&1),e=Jt(e,t,i),e!==null?e.sibling:null);Ie(Me,Me.current&1);break;case 19:if(p=(i&t.childLanes)!==0,(e.flags&128)!==0){if(p)return kv(e,t,i);t.flags|=128}if(g=t.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ie(Me,Me.current),p)break;return null;case 22:case 23:return t.lanes=0,Rv(e,t,i)}return Jt(e,t,i)}var xv,gl,Mv,Nv;xv=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},gl=function(){},Mv=function(e,t,i,p){var g=e.memoizedProps;if(g!==p){e=t.stateNode,Dr(zt.current);var S=null;switch(i){case"input":g=Bn(e,g),p=Bn(e,p),S=[];break;case"select":g=G({},g,{value:void 0}),p=G({},p,{value:void 0}),S=[];break;case"textarea":g=Un(e,g),p=Un(e,p),S=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(e.onclick=sc)}Hn(i,p);var E;i=null;for(D in g)if(!p.hasOwnProperty(D)&&g.hasOwnProperty(D)&&g[D]!=null)if(D==="style"){var I=g[D];for(E in I)I.hasOwnProperty(E)&&(i||(i={}),i[E]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(a.hasOwnProperty(D)?S||(S=[]):(S=S||[]).push(D,null));for(D in p){var _=p[D];if(I=g!=null?g[D]:void 0,p.hasOwnProperty(D)&&_!==I&&(_!=null||I!=null))if(D==="style")if(I){for(E in I)!I.hasOwnProperty(E)||_&&_.hasOwnProperty(E)||(i||(i={}),i[E]="");for(E in _)_.hasOwnProperty(E)&&I[E]!==_[E]&&(i||(i={}),i[E]=_[E])}else i||(S||(S=[]),S.push(D,i)),i=_;else D==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,I=I?I.__html:void 0,_!=null&&I!==_&&(S=S||[]).push(D,_)):D==="children"?typeof _!="string"&&typeof _!="number"||(S=S||[]).push(D,""+_):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(a.hasOwnProperty(D)?(_!=null&&D==="onScroll"&&_e("scroll",e),S||I===_||(S=[])):(S=S||[]).push(D,_))}i&&(S=S||[]).push("style",i);var D=S;(t.updateQueue=D)&&(t.flags|=4)}},Nv=function(e,t,i,p){i!==p&&(t.flags|=4)};function Ti(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var p=null;i!==null;)i.alternate!==null&&(p=i),i=i.sibling;p===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:p.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,p=0;if(t)for(var g=e.child;g!==null;)i|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=e,g=g.sibling;else for(g=e.child;g!==null;)i|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=e,g=g.sibling;return e.subtreeFlags|=p,e.childLanes=i,t}function zP(e,t,i){var p=t.pendingProps;switch(Lu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return nt(t.type)&&cc(),Ye(t),null;case 3:return p=t.stateNode,Mn(),ke(rt),ke(Je),Xu(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(e===null||e.child===null)&&(hc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,At!==null&&(bl(At),At=null))),gl(e,t),Ye(t),null;case 5:Qu(t);var g=Dr(Ci.current);if(i=t.type,e!==null&&t.stateNode!=null)Mv(e,t,i,p,g),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!p){if(t.stateNode===null)throw Error(s(166));return Ye(t),null}if(e=Dr(zt.current),hc(t)){p=t.stateNode,i=t.type;var S=t.memoizedProps;switch(p[Dt]=t,p[fi]=S,e=(t.mode&1)!==0,i){case"dialog":_e("cancel",p),_e("close",p);break;case"iframe":case"object":case"embed":_e("load",p);break;case"video":case"audio":for(g=0;g<pi.length;g++)_e(pi[g],p);break;case"source":_e("error",p);break;case"img":case"image":case"link":_e("error",p),_e("load",p);break;case"details":_e("toggle",p);break;case"input":Ia(p,S),_e("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!S.multiple},_e("invalid",p);break;case"textarea":xa(p,S),_e("invalid",p)}Hn(i,S),g=null;for(var E in S)if(S.hasOwnProperty(E)){var I=S[E];E==="children"?typeof I=="string"?p.textContent!==I&&(S.suppressHydrationWarning!==!0&&oc(p.textContent,I,e),g=["children",I]):typeof I=="number"&&p.textContent!==""+I&&(S.suppressHydrationWarning!==!0&&oc(p.textContent,I,e),g=["children",""+I]):a.hasOwnProperty(E)&&I!=null&&E==="onScroll"&&_e("scroll",p)}switch(i){case"input":pn(p),ka(p,S,!0);break;case"textarea":pn(p),Na(p);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(p.onclick=sc)}p=g,t.updateQueue=p,p!==null&&(t.flags|=4)}else{E=g.nodeType===9?g:g.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Oa(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=E.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof p.is=="string"?e=E.createElement(i,{is:p.is}):(e=E.createElement(i),i==="select"&&(E=e,p.multiple?E.multiple=!0:p.size&&(E.size=p.size))):e=E.createElementNS(e,i),e[Dt]=t,e[fi]=p,xv(e,t,!1,!1),t.stateNode=e;e:{switch(E=Vn(i,p),i){case"dialog":_e("cancel",e),_e("close",e),g=p;break;case"iframe":case"object":case"embed":_e("load",e),g=p;break;case"video":case"audio":for(g=0;g<pi.length;g++)_e(pi[g],e);g=p;break;case"source":_e("error",e),g=p;break;case"img":case"image":case"link":_e("error",e),_e("load",e),g=p;break;case"details":_e("toggle",e),g=p;break;case"input":Ia(e,p),g=Bn(e,p),_e("invalid",e);break;case"option":g=p;break;case"select":e._wrapperState={wasMultiple:!!p.multiple},g=G({},p,{value:void 0}),_e("invalid",e);break;case"textarea":xa(e,p),g=Un(e,p),_e("invalid",e);break;default:g=p}Hn(i,g),I=g;for(S in I)if(I.hasOwnProperty(S)){var _=I[S];S==="style"?Da(e,_):S==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&fn(e,_)):S==="children"?typeof _=="string"?(i!=="textarea"||_!=="")&&Ir(e,_):typeof _=="number"&&Ir(e,""+_):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(a.hasOwnProperty(S)?_!=null&&S==="onScroll"&&_e("scroll",e):_!=null&&b(e,S,_,E))}switch(i){case"input":pn(e),ka(e,p,!1);break;case"textarea":pn(e),Na(e);break;case"option":p.value!=null&&e.setAttribute("value",""+Ee(p.value));break;case"select":e.multiple=!!p.multiple,S=p.value,S!=null?tr(e,!!p.multiple,S,!1):p.defaultValue!=null&&tr(e,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(e.onclick=sc)}switch(i){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)Nv(e,t,e.memoizedProps,p);else{if(typeof p!="string"&&t.stateNode===null)throw Error(s(166));if(i=Dr(Ci.current),Dr(zt.current),hc(t)){if(p=t.stateNode,i=t.memoizedProps,p[Dt]=t,(S=p.nodeValue!==i)&&(e=lt,e!==null))switch(e.tag){case 3:oc(p.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oc(p.nodeValue,i,(e.mode&1)!==0)}S&&(t.flags|=4)}else p=(i.nodeType===9?i:i.ownerDocument).createTextNode(p),p[Dt]=t,t.stateNode=p}return Ye(t),null;case 13:if(ke(Me),p=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xe&&dt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Dh(),In(),t.flags|=98560,S=!1;else if(S=hc(t),p!==null&&p.dehydrated!==null){if(e===null){if(!S)throw Error(s(318));if(S=t.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(s(317));S[Dt]=t}else In(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),S=!1}else At!==null&&(bl(At),At=null),S=!0;if(!S)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(p=p!==null,p!==(e!==null&&e.memoizedState!==null)&&p&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Me.current&1)!==0?Fe===0&&(Fe=3):kl())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return Mn(),gl(e,t),e===null&&hi(t.stateNode.containerInfo),Ye(t),null;case 10:return Hu(t.type._context),Ye(t),null;case 17:return nt(t.type)&&cc(),Ye(t),null;case 19:if(ke(Me),S=t.memoizedState,S===null)return Ye(t),null;if(p=(t.flags&128)!==0,E=S.rendering,E===null)if(p)Ti(S,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(E=Sc(e),E!==null){for(t.flags|=128,Ti(S,!1),p=E.updateQueue,p!==null&&(t.updateQueue=p,t.flags|=4),t.subtreeFlags=0,p=i,i=t.child;i!==null;)S=i,e=p,S.flags&=14680066,E=S.alternate,E===null?(S.childLanes=0,S.lanes=e,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=E.childLanes,S.lanes=E.lanes,S.child=E.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=E.memoizedProps,S.memoizedState=E.memoizedState,S.updateQueue=E.updateQueue,S.type=E.type,e=E.dependencies,S.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ie(Me,Me.current&1|2),t.child}e=e.sibling}S.tail!==null&&ze()>Dn&&(t.flags|=128,p=!0,Ti(S,!1),t.lanes=4194304)}else{if(!p)if(e=Sc(E),e!==null){if(t.flags|=128,p=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Ti(S,!0),S.tail===null&&S.tailMode==="hidden"&&!E.alternate&&!xe)return Ye(t),null}else 2*ze()-S.renderingStartTime>Dn&&i!==1073741824&&(t.flags|=128,p=!0,Ti(S,!1),t.lanes=4194304);S.isBackwards?(E.sibling=t.child,t.child=E):(i=S.last,i!==null?i.sibling=E:t.child=E,S.last=E)}return S.tail!==null?(t=S.tail,S.rendering=t,S.tail=t.sibling,S.renderingStartTime=ze(),t.sibling=null,i=Me.current,Ie(Me,p?i&1|2:i&1),t):(Ye(t),null);case 22:case 23:return _l(),p=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==p&&(t.flags|=8192),p&&(t.mode&1)!==0?(pt&1073741824)!==0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function LP(e,t){switch(Lu(t),t.tag){case 1:return nt(t.type)&&cc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mn(),ke(rt),ke(Je),Xu(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Qu(t),null;case 13:if(ke(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));In()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(Me),null;case 4:return Mn(),null;case 10:return Hu(t.type._context),null;case 22:case 23:return _l(),null;case 24:return null;default:return null}}var Ic=!1,Xe=!1,qP=typeof WeakSet=="function"?WeakSet:Set,X=null;function On(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(p){De(e,t,p)}else i.current=null}function ml(e,t,i){try{i()}catch(p){De(e,t,p)}}var Ov=!1;function BP(e,t){if(_u=Ja,e=ph(),Pu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var p=i.getSelection&&i.getSelection();if(p&&p.rangeCount!==0){i=p.anchorNode;var g=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{i.nodeType,S.nodeType}catch{i=null;break e}var E=0,I=-1,_=-1,D=0,H=0,V=e,W=null;t:for(;;){for(var Y;V!==i||g!==0&&V.nodeType!==3||(I=E+g),V!==S||p!==0&&V.nodeType!==3||(_=E+p),V.nodeType===3&&(E+=V.nodeValue.length),(Y=V.firstChild)!==null;)W=V,V=Y;for(;;){if(V===e)break t;if(W===i&&++D===g&&(I=E),W===S&&++H===p&&(_=E),(Y=V.nextSibling)!==null)break;V=W,W=V.parentNode}V=Y}i=I===-1||_===-1?null:{start:I,end:_}}else i=null}i=i||{start:0,end:0}}else i=null;for(ku={focusedElem:e,selectionRange:i},Ja=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var Z=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var $=Z.memoizedProps,Le=Z.memoizedState,O=t.stateNode,k=O.getSnapshotBeforeUpdate(t.elementType===t.type?$:bt(t.type,$),Le);O.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(K){De(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return Z=Ov,Ov=!1,Z}function Ai(e,t,i){var p=t.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&e)===e){var S=g.destroy;g.destroy=void 0,S!==void 0&&ml(t,i,S)}g=g.next}while(g!==p)}}function _c(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var p=i.create;i.destroy=p()}i=i.next}while(i!==t)}}function yl(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function jv(e){var t=e.alternate;t!==null&&(e.alternate=null,jv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dt],delete t[fi],delete t[Ou],delete t[wP],delete t[RP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dv(e){return e.tag===5||e.tag===3||e.tag===4}function zv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sl(e,t,i){var p=e.tag;if(p===5||p===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=sc));else if(p!==4&&(e=e.child,e!==null))for(Sl(e,t,i),e=e.sibling;e!==null;)Sl(e,t,i),e=e.sibling}function Cl(e,t,i){var p=e.tag;if(p===5||p===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(p!==4&&(e=e.child,e!==null))for(Cl(e,t,i),e=e.sibling;e!==null;)Cl(e,t,i),e=e.sibling}var Ke=null,It=!1;function fr(e,t,i){for(i=i.child;i!==null;)Lv(e,t,i),i=i.sibling}function Lv(e,t,i){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(Ua,i)}catch{}switch(i.tag){case 5:Xe||On(i,t);case 6:var p=Ke,g=It;Ke=null,fr(e,t,i),Ke=p,It=g,Ke!==null&&(It?(e=Ke,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ke.removeChild(i.stateNode));break;case 18:Ke!==null&&(It?(e=Ke,i=i.stateNode,e.nodeType===8?Nu(e.parentNode,i):e.nodeType===1&&Nu(e,i),ii(e)):Nu(Ke,i.stateNode));break;case 4:p=Ke,g=It,Ke=i.stateNode.containerInfo,It=!0,fr(e,t,i),Ke=p,It=g;break;case 0:case 11:case 14:case 15:if(!Xe&&(p=i.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var S=g,E=S.destroy;S=S.tag,E!==void 0&&((S&2)!==0||(S&4)!==0)&&ml(i,t,E),g=g.next}while(g!==p)}fr(e,t,i);break;case 1:if(!Xe&&(On(i,t),p=i.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=i.memoizedProps,p.state=i.memoizedState,p.componentWillUnmount()}catch(I){De(i,t,I)}fr(e,t,i);break;case 21:fr(e,t,i);break;case 22:i.mode&1?(Xe=(p=Xe)||i.memoizedState!==null,fr(e,t,i),Xe=p):fr(e,t,i);break;default:fr(e,t,i)}}function qv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new qP),t.forEach(function(p){var g=QP.bind(null,e,p);i.has(p)||(i.add(p),p.then(g,g))})}}function _t(e,t){var i=t.deletions;if(i!==null)for(var p=0;p<i.length;p++){var g=i[p];try{var S=e,E=t,I=E;e:for(;I!==null;){switch(I.tag){case 5:Ke=I.stateNode,It=!1;break e;case 3:Ke=I.stateNode.containerInfo,It=!0;break e;case 4:Ke=I.stateNode.containerInfo,It=!0;break e}I=I.return}if(Ke===null)throw Error(s(160));Lv(S,E,g),Ke=null,It=!1;var _=g.alternate;_!==null&&(_.return=null),g.return=null}catch(D){De(g,t,D)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bv(t,e),t=t.sibling}function Bv(e,t){var i=e.alternate,p=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_t(t,e),qt(e),p&4){try{Ai(3,e,e.return),_c(3,e)}catch($){De(e,e.return,$)}try{Ai(5,e,e.return)}catch($){De(e,e.return,$)}}break;case 1:_t(t,e),qt(e),p&512&&i!==null&&On(i,i.return);break;case 5:if(_t(t,e),qt(e),p&512&&i!==null&&On(i,i.return),e.flags&32){var g=e.stateNode;try{Ir(g,"")}catch($){De(e,e.return,$)}}if(p&4&&(g=e.stateNode,g!=null)){var S=e.memoizedProps,E=i!==null?i.memoizedProps:S,I=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{I==="input"&&S.type==="radio"&&S.name!=null&&_a(g,S),Vn(I,E);var D=Vn(I,S);for(E=0;E<_.length;E+=2){var H=_[E],V=_[E+1];H==="style"?Da(g,V):H==="dangerouslySetInnerHTML"?fn(g,V):H==="children"?Ir(g,V):b(g,H,V,D)}switch(I){case"input":Ue(g,S);break;case"textarea":Ma(g,S);break;case"select":var W=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!S.multiple;var Y=S.value;Y!=null?tr(g,!!S.multiple,Y,!1):W!==!!S.multiple&&(S.defaultValue!=null?tr(g,!!S.multiple,S.defaultValue,!0):tr(g,!!S.multiple,S.multiple?[]:"",!1))}g[fi]=S}catch($){De(e,e.return,$)}}break;case 6:if(_t(t,e),qt(e),p&4){if(e.stateNode===null)throw Error(s(162));g=e.stateNode,S=e.memoizedProps;try{g.nodeValue=S}catch($){De(e,e.return,$)}}break;case 3:if(_t(t,e),qt(e),p&4&&i!==null&&i.memoizedState.isDehydrated)try{ii(t.containerInfo)}catch($){De(e,e.return,$)}break;case 4:_t(t,e),qt(e);break;case 13:_t(t,e),qt(e),g=e.child,g.flags&8192&&(S=g.memoizedState!==null,g.stateNode.isHidden=S,!S||g.alternate!==null&&g.alternate.memoizedState!==null||(Rl=ze())),p&4&&qv(e);break;case 22:if(H=i!==null&&i.memoizedState!==null,e.mode&1?(Xe=(D=Xe)||H,_t(t,e),Xe=D):_t(t,e),qt(e),p&8192){if(D=e.memoizedState!==null,(e.stateNode.isHidden=D)&&!H&&(e.mode&1)!==0)for(X=e,H=e.child;H!==null;){for(V=X=H;X!==null;){switch(W=X,Y=W.child,W.tag){case 0:case 11:case 14:case 15:Ai(4,W,W.return);break;case 1:On(W,W.return);var Z=W.stateNode;if(typeof Z.componentWillUnmount=="function"){p=W,i=W.return;try{t=p,Z.props=t.memoizedProps,Z.state=t.memoizedState,Z.componentWillUnmount()}catch($){De(p,i,$)}}break;case 5:On(W,W.return);break;case 22:if(W.memoizedState!==null){Wv(V);continue}}Y!==null?(Y.return=W,X=Y):Wv(V)}H=H.sibling}e:for(H=null,V=e;;){if(V.tag===5){if(H===null){H=V;try{g=V.stateNode,D?(S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(I=V.stateNode,_=V.memoizedProps.style,E=_!=null&&_.hasOwnProperty("display")?_.display:null,I.style.display=ja("display",E))}catch($){De(e,e.return,$)}}}else if(V.tag===6){if(H===null)try{V.stateNode.nodeValue=D?"":V.memoizedProps}catch($){De(e,e.return,$)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===e)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===e)break e;for(;V.sibling===null;){if(V.return===null||V.return===e)break e;H===V&&(H=null),V=V.return}H===V&&(H=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:_t(t,e),qt(e),p&4&&qv(e);break;case 21:break;default:_t(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(Dv(i)){var p=i;break e}i=i.return}throw Error(s(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Ir(g,""),p.flags&=-33);var S=zv(e);Cl(e,S,g);break;case 3:case 4:var E=p.stateNode.containerInfo,I=zv(e);Sl(e,I,E);break;default:throw Error(s(161))}}catch(_){De(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function FP(e,t,i){X=e,Fv(e)}function Fv(e,t,i){for(var p=(e.mode&1)!==0;X!==null;){var g=X,S=g.child;if(g.tag===22&&p){var E=g.memoizedState!==null||Ic;if(!E){var I=g.alternate,_=I!==null&&I.memoizedState!==null||Xe;I=Ic;var D=Xe;if(Ic=E,(Xe=_)&&!D)for(X=g;X!==null;)E=X,_=E.child,E.tag===22&&E.memoizedState!==null?Hv(g):_!==null?(_.return=E,X=_):Hv(g);for(;S!==null;)X=S,Fv(S),S=S.sibling;X=g,Ic=I,Xe=D}Uv(e)}else(g.subtreeFlags&8772)!==0&&S!==null?(S.return=g,X=S):Uv(e)}}function Uv(e){for(;X!==null;){var t=X;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Xe||_c(5,t);break;case 1:var p=t.stateNode;if(t.flags&4&&!Xe)if(i===null)p.componentDidMount();else{var g=t.elementType===t.type?i.memoizedProps:bt(t.type,i.memoizedProps);p.componentDidUpdate(g,i.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var S=t.updateQueue;S!==null&&Wh(t,S,p);break;case 3:var E=t.updateQueue;if(E!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Wh(t,E,i)}break;case 5:var I=t.stateNode;if(i===null&&t.flags&4){i=I;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&i.focus();break;case"img":_.src&&(i.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var D=t.alternate;if(D!==null){var H=D.memoizedState;if(H!==null){var V=H.dehydrated;V!==null&&ii(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Xe||t.flags&512&&yl(t)}catch(W){De(t,t.return,W)}}if(t===e){X=null;break}if(i=t.sibling,i!==null){i.return=t.return,X=i;break}X=t.return}}function Wv(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var i=t.sibling;if(i!==null){i.return=t.return,X=i;break}X=t.return}}function Hv(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{_c(4,t)}catch(_){De(t,i,_)}break;case 1:var p=t.stateNode;if(typeof p.componentDidMount=="function"){var g=t.return;try{p.componentDidMount()}catch(_){De(t,g,_)}}var S=t.return;try{yl(t)}catch(_){De(t,S,_)}break;case 5:var E=t.return;try{yl(t)}catch(_){De(t,E,_)}}}catch(_){De(t,t.return,_)}if(t===e){X=null;break}var I=t.sibling;if(I!==null){I.return=t.return,X=I;break}X=t.return}}var UP=Math.ceil,kc=x.ReactCurrentDispatcher,Pl=x.ReactCurrentOwner,Pt=x.ReactCurrentBatchConfig,Pe=0,He=null,qe=null,Ge=0,pt=0,jn=lr(0),Fe=0,bi=null,Lr=0,xc=0,wl=0,Ii=null,ot=null,Rl=0,Dn=1/0,Qt=null,Mc=!1,El=null,gr=null,Nc=!1,mr=null,Oc=0,_i=0,Tl=null,jc=-1,Dc=0;function et(){return(Pe&6)!==0?ze():jc!==-1?jc:jc=ze()}function yr(e){return(e.mode&1)===0?1:(Pe&2)!==0&&Ge!==0?Ge&-Ge:TP.transition!==null?(Dc===0&&(Dc=zp()),Dc):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Kp(e.type)),e)}function kt(e,t,i,p){if(50<_i)throw _i=0,Tl=null,Error(s(185));$n(e,i,p),((Pe&2)===0||e!==He)&&(e===He&&((Pe&2)===0&&(xc|=i),Fe===4&&Sr(e,Ge)),st(e,p),i===1&&Pe===0&&(t.mode&1)===0&&(Dn=ze()+500,lc&&pr()))}function st(e,t){var i=e.callbackNode;T0(e,t);var p=Va(e,e===He?Ge:0);if(p===0)i!==null&&Op(i),e.callbackNode=null,e.callbackPriority=0;else if(t=p&-p,e.callbackPriority!==t){if(i!=null&&Op(i),t===1)e.tag===0?EP(Kv.bind(null,e)):xh(Kv.bind(null,e)),CP(function(){(Pe&6)===0&&pr()}),i=null;else{switch(Lp(p)){case 1:i=iu;break;case 4:i=jp;break;case 16:i=Fa;break;case 536870912:i=Dp;break;default:i=Fa}i=ef(i,Vv.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Vv(e,t){if(jc=-1,Dc=0,(Pe&6)!==0)throw Error(s(327));var i=e.callbackNode;if(zn()&&e.callbackNode!==i)return null;var p=Va(e,e===He?Ge:0);if(p===0)return null;if((p&30)!==0||(p&e.expiredLanes)!==0||t)t=zc(e,p);else{t=p;var g=Pe;Pe|=2;var S=Jv();(He!==e||Ge!==t)&&(Qt=null,Dn=ze()+500,Br(e,t));do try{VP();break}catch(I){Gv(e,I)}while(!0);Wu(),kc.current=S,Pe=g,qe!==null?t=0:(He=null,Ge=0,t=Fe)}if(t!==0){if(t===2&&(g=ou(e),g!==0&&(p=g,t=Al(e,g))),t===1)throw i=bi,Br(e,0),Sr(e,p),st(e,ze()),i;if(t===6)Sr(e,p);else{if(g=e.current.alternate,(p&30)===0&&!WP(g)&&(t=zc(e,p),t===2&&(S=ou(e),S!==0&&(p=S,t=Al(e,S))),t===1))throw i=bi,Br(e,0),Sr(e,p),st(e,ze()),i;switch(e.finishedWork=g,e.finishedLanes=p,t){case 0:case 1:throw Error(s(345));case 2:Fr(e,ot,Qt);break;case 3:if(Sr(e,p),(p&130023424)===p&&(t=Rl+500-ze(),10<t)){if(Va(e,0)!==0)break;if(g=e.suspendedLanes,(g&p)!==p){et(),e.pingedLanes|=e.suspendedLanes&g;break}e.timeoutHandle=Mu(Fr.bind(null,e,ot,Qt),t);break}Fr(e,ot,Qt);break;case 4:if(Sr(e,p),(p&4194240)===p)break;for(t=e.eventTimes,g=-1;0<p;){var E=31-Et(p);S=1<<E,E=t[E],E>g&&(g=E),p&=~S}if(p=g,p=ze()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*UP(p/1960))-p,10<p){e.timeoutHandle=Mu(Fr.bind(null,e,ot,Qt),p);break}Fr(e,ot,Qt);break;case 5:Fr(e,ot,Qt);break;default:throw Error(s(329))}}}return st(e,ze()),e.callbackNode===i?Vv.bind(null,e):null}function Al(e,t){var i=Ii;return e.current.memoizedState.isDehydrated&&(Br(e,t).flags|=256),e=zc(e,t),e!==2&&(t=ot,ot=i,t!==null&&bl(t)),e}function bl(e){ot===null?ot=e:ot.push.apply(ot,e)}function WP(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var p=0;p<i.length;p++){var g=i[p],S=g.getSnapshot;g=g.value;try{if(!Tt(S(),g))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sr(e,t){for(t&=~wl,t&=~xc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Et(t),p=1<<i;e[i]=-1,t&=~p}}function Kv(e){if((Pe&6)!==0)throw Error(s(327));zn();var t=Va(e,0);if((t&1)===0)return st(e,ze()),null;var i=zc(e,t);if(e.tag!==0&&i===2){var p=ou(e);p!==0&&(t=p,i=Al(e,p))}if(i===1)throw i=bi,Br(e,0),Sr(e,t),st(e,ze()),i;if(i===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,ot,Qt),st(e,ze()),null}function Il(e,t){var i=Pe;Pe|=1;try{return e(t)}finally{Pe=i,Pe===0&&(Dn=ze()+500,lc&&pr())}}function qr(e){mr!==null&&mr.tag===0&&(Pe&6)===0&&zn();var t=Pe;Pe|=1;var i=Pt.transition,p=Te;try{if(Pt.transition=null,Te=1,e)return e()}finally{Te=p,Pt.transition=i,Pe=t,(Pe&6)===0&&pr()}}function _l(){pt=jn.current,ke(jn)}function Br(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,SP(i)),qe!==null)for(i=qe.return;i!==null;){var p=i;switch(Lu(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&cc();break;case 3:Mn(),ke(rt),ke(Je),Xu();break;case 5:Qu(p);break;case 4:Mn();break;case 13:ke(Me);break;case 19:ke(Me);break;case 10:Hu(p.type._context);break;case 22:case 23:_l()}i=i.return}if(He=e,qe=e=Cr(e.current,null),Ge=pt=t,Fe=0,bi=null,wl=xc=Lr=0,ot=Ii=null,jr!==null){for(t=0;t<jr.length;t++)if(i=jr[t],p=i.interleaved,p!==null){i.interleaved=null;var g=p.next,S=i.pending;if(S!==null){var E=S.next;S.next=g,p.next=E}i.pending=p}jr=null}return e}function Gv(e,t){do{var i=qe;try{if(Wu(),Cc.current=Ec,Pc){for(var p=Ne.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Pc=!1}if(zr=0,We=Be=Ne=null,Pi=!1,wi=0,Pl.current=null,i===null||i.return===null){Fe=1,bi=t,qe=null;break}e:{var S=e,E=i.return,I=i,_=t;if(t=Ge,I.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var D=_,H=I,V=H.tag;if((H.mode&1)===0&&(V===0||V===11||V===15)){var W=H.alternate;W?(H.updateQueue=W.updateQueue,H.memoizedState=W.memoizedState,H.lanes=W.lanes):(H.updateQueue=null,H.memoizedState=null)}var Y=yv(E);if(Y!==null){Y.flags&=-257,Sv(Y,E,I,S,t),Y.mode&1&&mv(S,D,t),t=Y,_=D;var Z=t.updateQueue;if(Z===null){var $=new Set;$.add(_),t.updateQueue=$}else Z.add(_);break e}else{if((t&1)===0){mv(S,D,t),kl();break e}_=Error(s(426))}}else if(xe&&I.mode&1){var Le=yv(E);if(Le!==null){(Le.flags&65536)===0&&(Le.flags|=256),Sv(Le,E,I,S,t),Fu(Nn(_,I));break e}}S=_=Nn(_,I),Fe!==4&&(Fe=2),Ii===null?Ii=[S]:Ii.push(S),S=E;do{switch(S.tag){case 3:S.flags|=65536,t&=-t,S.lanes|=t;var O=fv(S,_,t);Uh(S,O);break e;case 1:I=_;var k=S.type,j=S.stateNode;if((S.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(gr===null||!gr.has(j)))){S.flags|=65536,t&=-t,S.lanes|=t;var K=gv(S,I,t);Uh(S,K);break e}}S=S.return}while(S!==null)}Yv(i)}catch(te){t=te,qe===i&&i!==null&&(qe=i=i.return);continue}break}while(!0)}function Jv(){var e=kc.current;return kc.current=Ec,e===null?Ec:e}function kl(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||(Lr&268435455)===0&&(xc&268435455)===0||Sr(He,Ge)}function zc(e,t){var i=Pe;Pe|=2;var p=Jv();(He!==e||Ge!==t)&&(Qt=null,Br(e,t));do try{HP();break}catch(g){Gv(e,g)}while(!0);if(Wu(),Pe=i,kc.current=p,qe!==null)throw Error(s(261));return He=null,Ge=0,Fe}function HP(){for(;qe!==null;)Qv(qe)}function VP(){for(;qe!==null&&!g0();)Qv(qe)}function Qv(e){var t=$v(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?Yv(e):qe=t,Pl.current=null}function Yv(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=zP(i,t,pt),i!==null){qe=i;return}}else{if(i=LP(i,t),i!==null){i.flags&=32767,qe=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,qe=null;return}}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Fe===0&&(Fe=5)}function Fr(e,t,i){var p=Te,g=Pt.transition;try{Pt.transition=null,Te=1,KP(e,t,i,p)}finally{Pt.transition=g,Te=p}return null}function KP(e,t,i,p){do zn();while(mr!==null);if((Pe&6)!==0)throw Error(s(327));i=e.finishedWork;var g=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var S=i.lanes|i.childLanes;if(A0(e,S),e===He&&(qe=He=null,Ge=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Nc||(Nc=!0,ef(Fa,function(){return zn(),null})),S=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||S){S=Pt.transition,Pt.transition=null;var E=Te;Te=1;var I=Pe;Pe|=4,Pl.current=null,BP(e,i),Bv(i,e),pP(ku),Ja=!!_u,ku=_u=null,e.current=i,FP(i),m0(),Pe=I,Te=E,Pt.transition=S}else e.current=i;if(Nc&&(Nc=!1,mr=e,Oc=g),S=e.pendingLanes,S===0&&(gr=null),C0(i.stateNode),st(e,ze()),t!==null)for(p=e.onRecoverableError,i=0;i<t.length;i++)g=t[i],p(g.value,{componentStack:g.stack,digest:g.digest});if(Mc)throw Mc=!1,e=El,El=null,e;return(Oc&1)!==0&&e.tag!==0&&zn(),S=e.pendingLanes,(S&1)!==0?e===Tl?_i++:(_i=0,Tl=e):_i=0,pr(),null}function zn(){if(mr!==null){var e=Lp(Oc),t=Pt.transition,i=Te;try{if(Pt.transition=null,Te=16>e?16:e,mr===null)var p=!1;else{if(e=mr,mr=null,Oc=0,(Pe&6)!==0)throw Error(s(331));var g=Pe;for(Pe|=4,X=e.current;X!==null;){var S=X,E=S.child;if((X.flags&16)!==0){var I=S.deletions;if(I!==null){for(var _=0;_<I.length;_++){var D=I[_];for(X=D;X!==null;){var H=X;switch(H.tag){case 0:case 11:case 15:Ai(8,H,S)}var V=H.child;if(V!==null)V.return=H,X=V;else for(;X!==null;){H=X;var W=H.sibling,Y=H.return;if(jv(H),H===D){X=null;break}if(W!==null){W.return=Y,X=W;break}X=Y}}}var Z=S.alternate;if(Z!==null){var $=Z.child;if($!==null){Z.child=null;do{var Le=$.sibling;$.sibling=null,$=Le}while($!==null)}}X=S}}if((S.subtreeFlags&2064)!==0&&E!==null)E.return=S,X=E;else e:for(;X!==null;){if(S=X,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Ai(9,S,S.return)}var O=S.sibling;if(O!==null){O.return=S.return,X=O;break e}X=S.return}}var k=e.current;for(X=k;X!==null;){E=X;var j=E.child;if((E.subtreeFlags&2064)!==0&&j!==null)j.return=E,X=j;else e:for(E=k;X!==null;){if(I=X,(I.flags&2048)!==0)try{switch(I.tag){case 0:case 11:case 15:_c(9,I)}}catch(te){De(I,I.return,te)}if(I===E){X=null;break e}var K=I.sibling;if(K!==null){K.return=I.return,X=K;break e}X=I.return}}if(Pe=g,pr(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(Ua,e)}catch{}p=!0}return p}finally{Te=i,Pt.transition=t}}return!1}function Xv(e,t,i){t=Nn(i,t),t=fv(e,t,1),e=vr(e,t,1),t=et(),e!==null&&($n(e,1,t),st(e,t))}function De(e,t,i){if(e.tag===3)Xv(e,e,i);else for(;t!==null;){if(t.tag===3){Xv(t,e,i);break}else if(t.tag===1){var p=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(gr===null||!gr.has(p))){e=Nn(i,e),e=gv(t,e,1),t=vr(t,e,1),e=et(),t!==null&&($n(t,1,e),st(t,e));break}}t=t.return}}function GP(e,t,i){var p=e.pingCache;p!==null&&p.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&i,He===e&&(Ge&i)===i&&(Fe===4||Fe===3&&(Ge&130023424)===Ge&&500>ze()-Rl?Br(e,0):wl|=i),st(e,t)}function Zv(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ha,Ha<<=1,(Ha&130023424)===0&&(Ha=4194304)));var i=et();e=Kt(e,t),e!==null&&($n(e,t,i),st(e,i))}function JP(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Zv(e,i)}function QP(e,t){var i=0;switch(e.tag){case 13:var p=e.stateNode,g=e.memoizedState;g!==null&&(i=g.retryLane);break;case 19:p=e.stateNode;break;default:throw Error(s(314))}p!==null&&p.delete(t),Zv(e,i)}var $v;$v=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||rt.current)it=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return it=!1,DP(e,t,i);it=(e.flags&131072)!==0}else it=!1,xe&&(t.flags&1048576)!==0&&Mh(t,pc,t.index);switch(t.lanes=0,t.tag){case 2:var p=t.type;bc(e,t),e=t.pendingProps;var g=Tn(t,Je.current);xn(t,i),g=el(null,t,p,e,g,i);var S=tl();return t.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(p)?(S=!0,uc(t)):S=!1,t.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Gu(t),g.updater=Tc,t.stateNode=g,g._reactInternals=t,al(t,p,e,i),t=dl(null,t,p,!0,S,i)):(t.tag=0,xe&&S&&zu(t),$e(null,t,g,i),t=t.child),t;case 16:p=t.elementType;e:{switch(bc(e,t),e=t.pendingProps,g=p._init,p=g(p._payload),t.type=p,g=t.tag=XP(p),e=bt(p,e),g){case 0:t=ll(null,t,p,e,i);break e;case 1:t=Tv(null,t,p,e,i);break e;case 11:t=Cv(null,t,p,e,i);break e;case 14:t=Pv(null,t,p,bt(p.type,e),i);break e}throw Error(s(306,p,""))}return t;case 0:return p=t.type,g=t.pendingProps,g=t.elementType===p?g:bt(p,g),ll(e,t,p,g,i);case 1:return p=t.type,g=t.pendingProps,g=t.elementType===p?g:bt(p,g),Tv(e,t,p,g,i);case 3:e:{if(Av(t),e===null)throw Error(s(387));p=t.pendingProps,S=t.memoizedState,g=S.element,Fh(e,t),yc(t,p,null,i);var E=t.memoizedState;if(p=E.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},t.updateQueue.baseState=S,t.memoizedState=S,t.flags&256){g=Nn(Error(s(423)),t),t=bv(e,t,p,i,g);break e}else if(p!==g){g=Nn(Error(s(424)),t),t=bv(e,t,p,i,g);break e}else for(dt=ur(t.stateNode.containerInfo.firstChild),lt=t,xe=!0,At=null,i=qh(t,null,p,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(In(),p===g){t=Jt(e,t,i);break e}$e(e,t,p,i)}t=t.child}return t;case 5:return Hh(t),e===null&&Bu(t),p=t.type,g=t.pendingProps,S=e!==null?e.memoizedProps:null,E=g.children,xu(p,g)?E=null:S!==null&&xu(p,S)&&(t.flags|=32),Ev(e,t),$e(e,t,E,i),t.child;case 6:return e===null&&Bu(t),null;case 13:return Iv(e,t,i);case 4:return Ju(t,t.stateNode.containerInfo),p=t.pendingProps,e===null?t.child=_n(t,null,p,i):$e(e,t,p,i),t.child;case 11:return p=t.type,g=t.pendingProps,g=t.elementType===p?g:bt(p,g),Cv(e,t,p,g,i);case 7:return $e(e,t,t.pendingProps,i),t.child;case 8:return $e(e,t,t.pendingProps.children,i),t.child;case 12:return $e(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(p=t.type._context,g=t.pendingProps,S=t.memoizedProps,E=g.value,Ie(fc,p._currentValue),p._currentValue=E,S!==null)if(Tt(S.value,E)){if(S.children===g.children&&!rt.current){t=Jt(e,t,i);break e}}else for(S=t.child,S!==null&&(S.return=t);S!==null;){var I=S.dependencies;if(I!==null){E=S.child;for(var _=I.firstContext;_!==null;){if(_.context===p){if(S.tag===1){_=Gt(-1,i&-i),_.tag=2;var D=S.updateQueue;if(D!==null){D=D.shared;var H=D.pending;H===null?_.next=_:(_.next=H.next,H.next=_),D.pending=_}}S.lanes|=i,_=S.alternate,_!==null&&(_.lanes|=i),Vu(S.return,i,t),I.lanes|=i;break}_=_.next}}else if(S.tag===10)E=S.type===t.type?null:S.child;else if(S.tag===18){if(E=S.return,E===null)throw Error(s(341));E.lanes|=i,I=E.alternate,I!==null&&(I.lanes|=i),Vu(E,i,t),E=S.sibling}else E=S.child;if(E!==null)E.return=S;else for(E=S;E!==null;){if(E===t){E=null;break}if(S=E.sibling,S!==null){S.return=E.return,E=S;break}E=E.return}S=E}$e(e,t,g.children,i),t=t.child}return t;case 9:return g=t.type,p=t.pendingProps.children,xn(t,i),g=St(g),p=p(g),t.flags|=1,$e(e,t,p,i),t.child;case 14:return p=t.type,g=bt(p,t.pendingProps),g=bt(p.type,g),Pv(e,t,p,g,i);case 15:return wv(e,t,t.type,t.pendingProps,i);case 17:return p=t.type,g=t.pendingProps,g=t.elementType===p?g:bt(p,g),bc(e,t),t.tag=1,nt(p)?(e=!0,uc(t)):e=!1,xn(t,i),hv(t,p,g),al(t,p,g,i),dl(null,t,p,!0,e,i);case 19:return kv(e,t,i);case 22:return Rv(e,t,i)}throw Error(s(156,t.tag))};function ef(e,t){return Np(e,t)}function YP(e,t,i,p){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,i,p){return new YP(e,t,i,p)}function xl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function XP(e){if(typeof e=="function")return xl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Re)return 11;if(e===fe)return 14}return 2}function Cr(e,t){var i=e.alternate;return i===null?(i=wt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Lc(e,t,i,p,g,S){var E=2;if(p=e,typeof e=="function")xl(e)&&(E=1);else if(typeof e=="string")E=5;else e:switch(e){case F:return Ur(i.children,g,S,t);case B:E=8,g|=8;break;case re:return e=wt(12,i,t,g|2),e.elementType=re,e.lanes=S,e;case ee:return e=wt(13,i,t,g),e.elementType=ee,e.lanes=S,e;case ue:return e=wt(19,i,t,g),e.elementType=ue,e.lanes=S,e;case he:return qc(i,g,S,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case se:E=10;break e;case pe:E=9;break e;case Re:E=11;break e;case fe:E=14;break e;case Se:E=16,p=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=wt(E,i,t,g),t.elementType=e,t.type=p,t.lanes=S,t}function Ur(e,t,i,p){return e=wt(7,e,p,t),e.lanes=i,e}function qc(e,t,i,p){return e=wt(22,e,p,t),e.elementType=he,e.lanes=i,e.stateNode={isHidden:!1},e}function Ml(e,t,i){return e=wt(6,e,null,t),e.lanes=i,e}function Nl(e,t,i){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZP(e,t,i,p,g){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Ol(e,t,i,p,g,S,E,I,_){return e=new ZP(e,t,i,I,_),t===1?(t=1,S===!0&&(t|=8)):t=0,S=wt(3,null,null,t),e.current=S,S.stateNode=e,S.memoizedState={element:p,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gu(S),e}function $P(e,t,i){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:p==null?null:""+p,children:e,containerInfo:t,implementation:i}}function tf(e){if(!e)return dr;e=e._reactInternals;e:{if(kr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var i=e.type;if(nt(i))return _h(e,i,t)}return t}function rf(e,t,i,p,g,S,E,I,_){return e=Ol(i,p,!0,e,g,S,E,I,_),e.context=tf(null),i=e.current,p=et(),g=yr(i),S=Gt(p,g),S.callback=t??null,vr(i,S,g),e.current.lanes=g,$n(e,g,p),st(e,p),e}function Bc(e,t,i,p){var g=t.current,S=et(),E=yr(g);return i=tf(i),t.context===null?t.context=i:t.pendingContext=i,t=Gt(S,E),t.payload={element:e},p=p===void 0?null:p,p!==null&&(t.callback=p),e=vr(g,t,E),e!==null&&(kt(e,g,E,S),mc(e,g,E)),E}function Fc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function jl(e,t){nf(e,t),(e=e.alternate)&&nf(e,t)}function ew(){return null}var of=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dl(e){this._internalRoot=e}Uc.prototype.render=Dl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Bc(e,t,null,null)},Uc.prototype.unmount=Dl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qr(function(){Bc(null,e,null,null)}),t[Ut]=null}};function Uc(e){this._internalRoot=e}Uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fp();e={blockedOn:null,target:e,priority:t};for(var i=0;i<sr.length&&t!==0&&t<sr[i].priority;i++);sr.splice(i,0,e),i===0&&Hp(e)}};function zl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sf(){}function tw(e,t,i,p,g){if(g){if(typeof p=="function"){var S=p;p=function(){var D=Fc(E);S.call(D)}}var E=rf(t,p,e,0,null,!1,!1,"",sf);return e._reactRootContainer=E,e[Ut]=E.current,hi(e.nodeType===8?e.parentNode:e),qr(),E}for(;g=e.lastChild;)e.removeChild(g);if(typeof p=="function"){var I=p;p=function(){var D=Fc(_);I.call(D)}}var _=Ol(e,0,!1,null,null,!1,!1,"",sf);return e._reactRootContainer=_,e[Ut]=_.current,hi(e.nodeType===8?e.parentNode:e),qr(function(){Bc(t,_,i,p)}),_}function Hc(e,t,i,p,g){var S=i._reactRootContainer;if(S){var E=S;if(typeof g=="function"){var I=g;g=function(){var _=Fc(E);I.call(_)}}Bc(t,E,e,g)}else E=tw(i,t,e,g,p);return Fc(E)}qp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Zn(t.pendingLanes);i!==0&&(au(t,i|1),st(t,ze()),(Pe&6)===0&&(Dn=ze()+500,pr()))}break;case 13:qr(function(){var p=Kt(e,1);if(p!==null){var g=et();kt(p,e,1,g)}}),jl(e,1)}},cu=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var i=et();kt(t,e,134217728,i)}jl(e,134217728)}},Bp=function(e){if(e.tag===13){var t=yr(e),i=Kt(e,t);if(i!==null){var p=et();kt(i,e,t,p)}jl(e,t)}},Fp=function(){return Te},Up=function(e,t){var i=Te;try{return Te=e,t()}finally{Te=i}},Jn=function(e,t,i){switch(t){case"input":if(Ue(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var p=i[t];if(p!==e&&p.form===e.form){var g=ac(p);if(!g)throw Error(s(90));ba(p),Ue(p,g)}}}break;case"textarea":Ma(e,i);break;case"select":t=i.value,t!=null&&tr(e,!!i.multiple,t,!1)}},Ap=Il,bp=qr;var rw={usingClientEntryPoint:!1,Events:[gi,Rn,ac,La,Tp,Il]},ki={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nw={bundleType:ki.bundleType,version:ki.version,rendererPackageName:ki.rendererPackageName,rendererConfig:ki.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xp(e),e===null?null:e.stateNode},findFiberByHostInstance:ki.findFiberByHostInstance||ew,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{Ua=Vc.inject(nw),jt=Vc}catch{}}return at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rw,at.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zl(t))throw Error(s(200));return $P(e,t,null,i)},at.createRoot=function(e,t){if(!zl(e))throw Error(s(299));var i=!1,p="",g=of;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(p=t.identifierPrefix),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Ol(e,1,!1,null,null,i,!1,p,g),e[Ut]=t.current,hi(e.nodeType===8?e.parentNode:e),new Dl(t)},at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=xp(t),e=e===null?null:e.stateNode,e},at.flushSync=function(e){return qr(e)},at.hydrate=function(e,t,i){if(!Wc(t))throw Error(s(200));return Hc(null,e,t,!0,i)},at.hydrateRoot=function(e,t,i){if(!zl(e))throw Error(s(405));var p=i!=null&&i.hydratedSources||null,g=!1,S="",E=of;if(i!=null&&(i.unstable_strictMode===!0&&(g=!0),i.identifierPrefix!==void 0&&(S=i.identifierPrefix),i.onRecoverableError!==void 0&&(E=i.onRecoverableError)),t=rf(t,null,e,1,i??null,g,!1,S,E),e[Ut]=t.current,hi(e),p)for(e=0;e<p.length;e++)i=p[e],g=i._getVersion,g=g(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,g]:t.mutableSourceEagerHydrationData.push(i,g);return new Uc(t)},at.render=function(e,t,i){if(!Wc(t))throw Error(s(200));return Hc(null,e,t,!1,i)},at.unmountComponentAtNode=function(e){if(!Wc(e))throw Error(s(40));return e._reactRootContainer?(qr(function(){Hc(null,null,e,!1,function(){e._reactRootContainer=null,e[Ut]=null})}),!0):!1},at.unstable_batchedUpdates=Il,at.unstable_renderSubtreeIntoContainer=function(e,t,i,p){if(!Wc(i))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Hc(e,t,i,!1,p)},at.version="18.3.1-next-f1338f8080-20240426",at}var vf;function hw(){if(vf)return Bl.exports;vf=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),Bl.exports=pw(),Bl.exports}var ff;function vw(){if(ff)return Kc;ff=1;var r=hw();return Kc.createRoot=r.createRoot,Kc.hydrateRoot=r.hydrateRoot,Kc}var fw=vw();const gw=oC(fw),gf="azure-tts-settings",fp="azure-tts-api-keys",Wl={apiKey:"",region:"eastus",selectedVoice:"en-US-JennyNeural"};function Mi(){try{const r=localStorage.getItem(fp);if(r)return JSON.parse(r)}catch(r){console.error("Failed to load API keys from localStorage:",r)}return{}}function mf(r){try{localStorage.setItem(fp,JSON.stringify(r))}catch(n){console.error("Failed to save API keys to localStorage:",n)}}function mw(){const[r,n]=L.useState(()=>{try{const c=localStorage.getItem(gf),o=Mi();console.log("=== LOADING SETTINGS ===");const u={};if(Object.keys(o).forEach(d=>{const v=o[d];u[d]=v.length>8?`${v.substring(0,4)}...${v.substring(v.length-4)}`:"****"}),console.log("Stored API keys by region:",u),c){const d=JSON.parse(c),v=d.region||Wl.region,f=o[v]||d.apiKey||"",m=f.length>8?`${f.substring(0,4)}...${f.substring(f.length-4)}`:"****";return console.log("Loading settings for region:",v),console.log("Loaded API key:",m),console.log("========================"),{...Wl,...d,apiKey:f}}}catch(c){console.error("Failed to load settings from localStorage:",c)}return Wl});L.useEffect(()=>{try{const c=r.apiKey.length>8?`${r.apiKey.substring(0,4)}...${r.apiKey.substring(r.apiKey.length-4)}`:"****";console.log("=== SAVING SETTINGS (useEffect) ==="),console.log("Region:",r.region),console.log("API Key being saved:",c),console.log("This key will be saved FOR region:",r.region),console.log("===================================");const{apiKey:o,...u}=r;if(localStorage.setItem(gf,JSON.stringify(u)),o){const d=Mi();d[r.region]=o,mf(d),console.log(` API key ${c} saved for region: ${r.region}`)}}catch(c){console.error("Failed to save settings to localStorage:",c)}},[r]);const s=c=>{console.log("=== UPDATE SETTINGS CALLED ==="),console.trace("Called from:"),n(o=>{const u=o.apiKey.length>8?`${o.apiKey.substring(0,4)}...${o.apiKey.substring(o.apiKey.length-4)}`:"****";console.log("Previous settings:",{region:o.region,apiKey:u});const d={...c};if(c.apiKey){const f=c.apiKey;d.apiKey=f.length>8?`${f.substring(0,4)}...${f.substring(f.length-4)}`:"****"}console.log("Partial update:",d);const v={...o,...c};if(c.region&&c.region!==o.region&&!c.apiKey){const m=Mi()[c.region]||"";v.apiKey=m;const y=o.apiKey.length>8?`${o.apiKey.substring(0,4)}...${o.apiKey.substring(o.apiKey.length-4)}`:"****",w=m.length>8?`${m.substring(0,4)}...${m.substring(m.length-4)}`:"****";console.log(` Region changed from "${o.region}" to "${c.region}"`),console.log(` Loading saved API key for "${c.region}": ${y}  ${w}`),m||console.warn(` No API key found for region "${c.region}" - you'll need to enter one`)}return console.log("New settings:",{region:v.region,apiKey:v.apiKey.length>8?`${v.apiKey.substring(0,4)}...${v.apiKey.substring(v.apiKey.length-4)}`:"****"}),console.log("=============================="),v})},h=r.apiKey.length>0&&r.region.length>0,a=c=>{const o=Mi();delete o[c],mf(o),console.log(` Cleared API key for region: ${c}`),console.log("Remaining keys:",o)},l=()=>{localStorage.removeItem(fp),console.log(" Cleared all API keys from localStorage")};return typeof window<"u"&&(window.debugSettings={clearRegionKey:a,clearAllKeys:l,viewKeys:()=>{console.log("Current API keys in localStorage:",Mi())}}),{settings:r,updateSettings:s,isConfigured:h}}function yw(){const[r,n]=L.useState([]),s=L.useCallback(l=>{const c={...l,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`};n(o=>[...o,c])},[]),h=L.useCallback(l=>{n(c=>c.filter(o=>o.id!==l))},[]),a=L.useCallback(()=>{n([])},[]);return{history:r,addToHistory:s,removeFromHistory:h,clearHistory:a}}function Sw(){const[r,n]=L.useState([]),s=L.useCallback(l=>{const c={...l,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`};n(o=>[...o,c])},[]),h=L.useCallback(l=>{n(c=>c.filter(o=>o.id!==l))},[]),a=L.useCallback(()=>{n([])},[]);return{history:r,addToHistory:s,removeFromHistory:h,clearHistory:a}}function Cw(){const[r,n]=L.useState([]),s=L.useCallback(l=>{const c={...l,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`};n(o=>[...o,c])},[]),h=L.useCallback(l=>{n(c=>c.filter(o=>o.id!==l))},[]),a=L.useCallback(()=>{n([])},[]);return{history:r,addToHistory:s,removeFromHistory:h,clearHistory:a}}const Pw=[{value:"brazilsouth",label:"Brazil South"},{value:"canadacentral",label:"Canada Central"},{value:"canadaeast",label:"Canada East"},{value:"centralus",label:"Central US"},{value:"eastus",label:"East US"},{value:"eastus2",label:"East US 2"},{value:"northcentralus",label:"North Central US"},{value:"southcentralus",label:"South Central US"},{value:"westcentralus",label:"West Central US"},{value:"westus",label:"West US"},{value:"westus2",label:"West US 2"},{value:"westus3",label:"West US 3"},{value:"francecentral",label:"France Central"},{value:"germanywestcentral",label:"Germany West Central"},{value:"italynorth",label:"Italy North"},{value:"northeurope",label:"North Europe"},{value:"norwayeast",label:"Norway East"},{value:"swedencentral",label:"Sweden Central"},{value:"switzerlandnorth",label:"Switzerland North"},{value:"switzerlandwest",label:"Switzerland West"},{value:"uksouth",label:"UK South"},{value:"ukwest",label:"UK West"},{value:"westeurope",label:"West Europe"},{value:"australiaeast",label:"Australia East"},{value:"centralindia",label:"Central India"},{value:"eastasia",label:"East Asia"},{value:"japaneast",label:"Japan East"},{value:"japanwest",label:"Japan West"},{value:"koreacentral",label:"Korea Central"},{value:"southeastasia",label:"Southeast Asia"},{value:"qatarcentral",label:"Qatar Central"},{value:"southafricanorth",label:"South Africa North"},{value:"uaenorth",label:"UAE North"}],ww=[{mode:"text-to-speech",label:"Text to Speech",icon:C.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})},{mode:"multi-talker",label:"Podcast Generator",icon:C.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{mode:"voice-changer",label:"Voice Changer",icon:C.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}];function Rw({activeMode:r,onModeChange:n,settings:s,onSettingsChange:h,showPodcastGenerator:a=!1}){const[l,c]=L.useState(!1),o=ww.filter(({mode:u})=>!(u==="multi-talker"&&!a));return C.jsxs("div",{className:`h-full bg-gray-900 text-white flex flex-col flex-shrink-0 transition-all duration-300 ${l?"w-16":"w-56"}`,children:[C.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[!l&&C.jsxs("div",{children:[C.jsx("h1",{className:"text-lg font-bold text-white",children:"Azure Voice"}),C.jsx("p",{className:"text-xs text-gray-400",children:"Playground"})]}),C.jsx("button",{onClick:()=>c(!l),className:`p-1.5 rounded-lg hover:bg-gray-800 transition-colors ${l?"mx-auto":""}`,title:l?"Expand sidebar":"Collapse sidebar",children:C.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),C.jsxs("div",{className:"p-3",children:[!l&&C.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2 px-2",children:"Playground"}),C.jsx("nav",{className:"space-y-1",children:o.map(({mode:u,label:d,icon:v})=>C.jsxs("button",{onClick:()=>n(u),title:l?d:void 0,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${r===u?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"} ${l?"justify-center":""}`,children:[v,!l&&C.jsx("span",{children:d})]},u))})]}),C.jsx("div",{className:"border-t border-gray-700 mx-3 my-2"}),C.jsxs("div",{className:`flex-1 overflow-y-auto p-3 ${l?"hidden":""}`,children:[C.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-3 px-2",children:"Azure Config"}),C.jsxs("div",{className:"space-y-2 px-2 mb-4",children:[C.jsx("label",{className:"block text-xs font-medium text-gray-400",children:"API Key"}),C.jsx("input",{type:"password",value:s.apiKey,onChange:u=>{const d=u.target.value;d!==s.apiKey&&h({apiKey:d})},placeholder:"Enter API key",autoComplete:"new-password","data-lpignore":"true","data-form-type":"other",className:"w-full px-2 py-1.5 text-sm bg-gray-800 border border-gray-700 rounded text-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"}),C.jsx("a",{href:"https://portal.azure.com/#view/Microsoft_Azure_ProjectOxford/CognitiveServicesHub/~/SpeechServices",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-400 hover:text-blue-300 underline",children:"Get API key"})]}),C.jsxs("div",{className:"space-y-2 px-2",children:[C.jsx("label",{className:"block text-xs font-medium text-gray-400",children:"Region"}),C.jsx("select",{value:s.region,onChange:u=>h({region:u.target.value}),className:"w-full px-2 py-1.5 text-sm bg-gray-800 border border-gray-700 rounded text-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:Pw.map(u=>C.jsx("option",{value:u.value,children:u.label},u.value))})]}),C.jsxs("div",{className:"mt-6 p-3 bg-yellow-900/30 border border-yellow-700/50 rounded-md",children:[C.jsx("h3",{className:"text-xs font-semibold text-yellow-400 mb-1",children:"Security Notice"}),C.jsx("p",{className:"text-xs text-yellow-200/70",children:"Your API key is stored in browser localStorage. Never share your key or use on untrusted devices."})]}),C.jsxs("div",{className:"mt-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded-md",children:[C.jsx("h3",{className:"text-xs font-semibold text-blue-400 mb-2",children:"Getting Started"}),C.jsxs("ol",{className:"text-xs text-blue-200/70 space-y-1 list-decimal list-inside",children:[C.jsx("li",{children:C.jsx("a",{href:"https://portal.azure.com/#view/Microsoft_Azure_ProjectOxford/CognitiveServicesHub/~/SpeechServices",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"Get API key from Azure"})}),C.jsx("li",{children:"Select your Azure region"}),C.jsx("li",{children:"Choose a voice"}),C.jsx("li",{children:"Enter text and click Play"})]})]})]}),l&&C.jsx("div",{className:"flex-1 flex flex-col items-center pt-2",children:C.jsx("div",{className:"p-2 text-gray-500",title:"Expand to configure Azure settings",children:C.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),C.jsx("div",{className:"p-3 border-t border-gray-700",children:!l&&C.jsx("p",{className:"text-xs text-gray-500 text-center",children:"API key stored locally"})})]})}var Wr={},Hr={},Ni={},Vr={},Oe={},Hl={},Kr={},Vl={},Oi={},Gc={},yf;function sC(){if(yf)return Gc;yf=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.default=s;let r;const n=new Uint8Array(16);function s(){if(!r&&(r=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)}return Gc}var Ln={},ji={},Di={},Sf;function Ew(){if(Sf)return Di;Sf=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.default=void 0;var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Di.default=r,Di}var Cf;function Yc(){if(Cf)return ji;Cf=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.default=void 0;var r=n(Ew());function n(a){return a&&a.__esModule?a:{default:a}}function s(a){return typeof a=="string"&&r.default.test(a)}var h=s;return ji.default=h,ji}var Pf;function Xc(){if(Pf)return Ln;Pf=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.default=void 0,Ln.unsafeStringify=h;var r=n(Yc());function n(c){return c&&c.__esModule?c:{default:c}}const s=[];for(let c=0;c<256;++c)s.push((c+256).toString(16).slice(1));function h(c,o=0){return s[c[o+0]]+s[c[o+1]]+s[c[o+2]]+s[c[o+3]]+"-"+s[c[o+4]]+s[c[o+5]]+"-"+s[c[o+6]]+s[c[o+7]]+"-"+s[c[o+8]]+s[c[o+9]]+"-"+s[c[o+10]]+s[c[o+11]]+s[c[o+12]]+s[c[o+13]]+s[c[o+14]]+s[c[o+15]]}function a(c,o=0){const u=h(c,o);if(!(0,r.default)(u))throw TypeError("Stringified UUID is invalid");return u}var l=a;return Ln.default=l,Ln}var wf;function Tw(){if(wf)return Oi;wf=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.default=void 0;var r=s(sC()),n=Xc();function s(d){return d&&d.__esModule?d:{default:d}}let h,a,l=0,c=0;function o(d,v,f){let m=v&&f||0;const y=v||new Array(16);d=d||{};let w=d.node||h,P=d.clockseq!==void 0?d.clockseq:a;if(w==null||P==null){const z=d.random||(d.rng||r.default)();w==null&&(w=h=[z[0]|1,z[1],z[2],z[3],z[4],z[5]]),P==null&&(P=a=(z[6]<<8|z[7])&16383)}let T=d.msecs!==void 0?d.msecs:Date.now(),R=d.nsecs!==void 0?d.nsecs:c+1;const A=T-l+(R-c)/1e4;if(A<0&&d.clockseq===void 0&&(P=P+1&16383),(A<0||T>l)&&d.nsecs===void 0&&(R=0),R>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=T,c=R,a=P,T+=122192928e5;const b=((T&268435455)*1e4+R)%4294967296;y[m++]=b>>>24&255,y[m++]=b>>>16&255,y[m++]=b>>>8&255,y[m++]=b&255;const x=T/4294967296*1e4&268435455;y[m++]=x>>>8&255,y[m++]=x&255,y[m++]=x>>>24&15|16,y[m++]=x>>>16&255,y[m++]=P>>>8|128,y[m++]=P&255;for(let z=0;z<6;++z)y[m+z]=w[z];return v||(0,n.unsafeStringify)(y)}var u=o;return Oi.default=u,Oi}var zi={},wr={},Li={},Rf;function aC(){if(Rf)return Li;Rf=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.default=void 0;var r=n(Yc());function n(a){return a&&a.__esModule?a:{default:a}}function s(a){if(!(0,r.default)(a))throw TypeError("Invalid UUID");let l;const c=new Uint8Array(16);return c[0]=(l=parseInt(a.slice(0,8),16))>>>24,c[1]=l>>>16&255,c[2]=l>>>8&255,c[3]=l&255,c[4]=(l=parseInt(a.slice(9,13),16))>>>8,c[5]=l&255,c[6]=(l=parseInt(a.slice(14,18),16))>>>8,c[7]=l&255,c[8]=(l=parseInt(a.slice(19,23),16))>>>8,c[9]=l&255,c[10]=(l=parseInt(a.slice(24,36),16))/1099511627776&255,c[11]=l/4294967296&255,c[12]=l>>>24&255,c[13]=l>>>16&255,c[14]=l>>>8&255,c[15]=l&255,c}var h=s;return Li.default=h,Li}var Ef;function cC(){if(Ef)return wr;Ef=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.URL=wr.DNS=void 0,wr.default=c;var r=Xc(),n=s(aC());function s(o){return o&&o.__esModule?o:{default:o}}function h(o){o=unescape(encodeURIComponent(o));const u=[];for(let d=0;d<o.length;++d)u.push(o.charCodeAt(d));return u}const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";wr.DNS=a;const l="6ba7b811-9dad-11d1-80b4-00c04fd430c8";wr.URL=l;function c(o,u,d){function v(f,m,y,w){var P;if(typeof f=="string"&&(f=h(f)),typeof m=="string"&&(m=(0,n.default)(m)),((P=m)===null||P===void 0?void 0:P.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let T=new Uint8Array(16+f.length);if(T.set(m),T.set(f,m.length),T=d(T),T[6]=T[6]&15|u,T[8]=T[8]&63|128,y){w=w||0;for(let R=0;R<16;++R)y[w+R]=T[R];return y}return(0,r.unsafeStringify)(T)}try{v.name=o}catch{}return v.DNS=a,v.URL=l,v}return wr}var qi={},Tf;function Aw(){if(Tf)return qi;Tf=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.default=void 0;function r(y){if(typeof y=="string"){const w=unescape(encodeURIComponent(y));y=new Uint8Array(w.length);for(let P=0;P<w.length;++P)y[P]=w.charCodeAt(P)}return n(h(a(y),y.length*8))}function n(y){const w=[],P=y.length*32,T="0123456789abcdef";for(let R=0;R<P;R+=8){const A=y[R>>5]>>>R%32&255,b=parseInt(T.charAt(A>>>4&15)+T.charAt(A&15),16);w.push(b)}return w}function s(y){return(y+64>>>9<<4)+14+1}function h(y,w){y[w>>5]|=128<<w%32,y[s(w)-1]=w;let P=1732584193,T=-271733879,R=-1732584194,A=271733878;for(let b=0;b<y.length;b+=16){const x=P,z=T,N=R,F=A;P=u(P,T,R,A,y[b],7,-680876936),A=u(A,P,T,R,y[b+1],12,-389564586),R=u(R,A,P,T,y[b+2],17,606105819),T=u(T,R,A,P,y[b+3],22,-1044525330),P=u(P,T,R,A,y[b+4],7,-176418897),A=u(A,P,T,R,y[b+5],12,1200080426),R=u(R,A,P,T,y[b+6],17,-1473231341),T=u(T,R,A,P,y[b+7],22,-45705983),P=u(P,T,R,A,y[b+8],7,1770035416),A=u(A,P,T,R,y[b+9],12,-1958414417),R=u(R,A,P,T,y[b+10],17,-42063),T=u(T,R,A,P,y[b+11],22,-1990404162),P=u(P,T,R,A,y[b+12],7,1804603682),A=u(A,P,T,R,y[b+13],12,-40341101),R=u(R,A,P,T,y[b+14],17,-1502002290),T=u(T,R,A,P,y[b+15],22,1236535329),P=d(P,T,R,A,y[b+1],5,-165796510),A=d(A,P,T,R,y[b+6],9,-1069501632),R=d(R,A,P,T,y[b+11],14,643717713),T=d(T,R,A,P,y[b],20,-373897302),P=d(P,T,R,A,y[b+5],5,-701558691),A=d(A,P,T,R,y[b+10],9,38016083),R=d(R,A,P,T,y[b+15],14,-660478335),T=d(T,R,A,P,y[b+4],20,-405537848),P=d(P,T,R,A,y[b+9],5,568446438),A=d(A,P,T,R,y[b+14],9,-1019803690),R=d(R,A,P,T,y[b+3],14,-187363961),T=d(T,R,A,P,y[b+8],20,1163531501),P=d(P,T,R,A,y[b+13],5,-1444681467),A=d(A,P,T,R,y[b+2],9,-51403784),R=d(R,A,P,T,y[b+7],14,1735328473),T=d(T,R,A,P,y[b+12],20,-1926607734),P=v(P,T,R,A,y[b+5],4,-378558),A=v(A,P,T,R,y[b+8],11,-2022574463),R=v(R,A,P,T,y[b+11],16,1839030562),T=v(T,R,A,P,y[b+14],23,-35309556),P=v(P,T,R,A,y[b+1],4,-1530992060),A=v(A,P,T,R,y[b+4],11,1272893353),R=v(R,A,P,T,y[b+7],16,-155497632),T=v(T,R,A,P,y[b+10],23,-1094730640),P=v(P,T,R,A,y[b+13],4,681279174),A=v(A,P,T,R,y[b],11,-358537222),R=v(R,A,P,T,y[b+3],16,-722521979),T=v(T,R,A,P,y[b+6],23,76029189),P=v(P,T,R,A,y[b+9],4,-640364487),A=v(A,P,T,R,y[b+12],11,-421815835),R=v(R,A,P,T,y[b+15],16,530742520),T=v(T,R,A,P,y[b+2],23,-995338651),P=f(P,T,R,A,y[b],6,-198630844),A=f(A,P,T,R,y[b+7],10,1126891415),R=f(R,A,P,T,y[b+14],15,-1416354905),T=f(T,R,A,P,y[b+5],21,-57434055),P=f(P,T,R,A,y[b+12],6,1700485571),A=f(A,P,T,R,y[b+3],10,-1894986606),R=f(R,A,P,T,y[b+10],15,-1051523),T=f(T,R,A,P,y[b+1],21,-2054922799),P=f(P,T,R,A,y[b+8],6,1873313359),A=f(A,P,T,R,y[b+15],10,-30611744),R=f(R,A,P,T,y[b+6],15,-1560198380),T=f(T,R,A,P,y[b+13],21,1309151649),P=f(P,T,R,A,y[b+4],6,-145523070),A=f(A,P,T,R,y[b+11],10,-1120210379),R=f(R,A,P,T,y[b+2],15,718787259),T=f(T,R,A,P,y[b+9],21,-343485551),P=l(P,x),T=l(T,z),R=l(R,N),A=l(A,F)}return[P,T,R,A]}function a(y){if(y.length===0)return[];const w=y.length*8,P=new Uint32Array(s(w));for(let T=0;T<w;T+=8)P[T>>5]|=(y[T/8]&255)<<T%32;return P}function l(y,w){const P=(y&65535)+(w&65535);return(y>>16)+(w>>16)+(P>>16)<<16|P&65535}function c(y,w){return y<<w|y>>>32-w}function o(y,w,P,T,R,A){return l(c(l(l(w,y),l(T,A)),R),P)}function u(y,w,P,T,R,A,b){return o(w&P|~w&T,y,w,R,A,b)}function d(y,w,P,T,R,A,b){return o(w&T|P&~T,y,w,R,A,b)}function v(y,w,P,T,R,A,b){return o(w^P^T,y,w,R,A,b)}function f(y,w,P,T,R,A,b){return o(P^(w|~T),y,w,R,A,b)}var m=r;return qi.default=m,qi}var Af;function bw(){if(Af)return zi;Af=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.default=void 0;var r=s(cC()),n=s(Aw());function s(l){return l&&l.__esModule?l:{default:l}}var a=(0,r.default)("v3",48,n.default);return zi.default=a,zi}var Bi={},Fi={},bf;function Iw(){if(bf)return Fi;bf=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.default=void 0;var n={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Fi.default=n,Fi}var If;function _w(){if(If)return Bi;If=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.default=void 0;var r=h(Iw()),n=h(sC()),s=Xc();function h(c){return c&&c.__esModule?c:{default:c}}function a(c,o,u){if(r.default.randomUUID&&!o&&!c)return r.default.randomUUID();c=c||{};const d=c.random||(c.rng||n.default)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,o){u=u||0;for(let v=0;v<16;++v)o[u+v]=d[v];return o}return(0,s.unsafeStringify)(d)}var l=a;return Bi.default=l,Bi}var Ui={},Wi={},_f;function kw(){if(_f)return Wi;_f=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.default=void 0;function r(a,l,c,o){switch(a){case 0:return l&c^~l&o;case 1:return l^c^o;case 2:return l&c^l&o^c&o;case 3:return l^c^o}}function n(a,l){return a<<l|a>>>32-l}function s(a){const l=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){const v=unescape(encodeURIComponent(a));a=[];for(let f=0;f<v.length;++f)a.push(v.charCodeAt(f))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);const o=a.length/4+2,u=Math.ceil(o/16),d=new Array(u);for(let v=0;v<u;++v){const f=new Uint32Array(16);for(let m=0;m<16;++m)f[m]=a[v*64+m*4]<<24|a[v*64+m*4+1]<<16|a[v*64+m*4+2]<<8|a[v*64+m*4+3];d[v]=f}d[u-1][14]=(a.length-1)*8/Math.pow(2,32),d[u-1][14]=Math.floor(d[u-1][14]),d[u-1][15]=(a.length-1)*8&4294967295;for(let v=0;v<u;++v){const f=new Uint32Array(80);for(let R=0;R<16;++R)f[R]=d[v][R];for(let R=16;R<80;++R)f[R]=n(f[R-3]^f[R-8]^f[R-14]^f[R-16],1);let m=c[0],y=c[1],w=c[2],P=c[3],T=c[4];for(let R=0;R<80;++R){const A=Math.floor(R/20),b=n(m,5)+r(A,y,w,P)+T+l[A]+f[R]>>>0;T=P,P=w,w=n(y,30)>>>0,y=m,m=b}c[0]=c[0]+m>>>0,c[1]=c[1]+y>>>0,c[2]=c[2]+w>>>0,c[3]=c[3]+P>>>0,c[4]=c[4]+T>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,c[0]&255,c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,c[1]&255,c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,c[2]&255,c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,c[3]&255,c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,c[4]&255]}var h=s;return Wi.default=h,Wi}var kf;function xw(){if(kf)return Ui;kf=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.default=void 0;var r=s(cC()),n=s(kw());function s(l){return l&&l.__esModule?l:{default:l}}var a=(0,r.default)("v5",80,n.default);return Ui.default=a,Ui}var Hi={},xf;function Mw(){if(xf)return Hi;xf=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.default=void 0;var r="00000000-0000-0000-0000-000000000000";return Hi.default=r,Hi}var Vi={},Mf;function Nw(){if(Mf)return Vi;Mf=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.default=void 0;var r=n(Yc());function n(a){return a&&a.__esModule?a:{default:a}}function s(a){if(!(0,r.default)(a))throw TypeError("Invalid UUID");return parseInt(a.slice(14,15),16)}var h=s;return Vi.default=h,Vi}var Nf;function Ow(){return Nf||(Nf=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=v(Tw()),s=v(bw()),h=v(_w()),a=v(xw()),l=v(Mw()),c=v(Nw()),o=v(Yc()),u=v(Xc()),d=v(aC());function v(f){return f&&f.__esModule?f:{default:f}}})(Vl)),Vl}var Of;function ln(){if(Of)return Kr;Of=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.createNoDashGuid=Kr.createGuid=void 0;const r=Ow(),n=()=>(0,r.v4)();Kr.createGuid=n;const s=()=>n().replace(new RegExp("-","g"),"").toUpperCase();return Kr.createNoDashGuid=s,Kr}var jf;function Ea(){return jf||(jf=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PlatformEvent=r.EventType=void 0;const n=ln();(function(h){h[h.Debug=0]="Debug",h[h.Info=1]="Info",h[h.Warning=2]="Warning",h[h.Error=3]="Error",h[h.None=4]="None"})(r.EventType||(r.EventType={}));class s{constructor(a,l){this.privName=a,this.privEventId=(0,n.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=l,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}r.PlatformEvent=s})(Hl)),Hl}var Df;function jw(){if(Df)return Oe;Df=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.AudioStreamNodeErrorEvent=Oe.AudioStreamNodeDetachedEvent=Oe.AudioStreamNodeAttachedEvent=Oe.AudioStreamNodeAttachingEvent=Oe.AudioStreamNodeEvent=Oe.AudioSourceErrorEvent=Oe.AudioSourceOffEvent=Oe.AudioSourceReadyEvent=Oe.AudioSourceInitializingEvent=Oe.AudioSourceEvent=void 0;const r=Ea();class n extends r.PlatformEvent{constructor(m,y,w=r.EventType.Info){super(m,w),this.privAudioSourceId=y}get audioSourceId(){return this.privAudioSourceId}}Oe.AudioSourceEvent=n;class s extends n{constructor(m){super("AudioSourceInitializingEvent",m)}}Oe.AudioSourceInitializingEvent=s;class h extends n{constructor(m){super("AudioSourceReadyEvent",m)}}Oe.AudioSourceReadyEvent=h;class a extends n{constructor(m){super("AudioSourceOffEvent",m)}}Oe.AudioSourceOffEvent=a;class l extends n{constructor(m,y){super("AudioSourceErrorEvent",m,r.EventType.Error),this.privError=y}get error(){return this.privError}}Oe.AudioSourceErrorEvent=l;class c extends n{constructor(m,y,w){super(m,y),this.privAudioNodeId=w}get audioNodeId(){return this.privAudioNodeId}}Oe.AudioStreamNodeEvent=c;class o extends c{constructor(m,y){super("AudioStreamNodeAttachingEvent",m,y)}}Oe.AudioStreamNodeAttachingEvent=o;class u extends c{constructor(m,y){super("AudioStreamNodeAttachedEvent",m,y)}}Oe.AudioStreamNodeAttachedEvent=u;class d extends c{constructor(m,y){super("AudioStreamNodeDetachedEvent",m,y)}}Oe.AudioStreamNodeDetachedEvent=d;class v extends c{constructor(m,y,w){super("AudioStreamNodeErrorEvent",m,y),this.privError=w}get error(){return this.privError}}return Oe.AudioStreamNodeErrorEvent=v,Oe}var je={},zf;function Dw(){if(zf)return je;zf=1,Object.defineProperty(je,"__esModule",{value:!0}),je.ConnectionRedirectEvent=je.ConnectionMessageSentEvent=je.ConnectionMessageReceivedEvent=je.ConnectionEstablishErrorEvent=je.ConnectionErrorEvent=je.ConnectionClosedEvent=je.ConnectionEstablishedEvent=je.ConnectionStartEvent=je.ConnectionEvent=je.ServiceEvent=void 0;const r=Ea();class n extends r.PlatformEvent{constructor(m,y,w=r.EventType.Info){super(m,w),this.privJsonResult=y}get jsonString(){return this.privJsonResult}}je.ServiceEvent=n;class s extends r.PlatformEvent{constructor(m,y,w=r.EventType.Info){super(m,w),this.privConnectionId=y}get connectionId(){return this.privConnectionId}}je.ConnectionEvent=s;class h extends s{constructor(m,y,w){super("ConnectionStartEvent",m),this.privUri=y,this.privHeaders=w}get uri(){return this.privUri}get headers(){return this.privHeaders}}je.ConnectionStartEvent=h;class a extends s{constructor(m){super("ConnectionEstablishedEvent",m)}}je.ConnectionEstablishedEvent=a;class l extends s{constructor(m,y,w){super("ConnectionClosedEvent",m,r.EventType.Debug),this.privReason=w,this.privStatusCode=y}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}je.ConnectionClosedEvent=l;class c extends s{constructor(m,y,w){super("ConnectionErrorEvent",m,r.EventType.Debug),this.privMessage=y,this.privType=w}get message(){return this.privMessage}get type(){return this.privType}}je.ConnectionErrorEvent=c;class o extends s{constructor(m,y,w){super("ConnectionEstablishErrorEvent",m,r.EventType.Error),this.privStatusCode=y,this.privReason=w}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}je.ConnectionEstablishErrorEvent=o;class u extends s{constructor(m,y,w){super("ConnectionMessageReceivedEvent",m),this.privNetworkReceivedTime=y,this.privMessage=w}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}je.ConnectionMessageReceivedEvent=u;class d extends s{constructor(m,y,w){super("ConnectionMessageSentEvent",m),this.privNetworkSentTime=y,this.privMessage=w}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}je.ConnectionMessageSentEvent=d;class v extends s{constructor(m,y,w,P){super("ConnectionRedirectEvent",m,r.EventType.Info),this.privRedirectUrl=y,this.privOriginalUrl=w,this.privContext=P}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}return je.ConnectionRedirectEvent=v,je}var Kl={},Yt={},Lf;function Bt(){if(Lf)return Yt;Lf=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.ObjectDisposedError=Yt.InvalidOperationError=Yt.ArgumentNullError=void 0;class r extends Error{constructor(a){super(a),this.name="ArgumentNull",this.message=a}}Yt.ArgumentNullError=r;class n extends Error{constructor(a){super(a),this.name="InvalidOperation",this.message=a}}Yt.InvalidOperationError=n;class s extends Error{constructor(a,l){super(l),this.name=a+"ObjectDisposed",this.message=l}}return Yt.ObjectDisposedError=s,Yt}var qf;function uC(){return qf||(qf=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionMessage=r.MessageType=void 0;const n=Bt(),s=ln();var h;(function(l){l[l.Text=0]="Text",l[l.Binary=1]="Binary"})(h=r.MessageType||(r.MessageType={}));class a{constructor(c,o,u,d){if(this.privBody=null,c===h.Text&&o&&typeof o!="string")throw new n.InvalidOperationError("Payload must be a string");if(c===h.Binary&&o&&!(o instanceof ArrayBuffer))throw new n.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=c,this.privBody=o,this.privHeaders=u||{},this.privId=d||(0,s.createNoDashGuid)(),this.messageType){case h.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case h.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===h.Binary)throw new n.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===h.Text)throw new n.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}r.ConnectionMessage=a})(Kl)),Kl}var Ki={},Bf;function zw(){if(Bf)return Ki;Bf=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.ConnectionOpenResponse=void 0;let r=class{constructor(s,h){this.privStatusCode=s,this.privReason=h}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};return Ki.ConnectionOpenResponse=r,Ki}var Gi={},Ff;function Lw(){if(Ff)return Gi;Ff=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.DeferralMap=void 0;let r=class{constructor(){this.privMap={}}add(s,h){this.privMap[s]=h}getId(s){return this.privMap[s]}complete(s,h){try{this.privMap[s].resolve(h)}catch(a){this.privMap[s].reject(a)}finally{this.privMap[s]=void 0}}};return Gi.DeferralMap=r,Gi}var Gr={},Uf;function lC(){if(Uf)return Gr;Uf=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.SendingAgentContextMessageEvent=Gr.DialogEvent=void 0;const r=Ea();class n extends r.PlatformEvent{constructor(a,l=r.EventType.Info){super(a,l)}}Gr.DialogEvent=n;class s extends n{constructor(a){super("SendingAgentContextMessageEvent"),this.privAgentConfig=a}get agentConfig(){return this.privAgentConfig}}return Gr.SendingAgentContextMessageEvent=s,Gr}var Ji={},Qi={},Wf;function dC(){if(Wf)return Qi;Wf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.EventSource=void 0;const r=Bt(),n=ln();let s=class{constructor(a){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=a}onEvent(a){if(this.isDisposed())throw new r.ObjectDisposedError("EventSource");if(this.metadata)for(const l in this.metadata)l&&a.metadata&&(a.metadata[l]||(a.metadata[l]=this.metadata[l]));for(const l in this.privEventListeners)l&&this.privEventListeners[l]&&this.privEventListeners[l](a)}attach(a){const l=(0,n.createNoDashGuid)();return this.privEventListeners[l]=a,{detach:()=>(delete this.privEventListeners[l],Promise.resolve())}}attachListener(a){return this.attach(l=>a.onEvent(l))}attachConsoleListener(a){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(l=>a.onEvent(l)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};return Qi.EventSource=s,Qi}var Hf;function qw(){if(Hf)return Ji;Hf=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.Events=void 0;const r=Bt(),n=dC();let s=class sp{static setEventSource(a){if(!a)throw new r.ArgumentNullError("eventSource");sp.privInstance=a}static get instance(){return sp.privInstance}};return Ji.Events=s,s.privInstance=new n.EventSource,Ji}var Gl={},Vf;function Bw(){return Vf||(Vf=1,Object.defineProperty(Gl,"__esModule",{value:!0})),Gl}var Jl={},Kf;function Fw(){return Kf||(Kf=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionState=void 0,(function(n){n[n.None=0]="None",n[n.Connected=1]="Connected",n[n.Connecting=2]="Connecting",n[n.Disconnected=3]="Disconnected"})(r.ConnectionState||(r.ConnectionState={}))})(Jl)),Jl}var Ql={},Gf;function Uw(){return Gf||(Gf=1,Object.defineProperty(Ql,"__esModule",{value:!0})),Ql}var Yl={},Jf;function Ww(){return Jf||(Jf=1,Object.defineProperty(Yl,"__esModule",{value:!0})),Yl}var Xl={},Qf;function Hw(){return Qf||(Qf=1,Object.defineProperty(Xl,"__esModule",{value:!0})),Xl}var Zl={},Yf;function Vw(){return Yf||(Yf=1,Object.defineProperty(Zl,"__esModule",{value:!0})),Zl}var $l={},Xf;function Kw(){return Xf||(Xf=1,Object.defineProperty($l,"__esModule",{value:!0})),$l}var ed={},Zf;function Gw(){return Zf||(Zf=1,Object.defineProperty(ed,"__esModule",{value:!0})),ed}var td={},$f;function Jw(){return $f||($f=1,Object.defineProperty(td,"__esModule",{value:!0})),td}var rd={},eg;function Qw(){return eg||(eg=1,Object.defineProperty(rd,"__esModule",{value:!0})),rd}var Yi={},tg;function pC(){if(tg)return Yi;tg=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.List=void 0;const r=Bt();let n=class cn{constructor(h){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],h)for(const a of h)this.privList.push(a)}get(h){return this.throwIfDisposed(),this.privList[h]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(h){this.throwIfDisposed(),this.insertAt(this.privList.length,h)}insertAt(h,a){this.throwIfDisposed(),h===0?this.privList.unshift(a):h===this.privList.length?this.privList.push(a):this.privList.splice(h,0,a),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(h){return this.throwIfDisposed(),this.remove(h,1)[0]}remove(h,a){this.throwIfDisposed();const l=this.privList.splice(h,a);return this.triggerSubscriptions(this.privRemoveSubscriptions),l}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(h){this.throwIfDisposed();const a=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[a]=h,{detach:()=>(delete this.privAddSubscriptions[a],Promise.resolve())}}onRemoved(h){this.throwIfDisposed();const a=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[a]=h,{detach:()=>(delete this.privRemoveSubscriptions[a],Promise.resolve())}}onDisposed(h){this.throwIfDisposed();const a=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[a]=h,{detach:()=>(delete this.privDisposedSubscriptions[a],Promise.resolve())}}join(h){return this.throwIfDisposed(),this.privList.join(h)}toArray(){const h=Array();return this.privList.forEach(a=>{h.push(a)}),h}any(h){return this.throwIfDisposed(),h?this.where(h).length()>0:this.length()>0}all(h){return this.throwIfDisposed(),this.where(h).length()===this.length()}forEach(h){this.throwIfDisposed();for(let a=0;a<this.length();a++)h(this.privList[a],a)}select(h){this.throwIfDisposed();const a=[];for(let l=0;l<this.privList.length;l++)a.push(h(this.privList[l],l));return new cn(a)}where(h){this.throwIfDisposed();const a=new cn;for(let l=0;l<this.privList.length;l++)h(this.privList[l],l)&&a.add(this.privList[l]);return a}orderBy(h){this.throwIfDisposed();const l=this.toArray().sort(h);return new cn(l)}orderByDesc(h){return this.throwIfDisposed(),this.orderBy((a,l)=>h(l,a))}clone(){return this.throwIfDisposed(),new cn(this.toArray())}concat(h){return this.throwIfDisposed(),new cn(this.privList.concat(h.toArray()))}concatArray(h){return this.throwIfDisposed(),new cn(this.privList.concat(h))}isDisposed(){return this.privList==null}dispose(h){this.isDisposed()||(this.privDisposeReason=h,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new r.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(h){if(h)for(const a in h)a&&h[a]()}};return Yi.List=n,Yi}var nd={},rg;function hC(){return rg||(rg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.marshalPromiseToCallbacks=r.Sink=r.Deferred=r.PromiseResultEventSource=r.PromiseResult=r.PromiseState=void 0;var n;(function(o){o[o.None=0]="None",o[o.Resolved=1]="Resolved",o[o.Rejected=2]="Rejected"})(n=r.PromiseState||(r.PromiseState={}));class s{constructor(u){this.throwIfError=()=>{if(this.isError)throw this.error},u.on(d=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=d)},d=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=d)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}r.PromiseResult=s;class h{constructor(){this.setResult=u=>{this.privOnSetResult(u)},this.setError=u=>{this.privOnSetError(u)},this.on=(u,d)=>{this.privOnSetResult=u,this.privOnSetError=d}}}r.PromiseResultEventSource=h;class a{constructor(){this.resolve=u=>(this.privResolve(u),this),this.reject=u=>(this.privReject(u),this),this.privPromise=new Promise((u,d)=>{this.privResolve=u,this.privReject=d})}get promise(){return this.privPromise}}r.Deferred=a;class l{constructor(){this.privState=n.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new h,this.privPromiseResult=new s(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(u){if(this.privState!==n.None)throw new Error("'Cannot resolve a completed promise'");this.privState=n.Resolved,this.privPromiseResultEvents.setResult(u);for(let d=0;d<this.privSuccessHandlers.length;d++)this.executeSuccessCallback(u,this.privSuccessHandlers[d],this.privErrorHandlers[d]);this.detachHandlers()}reject(u){if(this.privState!==n.None)throw new Error("'Cannot reject a completed promise'");this.privState=n.Rejected,this.privPromiseResultEvents.setError(u);for(const d of this.privErrorHandlers)this.executeErrorCallback(u,d);this.detachHandlers()}on(u,d){u==null&&(u=()=>{}),this.privState===n.None?(this.privSuccessHandlers.push(u),this.privErrorHandlers.push(d)):(this.privState===n.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,u,d):this.privState===n.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,d),this.detachHandlers())}executeSuccessCallback(u,d,v){try{d(u)}catch(f){this.executeErrorCallback(`'Unhandled callback error: ${f}'`,v)}}executeErrorCallback(u,d){if(d)try{d(u)}catch(v){throw new Error(`'Unhandled callback error: ${v}. InnerError: ${u}'`)}else throw new Error(`'Unhandled error: ${u}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}r.Sink=l;function c(o,u,d){o.then(v=>{try{u&&u(v)}catch(f){if(d)try{if(f instanceof Error){const m=f;d(m.name+": "+m.message)}else d(f)}catch{}}},v=>{if(d)try{if(v instanceof Error){const f=v;d(f.name+": "+f.message)}else d(v)}catch{}})}r.marshalPromiseToCallbacks=c})(nd)),nd}var Xi={},ng;function vC(){if(ng)return Xi;ng=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.Queue=void 0;const r=Bt(),n=pC(),s=hC();var h;(function(l){l[l.Dequeue=0]="Dequeue",l[l.Peek=1]="Peek"})(h||(h={}));let a=class{constructor(c){this.privPromiseStore=new n.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=c||new n.List,this.privDetachables=[],this.privSubscribers=new n.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(c){this.throwIfDispose(),this.enqueueFromPromise(new Promise(o=>o(c)))}enqueueFromPromise(c){this.throwIfDispose(),c.then(o=>{this.privList.add(o)},()=>{})}dequeue(){this.throwIfDispose();const c=new s.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:c,type:h.Dequeue}),this.drain()),c.promise}peek(){this.throwIfDispose();const c=new s.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:c,type:h.Peek}),this.drain()),c.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(c,o){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=o,this.privIsDisposing=!0;const u=this.privSubscribers;if(u){for(;u.length()>0;)u.removeFirst().deferral.resolve(void 0);this.privSubscribers===u&&(this.privSubscribers=u)}for(const d of this.privDetachables)await d.detach();if(this.privPromiseStore.length()>0&&c){const d=[];return this.privPromiseStore.toArray().forEach(v=>{d.push(v)}),Promise.all(d).finally(()=>{this.privSubscribers=null,this.privList.forEach(v=>{c(v)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(c){await this.drainAndDispose(null,c)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const c=this.privSubscribers,o=this.privList;if(c&&o){for(;o.length()>0&&c.length()>0&&!this.privIsDisposing;){const u=c.removeFirst();if(u.type===h.Peek)u.deferral.resolve(o.first());else{const d=o.removeFirst();u.deferral.resolve(d)}}this.privSubscribers===c&&(this.privSubscribers=c),this.privList===o&&(this.privList=o)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new r.InvalidOperationError(this.privDisposeReason):new r.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new r.InvalidOperationError("Queue disposing")}};return Xi.Queue=a,Xi}var Zi={},ig;function Yw(){if(ig)return Zi;ig=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.RawWebsocketMessage=void 0;const r=uC(),n=Bt(),s=ln();let h=class{constructor(l,c,o){if(this.privPayload=null,!c)throw new n.ArgumentNullError("payload");if(l===r.MessageType.Binary&&Object.getPrototypeOf(c).constructor.name!=="ArrayBuffer")throw new n.InvalidOperationError("Payload must be ArrayBuffer");if(l===r.MessageType.Text&&typeof c!="string")throw new n.InvalidOperationError("Payload must be a string");this.privMessageType=l,this.privPayload=c,this.privId=o||(0,s.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===r.MessageType.Binary)throw new n.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===r.MessageType.Text)throw new n.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};return Zi.RawWebsocketMessage=h,Zi}var $i={},og;function Xw(){if(og)return $i;og=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.RiffPcmEncoder=void 0;let r=class{constructor(s,h){this.privActualSampleRate=s,this.privDesiredSampleRate=h}encode(s){const h=this.downSampleAudioFrame(s,this.privActualSampleRate,this.privDesiredSampleRate);if(!h)return null;const a=h.length*2,l=new ArrayBuffer(a),c=new DataView(l);return this.floatTo16BitPCM(c,0,h),l}setString(s,h,a){for(let l=0;l<a.length;l++)s.setUint8(h+l,a.charCodeAt(l))}floatTo16BitPCM(s,h,a){for(let l=0;l<a.length;l++,h+=2){const c=Math.max(-1,Math.min(1,a[l]));s.setInt16(h,c<0?c*32768:c*32767,!0)}}downSampleAudioFrame(s,h,a){if(!s)return null;if(a===h||a>h)return s;const l=h/a,c=Math.round(s.length/l),o=new Float32Array(c);let u=0,d=0;for(;d<c;){const v=Math.round((d+1)*l);let f=0,m=0;for(;u<v&&u<s.length;)f+=s[u++],m++;o[d++]=f/m}return o}};return $i.RiffPcmEncoder=r,$i}var eo={},sg;function Zw(){if(sg)return eo;sg=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.Stream=void 0;const r=Bt(),n=ln(),s=vC();let h=class{constructor(l){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=l||(0,n.createNoDashGuid)(),this.privReaderQueue=new s.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(l){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(l)}catch{}}read(){if(this.privIsReadEnded)throw new r.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async l=>((l===void 0||l.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),l))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new s.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new r.InvalidOperationError("Stream closed")}};return eo.Stream=h,eo}var id={},ag;function gp(){return ag||(ag=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TranslationStatus=void 0,(function(n){n[n.Success=0]="Success",n[n.Error=1]="Error"})(r.TranslationStatus||(r.TranslationStatus={}))})(id)),id}var to={},cg;function $w(){if(cg)return to;cg=1,Object.defineProperty(to,"__esModule",{value:!0}),to.ChunkedArrayBufferStream=void 0;const r=ae();let n=class extends r.Stream{constructor(h,a){super(a),this.privTargetChunkSize=Math.round(h),this.privNextBufferReadyBytes=0}writeStreamChunk(h){if(h.isEnd||this.privNextBufferReadyBytes===0&&h.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(h);return}let a=0;for(;a<h.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=h.timeReceived);const l=Math.min(h.buffer.byteLength-a,this.privTargetChunkSize-this.privNextBufferReadyBytes),c=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(h.buffer.slice(a,l+a));c.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=l,a+=l,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return to.ChunkedArrayBufferStream=n,to}var od={},ug;function eR(){return ug||(ug=1,Object.defineProperty(od,"__esModule",{value:!0})),od}var ro={},lg;function tR(){if(lg)return ro;lg=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.Timeout=void 0;let r=class Rr{static load(){const s=new Map([[0,()=>{}]]),h=new Map,l="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),c=new Worker(l);return c.addEventListener("message",({data:d})=>{if(Rr.isCallNotification(d)){const{params:{timerId:v}}=d,f=s.get(v);if(typeof f=="number"){const m=h.get(f);if(m===void 0||m!==v)throw new Error("The timer is in an undefined state.")}else if(typeof f<"u")f(),s.delete(v);else throw new Error("The timer is in an undefined state.")}else if(Rr.isClearResponse(d)){const{id:v}=d,f=h.get(v);if(f===void 0)throw new Error("The timer is in an undefined state.");h.delete(v),s.delete(f)}else{const{error:{message:v}}=d;throw new Error(v)}}),{clearTimeout:d=>{const v=Math.random();h.set(v,d),s.set(d,v),c.postMessage({id:v,method:"clear",params:{timerId:d}})},setTimeout:(d,v)=>{const f=Math.random();return s.set(f,d),c.postMessage({id:null,method:"set",params:{delay:v,now:performance.now(),timerId:f}}),f}}}static loadWorkerTimers(){return()=>(Rr.workerTimers!==null||(Rr.workerTimers=Rr.load()),Rr.workerTimers)}static isCallNotification(s){return s.method!==void 0&&s.method==="call"}static isClearResponse(s){return s.error===null&&typeof s.id=="number"}};return ro.Timeout=r,r.workerTimers=null,r.clearTimeout=n=>r.timers().clearTimeout(n),r.setTimeout=(n,s)=>r.timers().setTimeout(n,s),r.timers=r.loadWorkerTimers(),ro}var ge={},dg;function rR(){if(dg)return ge;dg=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.OCSPCacheUpdateErrorEvent=ge.OCSPResponseRetrievedEvent=ge.OCSPCacheFetchErrorEvent=ge.OCSPVerificationFailedEvent=ge.OCSPCacheHitEvent=ge.OCSPCacheEntryNeedsRefreshEvent=ge.OCSPCacheEntryExpiredEvent=ge.OCSPWSUpgradeStartedEvent=ge.OCSPStapleReceivedEvent=ge.OCSPCacheUpdateCompleteEvent=ge.OCSPDiskCacheStoreEvent=ge.OCSPMemoryCacheStoreEvent=ge.OCSPCacheUpdateNeededEvent=ge.OCSPDiskCacheHitEvent=ge.OCSPCacheMissEvent=ge.OCSPMemoryCacheHitEvent=ge.OCSPEvent=void 0;const r=Ea();class n extends r.PlatformEvent{constructor(b,x,z){super(b,x),this.privSignature=z}}ge.OCSPEvent=n;class s extends n{constructor(b){super("OCSPMemoryCacheHitEvent",r.EventType.Debug,b)}}ge.OCSPMemoryCacheHitEvent=s;class h extends n{constructor(b){super("OCSPCacheMissEvent",r.EventType.Debug,b)}}ge.OCSPCacheMissEvent=h;class a extends n{constructor(b){super("OCSPDiskCacheHitEvent",r.EventType.Debug,b)}}ge.OCSPDiskCacheHitEvent=a;class l extends n{constructor(b){super("OCSPCacheUpdateNeededEvent",r.EventType.Debug,b)}}ge.OCSPCacheUpdateNeededEvent=l;class c extends n{constructor(b){super("OCSPMemoryCacheStoreEvent",r.EventType.Debug,b)}}ge.OCSPMemoryCacheStoreEvent=c;class o extends n{constructor(b){super("OCSPDiskCacheStoreEvent",r.EventType.Debug,b)}}ge.OCSPDiskCacheStoreEvent=o;class u extends n{constructor(b){super("OCSPCacheUpdateCompleteEvent",r.EventType.Debug,b)}}ge.OCSPCacheUpdateCompleteEvent=u;class d extends n{constructor(){super("OCSPStapleReceivedEvent",r.EventType.Debug,"")}}ge.OCSPStapleReceivedEvent=d;class v extends n{constructor(b){super("OCSPWSUpgradeStartedEvent",r.EventType.Debug,b)}}ge.OCSPWSUpgradeStartedEvent=v;class f extends n{constructor(b,x){super("OCSPCacheEntryExpiredEvent",r.EventType.Debug,b),this.privExpireTime=x}}ge.OCSPCacheEntryExpiredEvent=f;class m extends n{constructor(b,x,z){super("OCSPCacheEntryNeedsRefreshEvent",r.EventType.Debug,b),this.privExpireTime=z,this.privStartTime=x}}ge.OCSPCacheEntryNeedsRefreshEvent=m;class y extends n{constructor(b,x,z){super("OCSPCacheHitEvent",r.EventType.Debug,b),this.privExpireTime=z,this.privExpireTimeString=new Date(z).toLocaleDateString(),this.privStartTime=x,this.privStartTimeString=new Date(x).toLocaleTimeString()}}ge.OCSPCacheHitEvent=y;class w extends n{constructor(b,x){super("OCSPVerificationFailedEvent",r.EventType.Debug,b),this.privError=x}}ge.OCSPVerificationFailedEvent=w;class P extends n{constructor(b,x){super("OCSPCacheFetchErrorEvent",r.EventType.Debug,b),this.privError=x}}ge.OCSPCacheFetchErrorEvent=P;class T extends n{constructor(b){super("OCSPResponseRetrievedEvent",r.EventType.Debug,b)}}ge.OCSPResponseRetrievedEvent=T;class R extends n{constructor(b,x){super("OCSPCacheUpdateErrorEvent",r.EventType.Debug,b),this.privError=x}}return ge.OCSPCacheUpdateErrorEvent=R,ge}var no={},pg;function nR(){if(pg)return no;pg=1,Object.defineProperty(no,"__esModule",{value:!0}),no.BackgroundEvent=void 0;const r=ae();class n extends r.PlatformEvent{constructor(h){super("BackgroundEvent",r.EventType.Error),this.privError=h}get error(){return this.privError}}return no.BackgroundEvent=n,no}var hg;function ae(){return hg||(hg=1,(function(r){var n=Vr&&Vr.__createBinding||(Object.create?(function(a,l,c,o){o===void 0&&(o=c),Object.defineProperty(a,o,{enumerable:!0,get:function(){return l[c]}})}):(function(a,l,c,o){o===void 0&&(o=c),a[o]=l[c]})),s=Vr&&Vr.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&n(l,a,c)};Object.defineProperty(r,"__esModule",{value:!0}),r.TranslationStatus=void 0,s(jw(),r),s(Dw(),r),s(uC(),r),s(zw(),r),s(Lw(),r),s(lC(),r),s(Bt(),r),s(qw(),r),s(dC(),r),s(ln(),r),s(Bw(),r),s(Fw(),r),s(Uw(),r),s(Ww(),r),s(Hw(),r),s(Vw(),r),s(Kw(),r),s(Gw(),r),s(Jw(),r),s(Qw(),r),s(pC(),r),s(Ea(),r),s(hC(),r),s(vC(),r),s(Yw(),r),s(Xw(),r),s(Zw(),r);var h=gp();Object.defineProperty(r,"TranslationStatus",{enumerable:!0,get:function(){return h.TranslationStatus}}),s($w(),r),s(eR(),r),s(tR(),r),s(rR(),r),s(nR(),r)})(Vr)),Vr}var io={},vg;function gt(){if(vg)return io;vg=1,Object.defineProperty(io,"__esModule",{value:!0}),io.HeaderNames=void 0;let r=class{};return io.HeaderNames=r,r.AuthKey="Ocp-Apim-Subscription-Key",r.Authorization="Authorization",r.SpIDAuthKey="Apim-Subscription-Id",r.ConnectionId="X-ConnectionId",r.ContentType="Content-Type",r.CustomCommandsAppId="X-CommandsAppId",r.Path="Path",r.RequestId="X-RequestId",r.RequestStreamId="X-StreamId",r.RequestTimestamp="X-Timestamp",io}var oo={},fg;function mp(){if(fg)return oo;fg=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.AuthInfo=void 0;class r{constructor(s,h){this.privHeaderName=s,this.privToken=h}get headerName(){return this.privHeaderName}get token(){return this.privToken}}return oo.AuthInfo=r,oo}var gg;function iR(){if(gg)return Ni;gg=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.CognitiveSubscriptionKeyAuthentication=void 0;const r=ae(),n=gt(),s=mp();let h=class{constructor(l){if(!l)throw new r.ArgumentNullError("subscriptionKey");this.privAuthInfo=new s.AuthInfo(n.HeaderNames.AuthKey,l)}fetch(l){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(l){return Promise.resolve(this.privAuthInfo)}};return Ni.CognitiveSubscriptionKeyAuthentication=h,Ni}var so={},mg;function oR(){if(mg)return so;mg=1,Object.defineProperty(so,"__esModule",{value:!0}),so.CognitiveTokenAuthentication=void 0;const r=ae(),n=mp(),s=gt();let h=class ap{constructor(l,c){if(!l)throw new r.ArgumentNullError("fetchCallback");if(!c)throw new r.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=l,this.privFetchOnExpiryCallback=c}fetch(l){return this.privFetchCallback(l).then(c=>new n.AuthInfo(s.HeaderNames.Authorization,c===void 0?void 0:ap.privTokenPrefix+c))}fetchOnExpiry(l){return this.privFetchOnExpiryCallback(l).then(c=>new n.AuthInfo(s.HeaderNames.Authorization,c===void 0?void 0:ap.privTokenPrefix+c))}};return so.CognitiveTokenAuthentication=h,h.privTokenPrefix="Bearer ",so}var sd={},yg;function sR(){return yg||(yg=1,Object.defineProperty(sd,"__esModule",{value:!0})),sd}var ad={},Sg;function aR(){return Sg||(Sg=1,Object.defineProperty(ad,"__esModule",{value:!0})),ad}var cd={},Cg;function yp(){return Cg||(Cg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognitionEndedEvent=r.RecognitionCompletionStatus=r.RecognitionStartedEvent=r.ConnectingToServiceEvent=r.ListeningStartedEvent=r.RecognitionTriggeredEvent=r.SpeechRecognitionEvent=void 0;const n=ae();class s extends n.PlatformEvent{constructor(v,f,m,y=n.EventType.Info){super(v,y),this.privRequestId=f,this.privSessionId=m}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}r.SpeechRecognitionEvent=s;class h extends s{constructor(v,f,m,y){super("RecognitionTriggeredEvent",v,f),this.privAudioSourceId=m,this.privAudioNodeId=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}r.RecognitionTriggeredEvent=h;class a extends s{constructor(v,f,m,y){super("ListeningStartedEvent",v,f),this.privAudioSourceId=m,this.privAudioNodeId=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}r.ListeningStartedEvent=a;class l extends s{constructor(v,f,m){super("ConnectingToServiceEvent",v,m),this.privAuthFetchEventid=f}get authFetchEventid(){return this.privAuthFetchEventid}}r.ConnectingToServiceEvent=l;class c extends s{constructor(v,f,m,y,w){super("RecognitionStartedEvent",v,w),this.privAudioSourceId=f,this.privAudioNodeId=m,this.privAuthFetchEventId=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}r.RecognitionStartedEvent=c;var o;(function(d){d[d.Success=0]="Success",d[d.AudioSourceError=1]="AudioSourceError",d[d.AudioSourceTimeout=2]="AudioSourceTimeout",d[d.AuthTokenFetchError=3]="AuthTokenFetchError",d[d.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",d[d.UnAuthorized=5]="UnAuthorized",d[d.ConnectTimeout=6]="ConnectTimeout",d[d.ConnectError=7]="ConnectError",d[d.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",d[d.UnknownError=9]="UnknownError"})(o=r.RecognitionCompletionStatus||(r.RecognitionCompletionStatus={}));class u extends s{constructor(v,f,m,y,w,P,T,R){super("RecognitionEndedEvent",v,w,T===o.Success?n.EventType.Info:n.EventType.Error),this.privAudioSourceId=f,this.privAudioNodeId=m,this.privAuthFetchEventId=y,this.privStatus=T,this.privError=R,this.privServiceTag=P}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}r.RecognitionEndedEvent=u})(cd)),cd}var ao={},Jr={},xt={};const cR={},uR=Object.freeze(Object.defineProperty({__proto__:null,default:cR},Symbol.toStringTag,{value:"Module"})),un=ow(uR);var ud={},Pg;function fC(){return Pg||(Pg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LogLevel=void 0;const n=ae();Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return n.EventType}})})(ud)),ud}var co={},wg;function me(){if(wg)return co;wg=1,Object.defineProperty(co,"__esModule",{value:!0}),co.Contracts=void 0;let r=class Er{static throwIfNullOrUndefined(s,h){if(s==null)throw new Error("throwIfNullOrUndefined:"+h)}static throwIfNull(s,h){if(s===null)throw new Error("throwIfNull:"+h)}static throwIfNullOrWhitespace(s,h){if(Er.throwIfNullOrUndefined(s,h),(""+s).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+h)}static throwIfNullOrTooLong(s,h,a){if(Er.throwIfNullOrUndefined(s,h),(""+s).length>a)throw new Error("throwIfNullOrTooLong:"+h+" (more than "+a.toString()+" characters)")}static throwIfNullOrTooShort(s,h,a){if(Er.throwIfNullOrUndefined(s,h),(""+s).length<a)throw new Error("throwIfNullOrTooShort:"+h+" (less than "+a.toString()+" characters)")}static throwIfDisposed(s){if(s)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(s,h){if(Er.throwIfNullOrUndefined(s,h),s.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+h);for(const a of s)Er.throwIfNullOrWhitespace(a,h)}static throwIfFileDoesNotExist(s,h){Er.throwIfNullOrWhitespace(s,h)}static throwIfNotUndefined(s,h){if(s!==void 0)throw new Error("throwIfNotUndefined:"+h)}static throwIfNumberOutOfRange(s,h,a,l){if(Er.throwIfNullOrUndefined(s,h),s<a||s>l)throw new Error("throwIfNumberOutOfRange:"+h+" (must be between "+a.toString()+" and "+l.toString()+")")}};return co.Contracts=r,co}var Rg;function lR(){if(Rg)return xt;Rg=1;var r=xt&&xt.__createBinding||(Object.create?(function(o,u,d,v){v===void 0&&(v=d),Object.defineProperty(o,v,{enumerable:!0,get:function(){return u[d]}})}):(function(o,u,d,v){v===void 0&&(v=d),o[v]=u[d]})),n=xt&&xt.__setModuleDefault||(Object.create?(function(o,u){Object.defineProperty(o,"default",{enumerable:!0,value:u})}):function(o,u){o.default=u}),s=xt&&xt.__importStar||function(o){if(o&&o.__esModule)return o;var u={};if(o!=null)for(var d in o)d!=="default"&&Object.prototype.hasOwnProperty.call(o,d)&&r(u,o,d);return n(u,o),u};Object.defineProperty(xt,"__esModule",{value:!0}),xt.ConsoleLoggingListener=void 0;const h=s(un),a=fC(),l=me();let c=class{constructor(u=a.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=u}set logPath(u){l.Contracts.throwIfNullOrUndefined(h.openSync,`
File System access not available`),this.privLogPath=u}set enableConsoleOutput(u){this.privEnableConsoleOutput=u}onEvent(u){if(u.eventType>=this.privLogLevelFilter){const d=this.toString(u);if(this.logCallback&&this.logCallback(d),this.privLogPath&&h.writeFileSync(this.privLogPath,d+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(u.eventType){case a.LogLevel.Debug:console.debug(d);break;case a.LogLevel.Info:console.info(d);break;case a.LogLevel.Warning:console.warn(d);break;case a.LogLevel.Error:console.error(d);break;default:console.log(d);break}}}toString(u){const d=[`${u.eventTime}`,`${u.name}`],v=u;for(const f in v)if(f&&u.hasOwnProperty(f)&&f!=="eventTime"&&f!=="eventType"&&f!=="eventId"&&f!=="name"&&f!=="constructor"){const m=v[f];let y="<NULL>";m!=null&&(typeof m=="number"||typeof m=="string"?y=m.toString():y=JSON.stringify(m)),d.push(`${f}: ${y}`)}return d.join(" | ")}};return xt.ConsoleLoggingListener=c,xt}var ld={},Eg;function dR(){return Eg||(Eg=1,Object.defineProperty(ld,"__esModule",{value:!0})),ld}var dd={},pd={},Tg;function dn(){return Tg||(Tg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AudioStreamFormatImpl=r.AudioStreamFormat=r.AudioFormatTag=void 0;var n;(function(a){a[a.PCM=1]="PCM",a[a.MuLaw=2]="MuLaw",a[a.Siren=3]="Siren",a[a.MP3=4]="MP3",a[a.SILKSkype=5]="SILKSkype",a[a.OGG_OPUS=6]="OGG_OPUS",a[a.WEBM_OPUS=7]="WEBM_OPUS",a[a.ALaw=8]="ALaw",a[a.FLAC=9]="FLAC",a[a.OPUS=10]="OPUS",a[a.AMR_WB=11]="AMR_WB",a[a.G722=12]="G722"})(n=r.AudioFormatTag||(r.AudioFormatTag={}));class s{static getDefaultInputFormat(){return h.getDefaultInputFormat()}static getWaveFormat(l,c,o,u){return new h(l,c,o,u)}static getWaveFormatPCM(l,c,o){return new h(l,c,o)}}r.AudioStreamFormat=s;class h extends s{constructor(l=16e3,c=16,o=1,u=n.PCM){super();let d=!0;switch(u){case n.PCM:this.formatTag=1;break;case n.ALaw:this.formatTag=6;break;case n.MuLaw:this.formatTag=7;break;default:d=!1}if(this.bitsPerSample=c,this.samplesPerSec=l,this.channels=o,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),d){this.privHeader=new ArrayBuffer(44);const v=new DataView(this.privHeader);this.setString(v,0,"RIFF"),v.setUint32(4,0,!0),this.setString(v,8,"WAVEfmt "),v.setUint32(16,16,!0),v.setUint16(20,this.formatTag,!0),v.setUint16(22,this.channels,!0),v.setUint32(24,this.samplesPerSec,!0),v.setUint32(28,this.avgBytesPerSec,!0),v.setUint16(32,this.channels*(this.bitsPerSample/8),!0),v.setUint16(34,this.bitsPerSample,!0),this.setString(v,36,"data"),v.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new h}static getAudioContext(l){const c=window.AudioContext||window.webkitAudioContext||!1;if(c)return l!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new c({sampleRate:l}):new c;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(l,c,o){for(let u=0;u<o.length;u++)l.setUint8(c+u,o.charCodeAt(u))}}r.AudioStreamFormatImpl=h})(pd)),pd}var Ag;function pR(){return Ag||(Ag=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MicAudioSource=r.AudioWorkletSourceURLPropertyName=void 0;const n=ne(),s=ae(),h=dn();r.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class a{constructor(c,o,u,d){this.privRecorder=c,this.deviceId=o,this.privStreams={},this.privOutputChunkSize=a.AUDIOFORMAT.avgBytesPerSec/10,this.privId=u||(0,s.createNoDashGuid)(),this.privEvents=new s.EventSource,this.privMediaStream=d||null,this.privIsClosing=!1}get format(){return Promise.resolve(a.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new s.Deferred;try{this.createAudioContext()}catch(u){if(u instanceof Error){const d=u;this.privInitializeDeferral.reject(d.name+": "+d.message)}else this.privInitializeDeferral.reject(u);return this.privInitializeDeferral.promise}const c=window.navigator;let o=c.getUserMedia||c.webkitGetUserMedia||c.mozGetUserMedia||c.msGetUserMedia;if(c.mediaDevices&&(o=(u,d,v)=>{c.mediaDevices.getUserMedia(u).then(d).catch(v)}),o){const u=()=>{this.onEvent(new s.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new s.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):o({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},d=>{this.privMediaStream=d,this.onEvent(new s.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},d=>{const v=`Error occurred during microphone initialization: ${d}`;this.privInitializeDeferral.reject(v),this.onEvent(new s.AudioSourceErrorEvent(this.privId,v))})};this.privContext.state==="suspended"?this.privContext.resume().then(u).catch(d=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${d}`)}):u()}else{const u="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(u),this.onEvent(new s.AudioSourceErrorEvent(u,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(c){return this.onEvent(new s.AudioStreamNodeAttachingEvent(this.privId,c)),this.listen(c).then(o=>(this.onEvent(new s.AudioStreamNodeAttachedEvent(this.privId,c)),{detach:async()=>(o.readEnded(),delete this.privStreams[c],this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,c)),this.turnOff()),id:()=>c,read:()=>o.read()}))}detach(c){c&&this.privStreams[c]&&(this.privStreams[c].close(),delete this.privStreams[c],this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,c)))}async turnOff(){for(const c in this.privStreams)if(c){const o=this.privStreams[c];o&&o.close()}this.onEvent(new s.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(c=>({bitspersample:a.AUDIOFORMAT.bitsPerSample,channelcount:a.AUDIOFORMAT.channels,connectivity:n.connectivity.Unknown,manufacturer:"Speech SDK",model:c,samplerate:a.AUDIOFORMAT.samplesPerSec,type:n.type.Microphones}))}setProperty(c,o){if(c===r.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(o);else throw new Error("Property '"+c+"' is not supported on Microphone.")}getMicrophoneLabel(){const c="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(c);this.privMicrophoneLabel=c;const o=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(o===void 0)return Promise.resolve(this.privMicrophoneLabel);const u=new s.Deferred;return navigator.mediaDevices.enumerateDevices().then(d=>{for(const v of d)if(v.deviceId===o){this.privMicrophoneLabel=v.label;break}u.resolve(this.privMicrophoneLabel)},()=>u.resolve(this.privMicrophoneLabel)),u.promise}async listen(c){await this.turnOn();const o=new s.ChunkedArrayBufferStream(this.privOutputChunkSize,c);this.privStreams[c]=o;try{this.privRecorder.record(this.privContext,this.privMediaStream,o)}catch(d){throw this.onEvent(new s.AudioStreamNodeErrorEvent(this.privId,c,d)),d}return o}onEvent(c){this.privEvents.onEvent(c),s.Events.instance.onEvent(c)}createAudioContext(){this.privContext||(this.privContext=h.AudioStreamFormatImpl.getAudioContext(a.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let c=!1;"close"in this.privContext&&(c=!0),c?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}r.MicAudioSource=a,a.AUDIOFORMAT=h.AudioStreamFormat.getDefaultInputFormat()})(dd)),dd}var uo={},bg;function hR(){if(bg)return uo;bg=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.FileAudioSource=void 0;const r=ne(),n=ae(),s=dn();let h=class{constructor(l,c,o){this.privStreams={},this.privHeaderEnd=44,this.privId=o||(0,n.createNoDashGuid)(),this.privEvents=new n.EventSource,this.privSource=l,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=l.name:this.privFilename=c||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const l=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new n.AudioSourceErrorEvent(l,"")),Promise.reject(l)}this.onEvent(new n.AudioSourceInitializingEvent(this.privId)),this.onEvent(new n.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(l){this.onEvent(new n.AudioStreamNodeAttachingEvent(this.privId,l));const c=await this.upload(l);return this.onEvent(new n.AudioStreamNodeAttachedEvent(this.privId,l)),Promise.resolve({detach:async()=>{c.readEnded(),delete this.privStreams[l],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,l)),await this.turnOff()},id:()=>l,read:()=>c.read()})}detach(l){l&&this.privStreams[l]&&(this.privStreams[l].close(),delete this.privStreams[l],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,l)))}turnOff(){for(const l in this.privStreams)if(l){const c=this.privStreams[l];c&&!c.isClosed&&c.close()}return this.onEvent(new n.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(l=>Promise.resolve({bitspersample:l.bitsPerSample,channelcount:l.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:l.samplesPerSec,type:r.type.File}))}readHeader(){const c=this.privSource.slice(0,4296),o=new n.Deferred,u=d=>{const v=new DataView(d),f=R=>String.fromCharCode(v.getUint8(R),v.getUint8(R+1),v.getUint8(R+2),v.getUint8(R+3));if(f(0)!=="RIFF"){o.reject("Invalid WAV header in file, RIFF was not found");return}if(f(8)!=="WAVE"||f(12)!=="fmt "){o.reject("Invalid WAV header in file, WAVEfmt was not found");return}const m=v.getInt32(16,!0),y=v.getUint16(22,!0),w=v.getUint32(24,!0),P=v.getUint16(34,!0);let T=36+Math.max(m-16,0);for(;f(T)!=="data";T+=2)if(T>4288){o.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=T+8,o.resolve(s.AudioStreamFormat.getWaveFormatPCM(w,P,y))};if(typeof window<"u"&&typeof Blob<"u"&&c instanceof Blob){const d=new FileReader;d.onload=v=>{const f=v.target.result;u(f)},d.readAsArrayBuffer(c)}else{const d=c;u(d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength))}return o.promise}async upload(l){const c=o=>{const u=`Error occurred while processing '${this.privFilename}'. ${o}`;throw this.onEvent(new n.AudioStreamNodeErrorEvent(this.privId,l,u)),new Error(u)};try{await this.turnOn();const o=await this.privAudioFormatPromise,u=new n.ChunkedArrayBufferStream(o.avgBytesPerSec/10,l);this.privStreams[l]=u;const d=this.privSource.slice(this.privHeaderEnd),v=f=>{u.isClosed||(u.writeStreamChunk({buffer:f,isEnd:!1,timeReceived:Date.now()}),u.close())};if(typeof window<"u"&&typeof Blob<"u"&&d instanceof Blob){const f=new FileReader;f.onerror=m=>c(m.toString()),f.onload=m=>{const y=m.target.result;v(y)},f.readAsArrayBuffer(d)}else{const f=d;v(f.buffer.slice(f.byteOffset,f.byteOffset+f.byteLength))}return u}catch(o){c(o)}}onEvent(l){this.privEvents.onEvent(l),n.Events.instance.onEvent(l)}};return uo.FileAudioSource=h,uo}var lo={},Ig;function vR(){if(Ig)return lo;Ig=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.PcmRecorder=void 0;const r=ae();class n{constructor(h){this.privStopInputOnRelease=h}record(h,a,l){const o=new r.RiffPcmEncoder(h.sampleRate,16e3),u=h.createMediaStreamSource(a),d=()=>{const f=(()=>{let m=0;try{return h.createScriptProcessor(m,1,1)}catch{m=2048;let w=h.sampleRate;for(;m<16384&&w>=32e3;)m<<=1,w>>=1;return h.createScriptProcessor(m,1,1)}})();f.onaudioprocess=m=>{const y=m.inputBuffer.getChannelData(0);if(l&&!l.isClosed){const w=o.encode(y);w&&l.writeStreamChunk({buffer:w,isEnd:!1,timeReceived:Date.now()})}},u.connect(f),f.connect(h.destination),this.privMediaResources={scriptProcessorNode:f,source:u,stream:a}},v=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(h.audioWorklet&&!v){if(!this.privSpeechProcessorScript){const f=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,m=new Blob([f],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(m)}h.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const f=new AudioWorkletNode(h,"speech-processor");f.port.onmessage=m=>{const y=m.data;if(l&&!l.isClosed){const w=o.encode(y);w&&l.writeStreamChunk({buffer:w,isEnd:!1,timeReceived:Date.now()})}},u.connect(f),f.connect(h.destination),this.privMediaResources={scriptProcessorNode:f,source:u,stream:a}}).catch(()=>{d()})}else try{d()}catch(f){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${f}`)}}releaseMediaResources(h){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(h.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(a=>a.stop()),this.privMediaResources.source=null))}setWorkletUrl(h){this.privSpeechProcessorScript=h}}return lo.PcmRecorder=n,lo}var po={},ht={},_g;function gC(){if(_g)return ht;_g=1;var r=ht&&ht.__createBinding||(Object.create?(function(m,y,w,P){P===void 0&&(P=w),Object.defineProperty(m,P,{enumerable:!0,get:function(){return y[w]}})}):(function(m,y,w,P){P===void 0&&(P=w),m[P]=y[w]})),n=ht&&ht.__setModuleDefault||(Object.create?(function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}):function(m,y){m.default=y}),s=ht&&ht.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var w in m)w!=="default"&&Object.prototype.hasOwnProperty.call(m,w)&&r(y,m,w);return n(y,m),y},h=ht&&ht.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(ht,"__esModule",{value:!0}),ht.WebsocketMessageAdapter=void 0;const a=s(un),l=s(un),c=h(un),o=h(un),u=h(un),d=gt(),v=ae();let f=class cp{constructor(y,w,P,T,R,A){if(!y)throw new v.ArgumentNullError("uri");if(!P)throw new v.ArgumentNullError("messageFormatter");this.proxyInfo=T,this.privConnectionEvents=new v.EventSource,this.privConnectionId=w,this.privMessageFormatter=P,this.privConnectionState=v.ConnectionState.None,this.privUri=y,this.privHeaders=R,this.privEnableCompression=A,this.privHeaders[d.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===v.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new v.Deferred,this.privCertificateValidatedDeferral=new v.Deferred,this.privConnectionState=v.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!cp.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let w=new URL(this.privUri).protocol;(w==null?void 0:w.toLocaleLowerCase())==="wss:"?w="https:":(w==null?void 0:w.toLocaleLowerCase())==="ws:"&&(w="http:");const P={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:w.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),P.agent=this.getAgent(),P.agent.protocol=w,this.privWebsocketClient=new u.default(this.privUri,P),this.privWebsocketClient.on("redirect",T=>{const R=new v.ConnectionRedirectEvent(this.privConnectionId,T,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${T}'`);v.Events.instance.onEvent(R)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new v.Queue,this.privDisconnectDeferral=new v.Deferred,this.privSendMessageQueue=new v.Queue,this.processSendQueue().catch(y=>{v.Events.instance.onEvent(new v.BackgroundEvent(y))})}catch(y){return this.privConnectionEstablishDeferral.resolve(new v.ConnectionOpenResponse(500,y)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new v.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=v.ConnectionState.Connected,this.onEvent(new v.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new v.ConnectionOpenResponse(200,""))},y=>{this.privConnectionEstablishDeferral.reject(y)})},this.privWebsocketClient.onerror=y=>{this.onEvent(new v.ConnectionErrorEvent(this.privConnectionId,y.message,y.type)),this.privLastErrorReceived=y.message},this.privWebsocketClient.onclose=y=>{this.privConnectionState===v.ConnectionState.Connecting?(this.privConnectionState=v.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new v.ConnectionOpenResponse(y.code,y.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=v.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new v.ConnectionClosedEvent(this.privConnectionId,y.code,y.reason))),this.onClose(y.code,y.reason).catch(w=>{v.Events.instance.onEvent(new v.BackgroundEvent(w))})},this.privWebsocketClient.onmessage=y=>{const w=new Date().toISOString();if(this.privConnectionState===v.ConnectionState.Connected){const P=new v.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(P.promise),y.data instanceof ArrayBuffer){const T=new v.RawWebsocketMessage(v.MessageType.Binary,y.data);this.privMessageFormatter.toConnectionMessage(T).then(R=>{this.onEvent(new v.ConnectionMessageReceivedEvent(this.privConnectionId,w,R)),P.resolve(R)},R=>{P.reject(`Invalid binary message format. Error: ${R}`)})}else{const T=new v.RawWebsocketMessage(v.MessageType.Text,y.data);this.privMessageFormatter.toConnectionMessage(T).then(R=>{this.onEvent(new v.ConnectionMessageReceivedEvent(this.privConnectionId,w,R)),P.resolve(R)},R=>{P.reject(`Invalid text message format. Error: ${R}`)})}}},this.privConnectionEstablishDeferral.promise}send(y){if(this.privConnectionState!==v.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${v.ConnectionState[this.privConnectionState]} state`);const w=new v.Deferred,P=new v.Deferred;return this.privSendMessageQueue.enqueueFromPromise(P.promise),this.privMessageFormatter.fromConnectionMessage(y).then(T=>{P.resolve({Message:y,RawWebsocketMessage:T,sendStatusDeferral:w})},T=>{P.reject(`Error formatting the message. ${T}`)}),w.promise}read(){return this.privConnectionState!==v.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(y){if(this.privWebsocketClient)this.privConnectionState!==v.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,y||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(y){try{if(!y)return Promise.resolve();if(this.onEvent(new v.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),y.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(y.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+y.Message.id+" "+new Error().stack);return Promise.resolve()}catch(w){return Promise.reject(`websocket send error: ${w}`)}}async onClose(y,w){const P=`Connection closed. ${y}: ${w}`;this.privConnectionState=v.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},P),await this.privSendMessageQueue.drainAndDispose(T=>{T.sendStatusDeferral.reject(P)},P)}async processSendQueue(){for(;;){const w=await this.privSendMessageQueue.dequeue();if(!w)return;try{await this.sendRawMessage(w),w.sendStatusDeferral.resolve()}catch(P){w.sendStatusDeferral.reject(P)}}}onEvent(y){this.privConnectionEvents.onEvent(y),v.Events.instance.onEvent(y)}getAgent(){const y=new c.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(y.proxyInfo=this.proxyInfo),y}static GetProxyAgent(y){const w={host:y.HostName,port:y.Port};return y.UserName?w.headers={"Proxy-Authentication":"Basic "+Buffer.from(`${y.UserName}:${y.Password===void 0?"":y.Password}`).toString("base64")}:w.headers={},w.headers.requestOCSP="true",new o.default(w)}createConnection(y,w){let P;if(w={...w,requestOCSP:!0,servername:w.host},this.proxyInfo){const R=cp.GetProxyAgent(this.proxyInfo);P=new Promise((A,b)=>{R.callback(y,w,(x,z)=>{x?b(x):A(z)})})}else w.secureEndpoint?P=Promise.resolve(l.connect(w)):P=Promise.resolve(a.connect(w));return P}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};return ht.WebsocketMessageAdapter=f,f.forceNpmWebSocket=!1,ht}var kg;function fR(){if(kg)return po;kg=1,Object.defineProperty(po,"__esModule",{value:!0}),po.WebsocketConnection=void 0;const r=ae(),n=gC();let s=class{constructor(a,l,c,o,u,d=!1,v){if(this.privIsDisposed=!1,!a)throw new r.ArgumentNullError("uri");if(!o)throw new r.ArgumentNullError("messageFormatter");this.privMessageFormatter=o;let f="",m=0;if(l){for(const y in l)if(y){f+=m===0&&a.indexOf("?")===-1?"?":"&";const w=encodeURIComponent(y);f+=w;let P=l[y];P&&(P=encodeURIComponent(P),f+=`=${P}`),m++}}if(c){for(const y in c)if(y){f+=m===0&&a.indexOf("?")===-1?"?":"&";const w=encodeURIComponent(c[y]);f+=`${y}=${w}`,m++}}this.privUri=a+f,this.privId=v||(0,r.createNoDashGuid)(),this.privConnectionMessageAdapter=new n.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,u,c,d)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(a){return this.privConnectionMessageAdapter.send(a)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};return po.WebsocketConnection=s,po}var ho={},xg;function gR(){if(xg)return ho;xg=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.ReplayableAudioNode=void 0;let r=class{constructor(h,a){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=h,this.privBytesPerSecond=a}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const h=this.privReplayOffset-this.privBufferStartOffset;let a=Math.round(h*this.privBytesPerSecond*1e-7);a%2!==0&&a++;let l=0;for(;l<this.privBuffers.length&&a>=this.privBuffers[l].chunk.buffer.byteLength;)a-=this.privBuffers[l++].chunk.buffer.byteLength;if(l<this.privBuffers.length){const c=this.privBuffers[l].chunk.buffer.slice(a);return this.privReplayOffset+=c.byteLength/this.privBytesPerSecond*1e7,l===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:c,isEnd:!1,timeReceived:this.privBuffers[l].chunk.timeReceived})}}return this.privAudioNode.read().then(h=>(h&&h.buffer&&this.privBuffers&&(this.privBuffers.push(new n(h,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=h.buffer.byteLength),h))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(h){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=h;const a=h-this.privBufferStartOffset;let l=Math.round(a*this.privBytesPerSecond*1e-7),c=0;for(;c<this.privBuffers.length&&l>=this.privBuffers[c].chunk.buffer.byteLength;)l-=this.privBuffers[c++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(h-l/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(c)}findTimeAtOffset(h){if(h<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const a of this.privBuffers){const l=a.byteOffset/this.privBytesPerSecond*1e7,c=l+a.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(h>=l&&h<=c)return a.chunk.timeReceived}return 0}};ho.ReplayableAudioNode=r;class n{constructor(h,a,l){this.chunk=h,this.serial=a,this.byteOffset=l}}return ho}var vo={},hd={},Xt={},Mt={},Mg;function mC(){if(Mg)return Mt;Mg=1;var r=Mt&&Mt.__createBinding||(Object.create?(function(c,o,u,d){d===void 0&&(d=u),Object.defineProperty(c,d,{enumerable:!0,get:function(){return o[u]}})}):(function(c,o,u,d){d===void 0&&(d=u),c[d]=o[u]})),n=Mt&&Mt.__setModuleDefault||(Object.create?(function(c,o){Object.defineProperty(c,"default",{enumerable:!0,value:o})}):function(c,o){c.default=o}),s=Mt&&Mt.__importStar||function(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var u in c)u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)&&r(o,c,u);return n(o,c),o};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.AudioFileWriter=void 0;const h=s(un),a=me();let l=class{constructor(o){a.Contracts.throwIfNullOrUndefined(h.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=h.openSync(o,"w")}set format(o){a.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=o;let u=0;this.privAudioFormat.hasHeader&&(u=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=h.createWriteStream("",{fd:this.privFd,start:u,autoClose:!1}))}write(o){a.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(o.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),h.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),h.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};return Mt.AudioFileWriter=l,Mt}var vt={},Ng;function yC(){if(Ng)return vt;Ng=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.PullAudioInputStreamImpl=vt.PullAudioInputStream=vt.PushAudioInputStreamImpl=vt.PushAudioInputStream=vt.AudioInputStream=void 0;const r=ne(),n=ae(),s=ln(),h=J(),a=dn();let l=class{constructor(){}static createPushStream(f){return c.create(f)}static createPullStream(f,m){return u.create(f,m)}};vt.AudioInputStream=l;class c extends l{static create(f){return new o(f)}}vt.PushAudioInputStream=c;class o extends c{constructor(f){super(),f===void 0?this.privFormat=a.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=f,this.privEvents=new n.EventSource,this.privId=(0,s.createNoDashGuid)(),this.privStream=new n.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(f){this.privStream.writeStreamChunk({buffer:f,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new n.AudioSourceInitializingEvent(this.privId)),this.onEvent(new n.AudioSourceReadyEvent(this.privId))}async attach(f){this.onEvent(new n.AudioStreamNodeAttachingEvent(this.privId,f)),await this.turnOn();const m=this.privStream;return this.onEvent(new n.AudioStreamNodeAttachedEvent(this.privId,f)),{detach:async()=>(this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,f)),this.turnOff()),id:()=>f,read:()=>m.read()}}detach(f){this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,f))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(f){this.privEvents.onEvent(f),n.Events.instance.onEvent(f)}toBuffer(f){const m=Buffer.alloc(f.byteLength),y=new Uint8Array(f);for(let w=0;w<m.length;++w)m[w]=y[w];return m}}vt.PushAudioInputStreamImpl=o;class u extends l{constructor(){super()}static create(f,m){return new d(f,m)}}vt.PullAudioInputStream=u;class d extends u{constructor(f,m){super(),m===void 0?this.privFormat=h.AudioStreamFormat.getDefaultInputFormat():this.privFormat=m,this.privEvents=new n.EventSource,this.privId=(0,s.createNoDashGuid)(),this.privCallback=f,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new n.AudioSourceInitializingEvent(this.privId)),this.onEvent(new n.AudioSourceReadyEvent(this.privId))}async attach(f){return this.onEvent(new n.AudioStreamNodeAttachingEvent(this.privId,f)),await this.turnOn(),this.onEvent(new n.AudioStreamNodeAttachedEvent(this.privId,f)),{detach:()=>(this.privCallback.close(),this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,f)),this.turnOff()),id:()=>f,read:()=>{let m=0,y;for(;m<this.privBufferSize;){const w=new ArrayBuffer(this.privBufferSize-m),P=this.privCallback.read(w);if(y===void 0?y=w:new Int8Array(y).set(new Int8Array(w),m),P===0)break;m+=P}return Promise.resolve({buffer:y.slice(0,m),isEnd:this.privIsClosed||m===0,timeReceived:Date.now()})}}}detach(f){this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,f))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(f){this.privEvents.onEvent(f),n.Events.instance.onEvent(f)}}return vt.PullAudioInputStreamImpl=d,vt}var ft={},fo={},vd={},Og;function SC(){return Og||(Og=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechSynthesisOutputFormat=void 0,(function(n){n[n.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",n[n.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",n[n.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",n[n.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",n[n.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",n[n.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",n[n.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",n[n.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",n[n.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",n[n.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",n[n.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",n[n.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",n[n.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",n[n.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",n[n.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",n[n.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",n[n.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",n[n.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",n[n.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",n[n.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",n[n.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",n[n.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",n[n.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",n[n.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",n[n.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",n[n.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",n[n.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",n[n.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",n[n.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",n[n.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",n[n.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",n[n.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",n[n.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",n[n.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",n[n.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",n[n.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",n[n.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",n[n.AmrWb16000Hz=37]="AmrWb16000Hz",n[n.G72216Khz64Kbps=38]="G72216Khz64Kbps"})(r.SpeechSynthesisOutputFormat||(r.SpeechSynthesisOutputFormat={}))})(vd)),vd}var jg;function Ta(){if(jg)return fo;jg=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.AudioOutputFormatImpl=void 0;const r=SC(),n=dn();class s extends n.AudioStreamFormatImpl{constructor(a,l,c,o,u,d,v,f,m){super(c,d,l,a),this.formatTag=a,this.avgBytesPerSec=o,this.blockAlign=u,this.priAudioFormatString=v,this.priRequestAudioFormatString=f,this.priHasHeader=m}static fromSpeechSynthesisOutputFormat(a){return a===void 0?s.getDefaultOutputFormat():s.fromSpeechSynthesisOutputFormatString(s.SpeechSynthesisOutputFormatToString[a])}static fromSpeechSynthesisOutputFormatString(a){switch(a){case"raw-8khz-8bit-mono-mulaw":return new s(n.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,a,a,!1);case"riff-16khz-16kbps-mono-siren":return new s(n.AudioFormatTag.Siren,1,16e3,2e3,40,0,a,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new s(n.AudioFormatTag.Siren,1,16e3,2e3,40,0,a,a,!1);case"audio-16khz-32kbitrate-mono-mp3":return new s(n.AudioFormatTag.MP3,1,16e3,4096,2,16,a,a,!1);case"audio-16khz-128kbitrate-mono-mp3":return new s(n.AudioFormatTag.MP3,1,16e3,16384,2,16,a,a,!1);case"audio-16khz-64kbitrate-mono-mp3":return new s(n.AudioFormatTag.MP3,1,16e3,8192,2,16,a,a,!1);case"audio-24khz-48kbitrate-mono-mp3":return new s(n.AudioFormatTag.MP3,1,24e3,6144,2,16,a,a,!1);case"audio-24khz-96kbitrate-mono-mp3":return new s(n.AudioFormatTag.MP3,1,24e3,12288,2,16,a,a,!1);case"audio-24khz-160kbitrate-mono-mp3":return new s(n.AudioFormatTag.MP3,1,24e3,20480,2,16,a,a,!1);case"raw-16khz-16bit-mono-truesilk":return new s(n.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,a,a,!1);case"riff-8khz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,8e3,16e3,2,16,a,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,24e3,48e3,2,16,a,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new s(n.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,a,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,16e3,32e3,2,16,a,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,24e3,48e3,2,16,a,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,8e3,16e3,2,16,a,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new s(n.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,a,a,!1);case"ogg-24khz-16bit-mono-opus":return new s(n.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,a,a,!1);case"raw-48khz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,48e3,96e3,2,16,a,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,48e3,96e3,2,16,a,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new s(n.AudioFormatTag.MP3,1,48e3,12288,2,16,a,a,!1);case"audio-48khz-192kbitrate-mono-mp3":return new s(n.AudioFormatTag.MP3,1,48e3,24576,2,16,a,a,!1);case"ogg-48khz-16bit-mono-opus":return new s(n.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,a,a,!1);case"webm-16khz-16bit-mono-opus":return new s(n.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,a,a,!1);case"webm-24khz-16bit-mono-opus":return new s(n.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,a,a,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new s(n.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,a,a,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new s(n.AudioFormatTag.OPUS,1,16e3,4e3,2,16,a,a,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new s(n.AudioFormatTag.OPUS,1,24e3,6e3,2,16,a,a,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new s(n.AudioFormatTag.OPUS,1,24e3,3e3,2,16,a,a,!1);case"audio-24khz-16bit-mono-flac":return new s(n.AudioFormatTag.FLAC,1,24e3,24e3,2,16,a,a,!1);case"audio-48khz-16bit-mono-flac":return new s(n.AudioFormatTag.FLAC,1,48e3,3e4,2,16,a,a,!1);case"raw-24khz-16bit-mono-truesilk":return new s(n.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,a,a,!1);case"raw-8khz-8bit-mono-alaw":return new s(n.AudioFormatTag.ALaw,1,8e3,8e3,1,8,a,a,!1);case"riff-8khz-8bit-mono-alaw":return new s(n.AudioFormatTag.ALaw,1,8e3,8e3,1,8,a,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,22050,44100,2,16,a,a,!1);case"riff-22050hz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,22050,44100,2,16,a,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,44100,88200,2,16,a,a,!1);case"riff-44100hz-16bit-mono-pcm":return new s(n.AudioFormatTag.PCM,1,44100,88200,2,16,a,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new s(n.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,a,a,!1);case"g722-16khz-64kbps":return new s(n.AudioFormatTag.G722,1,16e3,8e3,2,16,a,a,!1);case"riff-16khz-16bit-mono-pcm":default:return new s(n.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return s.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(a){if(this.priHasHeader){const l=new DataView(this.privHeader);l.setUint32(4,a+this.privHeader.byteLength-8,!0),l.setUint32(40,a,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(a){if(!this.hasHeader)return a;this.updateHeader(a.byteLength);const l=new Uint8Array(a.byteLength+this.header.byteLength);return l.set(new Uint8Array(this.header),0),l.set(new Uint8Array(a),this.header.byteLength),l.buffer}}return fo.AudioOutputFormatImpl=s,s.SpeechSynthesisOutputFormatToString={[r.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[r.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[r.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[r.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[r.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[r.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[r.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[r.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[r.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[r.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"},fo}var Dg;function qn(){if(Dg)return ft;Dg=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.PushAudioOutputStreamImpl=ft.PushAudioOutputStream=ft.PullAudioOutputStreamImpl=ft.PullAudioOutputStream=ft.AudioOutputStream=void 0;const r=ae(),n=me(),s=Ta();let h=class{constructor(){}static createPullStream(){return a.create()}};ft.AudioOutputStream=h;class a extends h{static create(){return new l}}ft.PullAudioOutputStream=a;class l extends a{constructor(){super(),this.privId=(0,r.createNoDashGuid)(),this.privStream=new r.Stream}set format(d){d==null&&(this.privFormat=s.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=d}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(d){const v=new Int8Array(d);let f=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>d.byteLength)return v.set(this.privLastChunkView.slice(0,d.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(d.byteLength),Promise.resolve(d.byteLength);v.set(this.privLastChunkView),f=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;f<d.byteLength&&!this.privStream.isReadEnded;){const m=await this.privStream.read();if(m!==void 0&&!m.isEnd){let y;m.buffer.byteLength>d.byteLength-f?(y=m.buffer.slice(0,d.byteLength-f),this.privLastChunkView=new Int8Array(m.buffer.slice(d.byteLength-f))):y=m.buffer,v.set(new Int8Array(y),f),f+=y.byteLength}else this.privStream.readEnded()}return f}write(d){n.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}ft.PullAudioOutputStreamImpl=l;class c extends h{constructor(){super()}static create(d){return new o(d)}}ft.PushAudioOutputStream=c;class o extends c{constructor(d){super(),this.privId=(0,r.createNoDashGuid)(),this.privCallback=d}set format(d){}write(d){this.privCallback.write&&this.privCallback.write(d)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}return ft.PushAudioOutputStreamImpl=o,ft}var zg;function mR(){if(zg)return Xt;zg=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.AudioOutputConfigImpl=Xt.AudioConfigImpl=Xt.AudioConfig=void 0;const r=ct(),n=me(),s=J(),h=mC(),a=yC(),l=qn();let c=class CC{static fromDefaultMicrophoneInput(){const v=new r.PcmRecorder(!0);return new o(new r.MicAudioSource(v))}static fromMicrophoneInput(v){const f=new r.PcmRecorder(!0);return new o(new r.MicAudioSource(f,v))}static fromWavFileInput(v,f="unnamedBuffer.wav"){return new o(new r.FileAudioSource(v,f))}static fromStreamInput(v){if(v instanceof s.PullAudioInputStreamCallback)return new o(new a.PullAudioInputStreamImpl(v));if(v instanceof s.AudioInputStream)return new o(v);if(typeof MediaStream<"u"&&v instanceof MediaStream){const f=new r.PcmRecorder(!1);return new o(new r.MicAudioSource(f,null,null,v))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new u(new s.SpeakerAudioDestination)}static fromSpeakerOutput(v){if(v===void 0)return CC.fromDefaultSpeakerOutput();if(v instanceof s.SpeakerAudioDestination)return new u(v);throw new Error("Not Supported Type")}static fromAudioFileOutput(v){return new u(new h.AudioFileWriter(v))}static fromStreamOutput(v){if(v instanceof s.PushAudioOutputStreamCallback)return new u(new l.PushAudioOutputStreamImpl(v));if(v instanceof s.PushAudioOutputStream)return new u(v);if(v instanceof s.PullAudioOutputStream)return new u(v);throw new Error("Not Supported Type")}};Xt.AudioConfig=c;class o extends c{constructor(v){super(),this.privSource=v}get format(){return this.privSource.format}close(v,f){this.privSource.turnOff().then(()=>{v&&v()},m=>{f&&f(m)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(v){return this.privSource.attach(v)}detach(v){return this.privSource.detach(v)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(v,f){if(n.Contracts.throwIfNull(f,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(v,f);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(v,f){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(v,f);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Xt.AudioConfigImpl=o;class u extends c{constructor(v){super(),this.privDestination=v}set format(v){this.privDestination.format=v}write(v){this.privDestination.write(v)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Xt.AudioOutputConfigImpl=u,Xt}var fd={},Lg;function yR(){return Lg||(Lg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationReason=void 0,(function(n){n[n.Error=0]="Error",n[n.EndOfStream=1]="EndOfStream"})(r.CancellationReason||(r.CancellationReason={}))})(fd)),fd}var go={},qg;function SR(){if(qg)return go;qg=1,Object.defineProperty(go,"__esModule",{value:!0}),go.PullAudioInputStreamCallback=void 0;let r=class{};return go.PullAudioInputStreamCallback=r,go}var mo={},Bg;function CR(){if(Bg)return mo;Bg=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.PushAudioOutputStreamCallback=void 0;let r=class{};return mo.PushAudioOutputStreamCallback=r,mo}var yo={},Fg;function PR(){if(Fg)return yo;Fg=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.KeywordRecognitionModel=void 0;const r=me();let n=class{constructor(){this.privDisposed=!1}static fromFile(h){throw r.Contracts.throwIfFileDoesNotExist(h,"fileName"),new Error("Not yet implemented.")}static fromStream(h){throw r.Contracts.throwIfNull(h,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};return yo.KeywordRecognitionModel=n,yo}var So={},Ug;function wR(){if(Ug)return So;Ug=1,Object.defineProperty(So,"__esModule",{value:!0}),So.SessionEventArgs=void 0;let r=class{constructor(s){this.privSessionId=s}get sessionId(){return this.privSessionId}};return So.SessionEventArgs=r,So}var Co={},Wg;function RR(){if(Wg)return Co;Wg=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.RecognitionEventArgs=void 0;const r=J();let n=class extends r.SessionEventArgs{constructor(h,a){super(a),this.privOffset=h}get offset(){return this.privOffset}};return Co.RecognitionEventArgs=n,Co}var gd={},Hg;function ER(){return Hg||(Hg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OutputFormat=void 0,(function(n){n[n.Simple=0]="Simple",n[n.Detailed=1]="Detailed"})(r.OutputFormat||(r.OutputFormat={}))})(gd)),gd}var Po={},Vg;function TR(){if(Vg)return Po;Vg=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.RecognitionResult=void 0;let r=class{constructor(s,h,a,l,c,o,u,d,v,f){this.privResultId=s,this.privReason=h,this.privText=a,this.privDuration=l,this.privOffset=c,this.privLanguage=o,this.privLanguageDetectionConfidence=u,this.privErrorDetails=d,this.privJson=v,this.privProperties=f}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};return Po.RecognitionResult=r,Po}var wo={},Kg;function AR(){if(Kg)return wo;Kg=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.SpeechRecognitionResult=void 0;const r=J();let n=class extends r.RecognitionResult{constructor(h,a,l,c,o,u,d,v,f,m,y){super(h,a,l,c,o,u,d,f,m,y),this.privSpeakerId=v}get speakerId(){return this.privSpeakerId}};return wo.SpeechRecognitionResult=n,wo}var Zt={},Gg;function bR(){if(Gg)return Zt;Gg=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.MeetingTranscriptionEventArgs=Zt.ConversationTranscriptionEventArgs=Zt.SpeechRecognitionEventArgs=void 0;const r=J();let n=class extends r.RecognitionEventArgs{constructor(l,c,o){super(c,o),this.privResult=l}get result(){return this.privResult}};Zt.SpeechRecognitionEventArgs=n;class s extends r.RecognitionEventArgs{constructor(l,c,o){super(c,o),this.privResult=l}get result(){return this.privResult}}Zt.ConversationTranscriptionEventArgs=s;class h extends n{}return Zt.MeetingTranscriptionEventArgs=h,Zt}var Ro={},Eo={},Jg;function Aa(){if(Jg)return Eo;Jg=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.CancellationEventArgsBase=void 0;const r=J();let n=class extends r.RecognitionEventArgs{constructor(h,a,l,c,o){super(c,o),this.privReason=h,this.privErrorDetails=a,this.privErrorCode=l}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Eo.CancellationEventArgsBase=n,Eo}var Qg;function IR(){if(Qg)return Ro;Qg=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.SpeechRecognitionCanceledEventArgs=void 0;const r=Aa();let n=class extends r.CancellationEventArgsBase{};return Ro.SpeechRecognitionCanceledEventArgs=n,Ro}var To={},Yg;function _R(){if(Yg)return To;Yg=1,Object.defineProperty(To,"__esModule",{value:!0}),To.TranslationRecognitionEventArgs=void 0;const r=J();let n=class extends r.RecognitionEventArgs{constructor(h,a,l){super(a,l),this.privResult=h}get result(){return this.privResult}};return To.TranslationRecognitionEventArgs=n,To}var Ao={},Xg;function kR(){if(Xg)return Ao;Xg=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.TranslationSynthesisEventArgs=void 0;const r=J();let n=class extends r.SessionEventArgs{constructor(h,a){super(a),this.privResult=h}get result(){return this.privResult}};return Ao.TranslationSynthesisEventArgs=n,Ao}var bo={},Zg;function wC(){if(Zg)return bo;Zg=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.TranslationRecognitionResult=void 0;const r=J();let n=class PC extends r.SpeechRecognitionResult{constructor(h,a,l,c,o,u,d,v,f,m,y){super(a,l,c,o,u,d,v,void 0,f,m,y),this.privTranslations=h}static fromSpeechRecognitionResult(h){return new PC(void 0,h.resultId,h.reason,h.text,h.duration,h.offset,h.language,h.languageDetectionConfidence,h.errorDetails,h.json,h.properties)}get translations(){return this.privTranslations}};return bo.TranslationRecognitionResult=n,bo}var Io={},$g;function xR(){if($g)return Io;$g=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.TranslationSynthesisResult=void 0;let r=class{constructor(s,h){this.privReason=s,this.privAudio=h}get audio(){return this.privAudio}get reason(){return this.privReason}};return Io.TranslationSynthesisResult=r,Io}var md={},em;function MR(){return em||(em=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ResultReason=void 0,(function(n){n[n.NoMatch=0]="NoMatch",n[n.Canceled=1]="Canceled",n[n.RecognizingSpeech=2]="RecognizingSpeech",n[n.RecognizedSpeech=3]="RecognizedSpeech",n[n.RecognizedKeyword=4]="RecognizedKeyword",n[n.TranslatingSpeech=5]="TranslatingSpeech",n[n.TranslatedSpeech=6]="TranslatedSpeech",n[n.SynthesizingAudio=7]="SynthesizingAudio",n[n.SynthesizingAudioCompleted=8]="SynthesizingAudioCompleted",n[n.SynthesizingAudioStarted=9]="SynthesizingAudioStarted",n[n.VoicesListRetrieved=10]="VoicesListRetrieved",n[n.TranslatingParticipantSpeech=11]="TranslatingParticipantSpeech",n[n.TranslatedParticipantSpeech=12]="TranslatedParticipantSpeech",n[n.TranslatedInstantMessage=13]="TranslatedInstantMessage",n[n.TranslatedParticipantInstantMessage=14]="TranslatedParticipantInstantMessage"})(r.ResultReason||(r.ResultReason={}))})(md)),md}var Qr={},tm;function NR(){if(tm)return Qr;tm=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.SpeechConfigImpl=Qr.SpeechConfig=void 0;const r=ne(),n=me(),s=J();let h=class{constructor(){}static fromSubscription(c,o){n.Contracts.throwIfNullOrWhitespace(c,"subscriptionKey"),n.Contracts.throwIfNullOrWhitespace(o,"region");const u=new a;return u.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),u}static fromEndpoint(c,o){n.Contracts.throwIfNull(c,"endpoint");const u=typeof o=="string"&&o.trim().length>0,d=typeof o=="object"&&o!==null&&typeof o.getToken=="function",v=typeof o=="object"&&o!==null&&typeof o.key=="string";if(o!==void 0&&!u&&!d&&!v)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let f;return typeof o=="string"?(f=new a,f.setProperty(s.PropertyId.SpeechServiceConnection_Key,o)):typeof o=="object"&&typeof o.getToken=="function"?f=new a(o):typeof o=="object"&&typeof o.key=="string"?(f=new a,f.setProperty(s.PropertyId.SpeechServiceConnection_Key,o.key)):f=new a,f.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,c.href),f}static fromHost(c,o){n.Contracts.throwIfNull(c,"hostName");const u=new a;return u.setProperty(s.PropertyId.SpeechServiceConnection_Host,c.protocol+"//"+c.hostname+(c.port===""?"":":"+c.port)),u.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),o!==void 0&&u.setProperty(s.PropertyId.SpeechServiceConnection_Key,o),u}static fromAuthorizationToken(c,o){n.Contracts.throwIfNull(c,"authorizationToken"),n.Contracts.throwIfNullOrWhitespace(o,"region");const u=new a;return u.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u.authorizationToken=c,u}close(){}};Qr.SpeechConfig=h;class a extends h{constructor(c){super(),this.privProperties=new s.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=s.OutputFormat.Simple,this.privTokenCredential=c}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}get speechRecognitionLanguage(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,c)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c)}get outputFormat(){return s.OutputFormat[this.privProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(c){this.privProperties.setProperty(r.OutputFormatPropertyName,s.OutputFormat[c])}get endpointId(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,c)}get tokenCredential(){return this.privTokenCredential}setProperty(c,o){n.Contracts.throwIfNull(o,"value"),this.privProperties.setProperty(c,o)}getProperty(c,o){return this.privProperties.getProperty(c,o)}setProxy(c,o,u,d){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],c),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],d)}setServiceProperty(c,o){const u=JSON.parse(this.privProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));u[c]=o,this.privProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[c])}enableAudioLogging(){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(r.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(r.ForceDictationPropertyName,"true")}clone(){const c=new a(this.tokenCredential);return c.privProperties=this.privProperties.clone(),c}get speechSynthesisLanguage(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,c)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,c)}get speechSynthesisOutputFormat(){return s.SpeechSynthesisOutputFormat[this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(c){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[c])}}return Qr.SpeechConfigImpl=a,Qr}var Yr={},rm;function OR(){if(rm)return Yr;rm=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.SpeechTranslationConfigImpl=Yr.SpeechTranslationConfig=void 0;const r=ne(),n=me(),s=J();let h=class extends s.SpeechConfig{constructor(){super()}static fromSubscription(c,o){n.Contracts.throwIfNullOrWhitespace(c,"subscriptionKey"),n.Contracts.throwIfNullOrWhitespace(o,"region");const u=new a;return u.properties.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),u.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u}static fromAuthorizationToken(c,o){n.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),n.Contracts.throwIfNullOrWhitespace(o,"region");const u=new a;return u.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c),u.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u}static fromHost(c,o){n.Contracts.throwIfNull(c,"hostName");const u=new a;return u.setProperty(s.PropertyId.SpeechServiceConnection_Host,c.protocol+"//"+c.hostname+(c.port===""?"":":"+c.port)),o!==void 0&&u.setProperty(s.PropertyId.SpeechServiceConnection_Key,o),u}static fromEndpoint(c,o){n.Contracts.throwIfNull(c,"endpoint");const u=typeof o=="string"&&o.trim().length>0,d=typeof o=="object"&&o!==null&&typeof o.getToken=="function",v=typeof o=="object"&&o!==null&&typeof o.key=="string";if(o!==void 0&&!u&&!d&&!v)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let f;return typeof o=="string"?(f=new a,f.setProperty(s.PropertyId.SpeechServiceConnection_Key,o)):typeof o=="object"&&typeof o.getToken=="function"?f=new a(o):typeof o=="object"&&typeof o.key=="string"?(f=new a,f.setProperty(s.PropertyId.SpeechServiceConnection_Key,o.key)):f=new a,f.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,c.href),f}};Yr.SpeechTranslationConfig=h;class a extends h{constructor(c){super(),this.privSpeechProperties=new s.PropertyCollection,this.outputFormat=s.OutputFormat.Simple,this.privTokenCredential=c}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}set speechRecognitionLanguage(c){n.Contracts.throwIfNullOrWhitespace(c,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,c)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return s.OutputFormat[this.privSpeechProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(c){this.privSpeechProperties.setProperty(r.OutputFormatPropertyName,s.OutputFormat[c])}get endpointId(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,c)}addTargetLanguage(c){n.Contracts.throwIfNullOrWhitespace(c,"value");const o=this.targetLanguages;o.includes(c)||(o.push(c),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,o.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(c){n.Contracts.throwIfNullOrWhitespace(c,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,c)}get region(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(c,o,u,d){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],c),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],d)}getProperty(c,o){return this.privSpeechProperties.getProperty(c,o)}setProperty(c,o){this.privSpeechProperties.setProperty(c,o)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(c,o){const u=JSON.parse(this.privSpeechProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));u[c]=o,this.privSpeechProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[c])}enableAudioLogging(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(r.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,c)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,c)}get speechSynthesisOutputFormat(){return s.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(c){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[c])}}return Yr.SpeechTranslationConfigImpl=a,Yr}var _o={},nm;function EC(){if(nm)return _o;nm=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.PropertyCollection=void 0;const r=J();let n=class RC{constructor(){this.privKeys=[],this.privValues=[]}getProperty(h,a){let l;typeof h=="string"?l=h:l=r.PropertyId[h];for(let c=0;c<this.privKeys.length;c++)if(this.privKeys[c]===l)return this.privValues[c];if(a!==void 0)return String(a)}setProperty(h,a){let l;typeof h=="string"?l=h:l=r.PropertyId[h];for(let c=0;c<this.privKeys.length;c++)if(this.privKeys[c]===l){this.privValues[c]=a;return}this.privKeys.push(l),this.privValues.push(a)}clone(){const h=new RC;for(let a=0;a<this.privKeys.length;a++)h.privKeys.push(this.privKeys[a]),h.privValues.push(this.privValues[a]);return h}mergeTo(h){this.privKeys.forEach(a=>{if(h.getProperty(a,void 0)===void 0){const l=this.getProperty(a);h.setProperty(a,l)}})}get keys(){return this.privKeys}};return _o.PropertyCollection=n,_o}var yd={},im;function Sp(){return im||(im=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PropertyId=void 0,(function(n){n[n.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",n[n.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",n[n.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",n[n.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",n[n.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",n[n.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",n[n.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",n[n.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",n[n.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",n[n.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",n[n.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",n[n.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",n[n.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",n[n.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",n[n.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",n[n.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",n[n.Speech_SessionId=16]="Speech_SessionId",n[n.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",n[n.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",n[n.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",n[n.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",n[n.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",n[n.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",n[n.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",n[n.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",n[n.CancellationDetails_Reason=25]="CancellationDetails_Reason",n[n.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",n[n.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",n[n.SpeechServiceConnection_Url=28]="SpeechServiceConnection_Url",n[n.SpeechServiceConnection_InitialSilenceTimeoutMs=29]="SpeechServiceConnection_InitialSilenceTimeoutMs",n[n.SpeechServiceConnection_EndSilenceTimeoutMs=30]="SpeechServiceConnection_EndSilenceTimeoutMs",n[n.Speech_SegmentationSilenceTimeoutMs=31]="Speech_SegmentationSilenceTimeoutMs",n[n.Speech_SegmentationMaximumTimeMs=32]="Speech_SegmentationMaximumTimeMs",n[n.Speech_SegmentationStrategy=33]="Speech_SegmentationStrategy",n[n.Speech_StartEventSensitivity=34]="Speech_StartEventSensitivity",n[n.SpeechServiceConnection_EnableAudioLogging=35]="SpeechServiceConnection_EnableAudioLogging",n[n.SpeechServiceConnection_LanguageIdMode=36]="SpeechServiceConnection_LanguageIdMode",n[n.SpeechServiceConnection_RecognitionEndpointVersion=37]="SpeechServiceConnection_RecognitionEndpointVersion",n[n.SpeechServiceResponse_ProfanityOption=38]="SpeechServiceResponse_ProfanityOption",n[n.SpeechServiceResponse_PostProcessingOption=39]="SpeechServiceResponse_PostProcessingOption",n[n.SpeechServiceResponse_RequestWordLevelTimestamps=40]="SpeechServiceResponse_RequestWordLevelTimestamps",n[n.SpeechServiceResponse_StablePartialResultThreshold=41]="SpeechServiceResponse_StablePartialResultThreshold",n[n.SpeechServiceResponse_OutputFormatOption=42]="SpeechServiceResponse_OutputFormatOption",n[n.SpeechServiceResponse_TranslationRequestStablePartialResult=43]="SpeechServiceResponse_TranslationRequestStablePartialResult",n[n.SpeechServiceResponse_RequestWordBoundary=44]="SpeechServiceResponse_RequestWordBoundary",n[n.SpeechServiceResponse_RequestPunctuationBoundary=45]="SpeechServiceResponse_RequestPunctuationBoundary",n[n.SpeechServiceResponse_RequestSentenceBoundary=46]="SpeechServiceResponse_RequestSentenceBoundary",n[n.SpeechServiceResponse_DiarizeIntermediateResults=47]="SpeechServiceResponse_DiarizeIntermediateResults",n[n.Conversation_ApplicationId=48]="Conversation_ApplicationId",n[n.Conversation_DialogType=49]="Conversation_DialogType",n[n.Conversation_Initial_Silence_Timeout=50]="Conversation_Initial_Silence_Timeout",n[n.Conversation_From_Id=51]="Conversation_From_Id",n[n.Conversation_Conversation_Id=52]="Conversation_Conversation_Id",n[n.Conversation_Custom_Voice_Deployment_Ids=53]="Conversation_Custom_Voice_Deployment_Ids",n[n.Conversation_Speech_Activity_Template=54]="Conversation_Speech_Activity_Template",n[n.Conversation_Request_Bot_Status_Messages=55]="Conversation_Request_Bot_Status_Messages",n[n.Conversation_Agent_Connection_Id=56]="Conversation_Agent_Connection_Id",n[n.SpeechServiceConnection_Host=57]="SpeechServiceConnection_Host",n[n.ConversationTranslator_Host=58]="ConversationTranslator_Host",n[n.ConversationTranslator_Name=59]="ConversationTranslator_Name",n[n.ConversationTranslator_CorrelationId=60]="ConversationTranslator_CorrelationId",n[n.ConversationTranslator_Token=61]="ConversationTranslator_Token",n[n.PronunciationAssessment_ReferenceText=62]="PronunciationAssessment_ReferenceText",n[n.PronunciationAssessment_GradingSystem=63]="PronunciationAssessment_GradingSystem",n[n.PronunciationAssessment_Granularity=64]="PronunciationAssessment_Granularity",n[n.PronunciationAssessment_EnableMiscue=65]="PronunciationAssessment_EnableMiscue",n[n.PronunciationAssessment_Json=66]="PronunciationAssessment_Json",n[n.PronunciationAssessment_Params=67]="PronunciationAssessment_Params",n[n.WebWorkerLoadType=68]="WebWorkerLoadType",n[n.TalkingAvatarService_WebRTC_SDP=69]="TalkingAvatarService_WebRTC_SDP"})(r.PropertyId||(r.PropertyId={}))})(yd)),yd}var ko={},om;function jR(){if(om)return ko;om=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.Recognizer=void 0;const r=ne(),n=ae(),s=me(),h=J();let a=class TC{constructor(c,o,u,d){this.audioConfig=c!==void 0?c:h.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=o.clone(),this.privConnectionFactory=u,this.tokenCredential=d,this.implCommonRecognizerSetup()}close(c,o){s.Contracts.throwIfDisposed(this.privDisposed),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),c,o)}get internalData(){return this.privReco}async dispose(c){this.privDisposed||(this.privDisposed=!0,c&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return r.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(c){r.ServiceRecognizerBase.telemetryDataEnabled=c}implCommonRecognizerSetup(){let c=typeof window<"u"?"Browser":"Node",o="unknown",u="unknown";typeof navigator<"u"&&(c=c+"/"+navigator.platform,o=navigator.userAgent,u=navigator.appVersion);const d=this.createRecognizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(c,o,u))));this.privReco=this.createServiceRecognizer(TC.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,d)}async recognizeOnceAsyncImpl(c){s.Contracts.throwIfDisposed(this.privDisposed);const o=new n.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(c,o.resolve,o.reject);const u=await o.promise;return await this.implRecognizerStop(),u}async startContinuousRecognitionAsyncImpl(c){s.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(c,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){s.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(c,o){const u=c.getProperty(h.PropertyId.SpeechServiceConnection_Key,void 0);return u&&u!==""?new r.CognitiveSubscriptionKeyAuthentication(u):o?new r.CognitiveTokenAuthentication(async()=>{try{const d=await o.getToken("https://cognitiveservices.azure.com/.default");return(d==null?void 0:d.token)??""}catch(d){throw d}},async()=>{try{const d=await o.getToken("https://cognitiveservices.azure.com/.default");return(d==null?void 0:d.token)??""}catch(d){throw d}}):new r.CognitiveTokenAuthentication(()=>{const d=c.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)},()=>{const d=c.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)})}};return ko.Recognizer=a,ko}var xo={},Sd={},sm;function Ot(){return sm||(sm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechStartEventSensitivity=r.RecognitionMode=void 0,(function(n){n.Interactive="Interactive",n.Dictation="Dictation",n.Conversation="Conversation",n.None="None"})(r.RecognitionMode||(r.RecognitionMode={})),(function(n){n.Low="low",n.Medium="medium",n.High="high"})(r.SpeechStartEventSensitivity||(r.SpeechStartEventSensitivity={}))})(Sd)),Sd}var am;function DR(){if(am)return xo;am=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.SpeechRecognizer=void 0;const r=ne(),n=Ot(),s=ae(),h=me(),a=J();let l=class AC extends a.Recognizer{constructor(o,u){const d=o;h.Contracts.throwIfNull(d,"speechConfig"),h.Contracts.throwIfNullOrWhitespace(d.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new r.SpeechConnectionFactory,o.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(o,u,d){const v=o;return u.properties.mergeTo(v.properties),new AC(o,d)}get endpointId(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){h.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,o)}get speechRecognitionLanguage(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,a.OutputFormat[a.OutputFormat.Simple])===a.OutputFormat[a.OutputFormat.Simple]?a.OutputFormat.Simple:a.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(n.RecognitionMode.Interactive),o,u)}startContinuousRecognitionAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(r.ForceDictationPropertyName,void 0)===void 0?n.RecognitionMode.Conversation:n.RecognitionMode.Dictation),o,u)}stopContinuousRecognitionAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,u)}startKeywordRecognitionAsync(o,u,d){h.Contracts.throwIfNull(o,"model"),d&&d("Not yet implemented.")}stopKeywordRecognitionAsync(o){o&&o()}close(o,u){h.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,s.marshalPromiseToCallbacks)(this.dispose(!0),o,u)}async dispose(o){this.privDisposedRecognizer||(o&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(o))}createRecognizerConfig(o){return new r.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,u,d,v){const f=d;return new r.SpeechServiceRecognizer(o,u,f,v,this)}};return xo.SpeechRecognizer=l,xo}var Mo={},No={},Xr={},cm;function bC(){if(cm)return Xr;cm=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.ConnectionMessageImpl=Xr.ConnectionMessage=void 0;const r=gt(),n=ae(),s=EC(),h=Sp();let a=class{};Xr.ConnectionMessage=a;class l{constructor(o){this.privConnectionMessage=o,this.privProperties=new s.PropertyCollection,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]&&this.privProperties.setProperty(h.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(u=>{this.privProperties.setProperty(u,this.privConnectionMessage.headers[u])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(o=>o.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===n.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===n.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Xr.ConnectionMessageImpl=l,Xr}var um;function IC(){if(um)return No;um=1,Object.defineProperty(No,"__esModule",{value:!0}),No.Connection=void 0;const r=ne(),n=ae(),s=bC(),h=me(),a=J();let l=class up{static fromRecognizer(o){const u=o.internalData,d=new up;return d.privInternalData=u,d.setupEvents(),d}static fromSynthesizer(o){const u=o.internalData,d=new up;return d.privInternalData=u,d.setupEvents(),d}openConnection(o,u){(0,n.marshalPromiseToCallbacks)(this.privInternalData.connect(),o,u)}closeConnection(o,u){if(this.privInternalData instanceof r.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,n.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),o,u)}setMessageProperty(o,u,d){if(h.Contracts.throwIfNullOrWhitespace(u,"propertyName"),this.privInternalData instanceof r.ServiceRecognizerBase){if(o.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{const v=this.privInternalData.speechContext.getContext();v[u]=d}}else if(this.privInternalData instanceof r.SynthesisAdapterBase){if(o.toLowerCase()!=="speech.config"&&o.toLowerCase()!=="synthesis.context")throw new Error("Only speech.config and synthesis.context message paths are currently supported for synthesizer");if(o.toLowerCase()==="speech.config"){if(u.toLowerCase()!=="context")throw new Error("Only context property is currently supported for speech.config message path for synthesizer");this.privInternalData.synthesizerConfig.setContextFromJson(d)}else this.privInternalData.synthesisContext.setSection(u,d)}}sendMessageAsync(o,u,d,v){(0,n.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(o,u),d,v)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(o=>{o.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new a.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new a.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new a.ConnectionMessageEventArgs(new s.ConnectionMessageImpl(o.message))):o.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new a.ConnectionMessageEventArgs(new s.ConnectionMessageImpl(o.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(o=>{this.receivedServiceMessage&&this.receivedServiceMessage(new a.ServiceEventArgs(o.jsonString,o.name))})}};return No.Connection=l,No}var lm;function zR(){if(lm)return Mo;lm=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.TranslationRecognizer=void 0;const r=ne(),n=Ot(),s=ae(),h=IC(),a=me(),l=J();let c=class _C extends l.Recognizer{constructor(u,d,v){const f=u;a.Contracts.throwIfNull(f,"speechConfig"),super(d,f.properties,v||new r.TranslationConnectionFactory,u.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&a.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationVoice),l.PropertyId[l.PropertyId.SpeechServiceConnection_TranslationVoice]),a.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages),l.PropertyId[l.PropertyId.SpeechServiceConnection_TranslationToLanguages]),a.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage),l.PropertyId[l.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(u,d,v){const f=u;return d.properties.mergeTo(f.properties),d.properties.getProperty(l.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===r.AutoDetectSourceLanguagesOpenRangeOptionName&&f.properties.setProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new _C(u,v)}get speechRecognitionLanguage(){return a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(l.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(u){this.properties.setProperty(l.PropertyId.SpeechServiceAuthorization_Token,u)}recognizeOnceAsync(u,d){a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,s.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(n.RecognitionMode.Interactive),u,d)}startContinuousRecognitionAsync(u,d){(0,s.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),u,d)}stopContinuousRecognitionAsync(u,d){(0,s.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),u,d)}removeTargetLanguage(u){if(a.Contracts.throwIfNullOrUndefined(u,"language to be removed"),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const d=this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),v=d.indexOf(u);v>-1&&(d.splice(v,1),this.properties.setProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,d.join(",")),this.updateLanguages(d))}}addTargetLanguage(u){a.Contracts.throwIfNullOrUndefined(u,"language to be added");let d=[];this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(d=this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),d.includes(u)||(d.push(u),this.properties.setProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,d.join(",")))):(this.properties.setProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,u),d=[u]),this.updateLanguages(d)}close(u,d){a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,s.marshalPromiseToCallbacks)(this.dispose(!0),u,d)}onConnection(){}async dispose(u){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,u&&(await this.implRecognizerStop(),await super.dispose(u)))}createRecognizerConfig(u){return new r.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,d,v,f){const m=v;return new r.TranslationServiceRecognizer(u,d,m,f,this)}updateLanguages(u){const d=h.Connection.fromRecognizer(this);d&&(d.setMessageProperty("speech.context","translationcontext",{to:u}),d.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:u})))}};return Mo.TranslationRecognizer=c,Mo}var Oo={},dm;function LR(){if(dm)return Oo;dm=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.Translations=void 0;const r=J();let n=class{constructor(){this.privMap=new r.PropertyCollection}get languages(){return this.privMap.keys}get(h,a){return this.privMap.getProperty(h,a)}set(h,a){this.privMap.setProperty(h,a)}};return Oo.Translations=n,Oo}var Cd={},pm;function qR(){return pm||(pm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NoMatchReason=void 0,(function(n){n[n.NotRecognized=0]="NotRecognized",n[n.InitialSilenceTimeout=1]="InitialSilenceTimeout",n[n.InitialBabbleTimeout=2]="InitialBabbleTimeout"})(r.NoMatchReason||(r.NoMatchReason={}))})(Cd)),Cd}var jo={},hm;function BR(){if(hm)return jo;hm=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.NoMatchDetails=void 0;const r=ne(),n=J();let s=class kC{constructor(a){this.privReason=a}static fromResult(a){const l=r.SimpleSpeechPhrase.fromJSON(a.json,0);let c=n.NoMatchReason.NotRecognized;switch(l.RecognitionStatus){case r.RecognitionStatus.BabbleTimeout:c=n.NoMatchReason.InitialBabbleTimeout;break;case r.RecognitionStatus.InitialSilenceTimeout:c=n.NoMatchReason.InitialSilenceTimeout;break;default:c=n.NoMatchReason.NotRecognized;break}return new kC(c)}get reason(){return this.privReason}};return jo.NoMatchDetails=s,jo}var Do={},vm;function FR(){if(vm)return Do;vm=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.TranslationRecognitionCanceledEventArgs=void 0;let r=class{constructor(s,h,a,l,c){this.privCancelReason=h,this.privErrorDetails=a,this.privResult=c,this.privSessionId=s,this.privErrorCode=l}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Do.TranslationRecognitionCanceledEventArgs=r,Do}var zo={},fm;function xC(){if(fm)return zo;fm=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.CancellationDetailsBase=void 0;let r=class{constructor(s,h,a){this.privReason=s,this.privErrorDetails=h,this.privErrorCode=a}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};return zo.CancellationDetailsBase=r,zo}var Lo={},gm;function UR(){if(gm)return Lo;gm=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.CancellationDetails=void 0;const r=ne(),n=xC(),s=J();let h=class MC extends n.CancellationDetailsBase{constructor(l,c,o){super(l,c,o)}static fromResult(l){let c=s.CancellationReason.Error,o=s.CancellationErrorCode.NoError;if(l instanceof s.RecognitionResult&&l.json){const u=r.SimpleSpeechPhrase.fromJSON(l.json,0);c=r.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus)}return l.properties&&(o=s.CancellationErrorCode[l.properties.getProperty(r.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new MC(c,l.errorDetails||r.EnumTranslation.implTranslateErrorDetails(o),o)}};return Lo.CancellationDetails=h,Lo}var Pd={},mm;function WR(){return mm||(mm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationErrorCode=void 0,(function(n){n[n.NoError=0]="NoError",n[n.AuthenticationFailure=1]="AuthenticationFailure",n[n.BadRequestParameters=2]="BadRequestParameters",n[n.TooManyRequests=3]="TooManyRequests",n[n.ConnectionFailure=4]="ConnectionFailure",n[n.ServiceTimeout=5]="ServiceTimeout",n[n.ServiceError=6]="ServiceError",n[n.RuntimeError=7]="RuntimeError",n[n.Forbidden=8]="Forbidden"})(r.CancellationErrorCode||(r.CancellationErrorCode={}))})(Pd)),Pd}var qo={},ym;function HR(){if(ym)return qo;ym=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.ConnectionEventArgs=void 0;const r=J();let n=class extends r.SessionEventArgs{};return qo.ConnectionEventArgs=n,qo}var Bo={},Sm;function VR(){if(Sm)return Bo;Sm=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.ServiceEventArgs=void 0;const r=J();let n=class extends r.SessionEventArgs{constructor(h,a,l){super(l),this.privJsonResult=h,this.privEventName=a}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Bo.ServiceEventArgs=n,Bo}var Fo={},Cm;function KR(){if(Cm)return Fo;Cm=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.PhraseListGrammar=void 0;const r=me();let n=class NC{constructor(h){this.privGrammerBuilder=h.dynamicGrammar}static fromRecognizer(h){const a=h.internalData;return new NC(a)}addPhrase(h){this.privGrammerBuilder.addPhrase(h)}addPhrases(h){this.privGrammerBuilder.addPhrase(h)}clear(){this.privGrammerBuilder.clearPhrases()}setWeight(h){r.Contracts.throwIfNumberOutOfRange(h,"weight",0,2),this.privGrammerBuilder.setWeight(h)}};return Fo.PhraseListGrammar=n,Fo}var Zr={},Pm;function Cp(){if(Pm)return Zr;Pm=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.DialogServiceConfigImpl=Zr.DialogServiceConfig=void 0;const r=me(),n=J();let s=class{constructor(){}set applicationId(l){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};Zr.DialogServiceConfig=s;class h extends s{constructor(){super(),this.privSpeechConfig=new n.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(l){r.Contracts.throwIfNullOrWhitespace(l,"value"),this.privSpeechConfig.speechRecognitionLanguage=l}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(l){this.privSpeechConfig.outputFormat=l}setProperty(l,c){this.privSpeechConfig.setProperty(l,c)}getProperty(l,c){return this.privSpeechConfig.getProperty(l)}setProxy(l,c,o,u){this.setProperty(n.PropertyId.SpeechServiceConnection_ProxyHostName,l),this.setProperty(n.PropertyId.SpeechServiceConnection_ProxyPort,`${c}`),o&&this.setProperty(n.PropertyId.SpeechServiceConnection_ProxyUserName,o),u&&this.setProperty(n.PropertyId.SpeechServiceConnection_ProxyPassword,u)}setServiceProperty(l,c,o){this.privSpeechConfig.setServiceProperty(l,c)}close(){}}return Zr.DialogServiceConfigImpl=h,Zr}var Uo={},wm;function GR(){if(wm)return Uo;wm=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.BotFrameworkConfig=void 0;const r=me(),n=Cp(),s=J();let h=class extends n.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(l,c,o){r.Contracts.throwIfNullOrWhitespace(l,"subscription"),r.Contracts.throwIfNullOrWhitespace(c,"region");const u=new n.DialogServiceConfigImpl;return u.setProperty(s.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(s.PropertyId.SpeechServiceConnection_Key,l),u.setProperty(s.PropertyId.SpeechServiceConnection_Region,c),o&&u.setProperty(s.PropertyId.Conversation_ApplicationId,o),u}static fromAuthorizationToken(l,c,o){r.Contracts.throwIfNullOrWhitespace(l,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(c,"region");const u=new n.DialogServiceConfigImpl;return u.setProperty(s.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,l),u.setProperty(s.PropertyId.SpeechServiceConnection_Region,c),o&&u.setProperty(s.PropertyId.Conversation_ApplicationId,o),u}static fromHost(l,c,o){r.Contracts.throwIfNullOrUndefined(l,"host");const u=l instanceof URL?l:new URL(`wss://${l}.convai.speech.azure.us`);r.Contracts.throwIfNullOrUndefined(u,"resolvedHost");const d=new n.DialogServiceConfigImpl;return d.setProperty(s.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.BotFramework),d.setProperty(s.PropertyId.SpeechServiceConnection_Host,u.toString()),c!==void 0&&d.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),d}static fromEndpoint(l,c){r.Contracts.throwIfNull(l,"endpoint");const o=new n.DialogServiceConfigImpl;return o.setProperty(s.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,l.toString()),c!==void 0&&o.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),o}};return Uo.BotFrameworkConfig=h,Uo}var Wo={},Rm;function JR(){if(Rm)return Wo;Rm=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.CustomCommandsConfig=void 0;const r=me(),n=Cp(),s=J();let h=class extends n.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(l,c,o){r.Contracts.throwIfNullOrWhitespace(l,"applicationId"),r.Contracts.throwIfNullOrWhitespace(c,"subscription"),r.Contracts.throwIfNullOrWhitespace(o,"region");const u=new n.DialogServiceConfigImpl;return u.setProperty(s.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(s.PropertyId.Conversation_ApplicationId,l),u.setProperty(s.PropertyId.SpeechServiceConnection_Key,c),u.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u}static fromAuthorizationToken(l,c,o){r.Contracts.throwIfNullOrWhitespace(l,"applicationId"),r.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(o,"region");const u=new n.DialogServiceConfigImpl;return u.setProperty(s.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(s.PropertyId.Conversation_ApplicationId,l),u.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c),u.setProperty(s.PropertyId.SpeechServiceConnection_Region,o),u}set applicationId(l){r.Contracts.throwIfNullOrWhitespace(l,"value"),this.setProperty(s.PropertyId.Conversation_ApplicationId,l)}get applicationId(){return this.getProperty(s.PropertyId.Conversation_ApplicationId)}};return Wo.CustomCommandsConfig=h,Wo}var Ho={},Vo={},Ko={},Go={},Em;function Ar(){if(Em)return Go;Em=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.QueryParameterNames=void 0;let r=class{};return Go.QueryParameterNames=r,r.BotId="botid",r.CustomSpeechDeploymentId="cid",r.CustomVoiceDeploymentId="deploymentId",r.EnableAudioLogging="storeAudio",r.EnableLanguageId="lidEnabled",r.EnableWordLevelTimestamps="wordLevelTimestamps",r.EndSilenceTimeoutMs="endSilenceTimeoutMs",r.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",r.SegmentationMaximumTimeMs="segmentationMaximumTimeMs",r.SegmentationStrategy="segmentationStrategy",r.Format="format",r.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",r.Language="language",r.Profanity="profanity",r.RequestBotStatusMessages="enableBotMessageStatus",r.StableIntermediateThreshold="stableIntermediateThreshold",r.StableTranslation="stableTranslation",r.TestHooks="testhooks",r.Postprocessing="postprocessing",r.CtsMeetingId="meetingId",r.CtsDeviceId="deviceId",r.CtsIsParticipant="isParticipant",r.EnableAvatar="enableTalkingAvatar",Go}var Tm;function er(){if(Tm)return Ko;Tm=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.ConnectionFactoryBase=void 0;const r=ne(),n=ae(),s=J(),h=Ar();let a=class{static getHostSuffix(c){if(c){if(c.toLowerCase().startsWith("china"))return".azure.cn";if(c.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(c,o,u){new Map([[s.PropertyId.Speech_SegmentationSilenceTimeoutMs,h.QueryParameterNames.SegmentationSilenceTimeoutMs],[s.PropertyId.SpeechServiceConnection_EnableAudioLogging,h.QueryParameterNames.EnableAudioLogging],[s.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,h.QueryParameterNames.EndSilenceTimeoutMs],[s.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,h.QueryParameterNames.InitialSilenceTimeoutMs],[s.PropertyId.SpeechServiceResponse_PostProcessingOption,h.QueryParameterNames.Postprocessing],[s.PropertyId.SpeechServiceResponse_ProfanityOption,h.QueryParameterNames.Profanity],[s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,h.QueryParameterNames.EnableWordLevelTimestamps],[s.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,h.QueryParameterNames.StableIntermediateThreshold]]).forEach((f,m)=>{this.setUrlParameter(m,f,c,o,u)});const v=JSON.parse(c.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(v).forEach(f=>{o[f]=v[f]})}setUrlParameter(c,o,u,d,v){const f=u.parameters.getProperty(c,void 0);f&&(!v||v.search(o)===-1)&&(d[o]=f.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(c){const o=new URL(c);o.protocol="https:",o.port="443",o.searchParams.append("GenerateRedirectResponse","true");const d=o.toString();n.Events.instance.onEvent(new n.ConnectionRedirectEvent("",d,void 0,"ConnectionFactoryBase: redirectUrl request"));const v=await fetch(d);if(v.status!==200)return c;const f=await v.text();n.Events.instance.onEvent(new n.ConnectionRedirectEvent("",f,c,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(f.trim()).toString()}catch{return c}}};return Ko.ConnectionFactoryBase=a,Ko}var Am;function QR(){if(Am)return Vo;Am=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.DialogConnectionFactory=void 0;const r=ct(),n=ne(),s=J(),h=er(),a=ne(),l=gt(),c=Ar();class o extends h.ConnectionFactoryBase{create(d,v,f){const m=d.parameters.getProperty(s.PropertyId.Conversation_ApplicationId,""),y=d.parameters.getProperty(s.PropertyId.Conversation_DialogType),w=d.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region),P=d.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),T=d.parameters.getProperty(s.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),R={};R[l.HeaderNames.ConnectionId]=f,R[c.QueryParameterNames.Format]=d.parameters.getProperty(n.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase(),R[c.QueryParameterNames.Language]=P,R[c.QueryParameterNames.RequestBotStatusMessages]=T,m&&(R[c.QueryParameterNames.BotId]=m,y===s.DialogServiceConfig.DialogTypes.CustomCommands&&(R[l.HeaderNames.CustomCommandsAppId]=m));const A=y===s.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",b=y===s.DialogServiceConfig.DialogTypes.CustomCommands?"v1":y===s.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",x={};v.token!=null&&v.token!==""&&(x[v.headerName]=v.token);let z=d.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,"");if(!z){const F=h.ConnectionFactoryBase.getHostSuffix(w),B=d.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,`wss://${w}.${o.BaseUrl}${F}`);z=`${B.endsWith("/")?B:B+"/"}${A}${o.ApiKey}/${b}`}this.setCommonUrlParams(d,R,z);const N=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(z,R,x,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(d),N,f))}}return Vo.DialogConnectionFactory=o,o.ApiKey="api",o.BaseUrl="convai.speech",Vo}var bm;function YR(){if(bm)return Ho;bm=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.DialogServiceConnector=void 0;const r=QR(),n=ne(),s=Ot(),h=ae(),a=me(),l=J(),c=Sp();let o=class extends l.Recognizer{constructor(d,v){const f=d;a.Contracts.throwIfNull(d,"dialogConfig"),super(v,f.properties,new r.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=f.properties.clone();const m=this.buildAgentConfig();this.privReco.agentConfig.set(m)}connect(d,v){(0,h.marshalPromiseToCallbacks)(this.privReco.connect(),d,v)}disconnect(d,v){(0,h.marshalPromiseToCallbacks)(this.privReco.disconnect(),d,v)}get authorizationToken(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(d){a.Contracts.throwIfNullOrWhitespace(d,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,d)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(c.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(d){this.properties.setProperty(c.PropertyId.Conversation_Speech_Activity_Template,d)}listenOnceAsync(d,v){if(this.isTurnComplete){a.Contracts.throwIfDisposed(this.privIsDisposed);const m=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const y=new h.Deferred;await this.privReco.recognize(s.RecognitionMode.Conversation,y.resolve,y.reject);const w=await y.promise;return await this.implRecognizerStop(),w})();m.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,h.marshalPromiseToCallbacks)(m.finally(()=>{this.isTurnComplete=!0}),d,v)}}sendActivityAsync(d,v,f){(0,h.marshalPromiseToCallbacks)(this.privReco.sendMessage(d),v,f)}close(d,v){a.Contracts.throwIfDisposed(this.privIsDisposed),(0,h.marshalPromiseToCallbacks)(this.dispose(!0),d,v)}async dispose(d){this.privIsDisposed||d&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(d))}createRecognizerConfig(d){return new n.RecognizerConfig(d,this.privProperties)}createServiceRecognizer(d,v,f,m){const y=f;return new n.DialogServiceAdapter(d,v,y,m,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(c.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(c.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(c.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return Ho.DialogServiceConnector=o,Ho}var Jo={},Im;function XR(){if(Im)return Jo;Im=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.ActivityReceivedEventArgs=void 0;let r=class{constructor(s,h){this.privActivity=s,this.privAudioStream=h}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};return Jo.ActivityReceivedEventArgs=r,Jo}var Qo={},Yo={},_m;function ZR(){if(_m)return Yo;_m=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.TurnStatusResponsePayload=void 0;class r{constructor(s){this.privMessageStatusResponse=JSON.parse(s)}static fromJSON(s){return new r(s)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}return Yo.TurnStatusResponsePayload=r,Yo}var km;function $R(){if(km)return Qo;km=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.TurnStatusReceivedEventArgs=void 0;const r=ZR();let n=class{constructor(h){this.privTurnStatus=r.TurnStatusResponsePayload.fromJSON(h)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};return Qo.TurnStatusReceivedEventArgs=n,Qo}var wd={},xm;function eE(){return xm||(xm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ServicePropertyChannel=void 0,(function(n){n[n.UriQueryParameter=0]="UriQueryParameter"})(r.ServicePropertyChannel||(r.ServicePropertyChannel={}))})(wd)),wd}var Rd={},Mm;function tE(){return Mm||(Mm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ProfanityOption=void 0,(function(n){n[n.Masked=0]="Masked",n[n.Removed=1]="Removed",n[n.Raw=2]="Raw"})(r.ProfanityOption||(r.ProfanityOption={}))})(Rd)),Rd}var Xo={},Nm;function rE(){if(Nm)return Xo;Nm=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.BaseAudioPlayer=void 0;const r=Bt(),n=J(),s=dn();let h=class{constructor(l){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,l===void 0&&(l=n.AudioStreamFormat.getDefaultInputFormat()),this.init(l)}playAudioSample(l,c,o){try{this.ensureInitializedContext();const u=this.formatAudioData(l),d=new Float32Array(this.samples.length+u.length);d.set(this.samples,0),d.set(u,this.samples.length),this.samples=d,c&&c()}catch(u){o&&o(u)}}stopAudio(l,c){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{l&&l()},o=>{c&&c(o)}),this.audioContext=null)}init(l){this.audioFormat=l,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const l=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},l)}}createAudioContext(){this.audioContext=s.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(l){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(l),128);case 16:return this.formatArrayBuffer(new Int16Array(l),32768);case 32:return this.formatArrayBuffer(new Int32Array(l),2147483648);default:throw new r.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(l,c){const o=new Float32Array(l.length);for(let u=0;u<l.length;u++)o[u]=l[u]/c;return o}updateAudioBuffer(){if(this.samples.length===0)return;const l=this.audioFormat.channels,c=this.audioContext.createBufferSource(),o=this.samples.length/l,u=this.audioContext.createBuffer(l,o,this.audioFormat.samplesPerSec);for(let d=0;d<l;d++){let v=d;const f=u.getChannelData(d);for(let m=0;m<this.samples.length;m++,v+=l)f[m]=this.samples[v]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),c.buffer=u,c.connect(this.gainNode),c.start(this.startTime),this.startTime+=u.duration,this.samples=new Float32Array}async playAudio(l){this.audioContext===null&&this.createAudioContext();const c=this.audioContext.createBufferSource(),o=this.audioContext.destination;await this.audioContext.decodeAudioData(l,u=>{c.buffer=u,c.connect(o),c.start(0)})}};return Xo.BaseAudioPlayer=h,Xo}var Zo={},Om;function nE(){if(Om)return Zo;Om=1,Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.ConnectionMessageEventArgs=void 0;let r=class{constructor(s){this.privConnectionMessage=s}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};return Zo.ConnectionMessageEventArgs=r,Zo}var $o={},Ed={},jm;function OC(){return jm||(jm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LanguageIdMode=void 0,(function(n){n[n.AtStart=0]="AtStart",n[n.Continuous=1]="Continuous"})(r.LanguageIdMode||(r.LanguageIdMode={}))})(Ed)),Ed}var Dm;function iE(){if(Dm)return $o;Dm=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.AutoDetectSourceLanguageConfig=void 0;const r=ne(),n=me(),s=J(),h=OC();let a=class Jc{constructor(){this.privProperties=new s.PropertyCollection,this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=h.LanguageIdMode.AtStart}static fromOpenRange(){const c=new Jc;return c.properties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.AutoDetectSourceLanguagesOpenRangeOptionName),c.properties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),c}static fromLanguages(c){n.Contracts.throwIfArrayEmptyOrWhitespace(c,"languages");const o=new Jc;return o.properties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),o}static fromSourceLanguageConfigs(c){if(c.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const o=new Jc,u=[];return c.forEach(d=>{if(u.push(d.language),d.endpointId!==void 0&&d.endpointId!==""){const v=d.language+s.PropertyId.SpeechServiceConnection_EndpointId.toString();o.properties.setProperty(v,d.endpointId)}}),o.properties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,u.join()),o}get properties(){return this.privProperties}set mode(c){c===h.LanguageIdMode.Continuous?(this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=c}};return $o.AutoDetectSourceLanguageConfig=a,$o}var es={},zm;function oE(){if(zm)return es;zm=1,Object.defineProperty(es,"__esModule",{value:!0}),es.AutoDetectSourceLanguageResult=void 0;const r=me();let n=class lp{constructor(h,a){r.Contracts.throwIfNullOrUndefined(h,"language"),r.Contracts.throwIfNullOrUndefined(a,"languageDetectionConfidence"),this.privLanguage=h,this.privLanguageDetectionConfidence=a}static fromResult(h){return new lp(h.language,h.languageDetectionConfidence)}static fromConversationTranscriptionResult(h){return new lp(h.language,h.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};return es.AutoDetectSourceLanguageResult=n,es}var ts={},Lm;function sE(){if(Lm)return ts;Lm=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.SourceLanguageConfig=void 0;const r=me();let n=class jC{constructor(h,a){r.Contracts.throwIfNullOrUndefined(h,"language"),this.privLanguage=h,this.privEndpointId=a}static fromLanguage(h,a){return new jC(h,a)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};return ts.SourceLanguageConfig=n,ts}var Td={},$r={},qm;function DC(){if(qm)return $r;qm=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.ConversationImpl=$r.Conversation=void 0;const r=ne(),n=ae(),s=me(),h=J();let a=class{constructor(){}static createConversationAsync(o,u,d,v){s.Contracts.throwIfNullOrUndefined(o,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(o.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!o.subscriptionKey&&!o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceAuthorization_Token])&&s.Contracts.throwIfNullOrUndefined(o.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let f,m,y;return typeof u=="string"?(f=new l(o,u),(0,n.marshalPromiseToCallbacks)((async()=>{})(),d,v)):(f=new l(o),m=u,y=d,f.createConversationAsync((()=>{m&&m()}),w=>{y&&y(w)})),f}};$r.Conversation=a;class l extends a{constructor(o,u){if(super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=f=>{var m;this.privIsConnected=!0;try{(m=this.privConversationTranslator)!=null&&m.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,f)}catch{}},this.onDisconnected=f=>{var m;try{(m=this.privConversationTranslator)!=null&&m.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,f)}catch{}finally{this.close(!1)}},this.onCanceled=(f,m)=>{var y;try{(y=this.privConversationTranslator)!=null&&y.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,m)}catch{}},this.onParticipantUpdateCommandReceived=(f,m)=>{try{const y=this.privParticipants.getParticipant(m.id);if(y!==void 0){switch(m.key){case r.ConversationTranslatorCommandTypes.changeNickname:y.displayName=m.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:y.isUsingTts=m.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:y.profanity=m.value;break;case r.ConversationTranslatorCommandTypes.setMute:y.isMuted=m.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:y.translateToLanguages=m.value;break}this.privParticipants.addOrUpdateParticipant(y),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,[this.toParticipant(y)],m.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(f,m)=>{try{this.privParticipants.participants.forEach(y=>y.isMuted=y.isHost?!1:m.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,this.toParticipants(!1),m.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(f,m)=>{try{const y=this.privParticipants.addOrUpdateParticipant(m.participant);y!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,[this.toParticipant(y)],m.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(f,m)=>{try{const y=this.privParticipants.getParticipant(m.participant.id);y!==void 0&&(this.privParticipants.deleteParticipant(m.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.LeftConversation,[this.toParticipant(y)],m.sessionId)))}catch{}},this.onTranslationReceived=(f,m)=>{try{switch(m.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break}}catch{}},this.onParticipantsListReceived=(f,m)=>{var y;try{if(m.sessionToken!==void 0&&m.sessionToken!==null&&(this.privRoom.token=m.sessionToken),this.privParticipants.participants=[...m.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),m.sessionId)),this.me.isHost){const w=(y=this.privConversationTranslator)==null?void 0:y.properties.getProperty(h.PropertyId.ConversationTranslator_Name);w!==void 0&&w.length>0&&w!==this.me.displayName&&this.changeNicknameAsync(w)}}catch{}},this.onConversationExpiration=(f,m)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,m)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new h.PropertyCollection,this.privManager=new r.ConversationManager,o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage]),u)this.privConversationId=u;else{o.targetLanguages.length===0&&o.addTargetLanguage(this.privLanguage),o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceResponse_ProfanityOption])||o.setProfanity(h.ProfanityOption.Masked);let m=o.getProperty(h.PropertyId[h.PropertyId.ConversationTranslator_Name]);m==null&&(m="Host"),s.Contracts.throwIfNullOrTooLong(m,"nickname",50),s.Contracts.throwIfNullOrTooShort(m,"nickname",2),o.setProperty(h.PropertyId[h.PropertyId.ConversationTranslator_Name],m)}this.privConfig=o;const v=o;s.Contracts.throwIfNull(v,"speechConfig"),this.privProperties=v.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,u;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(u=this.privParticipants.me)==null?void 0:u.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const o=this.conversationId,u=this.participants.map(f=>({id:f.id,preferredLanguage:f.preferredLanguage,voice:f.voice})),d={};for(const f of r.ConversationConnectionConfig.transcriptionEventKeys){const m=this.properties.getProperty(f,"");m!==""&&(d[f]=m)}return{id:o,participants:u,conversationProperties:d}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){s.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}set conversationTranslator(o){this.privConversationTranslator=o}onToken(o){this.privConversationTranslator.onToken(o)}createConversationAsync(o,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,(d=>{d||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=d,this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}startConversationAsync(o,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=r.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}addParticipantAsync(o,u,d){s.Contracts.throwIfNullOrUndefined(o,"Participant"),(0,n.marshalPromiseToCallbacks)(this.addParticipantImplAsync(o),u,d)}joinConversationAsync(o,u,d,v,f){try{s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,(m=>{s.Contracts.throwIfNullOrUndefined(m,this.privErrors.permissionDeniedConnect),this.privRoom=m,this.privConfig.authorizationToken=m.cognitiveSpeechAuthToken,v&&v(m.cognitiveSpeechAuthToken)}),(m=>{this.handleError(m,f)}))}catch(m){this.handleError(m,f)}}deleteConversationAsync(o,u){(0,n.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),o,u)}async deleteConversationImplAsync(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(o,u){(0,n.marshalPromiseToCallbacks)(this.endConversationImplAsync(),o,u)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteAllParticipantsAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteParticipantAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),(()=>{this.handleCallback(u,d)}),(f=>{this.handleError(f,d)}))}catch(v){this.handleError(v,d)}}removeParticipantAsync(o,u,d){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))(0,n.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(o),u,d);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),d);let v="";typeof o=="string"?v=o:o.hasOwnProperty("id")?v=o.id:o.hasOwnProperty("userId")&&(v=o.userId),s.Contracts.throwIfNullOrWhitespace(v,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(m=>m.id===v)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(v),(()=>{this.handleCallback(u,d)}),(m=>{this.handleError(m,d)}))}}catch(v){this.handleError(v,d)}}unlockConversationAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteAllParticipantsAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteParticipantAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),(()=>{this.handleCallback(u,d)}),(f=>{this.handleError(f,d)}))}catch(v){this.handleError(v,d)}}sendTextMessageAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}setTranslatedLanguagesAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}changeNicknameAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const d=this.conversationInfo;return d.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(d,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const u=this.conversationInfo;return u.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(u,"leave")}async close(o){var u;try{this.privIsConnected=!1,await((u=this.privConversationRecognizer)==null?void 0:u.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(d){throw d}o&&this.dispose()}handleCallback(o,u){if(o){try{o()}catch(d){u&&u(d)}o=void 0}}handleError(o,u){if(u)if(o instanceof Error){const d=o;u(d.name+": "+d.message)}else u(o)}toParticipants(o){const u=this.privParticipants.participants.map(d=>this.toParticipant(d));return o?u:u.filter(d=>d.isHost===!1)}toParticipant(o){return new h.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,u){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(o,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:r.ConversationTranslatorMessageTypes.instantMessage})}}return $r.ConversationImpl=l,$r}var rs={},Bm;function aE(){if(Bm)return rs;Bm=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.ConversationCommon=void 0;let r=class{constructor(s){this.privAudioConfig=s}handleCallback(s,h){if(s){try{s()}catch(a){h&&h(a)}s=void 0}}handleError(s,h){if(h)if(s instanceof Error){const a=s;h(a.name+": "+a.message)}else h(s)}};return rs.ConversationCommon=r,rs}var ns={},Fm;function cE(){if(Fm)return ns;Fm=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.ConversationExpirationEventArgs=void 0;const r=J();let n=class extends r.SessionEventArgs{constructor(h,a){super(a),this.privExpirationTime=h}get expirationTime(){return this.privExpirationTime}};return ns.ConversationExpirationEventArgs=n,ns}var is={},Um;function uE(){if(Um)return is;Um=1,Object.defineProperty(is,"__esModule",{value:!0}),is.ConversationParticipantsChangedEventArgs=void 0;const r=J();let n=class extends r.SessionEventArgs{constructor(h,a,l){super(l),this.privReason=h,this.privParticipant=a}get reason(){return this.privReason}get participants(){return this.privParticipant}};return is.ConversationParticipantsChangedEventArgs=n,is}var os={},Wm;function lE(){if(Wm)return os;Wm=1,Object.defineProperty(os,"__esModule",{value:!0}),os.ConversationTranslationCanceledEventArgs=void 0;const r=Aa();let n=class extends r.CancellationEventArgsBase{};return os.ConversationTranslationCanceledEventArgs=n,os}var ss={},Hm;function dE(){if(Hm)return ss;Hm=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.ConversationTranslationEventArgs=void 0;const r=J();let n=class extends r.RecognitionEventArgs{constructor(h,a,l){super(a,l),this.privResult=h}get result(){return this.privResult}};return ss.ConversationTranslationEventArgs=n,ss}var as={},Vm;function pE(){if(Vm)return as;Vm=1,Object.defineProperty(as,"__esModule",{value:!0}),as.ConversationTranslationResult=void 0;const r=wC();let n=class extends r.TranslationRecognitionResult{constructor(h,a,l,c,o,u,d,v,f,m,y){super(a,c,o,u,d,v,void 0,void 0,f,m,y),this.privId=h,this.privOrigLang=l}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return as.ConversationTranslationResult=n,as}var Ad={},cs={},us={},Km;function zC(){if(Km)return us;Km=1,Object.defineProperty(us,"__esModule",{value:!0}),us.StringUtils=void 0;let r=class{static formatString(s,h){if(!s)return"";if(!h)return s;let a="",l="";const c=d=>{a+=d},o=d=>{l+=d};let u=c;for(let d=0;d<s.length;d++){const v=s[d],f=d+1<s.length?s[d+1]:"";switch(v){case"{":f==="{"?(u("{"),d++):u=o;break;case"}":f==="}"?(u("}"),d++):(h.hasOwnProperty(l)&&(a+=h[l]),u=c,l="");break;default:u(v);break}}return a}};return us.StringUtils=r,us}var Gm;function hE(){if(Gm)return cs;Gm=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.ConversationTranslatorConnectionFactory=void 0;const r=ct(),n=zC(),s=me(),h=J(),a=gt(),l=Ar(),c=er(),o=ne();let u=class LC extends c.ConnectionFactoryBase{constructor(v){super(),s.Contracts.throwIfNullOrUndefined(v,"convGetter"),this.privConvGetter=v}create(v,f,m){const y=v.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",w=this.privConvGetter().room,P=w.cognitiveSpeechRegion||v.parameters.getProperty(h.PropertyId.SpeechServiceConnection_Region,""),T={hostSuffix:c.ConnectionFactoryBase.getHostSuffix(P),path:LC.CTS_VIRT_MIC_PATH,region:encodeURIComponent(P)};T[l.QueryParameterNames.Language]=encodeURIComponent(v.parameters.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage,"")),T[l.QueryParameterNames.CtsMeetingId]=encodeURIComponent(w.roomId),T[l.QueryParameterNames.CtsDeviceId]=encodeURIComponent(w.participantId),T[l.QueryParameterNames.CtsIsParticipant]=w.isHost?"":"&"+l.QueryParameterNames.CtsIsParticipant;let R="";const A={},b={};if(y){R=v.parameters.getProperty(h.PropertyId.SpeechServiceConnection_Endpoint),R||(R="wss://"+v.parameters.getProperty(h.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),R=n.StringUtils.formatString(R,T);const z=new URL(R);z.searchParams.forEach((F,B)=>{A[B]=F}),new o.TranscriberConnectionFactory().setQueryParams(A,v,R),A[l.QueryParameterNames.CtsMeetingId]=T[l.QueryParameterNames.CtsMeetingId],A[l.QueryParameterNames.CtsDeviceId]=T[l.QueryParameterNames.CtsDeviceId],w.isHost||(A[l.QueryParameterNames.CtsIsParticipant]=""),l.QueryParameterNames.Format in A||(A[l.QueryParameterNames.Format]="simple"),z.searchParams.forEach((F,B)=>{z.searchParams.set(B,A[B]),delete A[B]}),R=z.toString()}else{const z=new o.TranslationConnectionFactory;R=z.getEndpointUrl(v,!0),R=n.StringUtils.formatString(R,T),z.setQueryParams(A,v,R)}b[a.HeaderNames.ConnectionId]=m,b[r.RestConfigBase.configParams.token]=w.token,f.token&&(b[f.headerName]=f.token);const x=v.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new r.WebsocketConnection(R,A,b,new o.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(v),x,m))}};return cs.ConversationTranslatorConnectionFactory=u,u.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",cs}var Jm;function vE(){return Jm||(Jm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationTranslator=r.SpeechState=void 0;const n=ne(),s=hE(),h=ae(),a=me(),l=J(),c=DC(),o=Pp();var u;(function(f){f[f.Inactive=0]="Inactive",f[f.Connecting=1]="Connecting",f[f.Connected=2]="Connected"})(u=r.SpeechState||(r.SpeechState={}));class d extends l.TranslationRecognizer{constructor(m,y,w,P){super(m,y,new s.ConversationTranslatorConnectionFactory(P)),this.privSpeechState=u.Inactive,w&&(this.privTranslator=w,this.sessionStarted=()=>{this.privSpeechState=u.Connected},this.sessionStopped=()=>{this.privSpeechState=u.Inactive},this.recognizing=(T,R)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,R)},this.recognized=async(T,R)=>{var A;(A=R.result)!=null&&A.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(R.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,R)},this.canceled=async()=>{if(this.privSpeechState!==u.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=u.Inactive}})}get state(){return this.privSpeechState}set state(m){this.privSpeechState=m}set authentication(m){this.privReco.authentication=m}onConnection(){this.privSpeechState=u.Connected}async onCancelSpeech(){this.privSpeechState=u.Inactive,await this.cancelSpeech()}fireCancelEvent(m){try{if(this.privTranslator.canceled){const y=new o.ConversationTranslationCanceledEventArgs(l.CancellationReason.Error,m,l.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,y)}}catch{}}async cancelSpeech(){var m;try{this.stopContinuousRecognitionAsync(),await((m=this.privReco)==null?void 0:m.disconnect()),this.privSpeechState=u.Inactive}catch{}}}class v extends o.ConversationCommon{constructor(m){super(m),this.privErrors=n.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new l.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var m;return(m=this.privConversation)==null?void 0:m.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===u.Connected||this.privCTRecognizer.state===u.Connecting||this.privConversation.isMutedByHost)}onToken(m){this.privCTRecognizer.authentication=m}setServiceProperty(m,y){const w=JSON.parse(this.privProperties.getProperty(n.ServicePropertiesPropertyName,"{}"));w[m]=y,this.privProperties.setProperty(n.ServicePropertiesPropertyName,JSON.stringify(w))}joinConversationAsync(m,y,w,P,T){try{if(typeof m=="string"){a.Contracts.throwIfNullOrUndefined(m,this.privErrors.invalidArgs.replace("{arg}","conversation id")),a.Contracts.throwIfNullOrWhitespace(y,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),T);let R=w;(R==null||R==="")&&(R=n.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=l.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(l.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(R),this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_RecoLanguage],R),this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.ConversationTranslator_Name],y);const A=[l.PropertyId.SpeechServiceConnection_Host,l.PropertyId.ConversationTranslator_Host,l.PropertyId.SpeechServiceConnection_Endpoint,l.PropertyId.SpeechServiceConnection_ProxyHostName,l.PropertyId.SpeechServiceConnection_ProxyPassword,l.PropertyId.SpeechServiceConnection_ProxyPort,l.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const x of A){const z=this.privProperties.getProperty(x);if(z){const N=typeof x=="string"?x:l.PropertyId[x];this.privSpeechTranslationConfig.setProperty(N,z)}}const b=JSON.parse(this.privProperties.getProperty(n.ServicePropertiesPropertyName,"{}"));for(const x of Object.keys(b))this.privSpeechTranslationConfig.setServiceProperty(x,b[x],l.ServicePropertyChannel.UriQueryParameter);this.privConversation=new c.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(m,y,R,(x=>{x||this.handleError(new Error(this.privErrors.permissionDeniedConnect),T),this.privSpeechTranslationConfig.authorizationToken=x,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync((()=>{this.handleCallback(P,T)}),(z=>{this.handleError(z,T)}))}),(x=>{this.handleError(x,T)}))}else typeof m=="object"?(a.Contracts.throwIfNullOrUndefined(m,this.privErrors.invalidArgs.replace("{arg}","conversation id")),a.Contracts.throwIfNullOrWhitespace(y,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(l.PropertyId.ConversationTranslator_Name,y),this.privConversation=m,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,a.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),a.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=m.config,this.handleCallback(w,P)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),P)}catch(R){this.handleError(R,typeof w=="string"?T:P)}}leaveConversationAsync(m,y){(0,h.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),m,y)}sendTextMessageAsync(m,y,w){try{a.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),a.Contracts.throwIfNullOrWhitespace(m,this.privErrors.invalidArgs.replace("{arg}",m)),this.privConversation.sendTextMessageAsync(m,y,w)}catch(P){this.handleError(P,w)}}startTranscribingAsync(m,y){(0,h.marshalPromiseToCallbacks)((async()=>{try{a.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),a.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),a.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),y),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(w){throw this.privIsSpeaking=!1,await this.cancelSpeech(),w}})(),m,y)}stopTranscribingAsync(m,y){(0,h.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((w,P)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(w,P)})}catch{await this.cancelSpeech()}})(),m,y)}isDisposed(){return this.privIsDisposed}dispose(m,y,w){(0,h.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),y,w)}async cancelSpeech(){var m;try{this.privIsSpeaking=!1,await((m=this.privCTRecognizer)==null?void 0:m.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=l.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_Key],"");const m=()=>this.privConversation;this.privCTRecognizer=new d(this.privSpeechTranslationConfig,this.privAudioConfig,this,m)}catch(m){throw await this.cancelSpeech(),m}}startContinuousRecognition(){return new Promise((m,y)=>{this.privCTRecognizer.startContinuousRecognitionAsync(m,y)})}}r.ConversationTranslator=v})(Ad)),Ad}var ls={},Qm;function fE(){if(Qm)return ls;Qm=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.ConversationTranscriber=void 0;const r=ne(),n=Ot(),s=ae(),h=me(),a=J();let l=class qC extends a.Recognizer{constructor(o,u){const d=o;h.Contracts.throwIfNull(d,"speechConfig"),h.Contracts.throwIfNullOrWhitespace(d.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new r.ConversationTranscriberConnectionFactory,o.tokenCredential),this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(o,u,d){const v=o;return u.properties.mergeTo(v.properties),new qC(o,d)}get endpointId(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){h.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,o)}get speechRecognitionLanguage(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return h.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,a.OutputFormat[a.OutputFormat.Simple])===a.OutputFormat[a.OutputFormat.Simple]?a.OutputFormat.Simple:a.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),o,u)}stopTranscribingAsync(o,u){(0,s.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,u)}close(o,u){h.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,s.marshalPromiseToCallbacks)(this.dispose(!0),o,u)}async dispose(o){this.privDisposedRecognizer||(o&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(o))}createRecognizerConfig(o){return new r.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,u,d,v){const f=d;return v.isSpeakerDiarizationEnabled=!0,new r.ConversationTranscriptionServiceRecognizer(o,u,f,v,this)}};return ls.ConversationTranscriber=l,ls}var en={},Ym;function gE(){if(Ym)return en;Ym=1,Object.defineProperty(en,"__esModule",{value:!0}),en.Participant=en.User=void 0;const r=J();class n{constructor(a){this.privUserId=a}get userId(){return this.privUserId}}en.User=n;class s{constructor(a,l,c,o,u,d,v,f){this.privId=a,this.privAvatar=l,this.privDisplayName=c,this.privIsHost=o,this.privIsMuted=u,this.privIsUsingTts=d,this.privPreferredLanguage=v,this.privVoice=f,this.privProperties=new r.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(a,l,c){return new s(a,"",a,!1,!1,!1,l,c)}}return en.Participant=s,en}var bd={},Xm;function mE(){return Xm||(Xm=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParticipantChangedReason=void 0,(function(n){n[n.JoinedConversation=0]="JoinedConversation",n[n.LeftConversation=1]="LeftConversation",n[n.Updated=2]="Updated"})(r.ParticipantChangedReason||(r.ParticipantChangedReason={}))})(bd)),bd}var tn={},Zm;function yE(){if(Zm)return tn;Zm=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.MeetingImpl=tn.Meeting=void 0;const r=ne(),n=ae(),s=me(),h=J();let a=class{constructor(){}static createMeetingAsync(o,u,d,v){if(s.Contracts.throwIfNullOrUndefined(o,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(o.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),s.Contracts.throwIfNull(u,"meetingId"),u.length===0)throw new Error("meetingId cannot be empty");!o.subscriptionKey&&!o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceAuthorization_Token])&&s.Contracts.throwIfNullOrUndefined(o.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const f=new l(o,u);return(0,n.marshalPromiseToCallbacks)((async()=>{})(),d,v),f}};tn.Meeting=a;class l extends a{constructor(o,u){super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=f=>{var m;this.privIsConnected=!0;try{(m=this.privConversationTranslator)!=null&&m.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,f)}catch{}},this.onDisconnected=f=>{var m;try{(m=this.privConversationTranslator)!=null&&m.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,f)}catch{}finally{this.close(!1)}},this.onCanceled=(f,m)=>{var y;try{(y=this.privConversationTranslator)!=null&&y.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,m)}catch{}},this.onParticipantUpdateCommandReceived=(f,m)=>{try{const y=this.privParticipants.getParticipant(m.id);if(y!==void 0){switch(m.key){case r.ConversationTranslatorCommandTypes.changeNickname:y.displayName=m.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:y.isUsingTts=m.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:y.profanity=m.value;break;case r.ConversationTranslatorCommandTypes.setMute:y.isMuted=m.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:y.translateToLanguages=m.value;break}this.privParticipants.addOrUpdateParticipant(y),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,[this.toParticipant(y)],m.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(f,m)=>{try{this.privParticipants.participants.forEach(y=>y.isMuted=y.isHost?!1:m.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,this.toParticipants(!1),m.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(f,m)=>{try{const y=this.privParticipants.addOrUpdateParticipant(m.participant);y!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,[this.toParticipant(y)],m.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(f,m)=>{try{const y=this.privParticipants.getParticipant(m.participant.id);y!==void 0&&(this.privParticipants.deleteParticipant(m.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.LeftConversation,[this.toParticipant(y)],m.sessionId)))}catch{}},this.onTranslationReceived=(f,m)=>{try{switch(m.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new h.ConversationTranslationEventArgs(m.payload,void 0,m.sessionId));break}}catch{}},this.onParticipantsListReceived=(f,m)=>{var y;try{if(m.sessionToken!==void 0&&m.sessionToken!==null&&(this.privRoom.token=m.sessionToken),this.privParticipants.participants=[...m.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),m.sessionId)),this.me.isHost){const w=(y=this.privConversationTranslator)==null?void 0:y.properties.getProperty(h.PropertyId.ConversationTranslator_Name);w!==void 0&&w.length>0&&w!==this.me.displayName&&this.changeNicknameAsync(w)}}catch{}},this.onConversationExpiration=(f,m)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,m)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new h.PropertyCollection,this.privManager=new r.ConversationManager,o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=u,this.privConfig=o;const v=o;s.Contracts.throwIfNull(v,"speechConfig"),this.privProperties=v.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,u;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(u=this.privParticipants.me)==null?void 0:u.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const o=this.meetingId,u=this.participants.map(f=>({id:f.id,preferredLanguage:f.preferredLanguage,voice:f.voice})),d={};for(const f of r.ConversationConnectionConfig.transcriptionEventKeys){const m=this.properties.getProperty(f,"");m!==""&&(d[f]=m)}return{id:o,participants:u,meetingProperties:d}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){s.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}createMeetingAsync(o,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,(d=>{d||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=d,this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}startMeetingAsync(o,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}addParticipantAsync(o,u,d){s.Contracts.throwIfNullOrUndefined(o,"Participant"),(0,n.marshalPromiseToCallbacks)(this.addParticipantImplAsync(o),u,d)}joinMeetingAsync(o,u,d,v,f){try{s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,(m=>{s.Contracts.throwIfNullOrUndefined(m,this.privErrors.permissionDeniedConnect),this.privRoom=m,this.privConfig.authorizationToken=m.cognitiveSpeechAuthToken,v&&v(m.cognitiveSpeechAuthToken)}),(m=>{this.handleError(m,f)}))}catch(m){this.handleError(m,f)}}deleteMeetingAsync(o,u){(0,n.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),o,u)}async deleteMeetingImplAsync(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(o,u){(0,n.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),o,u)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteAllParticipantsAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteParticipantAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),(()=>{this.handleCallback(u,d)}),(f=>{this.handleError(f,d)}))}catch(v){this.handleError(v,d)}}removeParticipantAsync(o,u,d){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))(0,n.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(o),u,d);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),d);let v="";typeof o=="string"?v=o:o.hasOwnProperty("id")?v=o.id:o.hasOwnProperty("userId")&&(v=o.userId),s.Contracts.throwIfNullOrWhitespace(v,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(m=>m.id===v)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(v),(()=>{this.handleCallback(u,d)}),(m=>{this.handleError(m,d)}))}}catch(v){this.handleError(v,d)}}unlockMeetingAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteAllParticipantsAsync(o,u){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(o,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteParticipantAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),(()=>{this.handleCallback(u,d)}),(f=>{this.handleError(f,d)}))}catch(v){this.handleError(v,d)}}sendTextMessageAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}setTranslatedLanguagesAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}changeNicknameAsync(o,u,d){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}catch(v){this.handleError(v,d)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const d=this.meetingInfo;return d.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(d,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const u=this.meetingInfo;return u.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(u,"leave")}async close(o){var u;try{this.privIsConnected=!1,await((u=this.privConversationRecognizer)==null?void 0:u.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(d){throw d}o&&this.dispose()}handleCallback(o,u){if(o){try{o()}catch(d){u&&u(d)}o=void 0}}handleError(o,u){if(u)if(o instanceof Error){const d=o;u(d.name+": "+d.message)}else u(o)}toParticipants(o){const u=this.privParticipants.participants.map(d=>this.toParticipant(d));return o?u:u.filter(d=>d.isHost===!1)}toParticipant(o){return new h.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,u){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(o,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:r.ConversationTranslatorMessageTypes.instantMessage})}}return tn.MeetingImpl=l,tn}var ds={},$m;function SE(){if($m)return ds;$m=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.MeetingTranscriptionCanceledEventArgs=void 0;const r=Aa();class n extends r.CancellationEventArgsBase{}return ds.MeetingTranscriptionCanceledEventArgs=n,ds}var ps={},ey;function CE(){if(ey)return ps;ey=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.MeetingTranscriber=void 0;const r=ne(),n=ae(),s=me(),h=J(),a=Pp();let l=class{constructor(o){this.privAudioConfig=o,this.privProperties=new h.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return h.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){s.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(h.PropertyId.SpeechServiceAuthorization_Token,o)}joinMeetingAsync(o,u,d){const v=o;s.Contracts.throwIfNullOrUndefined(a.MeetingImpl,"Meeting"),this.privRecognizer=new r.TranscriberRecognizer(o.config,this.privAudioConfig),s.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,n.marshalPromiseToCallbacks)(v.connectTranscriberRecognizer(this.privRecognizer),u,d)}startTranscribingAsync(o,u){this.privRecognizer.startContinuousRecognitionAsync(o,u)}stopTranscribingAsync(o,u){this.privRecognizer.stopContinuousRecognitionAsync(o,u)}leaveMeetingAsync(o,u){this.privRecognizer.disconnectCallbacks(),(0,n.marshalPromiseToCallbacks)((async()=>{})(),o,u)}close(o,u){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),o,u)}async dispose(o){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),o&&(this.privDisposedRecognizer=!0))}};return ps.MeetingTranscriber=l,ps}var hs={},ty;function PE(){if(ty)return hs;ty=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.ConversationTranscriptionResult=void 0;const r=J();let n=class extends r.RecognitionResult{constructor(h,a,l,c,o,u,d,v,f,m,y){super(h,a,l,c,o,u,d,f,m,y),this.privSpeakerId=v}get speakerId(){return this.privSpeakerId}};return hs.ConversationTranscriptionResult=n,hs}var ry;function Pp(){return ry||(ry=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationTranscriptionResult=r.MeetingTranscriber=r.MeetingTranscriptionCanceledEventArgs=r.MeetingImpl=r.Meeting=r.ParticipantChangedReason=r.User=r.Participant=r.ConversationTranscriber=r.ConversationTranslator=r.ConversationTranslationResult=r.ConversationTranslationEventArgs=r.ConversationTranslationCanceledEventArgs=r.ConversationParticipantsChangedEventArgs=r.ConversationExpirationEventArgs=r.ConversationCommon=r.ConversationImpl=r.Conversation=void 0;var n=DC();Object.defineProperty(r,"Conversation",{enumerable:!0,get:function(){return n.Conversation}}),Object.defineProperty(r,"ConversationImpl",{enumerable:!0,get:function(){return n.ConversationImpl}});var s=aE();Object.defineProperty(r,"ConversationCommon",{enumerable:!0,get:function(){return s.ConversationCommon}});var h=cE();Object.defineProperty(r,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return h.ConversationExpirationEventArgs}});var a=uE();Object.defineProperty(r,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return a.ConversationParticipantsChangedEventArgs}});var l=lE();Object.defineProperty(r,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return l.ConversationTranslationCanceledEventArgs}});var c=dE();Object.defineProperty(r,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return c.ConversationTranslationEventArgs}});var o=pE();Object.defineProperty(r,"ConversationTranslationResult",{enumerable:!0,get:function(){return o.ConversationTranslationResult}});var u=vE();Object.defineProperty(r,"ConversationTranslator",{enumerable:!0,get:function(){return u.ConversationTranslator}});var d=fE();Object.defineProperty(r,"ConversationTranscriber",{enumerable:!0,get:function(){return d.ConversationTranscriber}});var v=gE();Object.defineProperty(r,"Participant",{enumerable:!0,get:function(){return v.Participant}}),Object.defineProperty(r,"User",{enumerable:!0,get:function(){return v.User}});var f=mE();Object.defineProperty(r,"ParticipantChangedReason",{enumerable:!0,get:function(){return f.ParticipantChangedReason}});var m=yE();Object.defineProperty(r,"Meeting",{enumerable:!0,get:function(){return m.Meeting}}),Object.defineProperty(r,"MeetingImpl",{enumerable:!0,get:function(){return m.MeetingImpl}});var y=SE();Object.defineProperty(r,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return y.MeetingTranscriptionCanceledEventArgs}});var w=CE();Object.defineProperty(r,"MeetingTranscriber",{enumerable:!0,get:function(){return w.MeetingTranscriber}});var P=PE();Object.defineProperty(r,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return P.ConversationTranscriptionResult}})})(Td)),Td}var rn={},ny;function wp(){if(ny)return rn;ny=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.SynthesisRequest=rn.Synthesizer=void 0;const r=ne(),n=ae(),s=me(),h=J();let a=class BC{constructor(o){const u=o;s.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new n.Queue,this.tokenCredential=o.tokenCredential}get authorizationToken(){return this.properties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){s.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(h.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(h.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===r.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(o){const u={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let d=this.properties.getProperty(h.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),v=this.properties.getProperty(h.PropertyId.SpeechServiceConnection_SynthVoice,""),f=BC.XMLEncode(o);return this.autoDetectSourceLanguage?d="en-US":v=v||u[d],v&&(f=`<voice name='${v}'>${f}</voice>`),f=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${d}'>${f}</speak>`,f}async dispose(o){this.privDisposed||(o&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const o=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(o.text,o.isSSML,o.requestId,o.cb,o.err,o.dataStream)}}createSynthesizerConfig(o){return new r.SynthesizerConfig(o,this.privProperties)}implCommonSynthesizeSetup(){let o=typeof window<"u"?"Browser":"Node",u="unknown",d="unknown";typeof navigator<"u"&&(o=o+"/"+navigator.platform,u=navigator.userAgent,d=navigator.appVersion);const v=this.createSynthesizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(o,u,d)))),f=this.privProperties.getProperty(h.PropertyId.SpeechServiceConnection_Key,void 0),m=f&&f!==""?new r.CognitiveSubscriptionKeyAuthentication(f):this.tokenCredential?new r.CognitiveTokenAuthentication(async()=>{try{const y=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(y==null?void 0:y.token)??""}catch(y){throw y}},async()=>{try{const y=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(y==null?void 0:y.token)??""}catch(y){throw y}}):new r.CognitiveTokenAuthentication(()=>{const y=this.privProperties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(y)},()=>{const y=this.privProperties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(y)});this.privAdapter=this.createSynthesisAdapter(m,this.privConnectionFactory,v),this.privRestAdapter=this.createRestSynthesisAdapter(m,v)}static XMLEncode(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};rn.Synthesizer=a;class l{constructor(o,u,d,v,f,m){this.requestId=o,this.text=u,this.isSSML=d,this.cb=v,this.err=f,this.dataStream=m}}return rn.SynthesisRequest=l,rn}var vs={},iy;function wE(){if(iy)return vs;iy=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.SpeechSynthesizer=void 0;const r=ne(),n=ae(),s=mC(),h=Ta(),a=qn(),l=me(),c=J(),o=wp();let u=class FC extends c.Synthesizer{constructor(v,f){super(v),f!==null&&(f===void 0?this.audioConfig=typeof window>"u"?void 0:c.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=f),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(v,f,m){const y=v;return f.properties.mergeTo(y.properties),new FC(v,m)}speakTextAsync(v,f,m,y){this.speakImpl(v,!1,f,m,y)}speakSsmlAsync(v,f,m,y){this.speakImpl(v,!0,f,m,y)}async getVoicesAsync(v=""){return this.getVoices(v)}close(v,f){l.Contracts.throwIfDisposed(this.privDisposed),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),v,f)}get internalData(){return this.privAdapter}createSynthesisAdapter(v,f,m){return new r.SpeechSynthesisAdapter(v,f,m,this,this.audioConfig)}createRestSynthesisAdapter(v,f){return new r.SynthesisRestAdapter(f,v)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=h.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(c.SpeechSynthesisOutputFormat[this.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(v,f,m,y,w){try{l.Contracts.throwIfDisposed(this.privDisposed);const P=(0,n.createNoDashGuid)();let T;w instanceof c.PushAudioOutputStreamCallback?T=new a.PushAudioOutputStreamImpl(w):w instanceof c.PullAudioOutputStream?T=w:w!==void 0?T=new s.AudioFileWriter(w):T=void 0,this.synthesisRequestQueue.enqueue(new o.SynthesisRequest(P,v,f,R=>{if(this.privSynthesizing=!1,m)try{m(R)}catch(A){y&&y(A)}m=void 0,this.adapterSpeak().catch(()=>{})},R=>{y&&y(R)},T)),this.adapterSpeak().catch(()=>{})}catch(P){if(y)if(P instanceof Error){const T=P;y(T.name+": "+T.message)}else y(P);this.dispose(!0).catch(()=>{})}}async getVoices(v){const f=(0,n.createNoDashGuid)(),m=await this.privRestAdapter.getVoicesList(f);if(m.ok&&Array.isArray(m.json)){let y=m.json;return v&&v.length>0&&(y=y.filter(w=>!!w.Locale&&w.Locale.toLowerCase()===v.toLowerCase())),new c.SynthesisVoicesResult(f,y,void 0)}else return new c.SynthesisVoicesResult(f,void 0,`Error: ${m.status}: ${m.statusText}`)}};return vs.SpeechSynthesizer=u,vs}var fs={},oy;function RE(){if(oy)return fs;oy=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.SynthesisResult=void 0;let r=class{constructor(s,h,a,l){this.privResultId=s,this.privReason=h,this.privErrorDetails=a,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};return fs.SynthesisResult=r,fs}var gs={},sy;function EE(){if(sy)return gs;sy=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.SpeechSynthesisResult=void 0;const r=J();let n=class extends r.SynthesisResult{constructor(h,a,l,c,o,u){super(h,a,c,o),this.privAudioData=l,this.privAudioDuration=u}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return gs.SpeechSynthesisResult=n,gs}var ms={},ay;function TE(){if(ay)return ms;ay=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.SpeechSynthesisEventArgs=void 0;let r=class{constructor(s){this.privResult=s}get result(){return this.privResult}};return ms.SpeechSynthesisEventArgs=r,ms}var ys={},cy;function AE(){if(cy)return ys;cy=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.SpeechSynthesisWordBoundaryEventArgs=void 0;let r=class{constructor(s,h,a,l,c,o){this.privAudioOffset=s,this.privDuration=h,this.privText=a,this.privWordLength=l,this.privTextOffset=c,this.privBoundaryType=o}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};return ys.SpeechSynthesisWordBoundaryEventArgs=r,ys}var Ss={},uy;function bE(){if(uy)return Ss;uy=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.SpeechSynthesisBookmarkEventArgs=void 0;let r=class{constructor(s,h){this.privAudioOffset=s,this.privText=h}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};return Ss.SpeechSynthesisBookmarkEventArgs=r,Ss}var Cs={},ly;function IE(){if(ly)return Cs;ly=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.SpeechSynthesisVisemeEventArgs=void 0;let r=class{constructor(s,h,a){this.privAudioOffset=s,this.privVisemeId=h,this.privAnimation=a}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};return Cs.SpeechSynthesisVisemeEventArgs=r,Cs}var Id={},dy;function _E(){return dy||(dy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechSynthesisBoundaryType=void 0,(function(n){n.Word="WordBoundary",n.Punctuation="PunctuationBoundary",n.Sentence="SentenceBoundary"})(r.SpeechSynthesisBoundaryType||(r.SpeechSynthesisBoundaryType={}))})(Id)),Id}var Ps={},py;function kE(){if(py)return Ps;py=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.SynthesisVoicesResult=void 0;const r=J();let n=class extends r.SynthesisResult{constructor(h,a,l){if(Array.isArray(a)){super(h,r.ResultReason.VoicesListRetrieved,void 0,new r.PropertyCollection),this.privVoices=[];for(const c of a)this.privVoices.push(new r.VoiceInfo(c))}else super(h,r.ResultReason.Canceled,l||"Error information unavailable",new r.PropertyCollection)}get voices(){return this.privVoices}};return Ps.SynthesisVoicesResult=n,Ps}var _d={},hy;function xE(){return hy||(hy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.VoiceInfo=r.SynthesisVoiceType=r.SynthesisVoiceGender=void 0;var n;(function(c){c[c.Unknown=0]="Unknown",c[c.Female=1]="Female",c[c.Male=2]="Male",c[c.Neutral=3]="Neutral"})(n=r.SynthesisVoiceGender||(r.SynthesisVoiceGender={}));var s;(function(c){c[c.Unknown=0]="Unknown",c[c.OnlineNeural=1]="OnlineNeural",c[c.OnlineStandard=2]="OnlineStandard",c[c.OfflineNeural=3]="OfflineNeural",c[c.OfflineStandard=4]="OfflineStandard",c[c.OnlineNeuralHD=5]="OnlineNeuralHD"})(s=r.SynthesisVoiceType||(r.SynthesisVoiceType={}));const h={[n[n.Neutral]]:n.Neutral,[n[n.Male]]:n.Male,[n[n.Female]]:n.Female},a={Neural:s.OnlineNeural,NeuralHD:s.OnlineNeuralHD};class l{constructor(o){if(this.privStyleList=[],o){if(this.privName=o.Name,this.privLocale=o.Locale,this.privShortName=o.ShortName,this.privLocaleName=o.LocaleName,this.privDisplayName=o.DisplayName,this.privLocalName=o.LocalName,this.privVoiceType=a[o.VoiceType]||s.Unknown,this.privGender=h[o.Gender]||n.Unknown,o.StyleList&&Array.isArray(o.StyleList))for(const u of o.StyleList)this.privStyleList.push(u);this.privSampleRateHertz=o.SampleRateHertz,this.privStatus=o.Status,o.ExtendedPropertyMap&&(this.privExtendedPropertyMap=o.ExtendedPropertyMap),this.privWordsPerMinute=o.WordsPerMinute,Array.isArray(o.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...o.SecondaryLocaleList]),Array.isArray(o.RolePlayList)&&(this.privRolePlayList=[...o.RolePlayList]),o.VoiceTag&&(this.privVoiceTag=o.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}r.VoiceInfo=l})(_d)),_d}var ws={},vy;function ME(){if(vy)return ws;vy=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.SpeakerAudioDestination=void 0;const r=ae(),n=qn(),s=dn(),h=1800,a={[s.AudioFormatTag.PCM]:"audio/wav",[s.AudioFormatTag.MuLaw]:"audio/x-wav",[s.AudioFormatTag.MP3]:"audio/mpeg",[s.AudioFormatTag.OGG_OPUS]:"audio/ogg",[s.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[s.AudioFormatTag.ALaw]:"audio/x-wav",[s.AudioFormatTag.FLAC]:"audio/flac",[s.AudioFormatTag.AMR_WB]:"audio/amr-wb",[s.AudioFormatTag.G722]:"audio/G722"};let l=class{constructor(o){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=o||(0,r.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(o,u,d){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(o),this.updateSourceBuffer().then(()=>{u&&u()},v=>{d&&d(v)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(o),this.privBytesReceived+=o.byteLength)}close(o,u){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{o&&o()},d=>{u&&u(d)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===s.AudioFormatTag.PCM||this.privFormat.formatTag===s.AudioFormatTag.MuLaw||this.privFormat.formatTag===s.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let d=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(d).then(()=>{d=this.privFormat.addHeader(d);const v=new Blob([d],{type:a[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(v),this.notifyPlayback().then(()=>{o&&o()},f=>{u&&u(f)})},v=>{u&&u(v)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(o){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=o;const u=a[this.privFormat.formatTag];u===void 0?console.warn(`Unknown mimeType for format ${s.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(u)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=h,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(u),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(d=>{r.Events.instance.onEvent(new r.BackgroundEvent(d))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(d=>{r.Events.instance.onEvent(new r.BackgroundEvent(d))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(d=>{r.Events.instance.onEvent(new r.BackgroundEvent(d))})):(console.warn(`Format ${s.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new n.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var o;return((o=this.privAudio)==null?void 0:o.volume)??-1}set volume(o){this.privAudio&&(this.privAudio.volume=o)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(o,u){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{o&&o()},d=>{u&&u(d)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const o=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(o)}catch{this.privAudioBuffer.unshift(o),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};return ws.SpeakerAudioDestination=l,ws}var Rs={},fy;function NE(){if(fy)return Rs;fy=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.ConversationTranscriptionCanceledEventArgs=void 0;const r=Aa();let n=class extends r.CancellationEventArgsBase{};return Rs.ConversationTranscriptionCanceledEventArgs=n,Rs}var Es={},gy;function OE(){if(gy)return Es;gy=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.MeetingTranscriptionCanceledEventArgs=void 0;const r=Aa();let n=class extends r.CancellationEventArgsBase{};return Es.MeetingTranscriptionCanceledEventArgs=n,Es}var kd={},my;function jE(){return my||(my=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PronunciationAssessmentGradingSystem=void 0,(function(n){n[n.FivePoint=1]="FivePoint",n[n.HundredMark=2]="HundredMark"})(r.PronunciationAssessmentGradingSystem||(r.PronunciationAssessmentGradingSystem={}))})(kd)),kd}var xd={},yy;function DE(){return yy||(yy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PronunciationAssessmentGranularity=void 0,(function(n){n[n.Phoneme=1]="Phoneme",n[n.Word=2]="Word",n[n.FullText=3]="FullText"})(r.PronunciationAssessmentGranularity||(r.PronunciationAssessmentGranularity={}))})(xd)),xd}var Ts={},Sy;function zE(){if(Sy)return Ts;Sy=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.PronunciationAssessmentConfig=void 0;const r=me(),n=J();let s=class UC{constructor(a,l=n.PronunciationAssessmentGradingSystem.FivePoint,c=n.PronunciationAssessmentGranularity.Phoneme,o=!1){r.Contracts.throwIfNullOrUndefined(a,"referenceText"),this.privProperties=new n.PropertyCollection,this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_ReferenceText,a),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_GradingSystem,n.PronunciationAssessmentGradingSystem[l]),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_Granularity,n.PronunciationAssessmentGranularity[c]),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}static fromJSON(a){r.Contracts.throwIfNullOrUndefined(a,"json");const l=new UC("");return l.privProperties=new n.PropertyCollection,l.properties.setProperty(n.PropertyId.PronunciationAssessment_Json,a),l}toJSON(){return this.updateJson(),this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_Params)}applyTo(a){this.updateJson();const l=a.internalData;l.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(n.PropertyId.PronunciationAssessment_Params),l.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(n.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(a){r.Contracts.throwIfNullOrWhitespace(a,"referenceText"),this.properties.setProperty(n.PropertyId.PronunciationAssessment_ReferenceText,a)}set phonemeAlphabet(a){r.Contracts.throwIfNullOrWhitespace(a,"phonemeAlphabet"),this.privPhonemeAlphabet=a}set enableMiscue(a){const l=a?"true":"false";this.properties.setProperty(n.PropertyId.PronunciationAssessment_EnableMiscue,l)}get enableMiscue(){return this.properties.getProperty(n.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(a){this.privNBestPhonemeCount=a}set enableProsodyAssessment(a){this.privEnableProsodyAssessment=a}get properties(){return this.privProperties}updateJson(){const a=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_Json,"{}"),l=JSON.parse(a),c=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_ReferenceText);c&&(l.referenceText=c);const o=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_GradingSystem);o&&(l.gradingSystem=o);const u=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_Granularity);u&&(l.granularity=u),this.privPhonemeAlphabet&&(l.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(l.nbestPhonemeCount=this.privNBestPhonemeCount),l.enableProsodyAssessment=this.privEnableProsodyAssessment,l.dimension="Comprehensive",this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_EnableMiscue)&&(l.enableMiscue=this.enableMiscue),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_Params,JSON.stringify(l))}};return Ts.PronunciationAssessmentConfig=s,Ts}var As={},Cy;function LE(){if(Cy)return As;Cy=1,Object.defineProperty(As,"__esModule",{value:!0}),As.PronunciationAssessmentResult=void 0;const r=me(),n=J();let s=class WC{constructor(a){const l=JSON.parse(a);r.Contracts.throwIfNullOrUndefined(l.NBest[0],"NBest"),this.privPronJson=l.NBest[0]}static fromResult(a){r.Contracts.throwIfNullOrUndefined(a,"result");const l=a.properties.getProperty(n.PropertyId.SpeechServiceResponse_JsonResult);return r.Contracts.throwIfNullOrUndefined(l,"json"),new WC(l)}get detailResult(){return this.privPronJson}get accuracyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.AccuracyScore}get pronunciationScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.PronScore}get completenessScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.CompletenessScore}get fluencyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.FluencyScore}get prosodyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.ProsodyScore}};return As.PronunciationAssessmentResult=s,As}var bs={},Py;function qE(){if(Py)return bs;Py=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.AvatarConfig=void 0;const r=me(),n=J();let s=class{constructor(a,l,c){this.privCustomized=!1,this.privUseBuiltInVoice=!1,r.Contracts.throwIfNullOrWhitespace(a,"character"),this.character=a,this.style=l,c===void 0&&(c=new n.AvatarVideoFormat),this.videoFormat=c}get customized(){return this.privCustomized}set customized(a){this.privCustomized=a}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(a){this.privUseBuiltInVoice=a}get photoAvatarBaseModel(){return this.privPhotoAvatarBaseModel}set photoAvatarBaseModel(a){this.privPhotoAvatarBaseModel=a}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(a){this.privBackgroundColor=a}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(a){this.privBackgroundImage=a}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(a){this.privRemoteIceServers=a}};return bs.AvatarConfig=s,bs}var Md={},wy;function BE(){return wy||(wy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AvatarEventArgs=r.AvatarEventTypes=void 0,(function(s){s.SwitchedToSpeaking="SwitchedToSpeaking",s.SwitchedToIdle="SwitchedToIdle",s.SessionClosed="SessionClosed"})(r.AvatarEventTypes||(r.AvatarEventTypes={}));class n{constructor(h,a){this.privOffset=h,this.privDescription=a}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}r.AvatarEventArgs=n})(Md)),Md}var Is={},_s={},Ry;function HC(){if(Ry)return _s;Ry=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.SpeechSynthesisConnectionFactory=void 0;const r=ct(),n=J(),s=er(),h=ne(),a=gt(),l=Ar();let c=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(u,d,v){let f=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);const m=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),y=s.ConnectionFactoryBase.getHostSuffix(m),w=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),P=w===void 0?"tts":"voice",T=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+m+"."+P+".speech"+y),R={},A={};if(d.token!==void 0&&d.token!==""&&(A[d.headerName]=d.token),A[a.HeaderNames.ConnectionId]=v,w!==void 0&&w!==""&&(!f||f.search(l.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(R[l.QueryParameterNames.CustomVoiceDeploymentId]=w),u.avatarEnabled&&(!f||f.search(l.QueryParameterNames.EnableAvatar)===-1)&&(R[l.QueryParameterNames.EnableAvatar]="true"),f){const x=new URL(f),z=x.pathname;(z===""||z==="/")&&(x.pathname=this.synthesisUri,f=await s.ConnectionFactoryBase.getRedirectUrlFromEndpoint(x.toString()))}f||(f=T+this.synthesisUri),u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,f);const b=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(f,R,A,new h.WebsocketMessageFormatter,r.ProxyInfo.fromParameters(u.parameters),b,v)}};return _s.SpeechSynthesisConnectionFactory=c,_s}var Ey;function FE(){if(Ey)return Is;Ey=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.AvatarSynthesizer=void 0;const r=HC(),n=ne(),s=ae(),h=Ta(),a=J(),l=me(),c=wp();let o=class extends a.Synthesizer{constructor(d,v){super(d),l.Contracts.throwIfNullOrUndefined(v,"avatarConfig"),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.privAvatarConfig=v,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=h.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(d){l.Contracts.throwIfNullOrUndefined(d,"peerConnection"),this.privIceServers=d.getConfiguration().iceServers,l.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const v=new s.Deferred;d.onicegatheringstatechange=()=>{s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering state: "+d.iceGatheringState,s.EventType.Debug)),d.iceGatheringState==="complete"&&(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering complete.",s.EventType.Info)),v.resolve())},d.onicecandidate=P=>{P.candidate?s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice candidate: "+P.candidate.candidate,s.EventType.Debug)):(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice candidate: complete",s.EventType.Debug)),v.resolve())},setTimeout(()=>{d.iceGatheringState!=="complete"&&(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering timeout.",s.EventType.Warning)),v.resolve())},2e3);const f=await d.createOffer();await d.setLocalDescription(f),await v.promise,s.Events.instance.onEvent(new s.PlatformEvent("peer connection: got local SDP.",s.EventType.Info)),this.privProperties.setProperty(a.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(d.localDescription));const m=await this.speak("",!1);if(m.reason!==a.ResultReason.SynthesizingAudioCompleted)return new a.SynthesisResult(m.resultId,m.reason,m.errorDetails,m.properties);const y=atob(m.properties.getProperty(a.PropertyId.TalkingAvatarService_WebRTC_SDP)),w=new RTCSessionDescription(JSON.parse(y));return await d.setRemoteDescription(w),new a.SynthesisResult(m.resultId,m.reason,void 0,m.properties)}async speakTextAsync(d){const v=await this.speak(d,!1);return new a.SynthesisResult(v.resultId,v.reason,v.errorDetails,v.properties)}async speakSsmlAsync(d){const v=await this.speak(d,!0);return new a.SynthesisResult(v.resultId,v.reason,v.errorDetails,v.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return l.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(d,v,f){return new n.AvatarSynthesisAdapter(d,v,f,this,this.privAvatarConfig)}createRestSynthesisAdapter(d,v){}createSynthesizerConfig(d){const v=super.createSynthesizerConfig(d);return v.avatarEnabled=!0,v}async speak(d,v){const f=(0,s.createNoDashGuid)(),m=new s.Deferred;return this.synthesisRequestQueue.enqueue(new c.SynthesisRequest(f,d,v,y=>{m.resolve(y),this.privSynthesizing=!1,this.adapterSpeak()},y=>{m.reject(y),this.privSynthesizing=!1})),this.adapterSpeak(),m.promise}};return Is.AvatarSynthesizer=o,Is}var nn={},Ty;function UE(){if(Ty)return nn;Ty=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.AvatarVideoFormat=nn.Coordinate=void 0;class r{constructor(h,a){this.x=h,this.y=a}}nn.Coordinate=r;let n=class{constructor(h="H264",a=2e6,l=1920,c=1080){this.codec=h,this.bitrate=a,this.width=l,this.height=c}setCropRange(h,a){this.cropRange={bottomRight:a,topLeft:h}}};return nn.AvatarVideoFormat=n,nn}var ks={},Ay;function WE(){if(Ay)return ks;Ay=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.AvatarWebRTCConnectionResult=void 0;const r=J();let n=class extends r.SynthesisResult{constructor(h,a,l,c,o){super(a,l,c,o),this.privSDPAnswer=h}get SDPAnswer(){return this.privSDPAnswer}};return ks.AvatarWebRTCConnectionResult=n,ks}var xs={},by;function HE(){if(by)return xs;by=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.Diagnostics=void 0;const r=ct(),n=ae();let s=class{static SetLoggingLevel(a){this.privListener=new r.ConsoleLoggingListener(a),n.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(a){if(typeof window>"u")this.privListener&&(this.privListener.logPath=a);else throw new Error("File system logging not available in browser.")}static set onLogOutput(a){this.privListener&&(this.privListener.logCallback=a)}};return xs.Diagnostics=s,s.privListener=void 0,xs}var Iy;function J(){return Iy||(Iy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CustomCommandsConfig=r.BotFrameworkConfig=r.DialogServiceConfig=r.PhraseListGrammar=r.Connection=r.ServiceEventArgs=r.ConnectionEventArgs=r.CancellationErrorCode=r.CancellationDetails=r.CancellationDetailsBase=r.TranslationRecognitionCanceledEventArgs=r.NoMatchDetails=r.NoMatchReason=r.Translations=r.TranslationRecognizer=r.SpeechRecognizer=r.Recognizer=r.PropertyId=r.PropertyCollection=r.SpeechTranslationConfigImpl=r.SpeechTranslationConfig=r.SpeechConfigImpl=r.SpeechConfig=r.ResultReason=r.TranslationSynthesisResult=r.TranslationRecognitionResult=r.TranslationSynthesisEventArgs=r.TranslationRecognitionEventArgs=r.SpeechRecognitionCanceledEventArgs=r.MeetingTranscriptionEventArgs=r.ConversationTranscriptionEventArgs=r.SpeechRecognitionEventArgs=r.SpeechRecognitionResult=r.RecognitionResult=r.OutputFormat=r.RecognitionEventArgs=r.SessionEventArgs=r.KeywordRecognitionModel=r.PushAudioOutputStreamCallback=r.PullAudioInputStreamCallback=r.CancellationReason=r.PushAudioOutputStream=r.PullAudioOutputStream=r.AudioOutputStream=r.PushAudioInputStream=r.PullAudioInputStream=r.AudioInputStream=r.AudioFormatTag=r.AudioStreamFormat=r.AudioConfig=void 0,r.AvatarSynthesizer=r.AvatarEventArgs=r.AvatarConfig=r.LanguageIdMode=r.PronunciationAssessmentResult=r.PronunciationAssessmentConfig=r.PronunciationAssessmentGranularity=r.PronunciationAssessmentGradingSystem=r.MeetingTranscriptionCanceledEventArgs=r.ConversationTranscriptionCanceledEventArgs=r.SpeakerAudioDestination=r.VoiceInfo=r.SynthesisVoiceType=r.SynthesisVoiceGender=r.SynthesisVoicesResult=r.SpeechSynthesisBoundaryType=r.SpeechSynthesisVisemeEventArgs=r.SpeechSynthesisBookmarkEventArgs=r.SpeechSynthesisWordBoundaryEventArgs=r.SpeechSynthesisEventArgs=r.SpeechSynthesisResult=r.SynthesisResult=r.SpeechSynthesizer=r.SpeechSynthesisOutputFormat=r.Synthesizer=r.User=r.ParticipantChangedReason=r.Participant=r.MeetingTranscriber=r.Meeting=r.ConversationTranscriptionResult=r.ConversationTranscriber=r.ConversationTranslator=r.ConversationTranslationResult=r.ConversationTranslationEventArgs=r.ConversationTranslationCanceledEventArgs=r.ConversationParticipantsChangedEventArgs=r.ConversationExpirationEventArgs=r.Conversation=r.SourceLanguageConfig=r.AutoDetectSourceLanguageResult=r.AutoDetectSourceLanguageConfig=r.ConnectionMessage=r.ConnectionMessageEventArgs=r.BaseAudioPlayer=r.ProfanityOption=r.ServicePropertyChannel=r.TurnStatusReceivedEventArgs=r.ActivityReceivedEventArgs=r.DialogServiceConnector=void 0,r.LogLevel=r.Diagnostics=r.AvatarWebRTCConnectionResult=r.Coordinate=r.AvatarVideoFormat=void 0;var n=mR();Object.defineProperty(r,"AudioConfig",{enumerable:!0,get:function(){return n.AudioConfig}});var s=dn();Object.defineProperty(r,"AudioStreamFormat",{enumerable:!0,get:function(){return s.AudioStreamFormat}}),Object.defineProperty(r,"AudioFormatTag",{enumerable:!0,get:function(){return s.AudioFormatTag}});var h=yC();Object.defineProperty(r,"AudioInputStream",{enumerable:!0,get:function(){return h.AudioInputStream}}),Object.defineProperty(r,"PullAudioInputStream",{enumerable:!0,get:function(){return h.PullAudioInputStream}}),Object.defineProperty(r,"PushAudioInputStream",{enumerable:!0,get:function(){return h.PushAudioInputStream}});var a=qn();Object.defineProperty(r,"AudioOutputStream",{enumerable:!0,get:function(){return a.AudioOutputStream}}),Object.defineProperty(r,"PullAudioOutputStream",{enumerable:!0,get:function(){return a.PullAudioOutputStream}}),Object.defineProperty(r,"PushAudioOutputStream",{enumerable:!0,get:function(){return a.PushAudioOutputStream}});var l=yR();Object.defineProperty(r,"CancellationReason",{enumerable:!0,get:function(){return l.CancellationReason}});var c=SR();Object.defineProperty(r,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return c.PullAudioInputStreamCallback}});var o=CR();Object.defineProperty(r,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return o.PushAudioOutputStreamCallback}});var u=PR();Object.defineProperty(r,"KeywordRecognitionModel",{enumerable:!0,get:function(){return u.KeywordRecognitionModel}});var d=wR();Object.defineProperty(r,"SessionEventArgs",{enumerable:!0,get:function(){return d.SessionEventArgs}});var v=RR();Object.defineProperty(r,"RecognitionEventArgs",{enumerable:!0,get:function(){return v.RecognitionEventArgs}});var f=ER();Object.defineProperty(r,"OutputFormat",{enumerable:!0,get:function(){return f.OutputFormat}});var m=TR();Object.defineProperty(r,"RecognitionResult",{enumerable:!0,get:function(){return m.RecognitionResult}});var y=AR();Object.defineProperty(r,"SpeechRecognitionResult",{enumerable:!0,get:function(){return y.SpeechRecognitionResult}});var w=bR();Object.defineProperty(r,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return w.SpeechRecognitionEventArgs}}),Object.defineProperty(r,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return w.ConversationTranscriptionEventArgs}}),Object.defineProperty(r,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return w.MeetingTranscriptionEventArgs}});var P=IR();Object.defineProperty(r,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return P.SpeechRecognitionCanceledEventArgs}});var T=_R();Object.defineProperty(r,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return T.TranslationRecognitionEventArgs}});var R=kR();Object.defineProperty(r,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return R.TranslationSynthesisEventArgs}});var A=wC();Object.defineProperty(r,"TranslationRecognitionResult",{enumerable:!0,get:function(){return A.TranslationRecognitionResult}});var b=xR();Object.defineProperty(r,"TranslationSynthesisResult",{enumerable:!0,get:function(){return b.TranslationSynthesisResult}});var x=MR();Object.defineProperty(r,"ResultReason",{enumerable:!0,get:function(){return x.ResultReason}});var z=NR();Object.defineProperty(r,"SpeechConfig",{enumerable:!0,get:function(){return z.SpeechConfig}}),Object.defineProperty(r,"SpeechConfigImpl",{enumerable:!0,get:function(){return z.SpeechConfigImpl}});var N=OR();Object.defineProperty(r,"SpeechTranslationConfig",{enumerable:!0,get:function(){return N.SpeechTranslationConfig}}),Object.defineProperty(r,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return N.SpeechTranslationConfigImpl}});var F=EC();Object.defineProperty(r,"PropertyCollection",{enumerable:!0,get:function(){return F.PropertyCollection}});var B=Sp();Object.defineProperty(r,"PropertyId",{enumerable:!0,get:function(){return B.PropertyId}});var re=jR();Object.defineProperty(r,"Recognizer",{enumerable:!0,get:function(){return re.Recognizer}});var se=DR();Object.defineProperty(r,"SpeechRecognizer",{enumerable:!0,get:function(){return se.SpeechRecognizer}});var pe=zR();Object.defineProperty(r,"TranslationRecognizer",{enumerable:!0,get:function(){return pe.TranslationRecognizer}});var Re=LR();Object.defineProperty(r,"Translations",{enumerable:!0,get:function(){return Re.Translations}});var ee=qR();Object.defineProperty(r,"NoMatchReason",{enumerable:!0,get:function(){return ee.NoMatchReason}});var ue=BR();Object.defineProperty(r,"NoMatchDetails",{enumerable:!0,get:function(){return ue.NoMatchDetails}});var fe=FR();Object.defineProperty(r,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return fe.TranslationRecognitionCanceledEventArgs}});var Se=xC();Object.defineProperty(r,"CancellationDetailsBase",{enumerable:!0,get:function(){return Se.CancellationDetailsBase}});var he=UR();Object.defineProperty(r,"CancellationDetails",{enumerable:!0,get:function(){return he.CancellationDetails}});var q=WR();Object.defineProperty(r,"CancellationErrorCode",{enumerable:!0,get:function(){return q.CancellationErrorCode}});var Q=HR();Object.defineProperty(r,"ConnectionEventArgs",{enumerable:!0,get:function(){return Q.ConnectionEventArgs}});var G=VR();Object.defineProperty(r,"ServiceEventArgs",{enumerable:!0,get:function(){return G.ServiceEventArgs}});var M=IC();Object.defineProperty(r,"Connection",{enumerable:!0,get:function(){return M.Connection}});var U=KR();Object.defineProperty(r,"PhraseListGrammar",{enumerable:!0,get:function(){return U.PhraseListGrammar}});var le=Cp();Object.defineProperty(r,"DialogServiceConfig",{enumerable:!0,get:function(){return le.DialogServiceConfig}});var de=GR();Object.defineProperty(r,"BotFrameworkConfig",{enumerable:!0,get:function(){return de.BotFrameworkConfig}});var ye=JR();Object.defineProperty(r,"CustomCommandsConfig",{enumerable:!0,get:function(){return ye.CustomCommandsConfig}});var Ce=YR();Object.defineProperty(r,"DialogServiceConnector",{enumerable:!0,get:function(){return Ce.DialogServiceConnector}});var Ae=XR();Object.defineProperty(r,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Ae.ActivityReceivedEventArgs}});var Ee=$R();Object.defineProperty(r,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Ee.TurnStatusReceivedEventArgs}});var be=eE();Object.defineProperty(r,"ServicePropertyChannel",{enumerable:!0,get:function(){return be.ServicePropertyChannel}});var Ze=tE();Object.defineProperty(r,"ProfanityOption",{enumerable:!0,get:function(){return Ze.ProfanityOption}});var pn=rE();Object.defineProperty(r,"BaseAudioPlayer",{enumerable:!0,get:function(){return pn.BaseAudioPlayer}});var ba=nE();Object.defineProperty(r,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return ba.ConnectionMessageEventArgs}});var hn=bC();Object.defineProperty(r,"ConnectionMessage",{enumerable:!0,get:function(){return hn.ConnectionMessage}});var Bn=iE();Object.defineProperty(r,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return Bn.AutoDetectSourceLanguageConfig}});var Ia=oE();Object.defineProperty(r,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return Ia.AutoDetectSourceLanguageResult}});var _a=sE();Object.defineProperty(r,"SourceLanguageConfig",{enumerable:!0,get:function(){return _a.SourceLanguageConfig}});var Ue=Pp();Object.defineProperty(r,"Conversation",{enumerable:!0,get:function(){return Ue.Conversation}}),Object.defineProperty(r,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Ue.ConversationExpirationEventArgs}}),Object.defineProperty(r,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Ue.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(r,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Ue.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(r,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Ue.ConversationTranslationEventArgs}}),Object.defineProperty(r,"ConversationTranslationResult",{enumerable:!0,get:function(){return Ue.ConversationTranslationResult}}),Object.defineProperty(r,"ConversationTranslator",{enumerable:!0,get:function(){return Ue.ConversationTranslator}}),Object.defineProperty(r,"ConversationTranscriber",{enumerable:!0,get:function(){return Ue.ConversationTranscriber}}),Object.defineProperty(r,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Ue.ConversationTranscriptionResult}}),Object.defineProperty(r,"Meeting",{enumerable:!0,get:function(){return Ue.Meeting}}),Object.defineProperty(r,"MeetingTranscriber",{enumerable:!0,get:function(){return Ue.MeetingTranscriber}}),Object.defineProperty(r,"Participant",{enumerable:!0,get:function(){return Ue.Participant}}),Object.defineProperty(r,"ParticipantChangedReason",{enumerable:!0,get:function(){return Ue.ParticipantChangedReason}}),Object.defineProperty(r,"User",{enumerable:!0,get:function(){return Ue.User}});var ka=wp();Object.defineProperty(r,"Synthesizer",{enumerable:!0,get:function(){return ka.Synthesizer}});var Fn=SC();Object.defineProperty(r,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Fn.SpeechSynthesisOutputFormat}});var br=wE();Object.defineProperty(r,"SpeechSynthesizer",{enumerable:!0,get:function(){return br.SpeechSynthesizer}});var tr=RE();Object.defineProperty(r,"SynthesisResult",{enumerable:!0,get:function(){return tr.SynthesisResult}});var Un=EE();Object.defineProperty(r,"SpeechSynthesisResult",{enumerable:!0,get:function(){return Un.SpeechSynthesisResult}});var xa=TE();Object.defineProperty(r,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return xa.SpeechSynthesisEventArgs}});var Ma=AE();Object.defineProperty(r,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Ma.SpeechSynthesisWordBoundaryEventArgs}});var Na=bE();Object.defineProperty(r,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Na.SpeechSynthesisBookmarkEventArgs}});var Oa=IE();Object.defineProperty(r,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Oa.SpeechSynthesisVisemeEventArgs}});var Wn=_E();Object.defineProperty(r,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Wn.SpeechSynthesisBoundaryType}});var vn=kE();Object.defineProperty(r,"SynthesisVoicesResult",{enumerable:!0,get:function(){return vn.SynthesisVoicesResult}});var fn=xE();Object.defineProperty(r,"SynthesisVoiceGender",{enumerable:!0,get:function(){return fn.SynthesisVoiceGender}}),Object.defineProperty(r,"SynthesisVoiceType",{enumerable:!0,get:function(){return fn.SynthesisVoiceType}}),Object.defineProperty(r,"VoiceInfo",{enumerable:!0,get:function(){return fn.VoiceInfo}});var Ir=ME();Object.defineProperty(r,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Ir.SpeakerAudioDestination}});var _r=NE();Object.defineProperty(r,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return _r.ConversationTranscriptionCanceledEventArgs}});var $c=OE();Object.defineProperty(r,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return $c.MeetingTranscriptionCanceledEventArgs}});var ja=jE();Object.defineProperty(r,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return ja.PronunciationAssessmentGradingSystem}});var Da=DE();Object.defineProperty(r,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Da.PronunciationAssessmentGranularity}});var eu=zE();Object.defineProperty(r,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return eu.PronunciationAssessmentConfig}});var Hn=LE();Object.defineProperty(r,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Hn.PronunciationAssessmentResult}});var Vn=OC();Object.defineProperty(r,"LanguageIdMode",{enumerable:!0,get:function(){return Vn.LanguageIdMode}});var Kn=qE();Object.defineProperty(r,"AvatarConfig",{enumerable:!0,get:function(){return Kn.AvatarConfig}});var Gn=BE();Object.defineProperty(r,"AvatarEventArgs",{enumerable:!0,get:function(){return Gn.AvatarEventArgs}});var Jn=FE();Object.defineProperty(r,"AvatarSynthesizer",{enumerable:!0,get:function(){return Jn.AvatarSynthesizer}});var Ft=UE();Object.defineProperty(r,"AvatarVideoFormat",{enumerable:!0,get:function(){return Ft.AvatarVideoFormat}}),Object.defineProperty(r,"Coordinate",{enumerable:!0,get:function(){return Ft.Coordinate}});var rr=WE();Object.defineProperty(r,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return rr.AvatarWebRTCConnectionResult}});var za=HE();Object.defineProperty(r,"Diagnostics",{enumerable:!0,get:function(){return za.Diagnostics}});var La=fC();Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return La.LogLevel}})})(hd)),hd}var _y;function VE(){if(_y)return vo;_y=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.ProxyInfo=void 0;const r=J();let n=class VC{constructor(h,a,l,c){this.privProxyHostName=h,this.privProxyPort=a,this.privProxyUserName=l,this.privProxyPassword=c}static fromParameters(h){return new VC(h.getProperty(r.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(h.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPort),10),h.getProperty(r.PropertyId.SpeechServiceConnection_ProxyUserName),h.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(h){return this.fromParameters(h.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return vo.ProxyInfo=n,vo}var Ms={},Nd,ky;function KE(){if(ky)return Nd;ky=1;const r=new Set(["json","buffer","string"]);return Nd=n=>(...s)=>{const h=new Set;let a,l,c,o="";return s.forEach(u=>{if(typeof u=="string")if(u.toUpperCase()===u)if(a){const d=`Can't set method to ${u}, already set to ${a}.`;throw new Error(d)}else a=u;else if(u.startsWith("http:")||u.startsWith("https:"))o=u;else if(r.has(u))l=u;else throw new Error(`Unknown encoding, ${u}`);else if(typeof u=="number")h.add(u);else if(typeof u=="object")if(Array.isArray(u)||u instanceof Set)u.forEach(d=>h.add(d));else{if(c)throw new Error("Cannot set headers twice.");c=u}else throw new Error(`Unknown type: ${typeof u}`)}),a||(a="GET"),h.size===0&&h.add(200),n(h,a,l,c,o)},Nd}var Od,xy;function GE(){if(xy)return Od;xy=1;const r=KE();class n extends Error{constructor(a,...l){super(...l),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="StatusError",this.message=a.statusMessage,this.statusCode=a.status,this.res=a,this.json=a.json.bind(a),this.text=a.text.bind(a),this.arrayBuffer=a.arrayBuffer.bind(a);let c;Object.defineProperty(this,"responseBody",{get:()=>(c||(c=this.arrayBuffer()),c)}),this.headers={};for(const[u,d]of a.headers.entries())this.headers[u.toLowerCase()]=d}}return Od=r((h,a,l,c,o)=>async(u,d,v={})=>{u=o+(u||"");let f=new URL(u);if(c||(c={}),f.username&&(c.Authorization="Basic "+btoa(f.username+":"+f.password),f=new URL(f.protocol+"//"+f.host+f.pathname+f.search)),f.protocol!=="https:"&&f.protocol!=="http:")throw new Error(`Unknown protocol, ${f.protocol}`);if(d&&!(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="string"))if(typeof d=="object")d=JSON.stringify(d),c["Content-Type"]="application/json";else throw new Error("Unknown body type.");v=new Headers({...c||{},...v});const m=await fetch(f,{method:a,headers:v,body:d});if(m.statusCode=m.status,!h.has(m.status))throw new n(m);return l==="json"?m.json():l==="buffer"?m.arrayBuffer():l==="string"?m.text():m}),Od}var My;function JE(){return My||(My=1,(function(r){var n=Ms&&Ms.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0}),r.RestMessageAdapter=r.RestRequestType=void 0;const s=n(GE()),h=ae();var a;(function(c){c.Get="GET",c.Post="POST",c.Delete="DELETE",c.File="file"})(a=r.RestRequestType||(r.RestRequestType={}));let l=class{constructor(o){if(!o)throw new h.ArgumentNullError("configParams");this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}static extractHeaderValue(o,u){let d="";try{const v=u.trim().split(/[\r\n]+/),f={};v.forEach(m=>{const y=m.split(": "),w=y.shift().toLowerCase(),P=y.join(": ");f[w]=P}),d=f[o.toLowerCase()]}catch{}return d}set options(o){this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}setHeaders(o,u){this.privHeaders[o]=u}request(o,u,d={},v=null){const f=new h.Deferred,m=o===a.File?"POST":o,y=(P,T={})=>{const R=P;return{data:JSON.stringify(T),headers:JSON.stringify(P.headers),json:T,ok:P.statusCode>=200&&P.statusCode<300,status:P.statusCode,statusText:T.error?T.error.message:R.statusText?R.statusText:R.statusMessage}},w=P=>{const T=(0,s.default)(u,m,this.privHeaders,200,201,202,204,400,401,402,403,404),R=this.queryParams(d)===""?"":`?${this.queryParams(d)}`;T(R,P).then(async A=>{if(o===a.Delete||A.statusCode===204)f.resolve(y(A));else try{const b=await A.json();f.resolve(y(A,b))}catch{f.resolve(y(A))}}).catch(A=>{f.reject(A)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),o===a.Post&&v&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),w(v),f.promise}queryParams(o={}){return Object.keys(o).map(u=>encodeURIComponent(u)+"="+encodeURIComponent(o[u])).join("&")}};r.RestMessageAdapter=l})(Ms)),Ms}var Ns={},Ny;function KC(){if(Ny)return Ns;Ny=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.RestConfigBase=void 0;let r=class Qc{static get requestOptions(){return Qc.privDefaultRequestOptions}static get configParams(){return Qc.privDefaultParams}static get restErrors(){return Qc.privRestErrors}};return Ns.RestConfigBase=r,r.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},r.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},r.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},Ns}var Oy;function ct(){return Oy||(Oy=1,(function(r){var n=Jr&&Jr.__createBinding||(Object.create?(function(h,a,l,c){c===void 0&&(c=l),Object.defineProperty(h,c,{enumerable:!0,get:function(){return a[l]}})}):(function(h,a,l,c){c===void 0&&(c=l),h[c]=a[l]})),s=Jr&&Jr.__exportStar||function(h,a){for(var l in h)l!=="default"&&!Object.prototype.hasOwnProperty.call(a,l)&&n(a,h,l)};Object.defineProperty(r,"__esModule",{value:!0}),s(lR(),r),s(dR(),r),s(pR(),r),s(hR(),r),s(vR(),r),s(fR(),r),s(gC(),r),s(gR(),r),s(VE(),r),s(JE(),r),s(KC(),r)})(Jr)),Jr}var Os={},jy;function Zc(){if(jy)return Os;jy=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.SpeechConnectionMessage=void 0;const r=ae(),n=gt();class s extends r.ConnectionMessage{constructor(a,l,c,o,u,d,v,f){if(!l)throw new r.ArgumentNullError("path");if(!c)throw new r.ArgumentNullError("requestId");const m={};if(m[n.HeaderNames.Path]=l,m[n.HeaderNames.RequestId]=c,m[n.HeaderNames.RequestTimestamp]=new Date().toISOString(),o&&(m[n.HeaderNames.ContentType]=o),d&&(m[n.HeaderNames.RequestStreamId]=d),v)for(const y in v)y&&(m[y]=v[y]);f?super(a,u,m,f):super(a,u,m),this.privPath=l,this.privRequestId=c,this.privContentType=o,this.privStreamId=d,this.privAdditionalHeaders=v}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(a){let l=null,c=null,o=null,u=null;const d={};if(a.headers)for(const v in a.headers)v&&(v.toLowerCase()===n.HeaderNames.Path.toLowerCase()?l=a.headers[v]:v.toLowerCase()===n.HeaderNames.RequestId.toLowerCase()?c=a.headers[v]:v.toLowerCase()===n.HeaderNames.ContentType.toLowerCase()?o=a.headers[v]:v.toLowerCase()===n.HeaderNames.RequestStreamId.toLowerCase()?u=a.headers[v]:d[v]=a.headers[v]);return new s(a.messageType,l,c,o,a.body,u,d,a.id)}}return Os.SpeechConnectionMessage=s,Os}var jd={},Dy;function QE(){return Dy||(Dy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SegmentationMode=void 0,(function(n){n.Normal="Normal",n.Disabled="Disabled",n.Custom="Custom",n.Semantic="Semantic"})(r.SegmentationMode||(r.SegmentationMode={}))})(jd)),jd}var Dd={},zy;function YE(){return zy||(zy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NextAction=void 0,(function(n){n.None="None",n.Synthesize="Synthesize"})(r.NextAction||(r.NextAction={}))})(Dd)),Dd}var zd={},Ly;function XE(){return Ly||(Ly=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Mode=void 0,(function(n){n.None="None",n.Always="Always"})(r.Mode||(r.Mode={}))})(zd)),zd}var Ld={},qy;function ZE(){return qy||(qy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LanguageIdDetectionPriority=r.LanguageIdDetectionMode=void 0,(function(n){n.DetectAtAudioStart="DetectAtAudioStart",n.DetectContinuous="DetectContinuous",n.DetectSegments="DetectSegments"})(r.LanguageIdDetectionMode||(r.LanguageIdDetectionMode={})),(function(n){n.Auto="Auto",n.PrioritizeLatency="PrioritizeLatency",n.PrioritizeAccuracy="PrioritizeAccuracy"})(r.LanguageIdDetectionPriority||(r.LanguageIdDetectionPriority={}))})(Ld)),Ld}var qd={},By;function $E(){return By||(By=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NextAction=void 0,(function(n){n.Recognize="Recognize",n.None="None"})(r.NextAction||(r.NextAction={}))})(qd)),qd}var Bd={},Fy;function eT(){return Fy||(Fy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OnUnknownAction=void 0,(function(n){n.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",n.None="None"})(r.OnUnknownAction||(r.OnUnknownAction={}))})(Bd)),Bd}var Fd={},Uy;function tT(){return Uy||(Uy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ResultType=void 0,(function(n){n.Auto="Auto",n.StableFragment="StableFragment",n.Hypothesis="Hypothesis",n.None="None"})(r.ResultType||(r.ResultType={}))})(Fd)),Fd}var Ud={},Wy;function rT(){return Wy||(Wy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PhraseResultOutputType=void 0,(function(n){n.Always="Always",n.None="None"})(r.PhraseResultOutputType||(r.PhraseResultOutputType={}))})(Ud)),Ud}var Wd={},Hy;function nT(){return Hy||(Hy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NextAction=void 0,(function(n){n.None="None",n.Translate="Translate"})(r.NextAction||(r.NextAction={}))})(Wd)),Wd}var Vy;function iT(){if(Vy)return ao;Vy=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.ServiceRecognizerBase=void 0;const r=ct(),n=ae(),s=J(),h=ne(),a=Zc(),l=QE(),c=Ot(),o=YE(),u=XE(),d=ZE(),v=$E(),f=eT(),m=tT(),y=rT(),w=nT();let P=class Ra{constructor(R,A,b,x,z){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!R)throw new n.ArgumentNullError("authentication");if(!A)throw new n.ArgumentNullError("connectionFactory");if(!b)throw new n.ArgumentNullError("audioSource");if(!x)throw new n.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=x.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=R,this.privConnectionFactory=A,this.privAudioSource=b,this.privRecognizerConfig=x,this.privIsDisposed=!1,this.privRecognizer=z,this.privRequestSession=new h.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new n.EventSource,this.privServiceEvents=new n.EventSource,this.privDynamicGrammar=new h.DynamicGrammarBuilder,this.privSpeechContext=new h.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new h.AgentConfig,this.privRecognizerConfig.parameters.getProperty(s.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=n.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(F=>{if(F.name==="ConnectionClosedEvent"){const B=F;(B.statusCode===1003||B.statusCode===1007||B.statusCode===1002||B.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(s.CancellationReason.Error,B.statusCode===1007?s.CancellationErrorCode.BadRequestParameters:s.CancellationErrorCode.ConnectionFailure,`${B.reason} websocket error code: ${B.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,n.createNoDashGuid)())}setTranslationJson(){const R=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(R!==void 0){const A=R.split(","),b=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),x=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),z=b!==void 0?o.NextAction.Synthesize:o.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:z},onSuccess:{action:z},output:{includePassThroughResults:!0,interimResults:{mode:u.Mode.Always}},targetLanguages:A},x!==void 0&&(this.privSpeechContext.getContext().translation.category=x),b!==void 0){const F={};for(const B of A)F[B]=b;this.privSpeechContext.getContext().synthesis={defaultVoices:F}}const N=this.privSpeechContext.getContext().phraseDetection||{};N.onSuccess={action:w.NextAction.Translate},N.onInterim={action:w.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=N}}setSpeechSegmentationTimeoutJson(){const R=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),A=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),b=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationStrategy,void 0),x={mode:l.SegmentationMode.Normal};let z=!1;if(b!==void 0){z=!0;let N=l.SegmentationMode.Normal;switch(b.toLowerCase()){case"default":break;case"time":N=l.SegmentationMode.Custom;break;case"semantic":N=l.SegmentationMode.Semantic;break}x.mode=N}if(R!==void 0){z=!0;const N=parseInt(R,10);x.mode=l.SegmentationMode.Custom,x.segmentationSilenceTimeoutMs=N}if(A!==void 0){z=!0;const N=parseInt(A,10);x.mode=l.SegmentationMode.Custom,x.segmentationForcedTimeoutMs=N}if(z){const N=this.privSpeechContext.getContext().phraseDetection||{};switch(N.mode=this.recognitionMode,this.recognitionMode){case c.RecognitionMode.Conversation:N.conversation=N.conversation??{segmentation:{}},N.conversation.segmentation=x;break;case c.RecognitionMode.Interactive:N.interactive=N.interactive??{segmentation:{}},N.interactive.segmentation=x;break;case c.RecognitionMode.Dictation:N.dictation=N.dictation??{},N.dictation.segmentation=x;break}this.privSpeechContext.getContext().phraseDetection=N}}setLanguageIdJson(){const R=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const A=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");A.length===1&&A[0]===h.AutoDetectSourceLanguagesOpenRangeOptionName&&(A[0]="UND");let b;this.privRecognizerConfig.languageIdMode==="Continuous"?b=d.LanguageIdDetectionMode.DetectContinuous:b=d.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:A,mode:b,onSuccess:{action:v.NextAction.Recognize},onUnknown:{action:f.OnUnknownAction.None},priority:d.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:m.ResultType.Auto},phraseResults:{resultType:y.PhraseResultOutputType.Always}};const x=this.privRecognizerConfig.sourceLanguageModels;x!==void 0&&(R.customModels=x,R.onInterim={action:w.NextAction.None},R.onSuccess={action:w.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=R}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(h.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()===s.OutputFormat[s.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}setSpeechStartEventSensitivityJson(){const R=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_StartEventSensitivity,void 0);if(R!==void 0){let A=!1;switch(R.toLowerCase()){case c.SpeechStartEventSensitivity.Low:case c.SpeechStartEventSensitivity.Medium:case c.SpeechStartEventSensitivity.High:A=!0;break}if(A){const b=this.privSpeechContext.getContext().phraseDetection||{};b.voiceOnsetSensitivity=R.toLowerCase(),this.privSpeechContext.getContext().phraseDetection=b}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(R){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.ConversationTranslator_Token,R)}set authentication(R){this.privAuthentication=R}isDisposed(){return this.privIsDisposed}async dispose(R){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(R)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(R,A,b){if(this.recognizeOverride!==void 0){await this.recognizeOverride(R,A,b);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=R,this.privRecognizerConfig.recognitionEndpointVersion==="2"){const B=this.privSpeechContext.getContext().phraseDetection||{};B.mode=R,this.privSpeechContext.getContext().phraseDetection=B}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.setSpeechStartEventSensitivityJson(),this.privSuccessCallback=A,this.privErrorCallback=b,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const x=this.connectImpl();let z;try{const B=await this.audioSource.attach(this.privRequestSession.audioNodeId),re=await this.audioSource.format,se=await this.audioSource.deviceInfo;this.privIsLiveAudio=se.type&&se.type===h.type.Microphones,z=new r.ReplayableAudioNode(B,re.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(z,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:se}}catch(B){throw await this.privRequestSession.onStopRecognizing(),B}try{await x}catch(B){await this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,B);return}const N=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,N),this.receiveMessage(),this.sendAudio(z).catch(async B=>{await this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,B)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(R,A){this.connectImpl().then(()=>{try{R&&R()}catch(b){A&&A(b)}},b=>{try{A&&A(b)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(R){}async sendNetworkMessage(R,A){const b=typeof A=="string"?n.MessageType.Text:n.MessageType.Binary,x=typeof A=="string"?"application/json":"";return(await this.fetchConnection()).send(new a.SpeechConnectionMessage(b,R,this.privRequestSession.requestId,x,A))}set activityTemplate(R){this.privActivityTemplate=R}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(R){this.privExpectContentAssessmentResponse=R}async sendTelemetryData(){const R=this.privRequestSession.getTelemetry();if(Ra.telemetryDataEnabled!==!0||this.privIsDisposed||R===null)return;if(Ra.telemetryData)try{Ra.telemetryData(R)}catch{}await(await this.fetchConnection()).send(new a.SpeechConnectionMessage(n.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",R))}async cancelRecognitionLocal(R,A,b){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,R,A,b))}async receiveMessage(){try{if(this.privIsDisposed)return;let R=await this.fetchConnection();const A=await R.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!A)return this.receiveMessage();this.privServiceHasSentMessage=!0;const b=a.SpeechConnectionMessage.fromConnectionMessage(A);if(b.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(b.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const x=h.SpeechDetected.fromJSON(b.textBody,this.privRequestSession.currentTurnAudioOffset),z=new s.RecognitionEventArgs(x.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,z);break;case"speech.enddetected":let N;b.textBody.length>0?N=b.textBody:N="{ Offset: 0 }";const F=h.SpeechDetected.fromJSON(N,this.privRequestSession.currentTurnAudioOffset),B=new s.RecognitionEventArgs(F.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,B);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(s.CancellationReason.EndOfStream,s.CancellationErrorCode.NoError,void 0));const re=new s.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,re);return}else R=await this.fetchConnection(),await this.sendPrePayloadJSON(R);break;default:await this.processTypeSpecificMessages(b)||this.privServiceEvents&&this.serviceEvents.onEvent(new n.ServiceEvent(b.path.toLowerCase(),b.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const R=this.privRequestSession.recognitionBytesSent,A=this.privAverageBytesPerMs!==0?R/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(A)}sendSpeechContext(R,A){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const b=this.speechContext.toJSON();if(A&&this.privRequestSession.onSpeechContext(),b)return R.send(new a.SpeechConnectionMessage(n.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",b))}setupTranslationWithLanguageId(){const R=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),A=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(R!==void 0&&A){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:m.ResultType.None},phraseResults:{resultType:y.PhraseResultOutputType.None}};const b=this.privSpeechContext.getContext().translation;if(b){const x=this.privRecognizerConfig.sourceLanguageModels;if(x!==void 0&&x.length>0){const N=this.privSpeechContext.getContext().phraseDetection||{};N.customModels=x,this.privSpeechContext.getContext().phraseDetection=N}this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(b.onSuccess={action:o.NextAction.Synthesize},b.onPassthrough={action:o.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(R,A=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(R);await this.sendSpeechContext(R,A),await this.sendWaveHeader(R)}async sendWaveHeader(R){const A=await this.audioSource.format;return R.send(new a.SpeechConnectionMessage(n.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",A.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(R=>R.state()===n.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(R,A,b){if(A.onSpeechContext(),Ra.telemetryDataEnabled!==!0){const z={context:{system:JSON.parse(b).context.system}};b=JSON.stringify(z)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const x=JSON.parse(b);x.context.DisableReferenceChannel="True",x.context.MicSpec="1_0_0",b=JSON.stringify(x)}if(b)return R.send(new a.SpeechConnectionMessage(n.MessageType.Text,"speech.config",A.requestId,"application/json",b))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(R=>R.state()===n.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(R){const A=await this.audioSource.format;this.privAverageBytesPerMs=A.avgBytesPerSec/1e3;let b=Date.now();const x=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),z=A.avgBytesPerSec/1e3*parseInt(x,10),N=this.privRequestSession.recogNumber,F=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===N){const B=await this.fetchConnection(),re=await R.read();if(this.privRequestSession.isSpeechEnded)return;let se,pe;if(!re||re.isEnd?(se=null,pe=0):(se=re.buffer,this.privRequestSession.onAudioSent(se.byteLength),z>=this.privRequestSession.bytesSent?pe=0:pe=Math.max(0,b-Date.now())),pe!==0&&await this.delay(pe),se!==null&&(b=Date.now()+se.byteLength*1e3/(A.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===N)if(B.send(new a.SpeechConnectionMessage(n.MessageType.Binary,"audio",this.privRequestSession.requestId,null,se)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),re!=null&&re.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return F()}};return F()}async retryableConnect(){let R=!1;this.privAuthFetchEventId=(0,n.createNoDashGuid)();const A=this.privRequestSession.sessionId;this.privConnectionId=A!==void 0?A:(0,n.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let b=0,x="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const N=await(R?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const F=await this.privConnectionFactory.create(this.privRecognizerConfig,N,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(F.events),F.events.attach(re=>{this.connectionEvents.onEvent(re)});const B=await F.open();if(B.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(B.statusCode),Promise.resolve(F);B.statusCode===1006&&(R=!0),b=B.statusCode,x=B.reason}return await this.privRequestSession.onConnectionEstablishCompleted(b,x),Promise.reject(`Unable to contact server. StatusCode: ${b}, ${this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${x}`)}delay(R){return new Promise(A=>this.privSetTimeout(A,R))}writeBufferToConsole(R){let A="Buffer Size: ";if(R===null)A+="null";else{const b=new Uint8Array(R);A+=`${R.byteLength}\r
`;for(let x=0;x<R.byteLength;x++)A+=b[x].toString(16).padStart(2,"0")+" ",(x+1)%16===0&&(console.info(A),A="")}console.info(A)}async sendFinalAudio(){await(await this.fetchConnection()).send(new a.SpeechConnectionMessage(n.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const R=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(R):(await this.sendSpeechServiceConfig(R,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(R,!1),R)}};return ao.ServiceRecognizerBase=P,P.telemetryDataEnabled=!0,ao}var js={},Ky;function oT(){if(Ky)return js;Ky=1,Object.defineProperty(js,"__esModule",{value:!0}),js.ConversationServiceRecognizer=void 0;const r=J(),n=ne();let s=class extends n.ServiceRecognizerBase{constructor(a,l,c,o,u){super(a,l,c,o,u),this.handleSpeechPhraseMessage=async d=>this.handleSpeechPhrase(d),this.handleSpeechHypothesisMessage=d=>this.handleSpeechHypothesis(d)}processTypeSpecificMessages(a){}handleRecognizedCallback(a,l,c){}handleRecognizingCallback(a,l,c){}async processSpeechMessages(a){let l=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(a.textBody),l=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(a.textBody),l=!0;break}return l}cancelRecognition(a,l,c,o,u){}async handleSpeechPhrase(a){const l=n.SimpleSpeechPhrase.fromJSON(a,this.privRequestSession.currentTurnAudioOffset),c=n.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus);let o;const u=new r.PropertyCollection;if(u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,a),this.privRequestSession.onPhraseRecognized(l.Offset+l.Duration),r.ResultReason.Canceled===c){const d=n.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),v=n.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(d,v,n.EnumTranslation.implTranslateErrorDetails(v))}else if(l.RecognitionStatus!==n.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])o=new r.SpeechRecognitionResult(this.privRequestSession.requestId,c,l.DisplayText,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,l.asJson(),u);else{const d=n.DetailedSpeechPhrase.fromJSON(a,this.privRequestSession.currentTurnAudioOffset);o=new r.SpeechRecognitionResult(this.privRequestSession.requestId,c,d.Text,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,d.SpeakerId,void 0,d.asJson(),u)}this.handleRecognizedCallback(o,o.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(a){const l=n.SpeechHypothesis.fromJSON(a,this.privRequestSession.currentTurnAudioOffset),c=new r.PropertyCollection;c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,a);const o=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,l.Text,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,l.asJson(),c);this.privRequestSession.onHypothesis(l.Offset),this.handleRecognizingCallback(o,l.Duration,this.privRequestSession.sessionId)}};return js.ConversationServiceRecognizer=s,js}var Hd={},Gy;function sT(){return Gy||(Gy=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognizerConfig=r.SpeechResultFormat=void 0;const n=J(),s=ne(),h=Ot();(function(l){l[l.Simple=0]="Simple",l[l.Detailed=1]="Detailed"})(r.SpeechResultFormat||(r.SpeechResultFormat={}));class a{constructor(c,o){this.privSpeechServiceConfig=c||new s.SpeechServiceConfig(new s.Context(null)),this.privParameters=o,this.privMaxRetryCount=parseInt(o.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=o.getProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(c){this.privRecognitionMode=c,this.privRecognitionActivityTimeout=c===h.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=h.RecognitionMode[c]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==h.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(c){this.parameters.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,c)}get sourceLanguageModels(){const c=[];let o=!1;if(this.autoDetectSourceLanguages!==void 0)for(const u of this.autoDetectSourceLanguages.split(",")){const d=u+n.PropertyId.SpeechServiceConnection_EndpointId.toString(),v=this.parameters.getProperty(d,void 0);v!==void 0?(c.push({language:u,endpoint:v}),o=!0):c.push({language:u,endpoint:""})}return o?c:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(c){this.privEnableSpeakerId=c}}r.RecognizerConfig=a})(Hd)),Hd}var Vd={},Jy;function aT(){return Jy||(Jy=1,Object.defineProperty(Vd,"__esModule",{value:!0})),Vd}var Ds={},Qy;function cT(){if(Qy)return Ds;Qy=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.WebsocketMessageFormatter=void 0;const r=ae(),n=`\r
`;let s=class{toConnectionMessage(a){const l=new r.Deferred;try{if(a.messageType===r.MessageType.Text){const c=a.textContent;let o={},u=null;if(c){const d=c.split(`\r
\r
`);d&&d.length>0&&(o=this.parseHeaders(d[0]),d.length>1&&(u=d[1]))}l.resolve(new r.ConnectionMessage(a.messageType,u,o,a.id))}else if(a.messageType===r.MessageType.Binary){const c=a.binaryContent;let o={},u=null;if(!c||c.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const d=new DataView(c),v=d.getInt16(0);if(c.byteLength<v+2)throw new Error("Invalid binary message format. Header content missing.");let f="";for(let m=0;m<v;m++)f+=String.fromCharCode(d.getInt8(m+2));o=this.parseHeaders(f),c.byteLength>v+2&&(u=c.slice(2+v)),l.resolve(new r.ConnectionMessage(a.messageType,u,o,a.id))}}catch(c){l.reject(`Error formatting the message. Error: ${c}`)}return l.promise}fromConnectionMessage(a){const l=new r.Deferred;try{if(a.messageType===r.MessageType.Text){const c=`${this.makeHeaders(a)}${n}${a.textBody?a.textBody:""}`;l.resolve(new r.RawWebsocketMessage(r.MessageType.Text,c,a.id))}else if(a.messageType===r.MessageType.Binary){const c=this.makeHeaders(a),o=a.binaryBody,u=this.stringToArrayBuffer(c),d=new Int8Array(u),v=d.byteLength,f=new Int8Array(2+v+(o?o.byteLength:0));if(f[0]=v>>8&255,f[1]=v&255,f.set(d,2),o){const y=new Int8Array(o);f.set(y,2+v)}const m=f.buffer;l.resolve(new r.RawWebsocketMessage(r.MessageType.Binary,m,a.id))}}catch(c){l.reject(`Error formatting the message. ${c}`)}return l.promise}makeHeaders(a){let l="";if(a.headers)for(const c in a.headers)c&&(l+=`${c}: ${a.headers[c]}${n}`);return l}parseHeaders(a){const l={};if(a){const c=a.match(/[^\r\n]+/g);if(l){for(const o of c)if(o){const u=o.indexOf(":"),d=u>0?o.substr(0,u).trim().toLowerCase():o,v=u>0&&o.length>u+1?o.substr(u+1).trim():"";l[d]=v}}}return l}stringToArrayBuffer(a){const l=new ArrayBuffer(a.length),c=new DataView(l);for(let o=0;o<a.length;o++)c.setUint8(o,a.charCodeAt(o));return l}};return Ds.WebsocketMessageFormatter=s,Ds}var zs={},Yy;function uT(){if(Yy)return zs;Yy=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.SpeechConnectionFactory=void 0;const r=ct(),n=ne(),s=J(),h=er(),a=ne(),l=gt(),c=Ar(),o=Ot();let u=class extends h.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(v,f,m){let y=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0);const w=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,void 0),P=h.ConnectionFactoryBase.getHostSuffix(w),T=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://"+w+".stt.speech"+P),R={},A=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,void 0),b=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(A?(!y||y.search(c.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(R[c.QueryParameterNames.CustomSpeechDeploymentId]=A):b&&(!y||y.search(c.QueryParameterNames.Language)===-1)&&(R[c.QueryParameterNames.Language]=b),(!y||y.search(c.QueryParameterNames.Format)===-1)&&(R[c.QueryParameterNames.Format]=v.parameters.getProperty(n.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()),v.autoDetectSourceLanguages!==void 0&&(R[c.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(v,R,y),y){const B=new URL(y),re=B.pathname;(re===""||re==="/")&&(B.pathname=this.universalUri+v.recognitionEndpointVersion,y=await h.ConnectionFactoryBase.getRedirectUrlFromEndpoint(B.toString()))}if(!y)switch(v.recognitionMode){case o.RecognitionMode.Conversation:v.parameters.getProperty(n.ForceDictationPropertyName,"false")==="true"?y=T+this.dictationRelativeUri:v.recognitionEndpointVersion!==void 0&&parseInt(v.recognitionEndpointVersion,10)>1?y=`${T}${this.universalUri}${v.recognitionEndpointVersion}`:y=T+this.conversationRelativeUri;break;case o.RecognitionMode.Dictation:y=T+this.dictationRelativeUri;break;default:v.recognitionEndpointVersion!==void 0&&parseInt(v.recognitionEndpointVersion,10)>1?y=`${T}${this.universalUri}${v.recognitionEndpointVersion}`:y=T+this.interactiveRelativeUri;break}const x={};f.token!==void 0&&f.token!==""&&(x[f.headerName]=f.token),x[l.HeaderNames.ConnectionId]=m,x.connectionId=m;const z=v.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",N=new r.WebsocketConnection(y,R,x,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(v),z,m),F=N.uri;return v.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,F),N}};return zs.SpeechConnectionFactory=u,zs}var Ls={},Xy;function lT(){if(Xy)return Ls;Xy=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.ConversationTranscriberConnectionFactory=void 0;const r=ct(),n=J(),s=ne(),h=er(),a=ne(),l=gt(),c=Ar();let o=class extends h.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.conversationRelativeUriV1="/speech/recognition/conversation/cognitiveservices/v1"}async create(d,v,f){let m=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);const y=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),w=h.ConnectionFactoryBase.getHostSuffix(y),P=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+y+".stt.speech"+w),T={},R=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),A=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(R?(!m||m.search(c.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(T[c.QueryParameterNames.CustomSpeechDeploymentId]=R):A&&(!m||m.search(c.QueryParameterNames.Language)===-1)&&(T[c.QueryParameterNames.Language]=A),d.autoDetectSourceLanguages!==void 0&&(T[c.QueryParameterNames.EnableLanguageId]="true"),d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)==="1")m=`${P}${this.universalUri}`;else{if(this.setV2UrlParams(d,T,m),m){const B=new URL(m),re=B.pathname;(re===""||re==="/")&&(B.pathname=this.universalUri,m=await h.ConnectionFactoryBase.getRedirectUrlFromEndpoint(B.toString()))}m||(m=`${P}${this.conversationRelativeUriV1}`)}const x={};v.token!==void 0&&v.token!==""&&(x[v.headerName]=v.token),x[l.HeaderNames.ConnectionId]=f;const z=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",N=new r.WebsocketConnection(m,T,x,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(d),z,f),F=N.uri;return d.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,F),N}setV2UrlParams(d,v,f){new Map([[n.PropertyId.Speech_SegmentationSilenceTimeoutMs,c.QueryParameterNames.SegmentationSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_EnableAudioLogging,c.QueryParameterNames.EnableAudioLogging],[n.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,c.QueryParameterNames.EndSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,c.QueryParameterNames.InitialSilenceTimeoutMs],[n.PropertyId.SpeechServiceResponse_PostProcessingOption,c.QueryParameterNames.Postprocessing],[n.PropertyId.SpeechServiceResponse_ProfanityOption,c.QueryParameterNames.Profanity],[n.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,c.QueryParameterNames.StableIntermediateThreshold]]).forEach((w,P)=>{this.setUrlParameter(P,w,d,v,f)});const y=JSON.parse(d.parameters.getProperty(s.ServicePropertiesPropertyName,"{}"));Object.keys(y).forEach(w=>{v[w]=y[w]})}};return Ls.ConversationTranscriberConnectionFactory=o,Ls}var qs={},Zy;function dT(){if(Zy)return qs;Zy=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.TranscriberConnectionFactory=void 0;const r=ct(),n=J(),s=er(),h=ne(),a=gt(),l=Ar();let c=class extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(u,d,v){let f=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);const m=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,"centralus"),y=s.ConnectionFactoryBase.getHostSuffix(m),w="wss://transcribe."+m+".cts.speech"+y+this.multiaudioRelativeUri,P=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,w),T={};this.setQueryParams(T,u,f),f||(f=P);const R={};d.token!==void 0&&d.token!==""&&(R[d.headerName]=d.token),R[a.HeaderNames.ConnectionId]=v,u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,f);const A=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(f,T,R,new h.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),A,v))}setQueryParams(u,d,v){const f=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);f&&!(l.QueryParameterNames.CustomSpeechDeploymentId in u)&&(u[l.QueryParameterNames.CustomSpeechDeploymentId]=f),m&&!(l.QueryParameterNames.Language in u)&&(u[l.QueryParameterNames.Language]=m);const y=d.parameters.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",w=d.parameters.getProperty(h.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])!==n.OutputFormat[n.OutputFormat.Simple];(y||w)&&(u[l.QueryParameterNames.Format]=n.OutputFormat[n.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(d,u,v)}};return qs.TranscriberConnectionFactory=c,qs}var Bs={},$y;function pT(){if($y)return Bs;$y=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.TranslationConnectionFactory=void 0;const r=ct(),n=zC(),s=J(),h=er(),a=ne(),l=gt(),c=Ar(),o=Ot();let u=class extends h.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(v,f,m){let y=this.getEndpointUrl(v);const w={};if(this.setQueryParams(w,v,y),y){const A=new URL(y),b=A.pathname;(b===""||b==="/")&&(A.pathname=this.universalUri,y=await h.ConnectionFactoryBase.getRedirectUrlFromEndpoint(A.toString()))}const P={};f.token!==void 0&&f.token!==""&&(P[f.headerName]=f.token),P[l.HeaderNames.ConnectionId]=m,v.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,y);const T=v.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(y,w,P,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(v),T,m)}getEndpointUrl(v,f){const m=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region),y=h.ConnectionFactoryBase.getHostSuffix(m);let w=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0);return w?f===!0?w:n.StringUtils.formatString(w,{region:m}):(v.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?w=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+y)+this.translationV1Uri:w=v.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+y)+this.universalUri,f===!0?w:n.StringUtils.formatString(w,{region:m}))}setQueryParams(v,f,m){v.from=f.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),v.to=f.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages),v.scenario=f.recognitionMode===o.RecognitionMode.Interactive?"interactive":f.recognitionMode===o.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(f,v,m),this.setUrlParameter(s.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,c.QueryParameterNames.StableTranslation,f,v,m);const y=f.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);y!==void 0&&(v.voice=y,v.features="requireVoice")}};return Bs.TranslationConnectionFactory=u,Bs}var Fs={},eS;function hT(){if(eS)return Fs;eS=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.EnumTranslation=void 0;const r=J(),n=ne();let s=class{static implTranslateRecognitionResult(a,l=!1){let c=r.ResultReason.Canceled;switch(a){case n.RecognitionStatus.Success:c=r.ResultReason.RecognizedSpeech;break;case n.RecognitionStatus.EndOfDictation:c=l?r.ResultReason.RecognizedSpeech:r.ResultReason.NoMatch;break;case n.RecognitionStatus.NoMatch:case n.RecognitionStatus.InitialSilenceTimeout:case n.RecognitionStatus.BabbleTimeout:c=r.ResultReason.NoMatch;break;case n.RecognitionStatus.Error:case n.RecognitionStatus.BadRequest:case n.RecognitionStatus.Forbidden:default:c=r.ResultReason.Canceled;break}return c}static implTranslateCancelResult(a){let l=r.CancellationReason.EndOfStream;switch(a){case n.RecognitionStatus.Success:case n.RecognitionStatus.EndOfDictation:case n.RecognitionStatus.NoMatch:l=r.CancellationReason.EndOfStream;break;case n.RecognitionStatus.InitialSilenceTimeout:case n.RecognitionStatus.BabbleTimeout:case n.RecognitionStatus.Error:case n.RecognitionStatus.BadRequest:case n.RecognitionStatus.Forbidden:default:l=r.CancellationReason.Error;break}return l}static implTranslateCancelErrorCode(a){let l=r.CancellationErrorCode.NoError;switch(a){case n.RecognitionStatus.Error:l=r.CancellationErrorCode.ServiceError;break;case n.RecognitionStatus.TooManyRequests:l=r.CancellationErrorCode.TooManyRequests;break;case n.RecognitionStatus.BadRequest:l=r.CancellationErrorCode.BadRequestParameters;break;case n.RecognitionStatus.Forbidden:l=r.CancellationErrorCode.Forbidden;break;default:l=r.CancellationErrorCode.NoError;break}return l}static implTranslateErrorDetails(a){let l="The speech service encountered an internal error and could not continue.";switch(a){case r.CancellationErrorCode.Forbidden:l="The recognizer is using a free subscription that ran out of quota.";break;case r.CancellationErrorCode.BadRequestParameters:l="Invalid parameter or unsupported audio format in the request.";break;case r.CancellationErrorCode.TooManyRequests:l="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return l}};return Fs.EnumTranslation=s,Fs}var Kd={},tS;function vT(){return tS||(tS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognitionStatus=r.SynthesisStatus=void 0,(function(n){n[n.Success=0]="Success",n[n.SynthesisEnd=1]="SynthesisEnd",n[n.Error=2]="Error"})(r.SynthesisStatus||(r.SynthesisStatus={})),(function(n){n[n.Success=0]="Success",n[n.NoMatch=1]="NoMatch",n[n.InitialSilenceTimeout=2]="InitialSilenceTimeout",n[n.BabbleTimeout=3]="BabbleTimeout",n[n.Error=4]="Error",n[n.EndOfDictation=5]="EndOfDictation",n[n.TooManyRequests=6]="TooManyRequests",n[n.BadRequest=7]="BadRequest",n[n.Forbidden=8]="Forbidden"})(r.RecognitionStatus||(r.RecognitionStatus={}))})(Kd)),Kd}var Us={},rS;function fT(){if(rS)return Us;rS=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.TranslationSynthesisEnd=void 0;const r=ne();let n=class GC{constructor(h){this.privSynthesisEnd=JSON.parse(h),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(h){return new GC(h)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Us.TranslationSynthesisEnd=n,Us}var Ws={},nS;function gT(){if(nS)return Ws;nS=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.TranslationHypothesis=void 0;const r=me(),n=gp();let s=class dp{constructor(a,l){this.privTranslationHypothesis=a,this.privTranslationHypothesis.Offset+=l,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(a,l){return new dp(JSON.parse(a),l)}static fromTranslationResponse(a,l){r.Contracts.throwIfNullOrUndefined(a,"translationHypothesis");const c=a.SpeechHypothesis;return a.SpeechHypothesis=void 0,c.Translation=a,new dp(c,l)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var a;return(a=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:a.Language}asJson(){const a={...this.privTranslationHypothesis};return a.Translation!==void 0?JSON.stringify({...a,TranslationStatus:n.TranslationStatus[a.Translation.TranslationStatus]}):JSON.stringify(a)}mapTranslationStatus(a){if(typeof a=="string")return n.TranslationStatus[a];if(typeof a=="number")return a}};return Ws.TranslationHypothesis=s,Ws}var Hs={},iS;function mT(){if(iS)return Hs;iS=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.TranslationPhrase=void 0;const r=me(),n=ne(),s=gp();let h=class pp{constructor(l,c){this.privTranslationPhrase=l,this.privTranslationPhrase.Offset+=c,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(l,c){return new pp(JSON.parse(l),c)}static fromTranslationResponse(l,c){r.Contracts.throwIfNullOrUndefined(l,"translationResponse");const o=l.SpeechPhrase;return l.SpeechPhrase=void 0,o.Translation=l,o.Text=o.DisplayText,new pp(o,c)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var l;return(l=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:l.Language}get Confidence(){var l;return(l=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:l.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const l={...this.privTranslationPhrase},c={...l,RecognitionStatus:n.RecognitionStatus[l.RecognitionStatus]};return l.Translation&&(c.Translation={...l.Translation,TranslationStatus:s.TranslationStatus[l.Translation.TranslationStatus]}),JSON.stringify(c)}mapRecognitionStatus(l){if(typeof l=="string")return n.RecognitionStatus[l];if(typeof l=="number")return l}mapTranslationStatus(l){if(typeof l=="string")return s.TranslationStatus[l];if(typeof l=="number")return l}};return Hs.TranslationPhrase=h,Hs}var Vs={},oS;function yT(){if(oS)return Vs;oS=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.TranslationServiceRecognizer=void 0;const r=ae(),n=J(),s=ne();let h=class extends s.ConversationServiceRecognizer{constructor(l,c,o,u,d){super(l,c,o,u,d),this.privTranslationRecognizer=d,this.connectionEvents.attach(v=>{v.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(l){const c=new n.PropertyCollection;let o=await this.processSpeechMessages(l);if(o)return!0;const u=async v=>{if(c.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,v.asJson()),this.privRequestSession.onPhraseRecognized(v.Offset+v.Duration),v.RecognitionStatus===s.RecognitionStatus.Success){const f=this.fireEventForResult(v,c);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,f)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(f.result)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const f=s.EnumTranslation.implTranslateRecognitionResult(v.RecognitionStatus),m=new n.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,f,v.Text,v.Duration,v.Offset,v.Language,v.Confidence,void 0,v.asJson(),c);if(f===n.ResultReason.Canceled){const y=s.EnumTranslation.implTranslateCancelResult(v.RecognitionStatus),w=s.EnumTranslation.implTranslateCancelErrorCode(v.RecognitionStatus);await this.cancelRecognitionLocal(y,w,s.EnumTranslation.implTranslateErrorDetails(w))}else if(v.RecognitionStatus!==s.RecognitionStatus.EndOfDictation){const y=new n.TranslationRecognitionEventArgs(m,m.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,y)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(m)}catch(w){this.privErrorCallback&&this.privErrorCallback(w)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0}},d=v=>{c.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,v.asJson());const f=this.fireEventForResult(v,c);if(this.privRequestSession.onHypothesis(f.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,f)}catch{}o=!0};switch(l.messageType===r.MessageType.Text&&c.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,l.textBody),l.path.toLowerCase()){case"translation.hypothesis":d(s.TranslationHypothesis.fromJSON(l.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const v=JSON.parse(l.textBody);if(v.SpeechPhrase)await u(s.TranslationPhrase.fromTranslationResponse(v,this.privRequestSession.currentTurnAudioOffset));else{const m=JSON.parse(l.textBody);m.SpeechHypothesis&&d(s.TranslationHypothesis.fromTranslationResponse(m,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await u(s.TranslationPhrase.fromJSON(l.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(l.binaryBody,this.privRequestSession.sessionId),o=!0;break;case"audio.end":case"translation.synthesis.end":const f=s.TranslationSynthesisEnd.fromJSON(l.textBody);switch(f.SynthesisStatus){case s.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const m=new n.TranslationSynthesisResult(n.ResultReason.Canceled,void 0),y=new n.TranslationSynthesisEventArgs(m,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,y)}catch{}}if(this.privTranslationRecognizer.canceled){const m=new n.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,n.CancellationReason.Error,f.FailureReason,n.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,m)}catch{}}break;case s.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}o=!0;break}return o}cancelRecognition(l,c,o,u,d){const v=new n.PropertyCollection;if(v.setProperty(s.CancellationErrorCodePropertyName,n.CancellationErrorCode[u]),this.privTranslationRecognizer.canceled){const f=new n.TranslationRecognitionCanceledEventArgs(l,o,d,u,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,f)}catch{}}if(this.privSuccessCallback){const f=new n.TranslationRecognitionResult(void 0,c,n.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,d,void 0,v);try{this.privSuccessCallback(f),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(l,c,o){try{const u=new n.TranslationRecognitionEventArgs(n.TranslationRecognitionResult.fromSpeechRecognitionResult(l),c,o);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,u)}catch{}}handleRecognizedCallback(l,c,o){try{const u=new n.TranslationRecognitionEventArgs(n.TranslationRecognitionResult.fromSpeechRecognitionResult(l),c,o);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}}fireEventForResult(l,c){let o;if(l.Translation.Translations!==void 0){o=new n.Translations;for(const y of l.Translation.Translations)o.set(y.Language,y.Text||y.DisplayText)}let u,d;l instanceof s.TranslationPhrase?(l.Translation&&l.Translation.TranslationStatus===r.TranslationStatus.Success?u=n.ResultReason.TranslatedSpeech:u=n.ResultReason.RecognizedSpeech,d=l.Confidence):u=n.ResultReason.TranslatingSpeech;const v=l.Language,f=new n.TranslationRecognitionResult(o,this.privRequestSession.requestId,u,l.Text,l.Duration,l.Offset,v,d,l.Translation.FailureReason,l.asJson(),c);return new n.TranslationRecognitionEventArgs(f,l.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(l,c){const o=l===void 0?n.ResultReason.SynthesizingAudioCompleted:n.ResultReason.SynthesizingAudio,u=new n.TranslationSynthesisResult(o,l),d=new n.TranslationSynthesisEventArgs(u,c);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,d)}catch{}}};return Vs.TranslationServiceRecognizer=h,Vs}var Ks={},sS;function ST(){if(sS)return Ks;sS=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.SpeechDetected=void 0;let r=class JC{constructor(s,h){this.privSpeechStartDetected=JSON.parse(s),this.privSpeechStartDetected.Offset+=h}static fromJSON(s,h){return new JC(s,h)}get Offset(){return this.privSpeechStartDetected.Offset}};return Ks.SpeechDetected=r,Ks}var Gs={},aS;function CT(){if(aS)return Gs;aS=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.SpeechHypothesis=void 0;let r=class QC{constructor(s,h){this.privSpeechHypothesis=JSON.parse(s),this.updateOffset(h)}static fromJSON(s,h){return new QC(s,h)}updateOffset(s){this.privSpeechHypothesis.Offset+=s}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};return Gs.SpeechHypothesis=r,Gs}var Js={},cS;function PT(){if(cS)return Js;cS=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.SpeechKeyword=void 0;let r=class YC{constructor(s,h){this.privSpeechKeyword=JSON.parse(s),this.privSpeechKeyword.Offset+=h}static fromJSON(s,h){return new YC(s,h)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}};return Js.SpeechKeyword=r,Js}var Qs={},uS;function wT(){if(uS)return Qs;uS=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.SpeechServiceRecognizer=void 0;const r=J(),n=ne();let s=class extends n.ServiceRecognizerBase{constructor(a,l,c,o,u){super(a,l,c,o,u),this.privSpeechRecognizer=u}async processTypeSpecificMessages(a){let l;const c=new r.PropertyCollection;let o=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const u=n.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,u.asJson()),l=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,u.Text,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,void 0,void 0,u.asJson(),c),this.privRequestSession.onHypothesis(u.Offset);const d=new r.SpeechRecognitionEventArgs(l,u.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,d)}catch{}o=!0;break;case"speech.phrase":const v=n.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,v.asJson());const f=n.EnumTranslation.implTranslateRecognitionResult(v.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(v.Offset+v.Duration),r.ResultReason.Canceled===f){const m=n.EnumTranslation.implTranslateCancelResult(v.RecognitionStatus),y=n.EnumTranslation.implTranslateCancelErrorCode(v.RecognitionStatus);await this.cancelRecognitionLocal(m,y,n.EnumTranslation.implTranslateErrorDetails(y))}else{if(v.RecognitionStatus===n.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])l=new r.SpeechRecognitionResult(this.privRequestSession.requestId,f,v.DisplayText,v.Duration,v.Offset,v.Language,v.LanguageDetectionConfidence,void 0,void 0,v.asJson(),c);else{const y=n.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,y.asJson()),l=new r.SpeechRecognitionResult(this.privRequestSession.requestId,f,y.RecognitionStatus===n.RecognitionStatus.Success?y.NBest[0].Display:"",y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,void 0,void 0,y.asJson(),c)}const m=new r.SpeechRecognitionEventArgs(l,l.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,m)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(l)}catch(y){this.privErrorCallback&&this.privErrorCallback(y)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0;break}return o}cancelRecognition(a,l,c,o,u){const d=new r.PropertyCollection;if(d.setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[o]),this.privSpeechRecognizer.canceled){const v=new r.SpeechRecognitionCanceledEventArgs(c,u,o,void 0,a);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,v)}catch{}}if(this.privSuccessCallback){const v=new r.SpeechRecognitionResult(l,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,d);try{this.privSuccessCallback(v),this.privSuccessCallback=void 0}catch{}}}};return Qs.SpeechServiceRecognizer=s,Qs}var Ys={},Gd={},lS;function RT(){return lS||(lS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.IdentityProvider=r.SpeakerDiarizationMode=void 0,(function(n){n.None="None",n.Identity="Identity",n.Anonymous="Anonymous"})(r.SpeakerDiarizationMode||(r.SpeakerDiarizationMode={})),(function(n){n.CallCenter="CallCenter"})(r.IdentityProvider||(r.IdentityProvider={}))})(Gd)),Gd}var dS;function ET(){if(dS)return Ys;dS=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.ConversationTranscriptionServiceRecognizer=void 0;const r=J(),n=ne(),s=RT(),h=Ot();let a=class extends n.ServiceRecognizerBase{constructor(c,o,u,d,v){super(c,o,u,d,v),this.privConversationTranscriber=v,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const c=this.privSpeechContext.getContext().phraseDetection||{};c.mode=h.RecognitionMode.Conversation;const o={};o.mode=s.SpeakerDiarizationMode.Anonymous,o.audioSessionId=this.privDiarizationSessionId,o.audioOffsetMs=0,o.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",c.speakerDiarization=o,this.privSpeechContext.getContext().phraseDetection=c}}async processTypeSpecificMessages(c){let o;const u=new r.PropertyCollection;u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,c.textBody);let d=!1;switch(c.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const v=n.SpeechHypothesis.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset);o=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,v.Text,v.Duration,v.Offset,v.Language,v.LanguageDetectionConfidence,v.SpeakerId,void 0,v.asJson(),u),this.privRequestSession.onHypothesis(v.Offset);const f=new r.ConversationTranscriptionEventArgs(o,v.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,f)}catch{}d=!0;break;case"speech.phrase":const m=n.SimpleSpeechPhrase.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset),y=n.EnumTranslation.implTranslateRecognitionResult(m.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(m.Offset+m.Duration),r.ResultReason.Canceled===y){const w=n.EnumTranslation.implTranslateCancelResult(m.RecognitionStatus),P=n.EnumTranslation.implTranslateCancelErrorCode(m.RecognitionStatus);await this.cancelRecognitionLocal(w,P,n.EnumTranslation.implTranslateErrorDetails(P))}else if(!(this.privRequestSession.isSpeechEnded&&y===r.ResultReason.NoMatch&&m.RecognitionStatus!==n.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])o=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,y,m.DisplayText,m.Duration,m.Offset,m.Language,m.LanguageDetectionConfidence,m.SpeakerId,void 0,m.asJson(),u);else{const P=n.DetailedSpeechPhrase.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset);o=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,y,P.RecognitionStatus===n.RecognitionStatus.Success?P.NBest[0].Display:void 0,P.Duration,P.Offset,P.Language,P.LanguageDetectionConfidence,m.SpeakerId,void 0,P.asJson(),u)}const w=new r.ConversationTranscriptionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,w)}catch{}}d=!0;break}return d}cancelRecognition(c,o,u,d,v){if(new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[d]),this.privConversationTranscriber.canceled){const m=new r.ConversationTranscriptionCanceledEventArgs(u,v,d,void 0,c);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,m)}catch{}}}};return Ys.ConversationTranscriptionServiceRecognizer=a,Ys}var Xs={},pS;function TT(){if(pS)return Xs;pS=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.TranscriptionServiceRecognizer=void 0;const r=ae(),n=J(),s=ne(),h=Zc();let a=class extends s.ConversationServiceRecognizer{constructor(c,o,u,d,v){super(c,o,u,d,v),this.privTranscriberRecognizer=v,this.sendPrePayloadJSONOverride=f=>this.sendTranscriptionStartJSON(f),this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(c,o){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createSpeechEventPayload(c,o))}}async sendMeetingSpeechEventAsync(c,o){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createMeetingSpeechEventPayload(c,o))}}processTypeSpecificMessages(c){return this.processSpeechMessages(c)}handleRecognizedCallback(c,o,u){try{const d=new n.SpeechRecognitionEventArgs(c,o,u);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,d),this.privSuccessCallback){try{this.privSuccessCallback(c)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(c,o,u){try{const d=new n.SpeechRecognitionEventArgs(c,o,u);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,d)}catch{}}cancelRecognition(c,o,u,d,v){const f=new n.PropertyCollection;if(f.setProperty(s.CancellationErrorCodePropertyName,n.CancellationErrorCode[d]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const m=new n.MeetingTranscriptionCanceledEventArgs(u,v,d,void 0,c);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,m)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const m=new n.ConversationTranscriptionCanceledEventArgs(u,v,d,void 0,c);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,m)}catch{}}if(this.privSuccessCallback){const m=new n.SpeechRecognitionResult(o,n.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,v,void 0,f);try{this.privSuccessCallback(m),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(c){if(await this.sendSpeechContext(c,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const o=this.privTranscriberRecognizer.getMeetingInfo(),u=this.createMeetingSpeechEventPayload(o,"start");await this.sendSpeechEvent(c,u)}else{const o=this.privTranscriberRecognizer.getConversationInfo(),u=this.createSpeechEventPayload(o,"start");await this.sendSpeechEvent(c,u)}await this.sendWaveHeader(c)}sendSpeechEvent(c,o){const u=JSON.stringify(o);if(u)return c.send(new h.SpeechConnectionMessage(r.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",u))}createSpeechEventPayload(c,o){const u={id:"meeting",name:o,meeting:c.conversationProperties};return u.meeting.id=c.id,u.meeting.attendees=c.participants,u}createMeetingSpeechEventPayload(c,o){const u={id:"meeting",name:o,meeting:c.meetingProperties};return u.meeting.id=c.id,u.meeting.attendees=c.participants,u}};return Xs.TranscriptionServiceRecognizer=a,Xs}var Zs={},hS;function AT(){if(hS)return Zs;hS=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.DetailedSpeechPhrase=void 0;const r=ne();let n=class XC{constructor(h,a){this.privDetailedSpeechPhrase=JSON.parse(h),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(a)}static fromJSON(h,a){return new XC(h,a)}updateOffsets(h){if(this.privDetailedSpeechPhrase.Offset+=h,this.privDetailedSpeechPhrase.NBest)for(const a of this.privDetailedSpeechPhrase.NBest){if(a.Words)for(const l of a.Words)l.Offset+=h;if(a.DisplayWords)for(const l of a.DisplayWords)l.Offset+=h}}asJson(){const h={...this.privDetailedSpeechPhrase};return JSON.stringify({...h,RecognitionStatus:r.RecognitionStatus[h.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(h){if(typeof h=="string")return r.RecognitionStatus[h];if(typeof h=="number")return h}};return Zs.DetailedSpeechPhrase=n,Zs}var $s={},vS;function bT(){if(vS)return $s;vS=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.SimpleSpeechPhrase=void 0;const r=ne();let n=class ZC{constructor(h,a=0){this.privSimpleSpeechPhrase=JSON.parse(h),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(a)}static fromJSON(h,a){return new ZC(h,a)}updateOffset(h){this.privSimpleSpeechPhrase.Offset+=h}asJson(){const h={...this.privSimpleSpeechPhrase};return JSON.stringify({...h,RecognitionStatus:r.RecognitionStatus[h.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(h){if(typeof h=="string")return r.RecognitionStatus[h];if(typeof h=="number")return h}};return $s.SimpleSpeechPhrase=n,$s}var ea={},ta={},fS;function IT(){if(fS)return ta;fS=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.ServiceTelemetryListener=void 0;const r=ae(),n=yp();class s{constructor(a,l,c){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=a,this.privAudioSourceId=l,this.privAudioNodeId=c,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(a){a>0&&this.privPhraseLatencies.push(Date.now()-a)}hypothesisReceived(a){a>0&&this.privHypothesisLatencies.push(Date.now()-a)}onEvent(a){this.privIsDisposed||(a instanceof n.RecognitionTriggeredEvent&&a.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:a.eventTime,Name:"ListeningTrigger",Start:a.eventTime}),a instanceof r.AudioStreamNodeAttachingEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=a.eventTime),a instanceof r.AudioStreamNodeAttachedEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=a.eventTime),a instanceof r.AudioSourceErrorEvent&&a.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:a.eventTime,Error:a.error,Name:"Microphone",Start:this.privMicStartTime})),a instanceof r.AudioStreamNodeErrorEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:a.eventTime,Error:a.error,Name:"Microphone",Start:this.privMicStartTime})),a instanceof r.AudioStreamNodeDetachedEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:a.eventTime,Name:"Microphone",Start:this.privMicStartTime})),a instanceof n.ConnectingToServiceEvent&&a.requestId===this.privRequestId&&(this.privConnectionId=a.sessionId),a instanceof r.ConnectionStartEvent&&a.connectionId===this.privConnectionId&&(this.privConnectionStartTime=a.eventTime),a instanceof r.ConnectionEstablishedEvent&&a.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:a.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),a instanceof r.ConnectionEstablishErrorEvent&&a.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:a.eventTime,Error:this.getConnectionError(a.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),a instanceof r.ConnectionMessageReceivedEvent&&a.connectionId===this.privConnectionId&&a.message&&a.message.headers&&a.message.headers.path&&(this.privReceivedMessages[a.message.headers.path]||(this.privReceivedMessages[a.message.headers.path]=new Array),this.privReceivedMessages[a.message.headers.path].length<50&&this.privReceivedMessages[a.message.headers.path].push(a.networkReceivedTime)))}getTelemetry(){const a=new Array;this.privListeningTriggerMetric&&a.push(this.privListeningTriggerMetric),this.privMicMetric&&a.push(this.privMicMetric),this.privConnectionEstablishMetric&&a.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&a.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&a.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const l={Metrics:a,ReceivedMessages:this.privReceivedMessages},c=JSON.stringify(l);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],c}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(a){switch(a){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+a.toString()}}}return ta.ServiceTelemetryListener=s,ta}var gS;function _T(){if(gS)return ea;gS=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.RequestSession=void 0;const r=ae(),n=yp(),s=IT();let h=class{constructor(l){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=l,this.privRequestId=(0,r.createNoDashGuid)(),this.privAudioNodeId=(0,r.createNoDashGuid)(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(l){this.privServiceTelemetryListener&&this.privDetachables.push(l.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new s.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new n.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(l,c){this.privAudioNode=l,this.privIsAudioNodeDetached=!1,c?await this.onComplete():this.onEvent(new n.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(l,c){this.privAuthFetchEventId=l,this.privSessionId=c,this.onEvent(new n.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(l){l&&await this.onComplete()}async onConnectionEstablishCompleted(l,c){if(l===200){this.onEvent(new n.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else l===403&&await this.onComplete()}async onServiceTurnEndResponse(l){this.privTurnDeferral.resolve(),!l||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,r.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred}onHypothesis(l){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(l)))}onPhraseRecognized(l){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(l)),this.onServiceRecognized(l)}onServiceRecognized(l){this.privLastRecoOffset=l,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(l),this.privConnectionAttempts=0}onAudioSent(l){this.privBytesSent+=l,this.privRecognitionBytesSent+=l}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const l of this.privDetachables)await l.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(l){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(l),r.Events.instance.onEvent(l)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}};return ea.RequestSession=h,ea}var ra={},Jd={},mS;function kT(){return mS||(mS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TentativePhraseResultsOption=r.OutputFormat=r.PhraseExtension=r.PhraseOption=void 0,(function(n){n.WordTimings="WordTimings",n.SNR="SNR",n.Pronunciation="Pronunciation",n.WordPronunciation="WordPronunciation",n.WordConfidence="WordConfidence",n.Words="Words",n.Sentiment="Sentiment",n.PronunciationAssessment="PronunciationAssessment",n.ContentAssessment="ContentAssessment",n.PhraseAMScore="PhraseAMScore",n.PhraseLMScore="PhraseLMScore",n.WordAMScore="WordAMScore",n.WordLMScore="WordLMScore",n.RuleTree="RuleTree",n.NBestTimings="NBestTimings",n.DecoderDiagnostics="DecoderDiagnostics",n.DisplayWordTimings="DisplayWordTimings",n.DisplayWords="DisplayWords"})(r.PhraseOption||(r.PhraseOption={})),(function(n){n.Graph="Graph",n.Corrections="Corrections",n.Sentiment="Sentiment"})(r.PhraseExtension||(r.PhraseExtension={})),(function(n){n.Simple="Simple",n.Detailed="Detailed"})(r.OutputFormat||(r.OutputFormat={})),(function(n){n.None="None",n.Always="Always"})(r.TentativePhraseResultsOption||(r.TentativePhraseResultsOption={}))})(Jd)),Jd}var yS;function xT(){if(yS)return ra;yS=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.SpeechContext=void 0;const r=Ot(),n=kT();let s=class{constructor(a){this.privContext={},this.privDynamicGrammar=a}getContext(){return this.privContext}setPronunciationAssessmentParams(a,l=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(a)||{},l&&(this.privContext.phraseDetection.mode=r.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(n.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(n.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(n.PhraseOption.SNR)}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=n.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=n.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(n.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(n.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(a){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=a}toJSON(){const a=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=a,JSON.stringify(this.privContext)}};return ra.SpeechContext=s,ra}var na={},Qd={},SS;function MT(){return SS||(SS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SubstringMatchType=r.GroupType=void 0,(function(n){n.IntentText="IntentText",n.IntentEntity="IntentEntity",n.Generic="Generic",n.People="People",n.Place="Place",n.DynamicEntity="DynamicEntity"})(r.GroupType||(r.GroupType={})),(function(n){n.None="None",n.LeftRooted="LeftRooted",n.PartialName="PartialName",n.MiddleOfSentence="MiddleOfSentence"})(r.SubstringMatchType||(r.SubstringMatchType={}))})(Qd)),Qd}var CS;function NT(){if(CS)return na;CS=1,Object.defineProperty(na,"__esModule",{value:!0}),na.DynamicGrammarBuilder=void 0;const r=MT();let n=class{constructor(){this.privWeight=1}addPhrase(h){this.privPhrases||(this.privPhrases=[]),h instanceof Array?this.privPhrases=this.privPhrases.concat(h):this.privPhrases.push(h)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(h){this.privGrammars||(this.privGrammars=[]),h instanceof Array?this.privGrammars=this.privGrammars.concat(h):this.privGrammars.push(h)}clearGrammars(){this.privGrammars=void 0}setWeight(h){this.privWeight=h}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const h={};if(h.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const a=[];this.privPhrases.forEach(l=>{a.push({text:l})}),h.groups=[{type:r.GroupType.Generic,items:a}],h.bias=this.privWeight}return h}};return na.DynamicGrammarBuilder=n,na}var ia={},oa={},sa={},Yd={},PS;function $C(){return PS||(PS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MessageDataStreamType=r.ActivityPayloadResponse=void 0;class n{constructor(h){this.privActivityResponse=JSON.parse(h)}static fromJSON(h){return new n(h)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}r.ActivityPayloadResponse=n,(function(s){s[s.None=0]="None",s[s.TextToSpeechAudio=1]="TextToSpeechAudio"})(r.MessageDataStreamType||(r.MessageDataStreamType={}))})(Yd)),Yd}var wS;function OT(){if(wS)return sa;wS=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.DialogServiceTurnState=void 0;const r=Ta(),n=qn(),s=$C();let h=class{constructor(l,c){this.privRequestId=c,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=l,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(l,c){return l.messageDataStreamType===s.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=n.AudioOutputStream.createPullStream(),this.privAudioStream.format=c!==void 0?c:r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};return sa.DialogServiceTurnState=h,sa}var RS;function jT(){if(RS)return oa;RS=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.DialogServiceTurnStateManager=void 0;const r=Bt(),n=OT();let s=class{constructor(){this.privTurnMap=new Map}StartTurn(a){if(this.privTurnMap.has(a))throw new r.InvalidOperationError("Service error: There is already a turn with id:"+a);const l=new n.DialogServiceTurnState(this,a);return this.privTurnMap.set(a,l),this.privTurnMap.get(a)}GetTurn(a){return this.privTurnMap.get(a)}CompleteTurn(a){if(!this.privTurnMap.has(a))throw new r.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+a);const l=this.privTurnMap.get(a);return l.complete(),this.privTurnMap.delete(a),l}};return oa.DialogServiceTurnStateManager=s,oa}var Xd={},ES;function DT(){return ES||(ES=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.InvocationSource=void 0,(function(n){n.None="None",n.VoiceActivationWithKeyword="VoiceActivationWithKeyword"})(r.InvocationSource||(r.InvocationSource={}))})(Xd)),Xd}var Zd={},TS;function zT(){return TS||(TS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OnRejectAction=r.KeywordDetectionType=void 0,(function(n){n.StartTrigger="StartTrigger"})(r.KeywordDetectionType||(r.KeywordDetectionType={})),(function(n){n.EndOfTurn="EndOfTurn",n.Continue="Continue"})(r.OnRejectAction||(r.OnRejectAction={}))})(Zd)),Zd}var AS;function LT(){if(AS)return ia;AS=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.DialogServiceAdapter=void 0;const r=ct(),n=lC(),s=ae(),h=Ta(),a=J(),l=jT(),c=ne(),o=$C(),u=DT(),d=zT(),v=Zc();let f=class extends c.ServiceRecognizerBase{constructor(y,w,P,T,R){super(y,w,P,T,R),this.privEvents=new s.EventSource,this.privDialogServiceConnector=R,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new l.DialogServiceTurnStateManager,this.recognizeOverride=(A,b,x)=>this.listenOnce(A,b,x),this.postConnectImplOverride=A=>this.dialogConnectImpl(A),this.configConnectionOverride=A=>this.configConnection(A),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=P,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(A=>{A.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(y){const w=(0,s.createGuid)(),P=(0,s.createNoDashGuid)(),T={context:{interactionId:w},messagePayload:JSON.parse(y),version:.5},R=JSON.stringify(T);await(await this.fetchConnection()).send(new v.SpeechConnectionMessage(s.MessageType.Text,"agent",P,"application/json",R))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(y){const w=new a.PropertyCollection;y.messageType===s.MessageType.Text&&w.setProperty(a.PropertyId.SpeechServiceResponse_JsonResult,y.textBody);let P,T;switch(y.path.toLowerCase()){case"speech.phrase":const A=c.SimpleSpeechPhrase.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(A.Offset+A.Duration),A.RecognitionStatus!==c.RecognitionStatus.TooManyRequests&&A.RecognitionStatus!==c.RecognitionStatus.Error){const F=this.fireEventForResult(A,w);if(this.privLastResult=F.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,F)}catch{}}T=!0;break;case"speech.hypothesis":const b=c.SpeechHypothesis.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset);P=new a.SpeechRecognitionResult(this.privRequestSession.requestId,a.ResultReason.RecognizingSpeech,b.Text,b.Duration,b.Offset,b.Language,b.LanguageDetectionConfidence,void 0,void 0,b.asJson(),w),this.privRequestSession.onHypothesis(b.Offset);const x=new a.SpeechRecognitionEventArgs(P,b.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,x)}catch{}T=!0;break;case"speech.keyword":const z=c.SpeechKeyword.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset);P=new a.SpeechRecognitionResult(this.privRequestSession.requestId,z.Status==="Accepted"?a.ResultReason.RecognizedKeyword:a.ResultReason.NoMatch,z.Text,z.Duration,z.Offset,void 0,void 0,void 0,void 0,z.asJson(),w),z.Status!=="Accepted"&&(this.privLastResult=P);const N=new a.SpeechRecognitionEventArgs(P,P.duration,P.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,N)}catch{}T=!0;break;case"audio":{const F=y.requestId.toUpperCase(),B=this.privTurnStateManager.GetTurn(F);try{y.binaryBody?B.audioStream.write(y.binaryBody):B.endAudioStream()}catch{}}T=!0;break;case"response":this.handleResponseMessage(y),T=!0;break}const R=new s.Deferred;return R.resolve(T),R.promise}async cancelRecognition(y,w,P,T,R){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const A=new a.PropertyCollection;A.setProperty(c.CancellationErrorCodePropertyName,a.CancellationErrorCode[T]);const b=new a.SpeechRecognitionCanceledEventArgs(P,R,T,void 0,y);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,b)}catch{}if(this.privSuccessCallback){const x=new a.SpeechRecognitionResult(void 0,a.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,R,void 0,A);try{this.privSuccessCallback(x),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(y,w,P){this.privRecognizerConfig.recognitionMode=y,this.privSuccessCallback=w,this.privErrorCallback=P,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(a.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const T=this.connectImpl(),R=this.sendPreAudioMessages(),A=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),b=await this.privDialogAudioSource.format,x=await this.privDialogAudioSource.deviceInfo,z=new r.ReplayableAudioNode(A,b.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(z,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:x};try{await T,await R}catch(B){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.ConnectionFailure,B),Promise.resolve()}const N=new a.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,N),this.sendAudio(z).then(()=>{},async B=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,B)})}dialogConnectImpl(y){return this.privConnectionLoop=this.startMessageLoop(),y}receiveDialogMessageOverride(){const y=new s.Deferred,w=async()=>{try{const P=this.isDisposed(),T=!this.isDisposed()&&this.terminateMessageLoop;if(P||T){y.resolve(void 0);return}const A=await(await this.fetchConnection()).read();if(!A)return w();const b=v.SpeechConnectionMessage.fromConnectionMessage(A);switch(b.path.toLowerCase()){case"turn.start":{const se=b.requestId.toUpperCase(),pe=this.privRequestSession.requestId.toUpperCase();se!==pe?this.privTurnStateManager.StartTurn(se):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const z=c.SpeechDetected.fromJSON(b.textBody,this.privRequestSession.currentTurnAudioOffset),N=new a.RecognitionEventArgs(z.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,N);break;case"speech.enddetected":let F;b.textBody.length>0?F=b.textBody:F="{ Offset: 0 }";const B=c.SpeechDetected.fromJSON(F,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(B.Offset);const re=new a.RecognitionEventArgs(B.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,re);break;case"turn.end":{const se=b.requestId.toUpperCase(),pe=this.privRequestSession.requestId.toUpperCase();if(se!==pe)this.privTurnStateManager.CompleteTurn(se);else{const Re=new a.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,Re),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(ee){this.privErrorCallback&&this.privErrorCallback(ee)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(b)||this.serviceEvents&&this.serviceEvents.onEvent(new s.ServiceEvent(b.path.toLowerCase(),b.textBody))}catch{}}return w()}catch{this.terminateMessageLoop=!0,y.resolve()}};return w().catch(P=>{s.Events.instance.onEvent(new s.BackgroundEvent(P))}),y.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(y){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,y)}return Promise.resolve()}async configConnection(y){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(y,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(y),y)}async sendPreAudioMessages(){const y=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(y,!0),await this.sendAgentContext(y),await this.sendWaveHeader(y)}sendAgentConfig(y){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(a.PropertyId.Conversation_DialogType)===a.DialogServiceConfig.DialogTypes.CustomCommands){const P=this.agentConfig.get();P.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(P)}this.onEvent(new n.SendingAgentContextMessageEvent(this.agentConfig));const w=this.agentConfig.toJsonString();return this.agentConfigSent=!0,y.send(new v.SpeechConnectionMessage(s.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",w))}}sendAgentContext(y){const w=(0,s.createGuid)(),P=this.privDialogServiceConnector.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template),R=JSON.stringify({channelData:"",context:{interactionId:w},messagePayload:typeof P===void 0?void 0:P,version:.5});return y.send(new v.SpeechConnectionMessage(s.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",R))}fireEventForResult(y,w){const P=c.EnumTranslation.implTranslateRecognitionResult(y.RecognitionStatus),T=new a.SpeechRecognitionResult(this.privRequestSession.requestId,P,y.DisplayText,y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,void 0,void 0,y.asJson(),w);return new a.SpeechRecognitionEventArgs(T,y.Offset,this.privRequestSession.sessionId)}handleResponseMessage(y){const w=JSON.parse(y.textBody);switch(w.messageType.toLowerCase()){case"message":const P=y.requestId.toUpperCase(),T=o.ActivityPayloadResponse.fromJSON(y.textBody),R=this.privTurnStateManager.GetTurn(P);if(T.conversationId){const x=this.agentConfig.get();x.botInfo.conversationId=T.conversationId,this.agentConfig.set(x)}const A=R.processActivityPayload(T,h.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),b=new a.ActivityReceivedEventArgs(T.messagePayload,A);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,b)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new a.TurnStatusReceivedEventArgs(y.textBody))}catch{}break;default:s.Events.instance.onEvent(new s.BackgroundEvent(`Unexpected response of type ${w.messageType}. Ignoring.`));break}}onEvent(y){this.privEvents.onEvent(y),s.Events.instance.onEvent(y)}addKeywordContextData(){const y=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(y===void 0)return;const w=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),P=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),T=y.split(";"),R=w===void 0?[]:w.split(";"),A=P===void 0?[]:P.split(";"),b=[];for(let x=0;x<T.length;x++){const z={text:T[x]};x<R.length&&(z.startOffset=Number(R[x])),x<A.length&&(z.duration=Number(A[x])),b.push(z)}this.speechContext.getContext().invocationSource=u.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:b,onReject:{action:d.OnRejectAction.EndOfTurn},type:d.KeywordDetectionType.StartTrigger}]}};return ia.DialogServiceAdapter=f,ia}var aa={},bS;function qT(){if(bS)return aa;bS=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.AgentConfig=void 0;let r=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(s){this.iPrivConfig=s}};return aa.AgentConfig=r,aa}var $d={},ca={},ua={},IS;function Rp(){if(IS)return ua;IS=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.ConversationConnectionConfig=void 0;const r=KC();let n=class Tr extends r.RestConfigBase{static get host(){return Tr.privHost}static get apiVersion(){return Tr.privApiVersion}static get clientAppId(){return Tr.privClientAppId}static get defaultLanguageCode(){return Tr.privDefaultLanguageCode}static get restPath(){return Tr.privRestPath}static get webSocketPath(){return Tr.privWebSocketPath}static get transcriptionEventKeys(){return Tr.privTranscriptionEventKeys}};return ua.ConversationConnectionConfig=n,n.privHost="dev.microsofttranslator.com",n.privRestPath="/capito/room",n.privApiVersion="2.0",n.privDefaultLanguageCode="en-US",n.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",n.privWebSocketPath="/capito/translate",n.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],ua}var _S;function BT(){if(_S)return ca;_S=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.ConversationManager=void 0;const r=ct(),n=me(),s=J(),h=Rp();let a=class{constructor(){this.privRequestParams=h.ConversationConnectionConfig.configParams,this.privErrors=h.ConversationConnectionConfig.restErrors,this.privHost=h.ConversationConnectionConfig.host,this.privApiVersion=h.ConversationConnectionConfig.apiVersion,this.privRestPath=h.ConversationConnectionConfig.restPath,this.privRestAdapter=new r.RestMessageAdapter({})}createOrJoin(c,o,u,d){try{n.Contracts.throwIfNullOrUndefined(c,"args");const v=c.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,h.ConversationConnectionConfig.defaultLanguageCode),f=c.getProperty(s.PropertyId.ConversationTranslator_Name,"conversation_host"),m=c.getProperty(s.PropertyId.ConversationTranslator_Host,this.privHost),y=c.getProperty(s.PropertyId.ConversationTranslator_CorrelationId),w=c.getProperty(s.PropertyId.SpeechServiceConnection_Key),P=c.getProperty(s.PropertyId.SpeechServiceConnection_Region),T=c.getProperty(s.PropertyId.SpeechServiceAuthorization_Token);n.Contracts.throwIfNullOrWhitespace(v,"languageCode"),n.Contracts.throwIfNullOrWhitespace(f,"nickname"),n.Contracts.throwIfNullOrWhitespace(m,"endpointHost");const R={};R[this.privRequestParams.apiVersion]=this.privApiVersion,R[this.privRequestParams.languageCode]=v,R[this.privRequestParams.nickname]=f;const A={};y&&(A[this.privRequestParams.correlationId]=y),A[this.privRequestParams.clientAppId]=h.ConversationConnectionConfig.clientAppId,o!==void 0?R[this.privRequestParams.roomId]=o:(n.Contracts.throwIfNullOrUndefined(P,this.privErrors.authInvalidSubscriptionRegion),A[this.privRequestParams.subscriptionRegion]=P,w?A[this.privRequestParams.subscriptionKey]=w:T?A[this.privRequestParams.authorization]=`Bearer ${T}`:n.Contracts.throwIfNullOrUndefined(w,this.privErrors.authInvalidSubscriptionKey));const b={};b.headers=A,this.privRestAdapter.options=b;const x=`https://${m}${this.privRestPath}`;this.privRestAdapter.request(r.RestRequestType.Post,x,R,null).then(z=>{const N=r.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,z.headers);if(!z.ok){if(d){let B=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",z.status.toString()),re;try{re=JSON.parse(z.data),B+=` [${re.error.code}: ${re.error.message}]`}catch{B+=` [${z.data}]`}N&&(B+=` ${N}`),d(B)}return}const F=JSON.parse(z.data);if(F&&(F.requestId=N),u){try{u(F)}catch(B){d&&d(B)}u=void 0}}).catch(()=>{})}catch(v){if(d)if(v instanceof Error){const f=v;d(f.name+": "+f.message)}else d(v)}}leave(c,o){return new Promise((u,d)=>{try{n.Contracts.throwIfNullOrUndefined(c,this.privErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","token"));const v=c.getProperty(s.PropertyId.ConversationTranslator_Host,this.privHost),f=c.getProperty(s.PropertyId.ConversationTranslator_CorrelationId),m={};m[this.privRequestParams.apiVersion]=this.privApiVersion,m[this.privRequestParams.sessionToken]=o;const y={};f&&(y[this.privRequestParams.correlationId]=f);const w={};w.headers=y,this.privRestAdapter.options=w;const P=`https://${v}${this.privRestPath}`;this.privRestAdapter.request(r.RestRequestType.Delete,P,m,null).then(T=>{T.ok,u()}).catch(()=>{})}catch(v){if(v instanceof Error){const f=v;d(f.name+": "+f.message)}else d(v)}})}};return ca.ConversationManager=a,ca}var on={},la={},da={},pa={},kS;function e0(){if(kS)return pa;kS=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.ConversationConnectionMessage=void 0;const r=ae();let n=class extends r.ConnectionMessage{constructor(h,a,l,c){super(h,a,l,c);const o=JSON.parse(this.textBody);o.type!==void 0&&(this.privConversationMessageType=o.type)}get conversationMessageType(){return this.privConversationMessageType}};return pa.ConversationConnectionMessage=n,pa}var xS;function FT(){if(xS)return da;xS=1,Object.defineProperty(da,"__esModule",{value:!0}),da.ConversationWebsocketMessageFormatter=void 0;const r=ae(),n=e0();let s=class{toConnectionMessage(a){const l=new r.Deferred;try{if(a.messageType===r.MessageType.Text){const c=new n.ConversationConnectionMessage(a.messageType,a.textContent,{},a.id);l.resolve(c)}else a.messageType===r.MessageType.Binary&&l.resolve(new n.ConversationConnectionMessage(a.messageType,a.binaryContent,void 0,a.id))}catch(c){l.reject(`Error formatting the message. Error: ${c}`)}return l.promise}fromConnectionMessage(a){const l=new r.Deferred;try{if(a.messageType===r.MessageType.Text){const c=`${a.textBody?a.textBody:""}`;l.resolve(new r.RawWebsocketMessage(r.MessageType.Text,c,a.id))}}catch(c){l.reject(`Error formatting the message. ${c}`)}return l.promise}};return da.ConversationWebsocketMessageFormatter=s,da}var MS;function UT(){if(MS)return la;MS=1,Object.defineProperty(la,"__esModule",{value:!0}),la.ConversationConnectionFactory=void 0;const r=ct(),n=ae(),s=me(),h=J(),a=er(),l=Rp(),c=FT();let o=class extends a.ConnectionFactoryBase{create(d,v,f){const m=d.parameters.getProperty(h.PropertyId.ConversationTranslator_Host,l.ConversationConnectionConfig.host),y=d.parameters.getProperty(h.PropertyId.ConversationTranslator_CorrelationId,(0,n.createGuid)()),w=`wss://${m}${l.ConversationConnectionConfig.webSocketPath}`,P=d.parameters.getProperty(h.PropertyId.ConversationTranslator_Token,void 0);s.Contracts.throwIfNullOrUndefined(P,"token");const T={};T[l.ConversationConnectionConfig.configParams.apiVersion]=l.ConversationConnectionConfig.apiVersion,T[l.ConversationConnectionConfig.configParams.token]=P,T[l.ConversationConnectionConfig.configParams.correlationId]=y;const R=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(w,T,{},new c.ConversationWebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(d),R,f))}};return la.ConversationConnectionFactory=o,la}var ha={},va={},NS;function WT(){if(NS)return va;NS=1,Object.defineProperty(va,"__esModule",{value:!0}),va.ConversationRequestSession=void 0;const r=ae();let n=class{constructor(h){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=h,this.privRequestId=(0,r.createNoDashGuid)(),this.privRequestCompletionDeferral=new r.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(h,a){this.privSessionId=a}onAuthCompleted(h){h&&this.onComplete()}onConnectionEstablishCompleted(h){h!==200&&h===403&&this.onComplete()}onServiceTurnEndResponse(h){h?this.privRequestId=(0,r.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const h of this.privDetachables)await h.detach()}}onComplete(){}};return va.ConversationRequestSession=n,va}var tt={},OS;function t0(){if(OS)return tt;OS=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.ConversationReceivedTranslationEventArgs=tt.ParticipantsListEventArgs=tt.ParticipantAttributeEventArgs=tt.ParticipantEventArgs=tt.LockRoomEventArgs=tt.MuteAllEventArgs=void 0;const r=J();class n extends r.SessionEventArgs{constructor(u,d){super(d),this.privIsMuted=u}get isMuted(){return this.privIsMuted}}tt.MuteAllEventArgs=n;class s extends r.SessionEventArgs{constructor(u,d){super(d),this.privIsLocked=u}get isMuted(){return this.privIsLocked}}tt.LockRoomEventArgs=s;class h extends r.SessionEventArgs{constructor(u,d){super(d),this.privParticipant=u}get participant(){return this.privParticipant}}tt.ParticipantEventArgs=h;class a extends r.SessionEventArgs{constructor(u,d,v,f){super(f),this.privKey=d,this.privValue=v,this.privParticipantId=u}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}tt.ParticipantAttributeEventArgs=a;class l extends r.SessionEventArgs{constructor(u,d,v,f,m,y,w,P,T){super(T),this.privRoomId=u,this.privSessionToken=d,this.privTranslateTo=v,this.privProfanityFilter=f,this.privRoomProfanityFilter=m,this.privIsRoomLocked=y,this.privIsRoomLocked=w,this.privParticipants=P}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}tt.ParticipantsListEventArgs=l;class c{constructor(u,d,v){this.privPayload=d,this.privCommand=u,this.privSessionId=v}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return tt.ConversationReceivedTranslationEventArgs=c,tt}var $t={},jS;function r0(){if(jS)return $t;jS=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.ConversationTranslatorCommandTypes=$t.ConversationTranslatorMessageTypes=$t.InternalParticipants=void 0;class r{constructor(s=[],h){this.participants=s,this.meId=h}addOrUpdateParticipant(s){if(s===void 0)return;const h=this.getParticipantIndex(s.id);return h>-1?this.participants.splice(h,1,s):this.participants.push(s),this.getParticipant(s.id)}getParticipantIndex(s){return this.participants.findIndex(h=>h.id===s)}getParticipant(s){return this.participants.find(h=>h.id===s)}deleteParticipant(s){this.participants=this.participants.filter(h=>h.id!==s)}get host(){return this.participants.find(s=>s.isHost===!0)}get me(){return this.getParticipant(this.meId)}}return $t.InternalParticipants=r,$t.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},$t.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"},$t}var ep={},fa={},DS;function HT(){if(DS)return fa;DS=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.CommandResponsePayload=void 0;const r=s=>JSON.parse(s);let n=class n0{constructor(h){this.privCommandResponse=r(h)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(h){return new n0(h)}};return fa.CommandResponsePayload=n,fa}var sn={},zS;function VT(){if(zS)return sn;zS=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.ParticipantPayloadResponse=sn.ParticipantsListPayloadResponse=void 0;const r=a=>JSON.parse(a),n=a=>JSON.parse(a);class s{constructor(l){this.privParticipantsPayloadResponse=r(l)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(l){return new s(l)}}sn.ParticipantsListPayloadResponse=s;class h{constructor(l){this.privParticipantPayloadResponse=n(l)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(l){return new h(l)}}return sn.ParticipantPayloadResponse=h,sn}var an={},LS;function KT(){if(LS)return an;LS=1,Object.defineProperty(an,"__esModule",{value:!0}),an.TextResponsePayload=an.SpeechResponsePayload=void 0;const r=a=>JSON.parse(a),n=a=>JSON.parse(a);class s{constructor(l){this.privSpeechResponse=r(l)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(l){return new s(l)}}an.SpeechResponsePayload=s;class h{constructor(l){this.privTextResponse=n(l)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(l){return new h(l)}}return an.TextResponsePayload=h,an}var qS;function GT(){return qS||(qS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TextResponsePayload=r.SpeechResponsePayload=r.ParticipantPayloadResponse=r.ParticipantsListPayloadResponse=r.CommandResponsePayload=void 0;var n=HT();Object.defineProperty(r,"CommandResponsePayload",{enumerable:!0,get:function(){return n.CommandResponsePayload}});var s=VT();Object.defineProperty(r,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return s.ParticipantsListPayloadResponse}}),Object.defineProperty(r,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return s.ParticipantPayloadResponse}});var h=KT();Object.defineProperty(r,"SpeechResponsePayload",{enumerable:!0,get:function(){return h.SpeechResponsePayload}}),Object.defineProperty(r,"TextResponsePayload",{enumerable:!0,get:function(){return h.TextResponsePayload}})})(ep)),ep}var BS;function JT(){if(BS)return ha;BS=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.ConversationServiceAdapter=void 0;const r=ae(),n=J(),s=ne(),h=e0(),a=WT(),l=t0(),c=r0(),o=GT();let u=class extends s.ServiceRecognizerBase{constructor(v,f,m,y,w){super(v,f,m,y,w),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=w,this.privConversationAuthentication=v,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=P=>this.conversationConnectImpl(P),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new a.ConversationRequestSession((0,r.createNoDashGuid)()),this.privConversationConnectionFactory=f,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(v){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(v),await super.dispose(v)}async sendMessage(v){return(await this.fetchConnection()).send(new h.ConversationConnectionMessage(r.MessageType.Text,v))}async sendMessageAsync(v){await(await this.fetchConnection()).send(new h.ConversationConnectionMessage(r.MessageType.Text,v))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(v,f,m,y,w){this.terminateMessageLoop=!0;const P=new n.ConversationTranslationCanceledEventArgs(m,w,y,void 0,v);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,P)}catch{}}async conversationConnectImpl(v){return this.privConnectionLoop=this.startMessageLoop(),v}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const v=new r.Deferred;try{const m=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return v.resolve(),Promise.resolve();if(!m)return this.receiveConversationMessageOverride();const y=this.privConversationRequestSession.sessionId,w=m.conversationMessageType.toLowerCase();let P=!1;try{switch(w){case"info":case"participant_command":case"command":const T=o.CommandResponsePayload.fromJSON(m.textBody);switch(T.command.toLowerCase()){case"participantlist":const N=o.ParticipantsListPayloadResponse.fromJSON(m.textBody),F=N.participants.map(ee=>({avatar:ee.avatar,displayName:ee.nickname,id:ee.participantId,isHost:ee.ishost,isMuted:ee.ismuted,isUsingTts:ee.usetts,preferredLanguage:ee.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new l.ParticipantsListEventArgs(N.roomid,N.token,N.translateTo,N.profanityFilter,N.roomProfanityFilter,N.roomLocked,N.muteAll,F,y));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(T.participantId,c.ConversationTranslatorCommandTypes.setTranslateToLanguages,T.value,y));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(T.participantId,c.ConversationTranslatorCommandTypes.setProfanityFiltering,T.value,y));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(T.participantId,c.ConversationTranslatorCommandTypes.setMute,T.value,y));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new l.MuteAllEventArgs(T.value,y));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new n.ConversationExpirationEventArgs(T.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(T.participantId,c.ConversationTranslatorCommandTypes.setUseTTS,T.value,y));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new l.LockRoomEventArgs(T.value,y));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(T.participantId,c.ConversationTranslatorCommandTypes.changeNickname,T.value,y));break;case"joinsession":const B=o.ParticipantPayloadResponse.fromJSON(m.textBody),re={avatar:B.avatar,displayName:B.nickname,id:B.participantId,isHost:B.ishost,isMuted:B.ismuted,isUsingTts:B.usetts,preferredLanguage:B.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new l.ParticipantEventArgs(re,y));break;case"leavesession":const se={id:T.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new l.ParticipantEventArgs(se,y));break;case"disconnectsession":const pe={id:T.participantId};break;case"token":const Re=new s.CognitiveTokenAuthentication(()=>{const ee=T.token;return Promise.resolve(ee)},()=>{const ee=T.token;return Promise.resolve(ee)});this.authentication=Re,this.privConversationServiceConnector.onToken(Re);break;default:break}break;case"partial":case"final":const R=o.SpeechResponsePayload.fromJSON(m.textBody),A=w==="final"?n.ResultReason.TranslatedParticipantSpeech:n.ResultReason.TranslatingParticipantSpeech,b=new n.ConversationTranslationResult(R.participantId,this.getTranslations(R.translations),R.language,R.id,A,R.recognition,void 0,void 0,m.textBody,void 0);R.isFinal?((b.text!==void 0&&b.text.length>0||R.id===this.privLastPartialUtteranceId)&&(P=!0),P&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.final,b,y))):b.text!==void 0&&(this.privLastPartialUtteranceId=R.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.partial,b,y)));break;case"translated_message":const x=o.TextResponsePayload.fromJSON(m.textBody),z=new n.ConversationTranslationResult(x.participantId,this.getTranslations(x.translations),x.language,void 0,void 0,x.originalText,void 0,void 0,void 0,m.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.instantMessage,z,y));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return v.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const v=this.receiveConversationMessageOverride();try{return await v}catch(f){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,f),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(v=>v.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(v=>v),this.privConnectionConfigPromise)}getTranslations(v){let f;if(v!==void 0){f=new n.Translations;for(const m of v)f.set(m.lang,m.translation)}return f}};return ha.ConversationServiceAdapter=u,ha}var FS;function QT(){if(FS)return on;FS=1,Object.defineProperty(on,"__esModule",{value:!0}),on.ConversationTranslatorRecognizer=on.ConversationRecognizerFactory=void 0;const r=ne(),n=ae(),s=me(),h=J(),a=UT(),l=JT();class c{static fromConfig(d,v,f){return new o(d,v,f)}}on.ConversationRecognizerFactory=c;let o=class extends h.Recognizer{constructor(d,v,f){const m=v;s.Contracts.throwIfNull(m,"speechConfig");const y=d;s.Contracts.throwIfNull(y,"conversationImpl"),super(f,m.properties,new a.ConversationConnectionFactory),this.privConversation=y,this.privIsDisposed=!1,this.privProperties=m.properties.clone(),this.privConnection=h.Connection.fromRecognizer(this),this.privProperties.getProperty(h.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=n.Timeout.setTimeout,this.privClearTimeout=n.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(d){this.privConnection.connected=d}set disconnected(d){this.privConnection.disconnected=d}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(d,v,f){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfNullOrWhitespace(d,"token"),this.privReco.conversationTranslatorToken=d,this.resetConversationTimeout(),this.privReco.connectAsync(v,f)}catch(m){if(f)if(m instanceof Error){const y=m;f(y.name+": "+y.message)}else f(m)}}disconnect(d,v){try{s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{d&&d()},f=>{v&&v(f)})}catch(f){if(v)if(f instanceof Error){const m=f;v(m.name+": "+m.message)}else v(f);this.dispose(!0).catch(m=>{n.Events.instance.onEvent(new n.BackgroundEvent(m))})}}sendRequest(d,v,f){try{s.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(d,v,f)}catch(m){if(f)if(m instanceof Error){const y=m;f(y.name+": "+y.message)}else f(m);this.dispose(!0).catch(y=>{n.Events.instance.onEvent(new n.BackgroundEvent(y))})}}onToken(d){this.privConversation.onToken(d)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(d){this.privIsDisposed||d&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(d))}createRecognizerConfig(d){return new r.RecognizerConfig(d,this.privProperties)}createServiceRecognizer(d,v,f,m){const y=f;return new l.ConversationServiceAdapter(d,v,y,m,this)}sendMessage(d,v,f){const m=this.privReco;((w,P,T)=>{w!==void 0?w.then(()=>{try{P&&P()}catch(R){T&&T(`'Unhandled error on promise callback: ${R}'`)}},R=>{try{T&&T(R)}catch{}}):T&&T("Null promise")})(m.sendMessageAsync(d),v,f),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return on.ConversationTranslatorRecognizer=o,on}var ga={},US;function YT(){if(US)return ga;US=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.TranscriberRecognizer=void 0;const r=ae(),n=me(),s=J(),h=ne(),a=Ot();let l=class extends s.Recognizer{constructor(o,u){const d=o;n.Contracts.throwIfNull(d,"speechTranslationConfig");const v=u;n.Contracts.throwIfNull(v,"audioConfigImpl"),n.Contracts.throwIfNullOrWhitespace(d.speechRecognitionLanguage,s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new h.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,o)}set conversation(o){n.Contracts.throwIfNullOrUndefined(o,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=o}getConversationInfo(){return n.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(o){n.Contracts.throwIfNullOrUndefined(o,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=o}getMeetingInfo(){return n.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(o,u){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(a.RecognitionMode.Conversation),o,u)}stopContinuousRecognitionAsync(o,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,u)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(o,u){const d=this.privReco;n.Contracts.throwIfNullOrUndefined(d,"serviceRecognizer"),await d.sendSpeechEventAsync(o,u)}async pushMeetingEvent(o,u){const d=this.privReco;n.Contracts.throwIfNullOrUndefined(d,"serviceRecognizer"),await d.sendMeetingSpeechEventAsync(o,u)}async enforceAudioGating(){const d=(await this.audioConfig.format).channels;if(d===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(d!==8)throw new Error(`Unsupported audio configuration: Detected ${d}-channel audio`)}connectMeetingCallbacks(o){this.isMeetingRecognizer=!0,this.canceled=(u,d)=>{o.canceled&&o.canceled(o,d)},this.recognizing=(u,d)=>{o.transcribing&&o.transcribing(o,d)},this.recognized=(u,d)=>{o.transcribed&&o.transcribed(o,d)},this.sessionStarted=(u,d)=>{o.sessionStarted&&o.sessionStarted(o,d)},this.sessionStopped=(u,d)=>{o.sessionStopped&&o.sessionStopped(o,d)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(o){this.privDisposedRecognizer||(o&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(o))}createRecognizerConfig(o){return new h.RecognizerConfig(o,this.properties)}createServiceRecognizer(o,u,d,v){const f=d;return new h.TranscriptionServiceRecognizer(o,u,f,v,this)}};return ga.TranscriberRecognizer=l,ga}var WS;function XT(){return WS||(WS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.InternalParticipants=r.ConversationTranslatorMessageTypes=r.ConversationTranslatorCommandTypes=r.ParticipantsListEventArgs=r.ParticipantEventArgs=r.ParticipantAttributeEventArgs=r.MuteAllEventArgs=r.LockRoomEventArgs=r.ConversationReceivedTranslationEventArgs=r.TranscriberRecognizer=r.ConversationRecognizerFactory=r.ConversationConnectionConfig=r.ConversationManager=void 0;var n=BT();Object.defineProperty(r,"ConversationManager",{enumerable:!0,get:function(){return n.ConversationManager}});var s=Rp();Object.defineProperty(r,"ConversationConnectionConfig",{enumerable:!0,get:function(){return s.ConversationConnectionConfig}});var h=QT();Object.defineProperty(r,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return h.ConversationRecognizerFactory}});var a=YT();Object.defineProperty(r,"TranscriberRecognizer",{enumerable:!0,get:function(){return a.TranscriberRecognizer}});var l=t0();Object.defineProperty(r,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return l.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(r,"LockRoomEventArgs",{enumerable:!0,get:function(){return l.LockRoomEventArgs}}),Object.defineProperty(r,"MuteAllEventArgs",{enumerable:!0,get:function(){return l.MuteAllEventArgs}}),Object.defineProperty(r,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return l.ParticipantAttributeEventArgs}}),Object.defineProperty(r,"ParticipantEventArgs",{enumerable:!0,get:function(){return l.ParticipantEventArgs}}),Object.defineProperty(r,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return l.ParticipantsListEventArgs}});var c=r0();Object.defineProperty(r,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorCommandTypes}}),Object.defineProperty(r,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorMessageTypes}}),Object.defineProperty(r,"InternalParticipants",{enumerable:!0,get:function(){return c.InternalParticipants}})})($d)),$d}var tp={},HS;function i0(){return HS||(HS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SynthesisAudioMetadata=r.MetadataType=void 0,(function(s){s.WordBoundary="WordBoundary",s.Bookmark="Bookmark",s.Viseme="Viseme",s.SentenceBoundary="SentenceBoundary",s.SessionEnd="SessionEnd",s.AvatarSignal="TalkingAvatarSignal"})(r.MetadataType||(r.MetadataType={}));class n{constructor(h){this.privSynthesisAudioMetadata=JSON.parse(h)}static fromJSON(h){return new n(h)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}r.SynthesisAudioMetadata=n})(tp)),tp}var ma={},Nt={},VS;function ZT(){if(VS)return Nt;VS=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.SynthesisStartedEvent=Nt.ConnectingToSynthesisServiceEvent=Nt.SynthesisTriggeredEvent=Nt.SpeechSynthesisEvent=void 0;const r=ae();class n extends r.PlatformEvent{constructor(c,o,u=r.EventType.Info){super(c,u),this.privRequestId=o}get requestId(){return this.privRequestId}}Nt.SpeechSynthesisEvent=n;class s extends n{constructor(c,o,u){super("SynthesisTriggeredEvent",c),this.privSessionAudioDestinationId=o,this.privTurnAudioDestinationId=u}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Nt.SynthesisTriggeredEvent=s;class h extends n{constructor(c,o){super("ConnectingToSynthesisServiceEvent",c),this.privAuthFetchEventId=o}get authFetchEventId(){return this.privAuthFetchEventId}}Nt.ConnectingToSynthesisServiceEvent=h;class a extends n{constructor(c,o){super("SynthesisStartedEvent",c),this.privAuthFetchEventId=o}get authFetchEventId(){return this.privAuthFetchEventId}}return Nt.SynthesisStartedEvent=a,Nt}var KS;function $T(){if(KS)return ma;KS=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.SynthesisTurn=void 0;const r=ae(),n=qn(),s=J(),h=i0(),a=ZT();let l=class hp{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,r.createNoDashGuid)(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(o){this.privStreamId=o}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(o){this.privAudioOutputFormat=o}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const o=new s.PropertyCollection;return o.setProperty(s.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),o}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const o=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(o),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(o,u,d,v){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=o,this.privRawText=u,this.privIsSSML=d,this.privAudioOutputStream=new n.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",v!==void 0&&(this.privTurnAudioDestination=v,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new a.SynthesisTriggeredEvent(this.requestId,void 0,v===void 0?void 0:v.id()))}onPreConnectionStart(o){this.privAuthFetchEventId=o,this.onEvent(new a.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(o){o&&this.onComplete()}onConnectionEstablishCompleted(o){if(o===200){this.onEvent(new a.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else o===403&&this.onComplete()}onServiceResponseMessage(o){const u=JSON.parse(o);this.streamId=u.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(o){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred;const u=JSON.parse(o);u.webrtc&&(this.privWebRTCSDP=u.webrtc.connectionString)}onAudioChunkReceived(o){this.isSynthesizing&&(this.privAudioOutputStream.write(o),this.privBytesReceived+=o.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(o))}onTextBoundaryEvent(o){this.updateTextOffset(o.Data.text.Text,o.Type)}onVisemeMetadataReceived(o){o.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=o.Data.AnimationChunk)}onSessionEnd(o){this.privAudioDuration=o.Data.Offset}async constructSynthesisResult(){const o=await this.getAllReceivedAudioWithHeader();return new s.SpeechSynthesisResult(this.requestId,s.ResultReason.SynthesizingAudioCompleted,o,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const o=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",o}onEvent(o){r.Events.instance.onEvent(o)}static isXmlTag(o){return o.length>=2&&o[0]==="<"&&o[o.length-1]===">"}updateTextOffset(o,u){u===h.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(o,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!hp.isXmlTag(o)&&this.updateTextOffset(o,u))):(this.privSentenceOffset=this.privRawText.indexOf(o,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!hp.isXmlTag(o)&&this.updateTextOffset(o,u)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(o){return this.privRawText.indexOf("<",o+1)>this.privRawText.indexOf(">",o+1)}};return ma.SynthesisTurn=l,ma}var ya={},GS;function eA(){if(GS)return ya;GS=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.SynthesisAdapterBase=void 0;const r=ae(),n=J(),s=ne(),h=Zc();let a=class{constructor(c,o,u,d){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!c)throw new r.ArgumentNullError("authentication");if(!o)throw new r.ArgumentNullError("connectionFactory");if(!u)throw new r.ArgumentNullError("synthesizerConfig");this.privAuthentication=c,this.privConnectionFactory=o,this.privSynthesizerConfig=u,this.privIsDisposed=!1,this.privSessionAudioDestination=d,this.privSynthesisTurn=new s.SynthesisTurn,this.privConnectionEvents=new r.EventSource,this.privServiceEvents=new r.EventSource,this.privSynthesisContext=new s.SynthesisContext,this.privAgentConfig=new s.AgentConfig,this.connectionEvents.attach(v=>{if(v.name==="ConnectionClosedEvent"){const f=v;f.statusCode!==1e3&&this.cancelSynthesisLocal(n.CancellationReason.Error,f.statusCode===1007?n.CancellationErrorCode.BadRequestParameters:n.CancellationErrorCode.ConnectionFailure,`${f.reason} websocket error code: ${f.statusCode}`)}})}get synthesizerConfig(){return this.privSynthesizerConfig}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(c){this.privActivityTemplate=c}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(c){this.privAudioOutputFormat=c,this.privSynthesisTurn.audioOutputFormat=c,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=c),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=c)}isDisposed(){return this.privIsDisposed}async dispose(c){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(c)}async connect(){await this.connectImpl()}async sendNetworkMessage(c,o){const u=typeof o=="string"?r.MessageType.Text:r.MessageType.Binary,d=typeof o=="string"?"application/json":"";return(await this.fetchConnection()).send(new h.SpeechConnectionMessage(u,c,this.privSynthesisTurn.requestId,d,o))}async Speak(c,o,u,d,v,f){let m;if(o?m=c:m=this.privSynthesizer.buildSsml(c),this.speakOverride!==void 0)return this.speakOverride(m,u,d,v);this.privSuccessCallback=d,this.privErrorCallback=v,this.privSynthesisTurn.startNewSynthesis(u,c,o,f);try{await this.connectImpl();const y=await this.fetchConnection();await this.sendSynthesisContext(y),await this.sendSsmlMessage(y,m,u),this.onSynthesisStarted(u),this.receiveMessage()}catch(y){return this.cancelSynthesisLocal(n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,y),Promise.reject(y)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new h.SpeechConnectionMessage(r.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(c,o,u,d){const v=new n.PropertyCollection;v.setProperty(s.CancellationErrorCodePropertyName,n.CancellationErrorCode[u]);const f=new n.SpeechSynthesisResult(c,n.ResultReason.Canceled,void 0,d,v);if(this.onSynthesisCancelled(f),this.privSuccessCallback)try{this.privSuccessCallback(f)}catch{}}cancelSynthesisLocal(c,o,u){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,c,o,u))}processTypeSpecificMessages(c){return!0}async receiveMessage(){try{const o=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!o)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const u=h.SpeechConnectionMessage.fromConnectionMessage(o);if(u.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(u.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(u.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===u.streamId.toLowerCase()&&u.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(u.binaryBody),this.onSynthesizing(u.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(u.binaryBody));break;case"audio.metadata":const d=s.SynthesisAudioMetadata.fromJSON(u.textBody).Metadata;for(const f of d)switch(f.Type){case s.MetadataType.WordBoundary:case s.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(f);const m=new n.SpeechSynthesisWordBoundaryEventArgs(f.Data.Offset,f.Data.Duration,f.Data.text.Text,f.Data.text.Length,f.Type===s.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,f.Data.text.BoundaryType);this.onWordBoundary(m);break;case s.MetadataType.Bookmark:const y=new n.SpeechSynthesisBookmarkEventArgs(f.Data.Offset,f.Data.Bookmark);this.onBookmarkReached(y);break;case s.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(f),f.Data.IsLastAnimation){const w=new n.SpeechSynthesisVisemeEventArgs(f.Data.Offset,f.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(w)}break;case s.MetadataType.AvatarSignal:this.onAvatarEvent(f);break;case s.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(f);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let v;try{v=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(v)}catch(f){this.privErrorCallback&&this.privErrorCallback(f)}this.onSynthesisCompleted(v);break;default:this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(c){this.setSynthesisContextSynthesisSection();const o=this.synthesisContext.toJSON();if(o)return c.send(new h.SpeechConnectionMessage(r.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",o))}setSpeechConfigSynthesisSection(){}connectImpl(c=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(u=>u.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,r.createNoDashGuid)(),this.privConnectionId=(0,r.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const o=c?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=o.then(async u=>{this.privSynthesisTurn.onAuthCompleted(!1);const d=await this.privConnectionFactory.create(this.privSynthesizerConfig,u,this.privConnectionId);d.events.attach(f=>{this.connectionEvents.onEvent(f)});const v=await d.open();return v.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(v.statusCode),Promise.resolve(d)):v.statusCode===403&&!c?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(v.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${v.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Url)} Reason: ${v.reason}`))},u=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(u)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(c,o){if(o)return c.send(new h.SpeechConnectionMessage(r.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",o))}sendSsmlMessage(c,o,u){return c.send(new h.SpeechConnectionMessage(r.MessageType.Text,"ssml",u,"application/ssml+xml",o))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(c=>c.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const c=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(c):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(c,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),c)}onAvatarEvent(c){}onSynthesisStarted(c){}onSynthesizing(c){}onSynthesisCancelled(c){}onSynthesisCompleted(c){}onWordBoundary(c){}onVisemeReceived(c){}onBookmarkReached(c){}};return ya.SynthesisAdapterBase=a,a.telemetryDataEnabled=!0,ya}var Sa={},JS;function tA(){if(JS)return Sa;JS=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.AvatarSynthesisAdapter=void 0;const r=J(),n=ne();let s=class extends n.SynthesisAdapterBase{constructor(a,l,c,o,u){super(a,l,c,void 0),this.privAvatarSynthesizer=o,this.privSynthesizer=o,this.privAvatarConfig=u}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var a,l,c,o,u,d,v,f,m,y,w,P,T,R,A,b,x;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(a=this.privAvatarConfig.videoFormat)==null?void 0:a.bitrate,codec:(l=this.privAvatarConfig.videoFormat)==null?void 0:l.codec,crop:{bottomRight:{x:(u=(o=(c=this.privAvatarConfig.videoFormat)==null?void 0:c.cropRange)==null?void 0:o.bottomRight)==null?void 0:u.x,y:(f=(v=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:v.bottomRight)==null?void 0:f.y},topLeft:{x:(w=(y=(m=this.privAvatarConfig.videoFormat)==null?void 0:m.cropRange)==null?void 0:y.topLeft)==null?void 0:w.x,y:(R=(T=(P=this.privAvatarConfig.videoFormat)==null?void 0:P.cropRange)==null?void 0:T.topLeft)==null?void 0:R.y}},resolution:{height:(A=this.privAvatarConfig.videoFormat)==null?void 0:A.height,width:(b=this.privAvatarConfig.videoFormat)==null?void 0:b.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(x=this.privAvatarConfig.backgroundImage)==null?void 0:x.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,photoAvatarBaseModel:this.privAvatarConfig.photoAvatarBaseModel,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(a){if(this.privAvatarSynthesizer.avatarEventReceived){const l=new r.AvatarEventArgs(a.Data.Offset,a.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,l)}catch{}}}};return Sa.AvatarSynthesisAdapter=s,Sa}var Ca={},QS;function rA(){if(QS)return Ca;QS=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.SpeechSynthesisAdapter=void 0;const r=J(),n=ne();let s=class extends n.SynthesisAdapterBase{constructor(a,l,c,o,u){super(a,l,c,u),this.privSpeechSynthesizer=o,this.privSynthesizer=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(a){const l=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(a,r.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,l)}onSynthesizing(a){if(this.privSpeechSynthesizer.synthesizing)try{const l=this.privSynthesisTurn.audioOutputFormat.addHeader(a),c=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(this.privSynthesisTurn.requestId,r.ResultReason.SynthesizingAudio,l));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,c)}catch{}}onSynthesisCancelled(a){if(this.privSpeechSynthesizer.SynthesisCanceled){const l=new r.SpeechSynthesisEventArgs(a);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,l)}catch{}}}onSynthesisCompleted(a){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new r.SpeechSynthesisEventArgs(a))}catch{}}onWordBoundary(a){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,a)}catch{}}onVisemeReceived(a){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,a)}catch{}}onBookmarkReached(a){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,a)}catch{}}};return Ca.SpeechSynthesisAdapter=s,Ca}var Pa={},YS;function nA(){if(YS)return Pa;YS=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.SynthesisRestAdapter=void 0;const r=ct(),n=J(),s=er(),h=gt();let a=class{constructor(c,o){let u=c.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!u){const v=c.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,"westus"),f=s.ConnectionFactoryBase.getHostSuffix(v);u=c.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,`https://${v}.tts.speech${f}`)}this.privUri=`${u}/cognitiveservices/voices/list`;const d=r.RestConfigBase.requestOptions;this.privRestAdapter=new r.RestMessageAdapter(d),this.privAuthentication=o}getVoicesList(c){return this.privRestAdapter.setHeaders(h.HeaderNames.ConnectionId,c),this.privAuthentication.fetch(c).then(o=>(this.privRestAdapter.setHeaders(o.headerName,o.token),this.privRestAdapter.request(r.RestRequestType.Get,this.privUri)))}};return Pa.SynthesisRestAdapter=a,Pa}var rp={},XS;function iA(){return XS||(XS=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SynthesizerConfig=r.SynthesisServiceType=void 0;const n=ne();var s;(function(a){a[a.Standard=0]="Standard",a[a.Custom=1]="Custom"})(s=r.SynthesisServiceType||(r.SynthesisServiceType={}));class h{constructor(l,c){this.privSynthesisServiceType=s.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=l||new n.SpeechServiceConfig(new n.Context(null)),this.privParameters=c}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(l){this.privSynthesisServiceType=l}set synthesisVideoSection(l){this.privSpeechServiceConfig.Context.synthesis={video:l}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}setContextFromJson(l){const c=JSON.parse(l);c.system&&(this.privSpeechServiceConfig.Context.system=c.system),c.os&&(this.privSpeechServiceConfig.Context.os=c.os),c.audio&&(this.privSpeechServiceConfig.Context.audio=c.audio),c.synthesis&&(this.privSpeechServiceConfig.Context.synthesis=c.synthesis)}}r.SynthesizerConfig=h})(rp)),rp}var wa={},ZS;function oA(){if(ZS)return wa;ZS=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.SynthesisContext=void 0;const r=J();let n=class{constructor(){this.privContext={}}setSection(h,a){this.privContext[h]=a}set audioOutputFormat(h){this.privAudioOutputFormat=h}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(h){const a=this.buildSynthesisContext(h);this.setSection("synthesis",a)}buildSynthesisContext(h){return{audio:{metadataOptions:{bookmarkEnabled:!!(h!=null&&h.bookmarkReached),punctuationBoundaryEnabled:h==null?void 0:h.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(h!=null&&h.wordBoundary)),sentenceBoundaryEnabled:h==null?void 0:h.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(h!=null&&h.visemeReceived),wordBoundaryEnabled:h==null?void 0:h.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(h!=null&&h.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:h==null?void 0:h.autoDetectSourceLanguage}}}};return wa.SynthesisContext=n,wa}var np={},$S;function sA(){return $S||($S=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.type=r.connectivity=r.Device=r.OS=r.System=r.Context=r.SpeechServiceConfig=void 0;class n{constructor(o){this.context=o}serialize(){return JSON.stringify(this,(o,u)=>{if(u&&typeof u=="object"&&!Array.isArray(u)){const d={};for(const v in u)Object.hasOwnProperty.call(u,v)&&(d[v&&v.charAt(0).toLowerCase()+v.substring(1)]=u[v]);return d}return u})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(o){this.recognition=o.toLowerCase()}}r.SpeechServiceConfig=n;class s{constructor(o){this.system=new h,this.os=o}}r.Context=s;class h{constructor(){const o="1.47.0";this.name="SpeechSDK",this.version=o,this.build="JavaScript",this.lang="JavaScript"}}r.System=h;class a{constructor(o,u,d){this.platform=o,this.name=u,this.version=d}}r.OS=a;class l{constructor(o,u,d){this.manufacturer=o,this.model=u,this.version=d}}r.Device=l,(function(c){c.Bluetooth="Bluetooth",c.Wired="Wired",c.WiFi="WiFi",c.Cellular="Cellular",c.InBuilt="InBuilt",c.Unknown="Unknown"})(r.connectivity||(r.connectivity={})),(function(c){c.Phone="Phone",c.Speaker="Speaker",c.Car="Car",c.Headset="Headset",c.Thermostat="Thermostat",c.Microphones="Microphones",c.Deskphone="Deskphone",c.RemoteControl="RemoteControl",c.Unknown="Unknown",c.File="File",c.Stream="Stream"})(r.type||(r.type={}))})(np)),np}var eC;function ne(){return eC||(eC=1,(function(r){var n=Hr&&Hr.__createBinding||(Object.create?(function(l,c,o,u){u===void 0&&(u=o),Object.defineProperty(l,u,{enumerable:!0,get:function(){return c[o]}})}):(function(l,c,o,u){u===void 0&&(u=o),l[u]=c[o]})),s=Hr&&Hr.__exportStar||function(l,c){for(var o in l)o!=="default"&&!Object.prototype.hasOwnProperty.call(c,o)&&n(c,l,o)};Object.defineProperty(r,"__esModule",{value:!0}),r.AutoDetectSourceLanguagesOpenRangeOptionName=r.ForceDictationPropertyName=r.ServicePropertiesPropertyName=r.CancellationErrorCodePropertyName=r.OutputFormatPropertyName=r.SpeechSynthesisAdapter=r.AvatarSynthesisAdapter=void 0,s(iR(),r),s(oR(),r),s(mp(),r),s(sR(),r),s(aR(),r),s(yp(),r),s(iT(),r),s(oT(),r),s(sT(),r),s(aT(),r),s(cT(),r),s(uT(),r),s(lT(),r),s(dT(),r),s(pT(),r),s(HC(),r),s(hT(),r),s(vT(),r),s(fT(),r),s(gT(),r),s(mT(),r),s(yT(),r),s(ST(),r),s(CT(),r),s(PT(),r),s(wT(),r),s(ET(),r),s(TT(),r),s(AT(),r),s(bT(),r),s(_T(),r),s(xT(),r),s(NT(),r),s(LT(),r),s(qT(),r),s(XT(),r),s(i0(),r),s($T(),r),s(eA(),r);var h=tA();Object.defineProperty(r,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return h.AvatarSynthesisAdapter}});var a=rA();Object.defineProperty(r,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return a.SpeechSynthesisAdapter}}),s(nA(),r),s(iA(),r),s(oA(),r),s(sA(),r),r.OutputFormatPropertyName="OutputFormat",r.CancellationErrorCodePropertyName="CancellationErrorCode",r.ServicePropertiesPropertyName="ServiceProperties",r.ForceDictationPropertyName="ForceDictation",r.AutoDetectSourceLanguagesOpenRangeOptionName="UND"})(Hr)),Hr}var tC;function aA(){return tC||(tC=1,(function(r){var n=Wr&&Wr.__createBinding||(Object.create?(function(a,l,c,o){o===void 0&&(o=c),Object.defineProperty(a,o,{enumerable:!0,get:function(){return l[c]}})}):(function(a,l,c,o){o===void 0&&(o=c),a[o]=l[c]})),s=Wr&&Wr.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&n(l,a,c)};Object.defineProperty(r,"__esModule",{value:!0});const h=ne();new h.AgentConfig,s(J(),r)})(Wr)),Wr}var Rt=aA();function cA(r){const[n,s]=L.useState("idle"),[h,a]=L.useState(""),[l,c]=L.useState([]),[o,u]=L.useState(-1),[d,v]=L.useState(null),f=L.useRef(null),m=L.useRef(null),y=L.useRef([]),w=L.useRef(0),P=L.useRef(null),T=L.useRef(!1),R=L.useRef([]),A=L.useRef(!1),b=L.useRef(!1),x=L.useRef(!1),z=L.useRef(""),N=L.useRef(null),F=L.useCallback(()=>{f.current&&f.current.close(),console.log("Initializing synthesizer with voice:",r.selectedVoice);const ee=Rt.SpeechConfig.fromSubscription(r.apiKey,r.region);ee.speechSynthesisVoiceName=r.selectedVoice,ee.speechSynthesisOutputFormat=Rt.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3;const ue=new Rt.SpeakerAudioDestination;m.current=ue;const fe=Rt.AudioConfig.fromSpeakerOutput(ue),Se=new Rt.SpeechSynthesizer(ee,fe);return f.current=Se,Se},[r]),B=L.useCallback(()=>{if(!T.current){console.log("Stopped tracking - not playing");return}let ee=Date.now()-w.current;if(m.current&&m.current.currentTime)try{const fe=m.current.currentTime;fe>0&&(ee=fe*1e3)}catch{}let ue=-1;for(let fe=0;fe<R.current.length&&R.current[fe].audioOffset<=ee+300;fe++)ue=fe;if(ue!==-1&&u(ue),Math.floor(ee/500)!==Math.floor((ee-16)/500)){const fe=ue>=0?R.current[ue]:null;console.log(` ${ee.toFixed(0)}ms | Word [${ue}]: "${fe==null?void 0:fe.text}" @ ${fe==null?void 0:fe.audioOffset}ms | Total: ${R.current.length} | Complete: ${b.current}`)}T.current&&(P.current=requestAnimationFrame(B))},[]),re=L.useCallback(ee=>{if(!ee.trim()){a("Please enter some text to synthesize");return}s("synthesizing"),a(""),c([]),u(-1),y.current=[],R.current=[],T.current=!1,A.current=!1,b.current=!1,x.current=!1,z.current=ee;const ue=F(),fe=setTimeout(()=>{R.current.length===0&&(console.log(" No word boundary received within 1 second - will start playback when audio arrives"),x.current=!0)},1e3);ue.wordBoundary=(Se,he)=>{const q={text:he.text,offset:he.textOffset,length:he.wordLength,audioOffset:he.audioOffset/1e4};if(R.current.push(q),c([...R.current]),console.log(` Word boundary: "${q.text}" at ${q.audioOffset}ms (text offset: ${q.offset})`),R.current.length===1){clearTimeout(fe),x.current=!1;const Q=Date.now(),G=Q-q.audioOffset;w.current=G,console.log(" FIRST word boundary - starting playback. Word:",q.text,"offset:",q.audioOffset,"ms. Playback start:",G,"Current time:",Q),T.current?(console.log(" Switching from fallback mode to word boundary mode - restarting tracking"),B()):(T.current=!0,s("playing"),B())}},ue.synthesizing=(Se,he)=>{he.result.audioData&&(y.current.push(new Uint8Array(he.result.audioData)),x.current&&!T.current&&y.current.length===1&&(console.log(" First audio chunk received (fallback mode) - starting playback"),w.current=Date.now(),T.current=!0,s("playing")))},ue.synthesisStarted=()=>{s("synthesizing"),console.log("Synthesis started")},ue.synthesisCompleted=(Se,he)=>{const q=y.current.reduce((de,ye)=>de+ye.length,0),Q=new Uint8Array(q);let G=0;for(const de of y.current)Q.set(de,G),G+=de.length;v(Q.buffer),b.current=!0,console.log(" Synthesis completed - now have all",R.current.length,"word boundaries");const M=q*8/48e3*1e3,U=Date.now()-w.current,le=Math.max(100,M-U+300);console.log(` Estimated audio duration: ${M}ms, current playback: ${U}ms, will stop in: ${le}ms`),T.current||(w.current=Date.now(),T.current=!0,s("playing")),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{console.log(" Audio playback ended (duration timeout)"),T.current=!1,P.current&&(cancelAnimationFrame(P.current),P.current=null),s("idle"),u(-1),N.current=null},le)},ue.SynthesisCanceled=(Se,he)=>{console.error("Synthesis canceled:",he.errorDetails),a(he.errorDetails||"Synthesis was canceled"),s("error"),u(-1),T.current=!1,P.current&&cancelAnimationFrame(P.current)},ue.speakTextAsync(ee,Se=>{Se.reason===Rt.ResultReason.SynthesizingAudioCompleted?console.log("Synthesis completed successfully"):(console.error("Synthesis failed:",Se.errorDetails),a(Se.errorDetails||"Synthesis failed"),s("error"))},Se=>{console.error("Synthesis error:",Se),a(Se),s("error")})},[F,B]),se=L.useCallback(()=>{m.current&&n==="playing"&&(m.current.pause(),s("paused"),T.current=!1,P.current&&(cancelAnimationFrame(P.current),P.current=null))},[n]),pe=L.useCallback(()=>{m.current&&n==="paused"&&(m.current.resume(),s("playing"),T.current=!0,B())},[n,B]),Re=L.useCallback(()=>{console.log(" Stop called - cleaning up"),T.current=!1,P.current&&(cancelAnimationFrame(P.current),P.current=null),m.current&&m.current.pause(),f.current&&(f.current.close(),f.current=null),s("idle"),u(-1)},[]);return{state:n,error:h,wordBoundaries:l,currentWordIndex:o,audioData:d,synthesize:re,pause:se,resume:pe,stop:Re}}async function o0(r,n){try{const s=r.length>8?`${r.substring(0,4)}...${r.substring(r.length-4)}`:"****";console.log("=== FETCHING VOICES ==="),console.log("Region:",n),console.log("API Key:",s),console.log("=======================");const h=`https://${n}.tts.speech.microsoft.com/cognitiveservices/voices/list`,a=await fetch(h,{headers:{"Ocp-Apim-Subscription-Key":r}});if(!a.ok)throw new Error(`Failed to fetch voices: ${a.status} ${a.statusText}`);const l=await a.json();console.log("Fetched voices - total count:",l.length),console.log("First voice full structure:",JSON.stringify(l[0],null,2));const c=[...new Set(l.map(u=>u.VoiceType))];console.log("Available VoiceType values:",c),c.forEach(u=>{const d=l.find(v=>v.VoiceType===u);d&&console.log(`Sample ${u} voice:`,d.ShortName,d)});const o=l.map(u=>{var m,y;const d=((m=u.ShortName)==null?void 0:m.includes("HD"))||((y=u.Name)==null?void 0:y.includes("HD")),v=u.WordsPerMinute||u.SecondaryLocaleList||[];let f="Female";return typeof u.Gender=="number"?f=u.Gender===1?"Female":"Male":typeof u.Gender=="string"&&(f=u.Gender),{name:u.ShortName||u.Name||"Unknown",locale:String(u.Locale||"en-US"),gender:f,description:`${u.LocalName||u.DisplayName||u.Name||"Unknown"} (${u.Locale||"Unknown"})`,styleList:u.StyleList||[],isFeatured:d,voiceType:u.VoiceType,isNeuralHD:d,keywords:Array.isArray(v)?v:[],wordsPer:u.WordsPerMinute,voiceTag:u.VoiceTag||{}}});return(n.toLowerCase()==="eastus"||n==="East US")&&(console.log("Adding hardcoded MAI voices for East US region"),o.unshift({name:"en-us-phoebe:MAI-Voice-1",locale:"en-US",gender:"Female",description:"Phoebe MAI Voice (en-US)",styleList:[],isFeatured:!0,voiceType:"Neural",isNeuralHD:!0,keywords:["MAI"],wordsPer:void 0},{name:"en-us-benjamin:MAI-Voice-1",locale:"en-US",gender:"Male",description:"Benjamin MAI Voice (en-US)",styleList:[],isFeatured:!0,voiceType:"Neural",isNeuralHD:!0,keywords:["MAI"],wordsPer:void 0})),o.sort((u,d)=>u.isFeatured&&!d.isFeatured?-1:!u.isFeatured&&d.isFeatured?1:u.name.localeCompare(d.name)),console.log("Successfully processed voices:",o.length),o}catch(s){throw console.error("Failed to fetch voices:",s),s}}function uA({apiKey:r,region:n,selectedVoice:s,onVoiceChange:h}){const[a,l]=L.useState([]),[c,o]=L.useState(!1),[u,d]=L.useState(""),[v,f]=L.useState(""),[m,y]=L.useState("");L.useEffect(()=>{r&&n&&(o(!0),d(""),o0(r,n).then(P=>{l(P);const T=P.filter(A=>A.name.toLowerCase().includes("openai")),R=P.filter(A=>A.name.toLowerCase().includes("mai-voice")||A.name.toLowerCase().includes(":mai-"));console.log(`Found ${T.length} OpenAI voices:`,T.map(A=>A.name)),console.log(`Found ${R.length} MAI voices:`,R.map(A=>A.name)),o(!1)}).catch(P=>{console.error("Failed to fetch voices:",P),d("Failed to load voices from Azure."),l([]),o(!1)}))},[r,n]);const w=a.filter(P=>{var A,b,x,z;if(P.name.toLowerCase().includes("multitalker"))return!1;if(m)switch(m){case"MAI":const N=P.name.toLowerCase().includes("mai-voice")||P.name.toLowerCase().includes(":mai-"),F=Array.isArray((A=P.voiceTag)==null?void 0:A.Source)&&P.voiceTag.Source.some(se=>se.toLowerCase()==="mai");if(!N&&!F)return!1;break;case"HD":if(!P.isNeuralHD)return!1;break;case"NonHD":if(P.isNeuralHD)return!1;break;case"OpenAI":const B=P.name.toLowerCase().includes("openai"),re=Array.isArray((b=P.voiceTag)==null?void 0:b.Source)&&P.voiceTag.Source.some(se=>se.toLowerCase()==="openai");if(!B&&!re)return!1;break}if(!v)return!0;const T=v.toLowerCase().trim(),R=N=>N.toLowerCase().split(/\s+/).some(B=>B===T);return P.name.toLowerCase().includes(T)||P.description.toLowerCase().includes(T)||R(P.locale)||P.gender&&R(P.gender)||((x=P.styleList)==null?void 0:x.some(N=>R(N)))||((z=P.keywords)==null?void 0:z.some(N=>R(String(N))))});return L.useEffect(()=>{if(w.length>0){const P=w[0],T=w.some(R=>R.name===s);(v||m)&&!T&&(console.log("Auto-selecting top voice from filtered list:",P.name),h(P.name))}},[v,w.length,m]),C.jsxs("div",{className:"h-full flex flex-col space-y-2",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Voice"}),u&&C.jsx("div",{className:"text-sm text-yellow-600 bg-yellow-50 p-2 rounded",children:u}),C.jsxs("div",{className:"flex gap-2 flex-wrap",children:[C.jsx("button",{onClick:()=>y(""),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${m===""?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All"}),C.jsx("button",{onClick:()=>y(m==="HD"?"":"HD"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${m==="HD"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"HD"}),C.jsx("button",{onClick:()=>y(m==="MAI"?"":"MAI"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${m==="MAI"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"MAI"}),C.jsx("button",{onClick:()=>y(m==="OpenAI"?"":"OpenAI"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${m==="OpenAI"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"OpenAI"}),C.jsx("button",{onClick:()=>y(m==="NonHD"?"":"NonHD"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${m==="NonHD"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Non-HD"})]}),C.jsx("input",{type:"text",placeholder:"Search voices...",value:v,onChange:P=>{console.log("Search term changed to:",P.target.value),f(P.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s&&C.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded-md flex-shrink-0",children:[C.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Selected:"}),C.jsx("div",{className:"text-sm text-blue-800 truncate",children:s})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto border border-gray-200 rounded-md min-h-0",children:[c&&C.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Loading voices..."}),!c&&w.length===0&&C.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No voices found"}),!c&&w.map(P=>{var A,b;const T=[];(A=P.voiceTag)!=null&&A.ContentCategories&&T.push(...P.voiceTag.ContentCategories),(b=P.voiceTag)!=null&&b.VoicePersonalities&&T.push(...P.voiceTag.VoicePersonalities);const R=T.length>0?` [${T.join(", ")}]`:"";return C.jsxs("button",{onClick:()=>{console.log("Voice changed to:",P.name),console.log("=== VOICE ATTRIBUTES ==="),console.log("Full Voice Object:",P),console.table({name:P.name,locale:P.locale,gender:P.gender,description:P.description,voiceType:P.voiceType,isNeuralHD:P.isNeuralHD,isFeatured:P.isFeatured,wordsPer:P.wordsPer}),console.log("Style List:",P.styleList),console.log("Keywords:",P.keywords),console.log("Voice Tag:",P.voiceTag),console.log("========================"),h(P.name)},className:`w-full px-4 py-3 text-left border-b border-gray-100 last:border-b-0 transition-colors ${s===P.name?"bg-blue-50 border-l-4 border-l-blue-600":"hover:bg-gray-50"}`,children:[C.jsxs("div",{className:"font-medium text-gray-800 text-sm",children:[P.isFeatured?" ":"",P.name]}),R&&C.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:R})]},P.name)})]}),C.jsxs("div",{className:"text-xs text-gray-500 flex-shrink-0 pt-2",children:[w.length," voice",w.length!==1?"s":""," available",v&&` (filtered from ${a.length})`]})]})}const rC={"en-GB":"Welcome to our programme exploring the fascinating world of marine biology. From the depths of the ocean to coastal waters, we'll discover the wonders of underwater life.","en-AU":"G'day and welcome to our show about the amazing world of marine biology. From the deep blue ocean to our beautiful coastlines, we'll explore the incredible underwater world.","en-CA":"Welcome to our podcast about the wonderful world of marine biology. From the depths of the ocean to our coastal waters, we'll explore the amazing underwater ecosystems.","en-IN":"Welcome to our programme on marine biology. We will explore the fascinating world beneath the oceans, from the deepest waters to coastal regions.","hi-IN":"                ,           ","es-ES":"Bienvenidos a nuestro programa sobre el fascinante mundo de la biologa marina. Desde las profundidades del ocano hasta las costas, exploraremos las maravillas del mundo submarino.","es-MX":"Bienvenidos a nuestro podcast sobre el fascinante mundo de la biologa marina. Desde las profundidades del mar hasta nuestras costas, exploraremos las maravillas del mundo submarino.","ja-JP":"","fr-FR":"Bienvenue dans notre mission sur le monde fascinant de la biologie marine. Des profondeurs ocaniques aux ctes, nous explorerons les merveilles du monde sous-marin.","fr-CA":"Bienvenue  notre mission sur le merveilleux monde de la biologie marine. Des profondeurs de l'ocan jusqu'aux ctes, nous explorerons les merveilles du monde sous-marin.","pt-BR":"Bem-vindos ao nosso podcast sobre o fascinante mundo da biologia marinha. Das profundezas do oceano at as costas, vamos explorar as maravilhas do mundo submarino.","pt-PT":"Bem-vindos ao nosso programa sobre o fascinante mundo da biologia marinha. Desde as profundezas do oceano at s costas, iremos explorar as maravilhas do mundo submarino.","it-IT":"Benvenuti al nostro programma sul affascinante mondo della biologia marina. Dalle profondit dell'oceano alle coste, esploreremo le meraviglie del mondo sottomarino.","zh-TW":",","ko-KR":"      .   ,          .","nl-NL":"Welkom bij ons programma over de fascinerende wereld van de mariene biologie. Van de diepten van de oceaan tot de kustlijnen, we verkennen de wonderen van de onderwaterwereld.","sv-SE":"Vlkommen till vrt program om den fascinerande vrlden av marinbiologi. Frn havets djup till kusterna kommer vi att utforska undervattensvrldens under.","pl-PL":"Witamy w naszym programie o fascynujcym wiecie biologii morskiej. Od gbin oceanu po wybrzea, bdziemy odkrywa cuda podwodnego wiata.","nb-NO":"Velkommen til vrt program om den fascinerende verden av marinbiologi. Fra havets dyp til kystene vil vi utforske undervannens underverker.","da-DK":"Velkommen til vores program om den fascinerende verden af marinbiologi. Fra havets dybder til kysterne vil vi udforske undervandensverdenens vidundere.","fi-FI":"Tervetuloa ohjelmaammme meribiologian kiehtovasta maailmasta. Valtameren syvyyksist rannikoille tutkimme vedenalaisen maailman ihmeit.","ru-RU":"         .           .","ca-ES":"Benvinguts al nostre programa sobre el fascinant mn de la biologia marina. Des de les profunditats de l'oce fins a les costes, explorarem les meravelles del mn submar.","tr-TR":"Deniz biyolojisinin byleyici dnyas hakkndaki programmza ho geldiniz. Okyanusun derinliklerinden kylara kadar, su alt dnyasnn harikalarn kefedeceiz.","ar-SA":"        .          .","ar-EG":"        .           .","th-TH":"  ","he-IL":"         .    ,      -.","cs-CZ":"Vtejte v naem poadu o fascinujcm svt mosk biologie. Od hlubin ocenu a po pobe budeme zkoumat zzraky podmoskho svta.","hu-HU":"dvzljk msorunkban a tengeri biolgia lenygz vilgrl. Az cen mlytl a partokig felfedezzk a vz alatti vilg csodit.","uk-UA":"         .          .","cy-GB":"Croeso i'n rhaglen am fyd hynod ddiddorol bioleg forol. O ddyfnderoedd y cefnfor i'r arfordiroedd, byddwn yn archwilio rhyfeddodau'r byd tanddwr.","vi-VN":"Cho mng n vi chng trnh ca chng ti v th gii hp dn ca sinh hc bin. T  su ca i dng n b bin, chng ta s khm ph nhng k quan ca th gii di nc.","sl-SI":"Dobrodoli v naem programu o fascinantnem svetu morske biologije. Od globin oceana do obal bomo raziskovali udee podvodnega sveta.","id-ID":"Selamat datang di program kami tentang dunia biologi laut yang menarik. Dari kedalaman samudra hingga garis pantai, kami akan menjelajahi keajaiban dunia bawah laut.","el-GR":"           .        ,       .","sk-SK":"Vitajte v naom programe o fascinujcom svete morskej biolgie. Od hlbn ocenu a po pobreia budeme skma zzraky podmorskho sveta.","hr-HR":"Dobrodoli u na program o fascinantnom svijetu morske biologije. Od dubina oceana do obala, istrait emo uda podvodnog svijeta.","ro-RO":"Bun venit la programul nostru despre lumea fascinant a biologiei marine. De la adncurile oceanului pn la coaste, vom explora minunile lumii subacvatice.","lt-LT":"Sveiki atvyk  ms program apie av jr biologijos pasaul. Nuo vandenyno gelmi iki krant tyrinsime povandeninio pasaulio stebuklus.","bg-BG":"      fascinating world   .            .","lv-LV":"Laipni ldzam msu programm par aizraujoo jras bioloijas pasauli. No okena dziumiem ldz krastiem ms izptsim zemdens pasaules brnumus.","et-EE":"Tere tulemast meie saatesse pnevast merebioloogia maailmast. Ookeani sgavustest kuni rannikualadeni uurime veealuse maailma imesid.","sr-RS":"Dobrodoli u na program o fascinantnom svetu morske biologije. Od dubina okeana do obala, istraiemo uda podvodnog sveta."},ip={"en-US":{podcast:"Welcome to One Fish, Two Fish, the podcast that aims to make you laugh as you learn about the fascinating world of marine biology. From the depths of the deep blue to the shores of our coastlines, we'll explore the wonders of the underwater world and the creatures that call it home.",education:"Welcome to today's online math lesson! In this session, we'll delve into the fascinating world of algebra. We'll start by exploring the basics, from solving simple equations like 2x plus 5 equals 11, to understanding variables and coefficients.",instructions:"As you complete the inspection, take clear and comprehensive notes. Use our standardized checklist as a guide, noting any deviations or areas of concern. If possible, take photographs to visually document any hazards or non-compliance issues.",story:"A gentle melancholy weighed on her heart, woven from memories of a time when laughter echoed through these very meadows. She traced the delicate petals of a forgotten daisy, lost in thought until a soft voice broke the silence.",ads:"Introducing the all-new iPhone, setting the standard for Innovation Redefined. Boasting a sleek design and cutting-edge features, this iPhone redefines the pinnacle of technology.",news:"Turning to international news, NASA's recent successful mission to send a rover to explore Mars has captured the world's attention. The rover, named 'Perseverance,' touched down on the Martian surface earlier this week.",promotional:"Ladies, it's time for some self-pampering! Treat yourself to a moment of bliss with our exclusive Winter Spa Package. Indulge in a rejuvenating spa day like never before, and let your worries melt away.",vlog:"Hey, beautiful people! Welcome back to my channel. Today, we're about to spill all the tea on the latest makeup must-haves. Whether you're a makeup enthusiast or just looking to up your glam game, you're in the right place.",business:"Winnebago Industries is a company that manufactures motor homes, travel trailers, and other recreational vehicles. Its stock ticker symbol is WGO and it is traded on the New York Stock Exchange.",standup:"Oh boy, here we go. You know, I walked into this improv show, and I thought, 'Hey, this could be fun. Maybe they'll have a surprise for me.' Well, guess what? The surprise was that I got roped into doing standup for you folks.",enthusiastic:"Oh my gosh, that's AMAZING news! Congratulations! How are you feeling about it all? Any excitement, nerves, or a mix of both? Tell me everything!",casual:"Oh no, I didn't mean to disappoint! How about this: If you want something quirky and fun with lots of laughs, go for Blue Man Group. If you're looking for something awe-inspiring and magical, Cirque du Soleil is your best bet.",hesitant:"So, uh, I was thinkingno, I mean, I was wondering if, um, if you might want to go to the, uh, the new Italian restaurant on Friday? I've heard it's reallywhat's the wordoh, exquisite.",callcenter:"Thank you for calling customer support. My name is Sarah, and I'll be happy to assist you today. I understand you're experiencing an issue with your account. Let me pull up your information and see how I can help resolve this for you right away.",explainer:"Let me explain how photosynthesis works. Plants use sunlight, water, and carbon dioxide to create energy. The process happens in the chloroplasts, which contain chlorophyll - the green pigment that gives plants their color. When sunlight hits the leaves, it triggers a chemical reaction that converts these ingredients into glucose and oxygen."},"zh-CN":{podcast:",",education:"",instructions:"",story:"",ads:"iPhoneiPhone",news:"NASA",promotional:"",vlog:"",business:"Winnebago IndustriesWGO",standup:"",enthusiastic:"",casual:"",hesitant:"",callcenter:"",explainer:""},"de-DE":{podcast:"Willkommen zu unserem Podcast ber die faszinierende Welt der Meeresbiologie. Von den Tiefen des Ozeans bis zu den Ksten werden wir die Wunder der Unterwasserwelt und die erstaunlichen Kreaturen erkunden.",education:"Willkommen zur heutigen Online-Mathematikstunde! In dieser Sitzung werden wir in die faszinierende Welt der Algebra eintauchen. Wir beginnen mit den Grundlagen, vom Lsen einfacher Gleichungen bis zum Verstndnis von Variablen.",instructions:"Machen Sie bei der Durchfhrung der Inspektion klare und umfassende Notizen. Verwenden Sie unsere standardisierte Checkliste als Leitfaden und notieren Sie Abweichungen oder Problembereiche.",story:"Eine sanfte Melancholie lag auf ihrem Herzen, gewebt aus Erinnerungen an eine Zeit, als Lachen durch diese Wiesen hallte. Sie strich ber die zarten Bltenbltter eines vergessenen Gnseblmchens.",ads:"Wir prsentieren das brandneue iPhone, das den Standard fr neu definierte Innovation setzt. Mit elegantem Design und modernsten Funktionen definiert dieses iPhone den Gipfel der Technologie neu.",news:"In den internationalen Nachrichten hat die erfolgreiche Mission der NASA, einen Rover zum Mars zu schicken, weltweite Aufmerksamkeit erregt. Der Rover namens Perseverance landete diese Woche auf der Marsoberflche.",promotional:"Meine Damen, es ist Zeit fr etwas Selbstverwhnung! Gnnen Sie sich einen Moment der Glckseligkeit mit unserem exklusiven Winter-Spa-Paket.",vlog:"Hallo, ihr Lieben! Willkommen zurck auf meinem Kanal. Heute werden wir ber die neuesten Make-up-Must-haves sprechen.",business:"Winnebago Industries ist ein Unternehmen, das Wohnmobile, Reiseanhnger und andere Freizeitfahrzeuge herstellt. Das Brsenkrzel lautet WGO und wird an der New Yorker Brse gehandelt.",standup:"Oh je, jetzt geht's los. Wissen Sie, ich kam zu dieser Improv-Show und dachte: 'Hey, das knnte lustig werden.' Die berraschung war, dass ich hier Stand-up fr Sie machen muss.",enthusiastic:"Oh mein Gott, das sind ja fantastische Neuigkeiten! Herzlichen Glckwunsch! Wie fhlen Sie sich dabei? Aufgeregt, nervs oder beides?",casual:"Oh nein, das wollte ich nicht! Wie wre es damit: Wenn Sie etwas Skurriles mit viel Lachen wollen, nehmen Sie die Blue Man Group. Fr etwas Magisches ist Cirque du Soleil die beste Wahl.",hesitant:"Also, h, ich habe gedachtnein, ich meine, ich habe mich gefragt, ob, hm, ob Sie vielleicht Freitag in das, h, neue italienische Restaurant gehen mchten?",callcenter:"Vielen Dank fr Ihren Anruf beim Kundendienst. Mein Name ist Anna, und ich helfe Ihnen gerne weiter. Ich verstehe, dass Sie ein Problem mit Ihrem Konto haben. Lassen Sie mich Ihre Informationen abrufen und schauen, wie ich Ihnen umgehend helfen kann.",explainer:"Lassen Sie mich erklren, wie Photosynthese funktioniert. Pflanzen nutzen Sonnenlicht, Wasser und Kohlendioxid, um Energie zu erzeugen. Der Prozess findet in den Chloroplasten statt, die Chlorophyll enthalten  das grne Pigment, das Pflanzen ihre Farbe verleiht. Wenn Sonnenlicht auf die Bltter trifft, lst es eine chemische Reaktion aus, die diese Bestandteile in Glukose und Sauerstoff umwandelt."},"en-GB":{podcast:"Welcome to our programme exploring the fascinating world of marine biology. From the depths of the ocean to coastal waters, we'll discover the wonders of underwater life and the remarkable creatures that inhabit these environments.",education:"Welcome to today's online maths lesson! In this session, we'll explore the fascinating world of algebra. We'll begin with the fundamentals, from solving simple equations like 2x plus 5 equals 11, to understanding variables and coefficients.",instructions:"As you complete the inspection, take clear and comprehensive notes. Use our standardised checklist as a guide, noting any deviations or areas of concern. If possible, take photographs to visually document any hazards or non-compliance issues.",story:"A gentle melancholy weighed upon her heart, woven from memories of a time when laughter echoed through these very meadows. She traced the delicate petals of a forgotten daisy, lost in thought until a soft voice broke the silence.",ads:"Introducing the all-new iPhone, setting the standard for Innovation Redefined. Boasting a sleek design and cutting-edge features, this iPhone redefines the pinnacle of technology.",news:"Turning to international news, NASA's recent successful mission to send a rover to explore Mars has captured the world's attention. The rover, named Perseverance, touched down on the Martian surface earlier this week.",promotional:"Ladies, it's time for some self-pampering! Treat yourself to a moment of bliss with our exclusive Winter Spa Package. Indulge in a rejuvenating spa day like never before, and let your worries melt away.",vlog:"Hey, lovely people! Welcome back to my channel. Today, we're going to share all the details on the latest makeup must-haves. Whether you're a makeup enthusiast or just looking to up your glam game, you're in the right place.",business:"Winnebago Industries is a company that manufactures motor homes, travel trailers, and other recreational vehicles. Its stock ticker symbol is WGO and it is traded on the New York Stock Exchange.",standup:"Oh blimey, here we go. You know, I walked into this improv show, and I thought, 'Right, this could be fun. Maybe they'll have a surprise for me.' Well, guess what? The surprise was that I got roped into doing standup for you lot.",enthusiastic:"Oh my goodness, that's brilliant news! Congratulations! How are you feeling about it all? Any excitement, nerves, or a mix of both? Tell me everything!",casual:"Oh no, I didn't mean to disappoint! How about this: If you want something quirky and fun with lots of laughs, go for Blue Man Group. If you're looking for something awe-inspiring and magical, Cirque du Soleil is your best bet.",hesitant:"So, um, I was thinkingno, I mean, I was wondering if, er, if you might want to go to the, um, the new Italian restaurant on Friday? I've heard it's reallywhat's the wordoh, exquisite.",callcenter:"Thank you for calling customer support. My name is Emily, and I'll be pleased to assist you today. I understand you're experiencing an issue with your account. Let me pull up your information and see how I can help resolve this for you straight away.",explainer:"Let me explain how photosynthesis works. Plants use sunlight, water, and carbon dioxide to create energy. The process happens in the chloroplasts, which contain chlorophyll - the green pigment that gives plants their colour. When sunlight hits the leaves, it triggers a chemical reaction that converts these ingredients into glucose and oxygen."},"en-AU":{podcast:"G'day and welcome to our show about the amazing world of marine biology. From the deep blue ocean to our beautiful coastlines, we'll explore the incredible underwater world and the fascinating creatures that call it home.",education:"Welcome to today's online maths lesson! In this session, we'll dive into the fascinating world of algebra. We'll start with the basics, from solving simple equations like 2x plus 5 equals 11, to understanding variables and coefficients.",instructions:"As you complete the inspection, take clear and comprehensive notes. Use our standardised checklist as a guide, noting any deviations or areas of concern. If possible, take photographs to visually document any hazards or non-compliance issues.",story:"A gentle melancholy weighed on her heart, woven from memories of a time when laughter echoed through these very meadows. She traced the delicate petals of a forgotten daisy, lost in thought until a soft voice broke the silence.",ads:"Introducing the all-new iPhone, setting the standard for Innovation Redefined. Boasting a sleek design and cutting-edge features, this iPhone redefines the pinnacle of technology.",news:"Turning to international news, NASA's recent successful mission to send a rover to explore Mars has captured the world's attention. The rover, named Perseverance, touched down on the Martian surface earlier this week.",promotional:"Ladies, it's time for some self-pampering! Treat yourself to a moment of bliss with our exclusive Winter Spa Package. Indulge in a rejuvenating spa day like never before, and let your worries melt away.",vlog:"Hey, beautiful people! Welcome back to my channel. Today, we're going to spill all the tea on the latest makeup must-haves. Whether you're a makeup enthusiast or just looking to up your glam game, you're in the right place.",business:"Winnebago Industries is a company that manufactures motor homes, travel trailers, and other recreational vehicles. Its stock ticker symbol is WGO and it is traded on the New York Stock Exchange.",standup:"Oh crikey, here we go. You know, I rocked up to this improv show, and I thought, 'Yeah, this could be a laugh. Maybe they'll have a surprise for me.' Well, guess what? The surprise was that I got roped into doing standup for you mob.",enthusiastic:"Oh my gosh, that's bloody amazing news! Congratulations! How are you feeling about it all? Any excitement, nerves, or a bit of both? Tell me everything!",casual:"Oh no, I didn't mean to disappoint! How about this: If you want something quirky and fun with heaps of laughs, go for Blue Man Group. If you're looking for something awe-inspiring and magical, Cirque du Soleil is your best bet.",hesitant:"So, um, I was thinkingno, I mean, I was wondering if, er, if you might want to go to the, um, the new Italian restaurant on Friday? I've heard it's reallywhat's the wordoh, exquisite.",callcenter:"Thanks for calling customer support. My name is Jessica, and I'll be happy to help you out today. I understand you're having an issue with your account. Let me pull up your details and see how I can sort this out for you right away.",explainer:"Let me explain how photosynthesis works. Plants use sunlight, water, and carbon dioxide to create energy. The process happens in the chloroplasts, which contain chlorophyll - the green pigment that gives plants their colour. When sunlight hits the leaves, it triggers a chemical reaction that converts these ingredients into glucose and oxygen."},"en-CA":{podcast:"Welcome to our podcast about the wonderful world of marine biology. From the depths of the ocean to our coastal waters, we'll explore the amazing underwater ecosystems and the remarkable creatures that inhabit them.",education:"Welcome to today's online math lesson! In this session, we'll delve into the fascinating world of algebra. We'll start by exploring the basics, from solving simple equations like 2x plus 5 equals 11, to understanding variables and coefficients.",instructions:"As you complete the inspection, take clear and comprehensive notes. Use our standardized checklist as a guide, noting any deviations or areas of concern. If possible, take photographs to visually document any hazards or non-compliance issues.",story:"A gentle melancholy weighed on her heart, woven from memories of a time when laughter echoed through these very meadows. She traced the delicate petals of a forgotten daisy, lost in thought until a soft voice broke the silence.",ads:"Introducing the all-new iPhone, setting the standard for Innovation Redefined. Boasting a sleek design and cutting-edge features, this iPhone redefines the pinnacle of technology.",news:"Turning to international news, NASA's recent successful mission to send a rover to explore Mars has captured the world's attention. The rover, named Perseverance, touched down on the Martian surface earlier this week.",promotional:"Ladies, it's time for some self-pampering! Treat yourself to a moment of bliss with our exclusive Winter Spa Package. Indulge in a rejuvenating spa day like never before, and let your worries melt away.",vlog:"Hey, beautiful people! Welcome back to my channel. Today, we're about to share all the details on the latest makeup must-haves. Whether you're a makeup enthusiast or just looking to up your glam game, you're in the right place.",business:"Winnebago Industries is a company that manufactures motor homes, travel trailers, and other recreational vehicles. Its stock ticker symbol is WGO and it is traded on the New York Stock Exchange.",standup:"Oh boy, here we go. You know, eh, I walked into this improv show, and I thought, 'Hey, this could be fun. Maybe they'll have a surprise for me.' Well, guess what? The surprise was that I got roped into doing standup for you folks.",enthusiastic:"Oh my gosh, that's amazing news! Congratulations! How are you feeling about it all? Any excitement, nerves, or a mix of both? Tell me everything, eh!",casual:"Oh no, I didn't mean to disappoint! How about this: If you want something quirky and fun with lots of laughs, go for Blue Man Group. If you're looking for something awe-inspiring and magical, Cirque du Soleil is your best bet.",hesitant:"So, uh, I was thinkingno, I mean, I was wondering if, um, if you might want to go to the, uh, the new Italian restaurant on Friday? I've heard it's reallywhat's the wordoh, exquisite, eh?",callcenter:"Thank you for calling customer support. My name is Laura, and I'll be happy to assist you today. I understand you're experiencing an issue with your account. Let me pull up your information and see how I can help resolve this for you right away.",explainer:"Let me explain how photosynthesis works. Plants use sunlight, water, and carbon dioxide to create energy. The process happens in the chloroplasts, which contain chlorophyll - the green pigment that gives plants their colour. When sunlight hits the leaves, it triggers a chemical reaction that converts these ingredients into glucose and oxygen."},"en-IN":{podcast:"Welcome to our programme on marine biology. We will explore the fascinating world beneath the oceans, from the deepest waters to coastal regions, and learn about the wonderful creatures that inhabit these environments.",education:"Welcome to today's online mathematics lesson! In this session, we shall delve into the fascinating world of algebra. We will begin with the fundamentals, from solving simple equations like 2x plus 5 equals 11, to understanding variables and coefficients.",instructions:"As you complete the inspection, kindly take clear and comprehensive notes. Use our standardised checklist as a guide, noting any deviations or areas of concern. If possible, please take photographs to visually document any hazards or non-compliance issues.",story:"A gentle melancholy weighed upon her heart, woven from memories of a time when laughter echoed through these very meadows. She traced the delicate petals of a forgotten daisy, lost in thought until a soft voice broke the silence.",ads:"Introducing the all-new iPhone, setting the standard for Innovation Redefined. Boasting a sleek design and cutting-edge features, this iPhone redefines the pinnacle of technology.",news:"Turning to international news, NASA's recent successful mission to send a rover to explore Mars has captured the world's attention. The rover, named Perseverance, touched down on the Martian surface earlier this week.",promotional:"Ladies, it's time for some self-pampering! Treat yourself to a moment of bliss with our exclusive Winter Spa Package. Indulge in a rejuvenating spa day like never before, and let your worries melt away.",vlog:"Hello, beautiful people! Welcome back to my channel. Today, we are going to share all the details on the latest makeup must-haves. Whether you're a makeup enthusiast or just looking to enhance your beauty routine, you're in the right place.",business:"Winnebago Industries is a company that manufactures motor homes, travel trailers, and other recreational vehicles. Its stock ticker symbol is WGO and it is traded on the New York Stock Exchange.",standup:"Oh my, here we go. You know, I walked into this improv show, and I thought, 'This could be interesting. Perhaps they'll have a surprise for me.' Well, what happened? The surprise was that I got roped into doing standup for you all.",enthusiastic:"Oh my goodness, that's wonderful news! Congratulations! How are you feeling about it all? Any excitement, nervousness, or perhaps a combination of both? Please tell me everything!",casual:"Oh no, I didn't mean to disappoint! How about this: If you want something quirky and fun with lots of laughter, go for Blue Man Group. If you're looking for something awe-inspiring and magical, Cirque du Soleil would be your best option.",hesitant:"So, um, I was thinkingno, I mean, I was wondering if, er, if you might want to go to the, um, the new Italian restaurant on Friday? I've heard it's reallywhat's the wordah yes, exquisite.",callcenter:"Thank you for calling customer support. My name is Priya, and I shall be pleased to assist you today. I understand you are experiencing an issue with your account. Kindly allow me to access your information and see how I can help resolve this matter for you immediately.",explainer:"Let me explain how photosynthesis works. Plants use sunlight, water, and carbon dioxide to create energy. The process happens in the chloroplasts, which contain chlorophyll - the green pigment that gives plants their colour. When sunlight hits the leaves, it triggers a chemical reaction that converts these ingredients into glucose and oxygen."},"hi-IN":{podcast:"                ,                 ",education:"        !   ,              ,  2x  5  11      ,     ",instructions:"   ,               ,             ,      -           ",story:"       ,                              ,    ,          ",ads:"  iPhone  ,                     ,  iPhone         ",news:"     ,                                    ",promotional:",          !                                  ",vlog:",  !       ,                             ,     ",business:"Winnebago Industries      ,               WGO           ",standup:" ,       ,       ,   , ',             ' ,   ?                 ",enthusiastic:" ,    !  !           ?  , ,    ?    !",casual:" ,      !   :             ,                ,  Cirque du Soleil     ",hesitant:", ,    ,   ,     , ,    , ,       ?         ,  ",callcenter:"            ,                                     ",explainer:"                 ,              ,     -                 ,                   "},"es-ES":{podcast:"Bienvenidos a nuestro programa sobre el fascinante mundo de la biologa marina. Desde las profundidades del ocano hasta las costas, exploraremos las maravillas del mundo submarino y las criaturas asombrosas que lo habitan.",education:"Bienvenidos a la clase de matemticas en lnea de hoy! En esta sesin, nos adentraremos en el fascinante mundo del lgebra. Empezaremos explorando los fundamentos, desde resolver ecuaciones simples como 2x ms 5 igual a 11, hasta comprender variables y coeficientes.",instructions:"Al completar la inspeccin, tome notas claras y completas. Utilice nuestra lista de verificacin estandarizada como gua, anotando cualquier desviacin o rea de preocupacin. Si es posible, tome fotografas para documentar visualmente cualquier peligro o problema de incumplimiento.",story:"Una suave melancola pesaba sobre su corazn, tejida de recuerdos de un tiempo cuando las risas resonaban por estos mismos prados. Acarici los delicados ptalos de una margarita olvidada, perdida en sus pensamientos hasta que una voz suave rompi el silencio.",ads:"Presentamos el nuevo iPhone, que establece el estndar de Innovacin Redefinida. Con un diseo elegante y funciones de vanguardia, este iPhone redefine la cspide de la tecnologa.",news:"En las noticias internacionales, la reciente misin exitosa de la NASA para enviar un rover a explorar Marte ha captado la atencin del mundo. El rover, llamado Perseverance, aterriz en la superficie marciana a principios de esta semana.",promotional:"Seoras, es hora de mimarse! Reglese un momento de felicidad con nuestro exclusivo Paquete de Spa de Invierno. Disfrute de un da de spa rejuvenecedor como nunca antes y deje que sus preocupaciones se derritan.",vlog:"Hola, gente hermosa! Bienvenidos de nuevo a mi canal. Hoy, vamos a compartir todos los detalles sobre los ltimos imprescindibles de maquillaje. Ya sea que seas un entusiasta del maquillaje o simplemente quieras mejorar tu juego de glamour, ests en el lugar correcto.",business:"Winnebago Industries es una empresa que fabrica autocaravanas, remolques de viaje y otros vehculos recreativos. Su smbolo de cotizacin burstil es WGO y se cotiza en la Bolsa de Nueva York.",standup:"Oh vaya, aqu vamos. Sabis, entr en este espectculo de improvisacin y pens: 'Oye, esto podra ser divertido. Quizs tengan una sorpresa para m.' Pues, adivinis qu? La sorpresa fue que me obligaron a hacer monlogos para vosotros.",enthusiastic:"Oh Dios mo, esas son noticias increbles! Enhorabuena! Cmo te sientes al respecto? Emocionado, nervioso, o una mezcla de ambos? Cuntamelo todo!",casual:"Oh no, no quise decepcionarte! Qu te parece esto? Si quieres algo peculiar y divertido con muchas risas, ve a ver Blue Man Group. Si buscas algo impresionante y mgico, Cirque du Soleil es tu mejor opcin.",hesitant:"Entonces, eh, estaba pensandono, quiero decir, me preguntaba si, um, si tal vez quisieras ir al, eh, el nuevo restaurante italiano el viernes. He odo que es realmentecul es la palabra?oh, exquisito.",callcenter:"Gracias por llamar al servicio de atencin al cliente. Mi nombre es Carmen, y estar encantada de ayudarle hoy. Entiendo que est experimentando un problema con su cuenta. Permtame consultar su informacin y ver cmo puedo resolver esto para usted de inmediato.",explainer:"Permtanme explicar cmo funciona la fotosntesis. Las plantas utilizan la luz solar, el agua y el dixido de carbono para crear energa. El proceso ocurre en los cloroplastos, que contienen clorofila, el pigmento verde que da a las plantas su color. Cuando la luz solar llega a las hojas, desencadena una reaccin qumica que convierte estos ingredientes en glucosa y oxgeno."},"es-MX":{podcast:"Bienvenidos a nuestro podcast sobre el fascinante mundo de la biologa marina. Desde las profundidades del mar hasta nuestras costas, exploraremos las maravillas del mundo submarino y las criaturas asombrosas que lo habitan.",education:"Bienvenidos a la clase de matemticas en lnea de hoy! En esta sesin, nos adentraremos en el fascinante mundo del lgebra. Comenzaremos explorando los fundamentos, desde resolver ecuaciones simples como 2x ms 5 igual a 11, hasta comprender variables y coeficientes.",instructions:"Al completar la inspeccin, tome notas claras y completas. Utilice nuestra lista de verificacin estandarizada como gua, anotando cualquier desviacin o rea de preocupacin. Si es posible, tome fotografas para documentar visualmente cualquier peligro o problema de incumplimiento.",story:"Una suave melancola pesaba sobre su corazn, tejida de recuerdos de un tiempo cuando las risas resonaban por estos mismos prados. Acarici los delicados ptalos de una margarita olvidada, perdida en sus pensamientos hasta que una voz suave rompi el silencio.",ads:"Presentamos el nuevo iPhone, que establece el estndar de Innovacin Redefinida. Con un diseo elegante y funciones de vanguardia, este iPhone redefine la cspide de la tecnologa.",news:"En las noticias internacionales, la reciente misin exitosa de la NASA para enviar un rover a explorar Marte ha captado la atencin del mundo. El rover, llamado Perseverance, aterriz en la superficie marciana a principios de esta semana.",promotional:"Seoras, es hora de consentirse! Reglense un momento de felicidad con nuestro exclusivo Paquete de Spa de Invierno. Disfruten de un da de spa rejuvenecedor como nunca antes y dejen que sus preocupaciones se derritan.",vlog:"Hola, gente linda! Bienvenidos de nuevo a mi canal. Hoy, vamos a compartir todos los detalles sobre los ltimos imprescindibles de maquillaje. Ya sea que sean entusiastas del maquillaje o simplemente quieran mejorar su juego de glamour, estn en el lugar correcto.",business:"Winnebago Industries es una compaa que fabrica casas rodantes, trileres de viaje y otros vehculos recreativos. Su smbolo de cotizacin burstil es WGO y se cotiza en la Bolsa de Nueva York.",standup:"Ay gey, aqu vamos. Saben, entr a este show de improvisacin y pens: 'rale, esto podra ser divertido. A lo mejor tienen una sorpresa para m.' Pues, adivinen qu? La sorpresa fue que me obligaron a hacer stand-up para ustedes.",enthusiastic:"Ay, qu padre! Esas son noticias increbles! Felicidades! Cmo te sientes al respecto? Emocionado, nervioso, o una mezcla de ambos? Cuntamelo todo!",casual:"Ay no, no quise decepcionarte! Qu te parece esto? Si quieres algo peculiar y divertido con muchas risas, ve a ver Blue Man Group. Si buscas algo impresionante y mgico, Cirque du Soleil es tu mejor opcin.",hesitant:"Entonces, eh, estaba pensandono, o sea, me preguntaba si, este, si tal vez quisieras ir al, eh, el nuevo restaurante italiano el viernes. He odo que es realmentecul es la palabra?ah s, exquisito.",callcenter:"Gracias por llamar a servicio al cliente. Mi nombre es Mara, y con gusto le atender el da de hoy. Entiendo que est teniendo un problema con su cuenta. Permtame consultar su informacin y ver cmo puedo ayudarle a resolver esto de inmediato.",explainer:"Permtanme explicar cmo funciona la fotosntesis. Las plantas utilizan la luz solar, el agua y el dixido de carbono para crear energa. El proceso ocurre en los cloroplastos, que contienen clorofila, el pigmento verde que da a las plantas su color. Cuando la luz solar llega a las hojas, desencadena una reaccin qumica que convierte estos ingredientes en glucosa y oxgeno."},"ja-JP":{podcast:"",education:"2x + 5 = 11",instructions:"",story:"",ads:"iPhoneiPhone",news:"NASA",promotional:"",vlog:"",business:"Winnebago IndustriesWGO",standup:"",enthusiastic:"",casual:"",hesitant:"",callcenter:"",explainer:""},"fr-FR":{podcast:"Bienvenue dans notre mission sur le monde fascinant de la biologie marine. Des profondeurs ocaniques aux ctes, nous explorerons les merveilles du monde sous-marin et les cratures extraordinaires qui l'habitent.",education:"Bienvenue au cours de mathmatiques en ligne d'aujourd'hui ! Dans cette session, nous plongerons dans le monde fascinant de l'algbre. Nous commencerons par explorer les bases, de la rsolution d'quations simples comme 2x plus 5 gale 11,  la comprhension des variables et des coefficients.",instructions:"En effectuant l'inspection, prenez des notes claires et compltes. Utilisez notre liste de contrle standardise comme guide, en notant tout cart ou domaine proccupant. Si possible, prenez des photographies pour documenter visuellement tout danger ou problme de non-conformit.",story:"Une douce mlancolie pesait sur son cur, tisse de souvenirs d'un temps o le rire rsonnait dans ces mmes prairies. Elle caressa les ptales dlicats d'une marguerite oublie, perdue dans ses penses jusqu' ce qu'une voix douce rompe le silence.",ads:"Prsentation du tout nouvel iPhone, tablissant la norme de l'Innovation Redfinie. Arborant un design lgant et des fonctionnalits de pointe, cet iPhone redfinit le summum de la technologie.",news:"En tournant vers les nouvelles internationales, la rcente mission russie de la NASA pour envoyer un rover explorer Mars a capt l'attention du monde. Le rover, nomm Perseverance, s'est pos sur la surface martienne plus tt cette semaine.",promotional:"Mesdames, il est temps de vous faire plaisir ! Offrez-vous un moment de bonheur avec notre forfait spa d'hiver exclusif. Profitez d'une journe spa rajeunissante comme jamais auparavant et laissez vos soucis s'envoler.",vlog:"Salut, les gens magnifiques ! Bienvenue sur ma chane. Aujourd'hui, nous allons partager tous les dtails sur les derniers incontournables du maquillage. Que vous soyez passionn de maquillage ou que vous cherchiez simplement  amliorer votre jeu glamour, vous tes au bon endroit.",business:"Winnebago Industries est une entreprise qui fabrique des camping-cars, des caravanes et d'autres vhicules rcratifs. Son symbole boursier est WGO et elle est cote  la Bourse de New York.",standup:"Oh l l, c'est parti. Vous savez, je suis entr dans ce spectacle d'improvisation, et je me suis dit : 'H, a pourrait tre amusant. Peut-tre qu'ils auront une surprise pour moi.' Eh bien, devinez quoi ? La surprise, c'est qu'on m'a oblig  faire du stand-up pour vous.",enthusiastic:"Oh mon Dieu, c'est une nouvelle incroyable ! Flicitations ! Comment vous sentez-vous  ce sujet ? Excit, nerveux, ou un mlange des deux ? Racontez-moi tout !",casual:"Oh non, je ne voulais pas vous dcevoir ! Que diriez-vous de ceci : Si vous voulez quelque chose d'original et amusant avec beaucoup de rires, optez pour Blue Man Group. Si vous cherchez quelque chose d'impressionnant et magique, Cirque du Soleil est votre meilleur choix.",hesitant:"Alors, euh, je pensaisnon, je veux dire, je me demandais si, euh, si vous aimeriez aller au, euh, nouveau restaurant italien vendredi ? J'ai entendu dire que c'est vraimentquel est le motoh, exquis.",callcenter:"Merci d'avoir appel le service client. Je m'appelle Sophie, et je serai ravie de vous aider aujourd'hui. Je comprends que vous rencontrez un problme avec votre compte. Permettez-moi de consulter vos informations et voir comment je peux rsoudre cela pour vous immdiatement.",explainer:"Permettez-moi d'expliquer comment fonctionne la photosynthse. Les plantes utilisent la lumire du soleil, l'eau et le dioxyde de carbone pour crer de l'nergie. Le processus se droule dans les chloroplastes, qui contiennent de la chlorophylle - le pigment vert qui donne leur couleur aux plantes. Lorsque la lumire du soleil frappe les feuilles, elle dclenche une raction chimique qui convertit ces ingrdients en glucose et en oxygne."},"fr-CA":{podcast:"Bienvenue  notre mission sur le merveilleux monde de la biologie marine. Des profondeurs de l'ocan jusqu'aux ctes, nous explorerons les merveilles du monde sous-marin et les cratures remarquables qui l'habitent.",education:"Bienvenue au cours de mathmatiques en ligne d'aujourd'hui ! Dans cette session, nous plongerons dans le monde fascinant de l'algbre. Nous commencerons par explorer les bases, de la rsolution d'quations simples comme 2x plus 5 gale 11,  la comprhension des variables et des coefficients.",instructions:"En effectuant l'inspection, prenez des notes claires et compltes. Utilisez notre liste de contrle standardise comme guide, en notant tout cart ou domaine proccupant. Si possible, prenez des photos pour documenter visuellement tout danger ou problme de non-conformit.",story:"Une douce mlancolie pesait sur son cur, tisse de souvenirs d'un temps o le rire rsonnait dans ces mmes prairies. Elle caressa les ptales dlicats d'une marguerite oublie, perdue dans ses penses jusqu' ce qu'une voix douce rompe le silence.",ads:"Prsentation du tout nouvel iPhone, tablissant la norme de l'Innovation Redfinie. Arborant un design lgant et des fonctionnalits de pointe, cet iPhone redfinit le summum de la technologie.",news:"En tournant vers les nouvelles internationales, la rcente mission russie de la NASA pour envoyer un rover explorer Mars a capt l'attention du monde. Le rover, nomm Perseverance, s'est pos sur la surface martienne plus tt cette semaine.",promotional:"Mesdames, c'est le temps de vous gter ! Offrez-vous un moment de bonheur avec notre forfait spa d'hiver exclusif. Profitez d'une journe spa rajeunissante comme jamais auparavant et laissez vos soucis s'envoler.",vlog:"Salut, les gens magnifiques ! Bienvenue sur ma chane. Aujourd'hui, on va partager tous les dtails sur les derniers incontournables du maquillage. Que vous soyez passionn de maquillage ou que vous cherchiez simplement  amliorer votre jeu glamour, vous tes  la bonne place.",business:"Winnebago Industries est une entreprise qui fabrique des vhicules rcratifs, des roulottes et d'autres vhicules de loisir. Son symbole boursier est WGO et elle est cote  la Bourse de New York.",standup:"Oh l l, a commence. Vous savez, je suis entr dans ce spectacle d'improvisation, pis je me suis dit : 'H, a pourrait tre le fun. Peut-tre qu'ils auront une surprise pour moi.' Ben, devinez quoi ? La surprise, c'est qu'on m'a oblig  faire du stand-up pour vous autres.",enthusiastic:"Oh mon Dieu, c'est une nouvelle incroyable ! Flicitations ! Comment tu te sens par rapport  a ? Excit, nerveux, ou un mlange des deux ? Raconte-moi tout !",casual:"Oh non, je voulais pas te dcevoir ! Que dirais-tu de a : Si tu veux quelque chose d'original pis amusant avec ben des rires, va voir Blue Man Group. Si tu cherches quelque chose d'impressionnant pis magique, Cirque du Soleil est ton meilleur choix.",hesitant:"Alors, euh, je pensaisnon, je veux dire, je me demandais si, euh, si tu aimerais aller au, euh, nouveau restaurant italien vendredi ? J'ai entendu dire que c'est vraimentquel est le motoh, exquis.",callcenter:"Merci d'avoir appel le service  la clientle. Je m'appelle Isabelle, et je serai heureuse de vous aider aujourd'hui. Je comprends que vous prouvez un problme avec votre compte. Permettez-moi de consulter vos informations et voir comment je peux rgler a pour vous tout de suite.",explainer:"Permettez-moi d'expliquer comment fonctionne la photosynthse. Les plantes utilisent la lumire du soleil, l'eau et le dioxyde de carbone pour crer de l'nergie. Le processus se droule dans les chloroplastes, qui contiennent de la chlorophylle - le pigment vert qui donne leur couleur aux plantes. Lorsque la lumire du soleil frappe les feuilles, elle dclenche une raction chimique qui convertit ces ingrdients en glucose et en oxygne."},"pt-BR":{podcast:"Bem-vindos ao nosso podcast sobre o fascinante mundo da biologia marinha. Das profundezas do oceano at as costas, vamos explorar as maravilhas do mundo submarino e as criaturas incrveis que o habitam.",education:"Bem-vindos  aula de matemtica online de hoje! Nesta sesso, vamos mergulhar no fascinante mundo da lgebra. Comearemos explorando os fundamentos, desde resolver equaes simples como 2x mais 5 igual a 11, at entender variveis e coeficientes.",instructions:"Ao completar a inspeo, faa anotaes claras e abrangentes. Use nossa lista de verificao padronizada como guia, anotando quaisquer desvios ou reas de preocupao. Se possvel, tire fotografias para documentar visualmente quaisquer perigos ou problemas de no conformidade.",story:"Uma melancolia suave pesava em seu corao, tecida de memrias de um tempo quando risadas ecoavam por estes mesmos prados. Ela acariciou as delicadas ptalas de uma margarida esquecida, perdida em pensamentos at que uma voz suave quebrou o silncio.",ads:"Apresentando o novssimo iPhone, estabelecendo o padro para Inovao Redefinida. Com um design elegante e recursos de ponta, este iPhone redefine o pice da tecnologia.",news:"Nas notcias internacionais, a recente misso bem-sucedida da NASA para enviar um rover para explorar Marte capturou a ateno do mundo. O rover, chamado Perseverance, pousou na superfcie marciana no incio desta semana.",promotional:"Senhoras,  hora de se mimarem! Presenteiem-se com um momento de felicidade com nosso exclusivo Pacote de Spa de Inverno. Deliciem-se com um dia de spa rejuvenescedor como nunca antes e deixem suas preocupaes derreterem.",vlog:"E a, gente linda! Bem-vindos de volta ao meu canal. Hoje, vamos compartilhar todos os detalhes sobre os ltimos itens indispensveis de maquiagem. Seja voc um entusiasta de maquiagem ou apenas procurando melhorar seu jogo de glamour, voc est no lugar certo.",business:"Winnebago Industries  uma empresa que fabrica trailers, reboques de viagem e outros veculos recreativos. Seu smbolo de aes  WGO e  negociado na Bolsa de Valores de Nova York.",standup:"Ah cara, l vamos ns. Sabe, eu entrei nesse show de improviso e pensei: 'Ei, isso pode ser divertido. Talvez eles tenham uma surpresa para mim.' Bem, adivinha o qu? A surpresa foi que me obrigaram a fazer stand-up para vocs.",enthusiastic:"Meu Deus, essa  uma notcia incrvel! Parabns! Como voc est se sentindo sobre isso tudo? Empolgado, nervoso, ou uma mistura dos dois? Me conta tudo!",casual:"Ah no, no quis decepcionar! Que tal isso: Se voc quer algo peculiar e divertido com muitas risadas, v de Blue Man Group. Se voc est procurando algo impressionante e mgico, Cirque du Soleil  sua melhor aposta.",hesitant:"Ento, , eu estava pensandono, quero dizer, eu estava me perguntando se, hum, se voc talvez quisesse ir ao, , o novo restaurante italiano na sexta-feira? Eu ouvi que  realmentequal  a palavraah, requintado.",callcenter:"Obrigada por ligar para o suporte ao cliente. Meu nome  Juliana, e terei o prazer de ajud-lo hoje. Entendo que voc est enfrentando um problema com sua conta. Deixe-me consultar suas informaes e ver como posso resolver isso para voc imediatamente.",explainer:"Deixe-me explicar como funciona a fotossntese. As plantas usam luz solar, gua e dixido de carbono para criar energia. O processo acontece nos cloroplastos, que contm clorofila - o pigmento verde que d s plantas sua cor. Quando a luz solar atinge as folhas, ela desencadeia uma reao qumica que converte esses ingredientes em glicose e oxignio."},"pt-PT":{podcast:"Bem-vindos ao nosso programa sobre o fascinante mundo da biologia marinha. Desde as profundezas do oceano at s costas, iremos explorar as maravilhas do mundo submarino e as criaturas extraordinrias que o habitam.",education:"Bem-vindos  aula de matemtica online de hoje! Nesta sesso, vamos mergulhar no fascinante mundo da lgebra. Comearemos por explorar os fundamentos, desde resolver equaes simples como 2x mais 5 igual a 11, at compreender variveis e coeficientes.",instructions:"Ao completar a inspeo, faa anotaes claras e abrangentes. Use a nossa lista de verificao padronizada como guia, anotando quaisquer desvios ou reas de preocupao. Se possvel, tire fotografias para documentar visualmente quaisquer perigos ou problemas de no conformidade.",story:"Uma melancolia suave pesava no seu corao, tecida de memrias de um tempo quando risadas ecoavam por estes mesmos prados. Ela acariciou as delicadas ptalas de uma margarida esquecida, perdida em pensamentos at que uma voz suave quebrou o silncio.",ads:"Apresentamos o novssimo iPhone, estabelecendo o padro para Inovao Redefinida. Com um design elegante e funcionalidades de ponta, este iPhone redefine o auge da tecnologia.",news:"Nas notcias internacionais, a recente misso bem-sucedida da NASA para enviar um rover para explorar Marte capturou a ateno do mundo. O rover, chamado Perseverance, aterrou na superfcie marciana no incio desta semana.",promotional:"Senhoras,  hora de se mimarem! Presenteiem-se com um momento de felicidade com o nosso exclusivo Pacote de Spa de Inverno. Deliciem-se com um dia de spa rejuvenescedor como nunca antes e deixem as vossas preocupaes derreterem.",vlog:"Ol, gente linda! Bem-vindos de volta ao meu canal. Hoje, vamos partilhar todos os detalhes sobre os ltimos indispensveis de maquilhagem. Quer sejam entusiastas de maquilhagem ou apenas procurem melhorar o vosso jogo de glamour, esto no stio certo.",business:"Winnebago Industries  uma empresa que fabrica autocaravanas, reboques de viagem e outros veculos recreativos. O seu smbolo de cotao  WGO e  negociado na Bolsa de Valores de Nova Iorque.",standup:"Oh cus, c vamos ns. Sabem, entrei neste espetculo de improviso e pensei: 'Eh p, isto pode ser divertido. Talvez tenham uma surpresa para mim.' Bem, adivinhem? A surpresa foi que me obrigaram a fazer stand-up para vocs.",enthusiastic:"Meu Deus, essa  uma notcia fantstica! Parabns! Como se est a sentir em relao a isto tudo? Entusiasmado, nervoso, ou uma mistura dos dois? Conta-me tudo!",casual:"Oh no, no quis desiludir! Que tal isto: Se querem algo peculiar e divertido com muitas risadas, vo ao Blue Man Group. Se procuram algo impressionante e mgico, o Cirque du Soleil  a vossa melhor aposta.",hesitant:"Ento, , eu estava a pensarno, quer dizer, estava a perguntar-me se, hum, se talvez quisesses ir ao, , o novo restaurante italiano na sexta-feira? Ouvi dizer que  realmentequal  a palavraah, requintado.",callcenter:"Obrigada por contactar o apoio ao cliente. O meu nome  Sofia, e terei todo o gosto em ajud-lo hoje. Compreendo que est a ter um problema com a sua conta. Permita-me consultar as suas informaes e ver como posso resolver isto para si de imediato.",explainer:"Permitam-me explicar como funciona a fotossntese. As plantas usam luz solar, gua e dixido de carbono para criar energia. O processo acontece nos cloroplastos, que contm clorofila - o pigmento verde que d s plantas a sua cor. Quando a luz solar atinge as folhas, desencadeia uma reao qumica que converte estes ingredientes em glucose e oxignio."},"it-IT":{podcast:"Benvenuti al nostro programma sul affascinante mondo della biologia marina. Dalle profondit dell'oceano alle coste, esploreremo le meraviglie del mondo sottomarino e le creature straordinarie che lo abitano.",education:"Benvenuti alla lezione di matematica online di oggi! In questa sessione, ci immergeremo nel affascinante mondo dell'algebra. Inizieremo esplorando i fondamenti, dalla risoluzione di equazioni semplici come 2x pi 5 uguale 11, alla comprensione di variabili e coefficienti.",instructions:"Mentre completi l'ispezione, prendi note chiare e complete. Usa la nostra lista di controllo standardizzata come guida, annotando eventuali deviazioni o aree di preoccupazione. Se possibile, scatta fotografie per documentare visivamente eventuali pericoli o problemi di non conformit.",story:"Una dolce malinconia pesava sul suo cuore, tessuta da ricordi di un tempo quando le risate risuonavano in questi stessi prati. Accarezz i delicati petali di una margherita dimenticata, persa nei pensieri finch una voce dolce ruppe il silenzio.",ads:"Vi presentiamo il nuovissimo iPhone, che stabilisce lo standard per l'Innovazione Ridefinita. Con un design elegante e funzionalit all'avanguardia, questo iPhone ridefinisce l'apice della tecnologia.",news:"Passando alle notizie internazionali, la recente missione di successo della NASA per inviare un rover ad esplorare Marte ha catturato l'attenzione del mondo. Il rover, chiamato Perseverance,  atterrato sulla superficie marziana all'inizio di questa settimana.",promotional:"Signore,  ora di coccolarsi! Regalatevi un momento di felicit con il nostro esclusivo Pacchetto Spa Invernale. Concedetevi una giornata termale rigenerante come mai prima d'ora e lasciate che le vostre preoccupazioni si sciolgano.",vlog:"Ciao, belle persone! Bentornati sul mio canale. Oggi condivideremo tutti i dettagli sugli ultimi must-have del trucco. Che siate appassionati di trucco o semplicemente vogliate migliorare il vostro gioco glamour, siete nel posto giusto.",business:"Winnebago Industries  un'azienda che produce camper, roulotte e altri veicoli ricr eativi. Il suo simbolo azionario  WGO ed  quotata alla Borsa di New York.",standup:"Oh cavolo, eccoci qui. Sapete, sono entrato in questo spettacolo di improvvisazione e ho pensato: 'Ehi, questo potrebbe essere divertente. Forse avranno una sorpresa per me.' Beh, indovinate un po'? La sorpresa  stata che mi hanno costretto a fare stand-up per voi.",enthusiastic:"Oh mio Dio, questa  una notizia fantastica! Congratulazioni! Come ti senti riguardo a tutto questo? Eccitato, nervoso, o un mix di entrambi? Dimmi tutto!",casual:"Oh no, non volevo deluderti! Che ne dici di questo: Se vuoi qualcosa di stravagante e divertente con tante risate, scegli Blue Man Group. Se cerchi qualcosa di impressionante e magico, Cirque du Soleil  la tua scelta migliore.",hesitant:"Allora, ehm, stavo pensandono, voglio dire, mi chiedevo se, ehm, se forse vorresti andare al, ehm, nuovo ristorante italiano venerd? Ho sentito che  davveroqual  la parolaoh, squisito.",callcenter:"Grazie per aver chiamato l'assistenza clienti. Mi chiamo Francesca, e sar lieta di aiutarla oggi. Capisco che sta riscontrando un problema con il suo account. Mi permetta di consultare le sue informazioni e vedere come posso risolvere questo per lei immediatamente.",explainer:"Permettetemi di spiegare come funziona la fotosintesi. Le piante usano la luce solare, l'acqua e l'anidride carbonica per creare energia. Il processo avviene nei cloroplasti, che contengono la clorofilla - il pigmento verde che d alle piante il loro colore. Quando la luce solare colpisce le foglie, innesca una reazione chimica che converte questi ingredienti in glucosio e ossigeno."}};function lA(r){const n=r.match(/^([a-z]{2}-[A-Z]{2})/i);if(n){const s=n[1].split("-");return`${s[0].toLowerCase()}-${s[1].toUpperCase()}`}return"en-US"}function dA(r){if(ip[r])return ip[r];if(rC[r]){const n=rC[r];return{podcast:n,education:n,instructions:n,story:n,ads:n,news:n,promotional:n,vlog:n,business:n,standup:n,enthusiastic:n,casual:n,hesitant:n,callcenter:n,explainer:n}}return ip["en-US"]}const pA="2026-01-19T04:13:40.735Z";function hA({text:r,onTextChange:n,wordBoundaries:s,currentWordIndex:h,selectedVoice:a,state:l}){const c=L.useRef(null),o=L.useRef(null),[u,d]=L.useState(!1),[v,f]=L.useState(""),m=r.trim()?r.trim().split(/\s+/).length:0,y=r.length,w=lA(a),T=dA(v||w),R=N=>{const F=T[N];F&&(n(F),d(!1))},A=l==="synthesizing"||l==="playing";L.useEffect(()=>{if(h>=0&&h<s.length){const N=s[h];if(c.current){const F=c.current,pe=(r.substring(0,N.offset).split(`
`).length-1)*24;F.scrollTop=Math.max(0,pe-F.clientHeight/2)}}},[h,s,r]);const b=()=>{if(h<0||h>=s.length)return r;const N=s[h],F=r.substring(0,N.offset),B=r.substring(N.offset,N.offset+N.length),re=r.substring(N.offset+N.length);return C.jsxs(C.Fragment,{children:[F,C.jsx("span",{className:"bg-yellow-300 font-semibold",children:B}),re]})},z=u?`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US">
  <voice name="${a}">
    ${r}
  </voice>
</speak>`:r;return C.jsxs("div",{className:"h-full flex flex-col",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("div",{className:"flex items-baseline gap-3",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Text to Synthesize"}),C.jsxs("span",{className:"text-xs text-gray-400",children:["Build: ",new Date(pA).toLocaleString()]})]}),C.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[C.jsxs("span",{children:[m," word",m!==1?"s":""]}),C.jsxs("span",{children:[y," char",y!==1?"s":""]})]})]}),C.jsxs("div",{className:"mb-3 grid grid-cols-[200px_1fr] gap-3",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preset Language"}),C.jsxs("select",{value:v,onChange:N=>f(N.target.value),disabled:A,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:[C.jsxs("option",{value:"",children:["Voice Language (",w,")"]}),C.jsx("option",{value:"ar-EG",children:"Arabic (Egypt)"}),C.jsx("option",{value:"ar-SA",children:"Arabic (Saudi Arabia)"}),C.jsx("option",{value:"bg-BG",children:"Bulgarian"}),C.jsx("option",{value:"ca-ES",children:"Catalan"}),C.jsx("option",{value:"cs-CZ",children:"Czech"}),C.jsx("option",{value:"cy-GB",children:"Welsh"}),C.jsx("option",{value:"da-DK",children:"Danish"}),C.jsx("option",{value:"de-DE",children:"German"}),C.jsx("option",{value:"el-GR",children:"Greek"}),C.jsx("option",{value:"en-AU",children:"English (Australia)"}),C.jsx("option",{value:"en-CA",children:"English (Canada)"}),C.jsx("option",{value:"en-GB",children:"English (UK)"}),C.jsx("option",{value:"en-IN",children:"English (India)"}),C.jsx("option",{value:"en-US",children:"English (US)"}),C.jsx("option",{value:"es-ES",children:"Spanish (Spain)"}),C.jsx("option",{value:"es-MX",children:"Spanish (Mexico)"}),C.jsx("option",{value:"et-EE",children:"Estonian"}),C.jsx("option",{value:"fi-FI",children:"Finnish"}),C.jsx("option",{value:"fr-CA",children:"French (Canada)"}),C.jsx("option",{value:"fr-FR",children:"French (France)"}),C.jsx("option",{value:"he-IL",children:"Hebrew"}),C.jsx("option",{value:"hi-IN",children:"Hindi"}),C.jsx("option",{value:"hr-HR",children:"Croatian"}),C.jsx("option",{value:"hu-HU",children:"Hungarian"}),C.jsx("option",{value:"id-ID",children:"Indonesian"}),C.jsx("option",{value:"it-IT",children:"Italian"}),C.jsx("option",{value:"ja-JP",children:"Japanese"}),C.jsx("option",{value:"ko-KR",children:"Korean"}),C.jsx("option",{value:"lt-LT",children:"Lithuanian"}),C.jsx("option",{value:"lv-LV",children:"Latvian"}),C.jsx("option",{value:"nb-NO",children:"Norwegian"}),C.jsx("option",{value:"nl-NL",children:"Dutch"}),C.jsx("option",{value:"pl-PL",children:"Polish"}),C.jsx("option",{value:"pt-BR",children:"Portuguese (Brazil)"}),C.jsx("option",{value:"pt-PT",children:"Portuguese (Portugal)"}),C.jsx("option",{value:"ro-RO",children:"Romanian"}),C.jsx("option",{value:"ru-RU",children:"Russian"}),C.jsx("option",{value:"sk-SK",children:"Slovak"}),C.jsx("option",{value:"sl-SI",children:"Slovenian"}),C.jsx("option",{value:"sr-RS",children:"Serbian"}),C.jsx("option",{value:"sv-SE",children:"Swedish"}),C.jsx("option",{value:"th-TH",children:"Thai"}),C.jsx("option",{value:"tr-TR",children:"Turkish"}),C.jsx("option",{value:"uk-UA",children:"Ukrainian"}),C.jsx("option",{value:"vi-VN",children:"Vietnamese"}),C.jsx("option",{value:"zh-CN",children:"Chinese (Mandarin)"}),C.jsx("option",{value:"zh-TW",children:"Chinese (Taiwan)"})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Load Preset Text"}),C.jsxs("select",{onChange:N=>R(N.target.value),disabled:A,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",defaultValue:"",children:[C.jsx("option",{value:"",children:"-- Select a preset --"}),C.jsx("option",{value:"podcast",children:"Podcast"}),C.jsx("option",{value:"education",children:"Education/Learning"}),C.jsx("option",{value:"instructions",children:"Instructions/Guidance"}),C.jsx("option",{value:"story",children:"Story/Narrative"}),C.jsx("option",{value:"ads",children:"Advertisement"}),C.jsx("option",{value:"news",children:"News Report"}),C.jsx("option",{value:"promotional",children:"Promotional/Marketing"}),C.jsx("option",{value:"vlog",children:"Vlog/Social Media"}),C.jsx("option",{value:"business",children:"Business/Professional"}),C.jsx("option",{value:"callcenter",children:"Call Center/Customer Care"}),C.jsx("option",{value:"standup",children:"Stand-up Comedy"}),C.jsx("option",{value:"enthusiastic",children:"Enthusiastic/Excited"}),C.jsx("option",{value:"casual",children:"Casual Conversation"}),C.jsx("option",{value:"hesitant",children:"Hesitant/Uncertain"}),C.jsx("option",{value:"explainer",children:"Explainer Video"})]})]})]}),C.jsxs("div",{className:"flex-1 relative",children:[h>=0&&C.jsx("div",{ref:o,className:"absolute inset-0 px-3 py-2 pointer-events-none overflow-hidden whitespace-pre-wrap break-words font-mono text-base leading-6 text-transparent",style:{zIndex:1},children:b()}),C.jsx("textarea",{ref:c,value:z,onChange:N=>!u&&n(N.target.value),placeholder:"Enter text here to convert to speech...",readOnly:u,className:"w-full h-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none font-mono text-base leading-6",style:{position:"relative",zIndex:2,background:u?"#f9fafb":"transparent"}})]}),C.jsxs("div",{className:"mt-4 flex gap-2",children:[C.jsx("button",{onClick:()=>d(!u),disabled:!r,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Show Plain Text":"Show SSML"}),C.jsx("button",{onClick:()=>n(""),disabled:!r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Text"})]})]})}function s0({state:r,error:n,audioData:s,hasText:h,isConfigured:a,onPlay:l,onPause:c,onResume:o,onStop:u}){const[d,v]=L.useState(!1),f=h&&a&&r==="idle",m=r==="playing",y=r==="paused",w=r==="playing"||r==="paused"||r==="synthesizing",P=()=>{switch(r){case"idle":return"Ready";case"synthesizing":return"Synthesizing...";case"playing":return"Playing";case"paused":return"Paused";case"error":return"Error";default:return"Unknown"}},T=()=>{switch(r){case"idle":return"text-gray-600";case"synthesizing":return"text-blue-600";case"playing":return"text-green-600";case"paused":return"text-yellow-600";case"error":return"text-red-600";default:return"text-gray-600"}};return C.jsxs("div",{className:"space-y-4",children:[C.jsx("div",{className:"flex items-center justify-between",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),C.jsx("span",{className:`text-sm font-semibold ${T()}`,children:P()}),r==="synthesizing"&&C.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"})]})}),n&&C.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:[C.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Error:"}),C.jsx("p",{className:"text-xs text-red-600 mt-1",children:n})]}),!a&&C.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:C.jsx("p",{className:"text-sm text-yellow-700",children:"Please configure your API key and region in the settings panel."})}),C.jsxs("div",{className:"flex gap-2 flex-wrap",children:[C.jsx("button",{onClick:l,disabled:!f,className:"flex-1 min-w-[100px] px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600",title:h?a?"Play":"Configure settings first":"Enter text first",children:" Play"}),y?C.jsx("button",{onClick:o,className:"flex-1 min-w-[100px] px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:" Resume"}):C.jsx("button",{onClick:c,disabled:!m,className:"flex-1 min-w-[100px] px-4 py-2 text-sm font-medium text-white bg-yellow-600 rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-yellow-600",children:" Pause"}),C.jsx("button",{onClick:u,disabled:!w,className:"flex-1 min-w-[100px] px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-600",children:" Stop"}),C.jsx("button",{onClick:()=>v(!d),className:"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",title:"Help",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]}),d&&C.jsxs("div",{className:"text-xs text-gray-500 space-y-1 pt-2 mt-2 border-t border-gray-200",children:[C.jsx("p",{children:" Click Play to start synthesis and playback"}),C.jsx("p",{children:" Word highlighting shows the current word being spoken"}),C.jsx("p",{children:" Save audio from history panel below"})]})]})}function a0({text:r,selectedVoice:n,region:s,audioData:h}){const a=async()=>{try{const l=`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US">
  <voice name="${n}">
    ${r}
  </voice>
</speak>`,c=`
Voice: ${n}
Region: ${s}

SSML:
${l}

Text:
${r}

${h?"Please find the audio file attached (downloaded separately).":"[No audio generated yet]"}
      `.trim(),o=encodeURIComponent(`Azure Voice Playground Feedback - ${n}`),u=encodeURIComponent(c),d=`mailto:ttsvoicefeedback@microsoft.com?subject=${o}&body=${u}`;if(h){const v=new Blob([h],{type:"audio/mpeg"}),f=URL.createObjectURL(v),m=document.createElement("a");m.href=f,m.download=`feedback-${n}-${Date.now()}.mp3`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(f)}navigator.clipboard&&await navigator.clipboard.writeText(l),window.open(d,"_blank"),h&&alert("Audio file downloaded! Please attach it to your email before sending.")}catch(l){console.error("Error sending feedback:",l),alert("Error preparing feedback. Please try again.")}};return C.jsxs("button",{onClick:a,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200 text-sm font-medium",title:"Send feedback with SSML and audio",children:[C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[C.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),C.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Send Feedback"]})}function c0(r,n){const s=new Blob([r],{type:"audio/mpeg"}),h=URL.createObjectURL(s),a=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),l=n||`tts-output-${a}.mp3`,c=document.createElement("a");c.href=h,c.download=l,document.body.appendChild(c),c.click(),document.body.removeChild(c),setTimeout(()=>URL.revokeObjectURL(h),100)}function Ep(r){return new Promise((n,s)=>{const h=new Blob([r],{type:"audio/mpeg"}),a=URL.createObjectURL(h),l=new Audio(a);l.addEventListener("loadedmetadata",()=>{n(l.duration),URL.revokeObjectURL(a)}),l.addEventListener("error",()=>{s(new Error("Failed to load audio metadata")),URL.revokeObjectURL(a)})})}function u0(r){const n=Math.floor(r/60),s=Math.floor(r%60);return`${n}:${s.toString().padStart(2,"0")}`}function vA({entry:r,onDelete:n}){const[s,h]=L.useState(!1),a=L.useRef(null),l=L.useRef(null);L.useEffect(()=>{const f=new Blob([r.audioData],{type:"audio/mpeg"}),m=URL.createObjectURL(f);return l.current=m,()=>{l.current&&URL.revokeObjectURL(l.current)}},[r.audioData]);const c=()=>{a.current||(a.current=new Audio(l.current||""),a.current.addEventListener("ended",()=>{h(!1)})),s?(a.current.pause(),h(!1)):(a.current.play(),h(!0))},o=()=>{const f=new Date(r.timestamp).toISOString().replace(/[:.]/g,"-").slice(0,-5),m=r.voice.replace(/[^a-zA-Z0-9-]/g,"_"),w=`azurevoice-${r.region.replace(/[^a-zA-Z0-9-]/g,"_")}-${m}-${f}.mp3`;c0(r.audioData,w)},u=()=>{n&&(a.current&&(a.current.pause(),a.current=null),n(r.id))},d=r.text.length>100?r.text.substring(0,100)+"...":r.text,v=new Date(r.timestamp).toLocaleTimeString();return C.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsx("p",{className:"text-sm text-gray-800 truncate mb-1",children:d}),C.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[C.jsx("span",{children:v}),C.jsx("span",{children:""}),C.jsx("span",{className:"truncate max-w-[200px]",children:r.voice}),C.jsx("span",{children:""}),C.jsx("span",{children:r.region}),C.jsx("span",{children:""}),C.jsx("span",{children:u0(r.duration)})]})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{onClick:c,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:s?"Pause":"Play",children:s?C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M5 4h3v12H5V4zm7 0h3v12h-3V4z"})}):C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})}),C.jsx("button",{onClick:o,className:"p-2 text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"Save as MP3",children:C.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[C.jsx("path",{d:"M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.235a.75.75 0 10-1.09 1.03l4.25 4.5a.75.75 0 001.09 0l4.25-4.5a.75.75 0 00-1.09-1.03l-2.955 3.129V2.75z"}),C.jsx("path",{d:"M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z"})]})}),n&&C.jsx("button",{onClick:u,className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})})})]})]})}function fA({history:r,onClearHistory:n,onDeleteEntry:s}){const[h,a]=L.useState(!1),l=()=>{a(!h)};return C.jsxs("div",{className:"border-t border-gray-200 bg-gray-50",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-100",onClick:l,children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Synthesis History"}),r.length>0&&C.jsx("span",{className:"px-2 py-1 text-xs font-medium text-white bg-blue-600 rounded-full",children:r.length})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[r.length>0&&C.jsx("button",{onClick:c=>{c.stopPropagation(),window.confirm("Clear all history?")&&n()},className:"px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors",children:"Clear All"}),C.jsx("button",{className:"p-1 text-gray-600",children:C.jsx("svg",{className:`w-5 h-5 transform transition-transform ${h?"rotate-180":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),h&&C.jsx("div",{className:"px-4 pb-4 max-h-60 overflow-y-auto",children:r.length===0?C.jsxs("div",{className:"py-8 text-center text-gray-500",children:[C.jsx("p",{children:"No synthesis history yet"}),C.jsx("p",{className:"text-sm mt-1",children:"Synthesized audio will appear here"})]}):C.jsx("div",{className:"space-y-2",children:[...r].reverse().map(c=>C.jsx(vA,{entry:c,onDelete:s},c.id))})})]})}function gA({settings:r,onSettingsChange:n,isConfigured:s,history:h,addToHistory:a,removeFromHistory:l,clearHistory:c}){const[o,u]=L.useState("Welcome to Azure Voice Playground. Select a voice and choose a preset text to get started, or type your own text."),d=L.useRef(null),{state:v,error:f,wordBoundaries:m,currentWordIndex:y,audioData:w,synthesize:P,pause:T,resume:R,stop:A}=cA(r);L.useEffect(()=>{w&&w!==d.current&&(d.current=w,Ep(w).then(x=>{a({timestamp:Date.now(),text:o,voice:r.selectedVoice,region:r.region,audioData:w,duration:x})}).catch(x=>{console.error("Failed to get audio duration:",x);const z=w.byteLength*8/48e3;a({timestamp:Date.now(),text:o,voice:r.selectedVoice,region:r.region,audioData:w,duration:z})}))},[w,o,r.selectedVoice,r.region,a]);const b=()=>{P(o)};return C.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[C.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[C.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 shadow-md",children:[C.jsx("h1",{className:"text-3xl font-bold",children:"Text to Speech"}),C.jsx("p",{className:"text-blue-100 mt-1",children:"Realtime text-to-Speech voices from Microsoft Foundry Voice Gallery"})]}),C.jsxs("div",{className:"flex-1 grid grid-rows-[1fr_auto] gap-6 p-6 overflow-hidden",children:[C.jsx("div",{className:"overflow-hidden",children:C.jsx(hA,{text:o,onTextChange:u,wordBoundaries:m,currentWordIndex:y,selectedVoice:r.selectedVoice,state:v})}),C.jsx("div",{className:"border-t border-gray-200 pt-6",children:C.jsx(s0,{state:v,error:f,audioData:w,hasText:o.trim().length>0,isConfigured:s,onPlay:b,onPause:T,onResume:R,onStop:A})})]}),C.jsx(fA,{history:h,onClearHistory:c,onDeleteEntry:l}),C.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-3",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("p",{className:"text-xs text-gray-600",children:"Built with React, TypeScript, and Azure Cognitive Services Speech SDK"}),C.jsx(a0,{text:o,selectedVoice:r.selectedVoice,region:r.region,audioData:w})]})})]}),C.jsxs("div",{className:"w-full md:w-80 flex-shrink-0 bg-gray-50 border-l border-gray-200 p-6 flex flex-col overflow-hidden",children:[C.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Voice Selection"}),C.jsx("div",{className:"flex-1 min-h-0",children:C.jsx(uA,{apiKey:r.apiKey,region:r.region,selectedVoice:r.selectedVoice,onVoiceChange:x=>{console.log("TTSPlayground: Voice changed to:",x),n({selectedVoice:x})}})})]})]})}const l0=[{name:"en-US-AmandaMultilingualNeural",displayName:"Amanda",gender:"Female"},{name:"en-US-AvaMultilingualNeural",displayName:"Ava",gender:"Female"},{name:"en-US-CoraMultilingualNeural",displayName:"Cora",gender:"Female"},{name:"en-US-EmmaMultilingualNeural",displayName:"Emma",gender:"Female"},{name:"en-US-EvelynMultilingualNeural",displayName:"Evelyn",gender:"Female"},{name:"en-US-JennyMultilingualNeural",displayName:"Jenny",gender:"Female"},{name:"en-US-LolaMultilingualNeural",displayName:"Lola",gender:"Female"},{name:"en-US-NancyMultilingualNeural",displayName:"Nancy",gender:"Female"},{name:"en-US-NovaTurboMultilingualNeural",displayName:"Nova (Turbo)",gender:"Female"},{name:"en-US-PhoebeMultilingualNeural",displayName:"Phoebe",gender:"Female"},{name:"en-US-SerenaMultilingualNeural",displayName:"Serena",gender:"Female"},{name:"en-US-ShimmerTurboMultilingualNeural",displayName:"Shimmer (Turbo)",gender:"Female"},{name:"en-US-AdamMultilingualNeural",displayName:"Adam",gender:"Male"},{name:"en-US-AlloyTurboMultilingualNeural",displayName:"Alloy (Turbo)",gender:"Male"},{name:"en-US-AndrewMultilingualNeural",displayName:"Andrew",gender:"Male"},{name:"en-US-BrandonMultilingualNeural",displayName:"Brandon",gender:"Male"},{name:"en-US-BrianMultilingualNeural",displayName:"Brian",gender:"Male"},{name:"en-US-ChristopherMultilingualNeural",displayName:"Christopher",gender:"Male"},{name:"en-US-DavisMultilingualNeural",displayName:"Davis",gender:"Male"},{name:"en-US-DerekMultilingualNeural",displayName:"Derek",gender:"Male"},{name:"en-US-DustinMultilingualNeural",displayName:"Dustin",gender:"Male"},{name:"en-US-EchoTurboMultilingualNeural",displayName:"Echo (Turbo)",gender:"Male"},{name:"en-US-LewisMultilingualNeural",displayName:"Lewis",gender:"Male"},{name:"en-US-OnyxTurboMultilingualNeural",displayName:"Onyx (Turbo)",gender:"Male"},{name:"en-US-RyanMultilingualNeural",displayName:"Ryan",gender:"Male"},{name:"en-US-SamuelMultilingualNeural",displayName:"Samuel",gender:"Male"},{name:"en-US-SteffanMultilingualNeural",displayName:"Steffan",gender:"Male"},{name:"en-US-FableTurboMultilingualNeural",displayName:"Fable (Turbo)",gender:"Neutral"}];async function mA(r,n){const s=n.accountName.trim(),h=n.containerName.trim(),a=n.sasToken.trim(),l=Date.now(),c=r.name.replace(/[^a-zA-Z0-9.-]/g,"_"),o=`voice-conversion/${l}-${c}`,u=a.startsWith("?")?a:`?${a}`,d=`https://${s}.blob.core.windows.net/${h}/${o}${u}`;console.log("Uploading to blob URL:",d.split("?")[0]);const v=await r.arrayBuffer();let f;try{f=await fetch(d,{method:"PUT",headers:{"x-ms-blob-type":"BlockBlob","Content-Type":r.type||"application/octet-stream"},body:v})}catch(y){throw console.error("Blob upload fetch error:",y),new Error(`Failed to upload to blob storage. This is likely a CORS issue. Please enable CORS on your Azure Storage Account "${s}": Go to Azure Portal  Storage Account  Settings  Resource sharing (CORS)  Add rule with Allowed origins: *, Methods: GET,PUT,OPTIONS, Headers: *`)}if(!f.ok){const y=await f.text();throw new Error(`Failed to upload to blob storage: ${f.status} ${f.statusText}. ${y}`)}const m=`https://${s}.blob.core.windows.net/${h}/${o}${u}`;return console.log("Blob uploaded successfully:",m.split("?")[0]),m}function yA(r){return r.accountName.trim()?r.containerName.trim()?r.sasToken.trim()?null:"SAS Token is required":"Container Name is required":"Storage Account Name is required"}function SA(){try{const r=localStorage.getItem("azure-voice-blob-config");if(r)return JSON.parse(r)}catch(r){console.error("Failed to load blob config:",r)}return{accountName:"",containerName:"",sasToken:""}}function CA(r){try{localStorage.setItem("azure-voice-blob-config",JSON.stringify(r))}catch(n){console.error("Failed to save blob config:",n)}}function PA({apiKey:r,region:n}){const[s,h]=L.useState("idle"),[a,l]=L.useState(""),[c,o]=L.useState(null),u=L.useCallback(()=>{h("idle"),l(""),o(null)},[]),d=L.useCallback(async(v,f,m)=>{if(!r){l("Azure API Key is required"),h("error");return}if(!n){l("Azure Region is required"),h("error");return}const y=yA(m);if(y){l(y),h("error");return}const w=100*1024*1024;if(v.size>w){l("File size must be less than 100 MB"),h("error");return}try{h("uploading"),l(""),console.log("Uploading audio to blob storage...");const P=await mA(v,m);console.log("Audio uploaded, URL:",P.split("?")[0]),h("converting"),console.log("Starting voice conversion...");const T=P.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),R=`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="https://www.w3.org/2001/mstts" xml:lang="en-US"><voice name="${f.name}"><mstts:voiceconversion url="${T}"/></voice></speak>`;console.log("SSML:",R);const A=`https://${n}.tts.speech.microsoft.com/cognitiveservices/v1`,b=await fetch(A,{method:"POST",headers:{"Ocp-Apim-Subscription-Key":r,"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":"audio-24khz-48kbitrate-mono-mp3","User-Agent":"AzureVoicePlayground"},body:R});if(!b.ok){const z=await b.text();throw new Error(`Voice conversion failed: ${b.status} ${b.statusText}. ${z}`)}const x=await b.arrayBuffer();console.log("Voice conversion completed, audio size:",x.byteLength),o(x),h("idle")}catch(P){console.error("Voice conversion error:",P),l(P instanceof Error?P.message:"Voice conversion failed"),h("error")}},[r,n]);return{state:s,error:a,resultAudioData:c,convert:d,reset:u}}function wA({selectedVoice:r,onVoiceChange:n}){const[s,h]=L.useState(""),[a,l]=L.useState("All"),c=L.useMemo(()=>l0.filter(u=>{if(a!=="All"&&u.gender!==a)return!1;if(s){const d=s.toLowerCase();return u.displayName.toLowerCase().includes(d)||u.name.toLowerCase().includes(d)}return!0}),[s,a]),o=["All","Female","Male"];return C.jsxs("div",{className:"space-y-4",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Target Voice"}),C.jsx("div",{className:"flex gap-2 flex-wrap",children:o.map(u=>C.jsx("button",{onClick:()=>l(u),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${a===u?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:u},u))}),C.jsx("input",{type:"text",placeholder:"Search voices...",value:s,onChange:u=>h(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r&&C.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded-md",children:[C.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Selected:"}),C.jsx("div",{className:"text-sm text-blue-800 truncate",children:r.displayName})]}),C.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-md",children:c.length===0?C.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No voices found"}):c.map(u=>C.jsxs("button",{onClick:()=>n(u),className:`w-full px-4 py-3 text-left border-b border-gray-100 last:border-b-0 transition-colors ${(r==null?void 0:r.name)===u.name?"bg-blue-50 border-l-4 border-l-blue-600":"hover:bg-gray-50"}`,children:[C.jsx("div",{className:"font-medium text-gray-800",children:u.displayName}),C.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[C.jsx("span",{className:`inline-block px-1.5 py-0.5 rounded text-xs ${u.gender==="Female"?"bg-pink-100 text-pink-700":u.gender==="Male"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:u.gender}),C.jsx("span",{className:"text-gray-400",children:"en-US"})]})]},u.name))}),C.jsxs("div",{className:"text-xs text-gray-500",children:[c.length," voice",c.length!==1?"s":""," available"]})]})}const RA=["audio/wav","audio/wave","audio/x-wav","audio/mp3","audio/mpeg","audio/ogg","audio/flac","audio/x-flac","audio/webm"],EA=100*1024*1024;function TA({file:r,onFileChange:n,disabled:s}){const h=L.useRef(null),a=L.useRef(null),l=L.useRef(null),[c,o]=L.useState(!1),[u,d]=L.useState(""),[v,f]=L.useState(!1);L.useEffect(()=>(r?(l.current&&URL.revokeObjectURL(l.current),l.current=URL.createObjectURL(r)):(l.current&&(URL.revokeObjectURL(l.current),l.current=null),a.current&&(a.current.pause(),a.current=null),f(!1)),()=>{l.current&&URL.revokeObjectURL(l.current)}),[r]);const m=L.useCallback(N=>{N.stopPropagation(),l.current&&(a.current||(a.current=new Audio(l.current),a.current.addEventListener("ended",()=>{f(!1)})),v?(a.current.pause(),f(!1)):(a.current.play(),f(!0)))},[v]),y=L.useCallback(N=>!RA.includes(N.type)&&!N.name.match(/\.(wav|mp3|ogg|flac|webm)$/i)?"Unsupported file format. Please use WAV, MP3, OGG, FLAC, or WebM.":N.size>EA?`File size must be less than 100 MB. Your file is ${(N.size/(1024*1024)).toFixed(1)} MB.`:null,[]),w=L.useCallback(N=>{const F=y(N);if(F){d(F),n(null);return}d(""),n(N)},[y,n]),P=L.useCallback(N=>{N.preventDefault(),N.stopPropagation(),o(!0)},[]),T=L.useCallback(N=>{N.preventDefault(),N.stopPropagation(),o(!1)},[]),R=L.useCallback(N=>{if(N.preventDefault(),N.stopPropagation(),o(!1),s)return;const F=N.dataTransfer.files;F.length>0&&w(F[0])},[s,w]),A=L.useCallback(N=>{const F=N.target.files;F&&F.length>0&&w(F[0])},[w]),b=L.useCallback(()=>{var N;(N=h.current)==null||N.click()},[]),x=L.useCallback(()=>{n(null),d(""),h.current&&(h.current.value="")},[n]),z=N=>N<1024?`${N} B`:N<1024*1024?`${(N/1024).toFixed(1)} KB`:`${(N/(1024*1024)).toFixed(1)} MB`;return C.jsxs("div",{className:"space-y-3",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Source Audio"}),C.jsx("input",{ref:h,type:"file",accept:".wav,.mp3,.ogg,.flac,.webm,audio/*",onChange:A,className:"hidden",disabled:s}),C.jsx("div",{onDragOver:P,onDragLeave:T,onDrop:R,className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${s?"border-gray-200 bg-gray-50 cursor-not-allowed":c?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 cursor-pointer"}`,onClick:s?void 0:b,children:r?C.jsxs("div",{className:"flex items-center justify-center gap-3",children:[C.jsx("svg",{className:"w-8 h-8 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),C.jsxs("div",{className:"text-left flex-1 min-w-0",children:[C.jsx("p",{className:"font-medium text-gray-800 truncate",children:r.name}),C.jsx("p",{className:"text-sm text-gray-500",children:z(r.size)})]}),C.jsx("button",{onClick:m,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors flex-shrink-0",title:v?"Pause":"Play source audio",children:v?C.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M5 4h3v12H5V4zm7 0h3v12h-3V4z"})}):C.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})}),C.jsx("button",{onClick:N=>{N.stopPropagation(),x()},className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors flex-shrink-0",title:"Remove file",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):C.jsxs("div",{children:[C.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),C.jsxs("p",{className:"text-gray-600 mb-1",children:[C.jsx("span",{className:"font-medium text-blue-600",children:"Click to browse"})," or drag and drop"]}),C.jsx("p",{className:"text-sm text-gray-500",children:"WAV, MP3, OGG, FLAC, WebM (max 100 MB)"})]})}),u&&C.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded-md",children:u})]})}function AA({history:r,onClearHistory:n,onDeleteEntry:s}){const[h,a]=L.useState(!1),l=()=>{a(!h)};return C.jsxs("div",{className:"border-t border-gray-200 bg-gray-50",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-100",onClick:l,children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Conversion History"}),r.length>0&&C.jsx("span",{className:"px-2 py-1 text-xs font-medium text-white bg-purple-600 rounded-full",children:r.length})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[r.length>0&&C.jsx("button",{onClick:c=>{c.stopPropagation(),window.confirm("Clear all conversion history?")&&n()},className:"px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors",children:"Clear All"}),C.jsx("button",{className:"p-1 text-gray-600",children:C.jsx("svg",{className:`w-5 h-5 transform transition-transform ${h?"rotate-180":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),h&&C.jsx("div",{className:"px-4 pb-4 max-h-60 overflow-y-auto",children:r.length===0?C.jsxs("div",{className:"py-8 text-center text-gray-500",children:[C.jsx("p",{children:"No conversion history yet"}),C.jsx("p",{className:"text-sm mt-1",children:"Converted audio will appear here"})]}):C.jsx("div",{className:"space-y-2",children:[...r].reverse().map(c=>C.jsx(bA,{entry:c,onDelete:s},c.id))})})]})}function bA({entry:r,onDelete:n}){const[s,h]=L.useState(!1),a=L.useRef(null),l=L.useRef(null);L.useEffect(()=>{const f=new Blob([r.resultAudioData],{type:"audio/mpeg"}),m=URL.createObjectURL(f);return l.current=m,()=>{l.current&&URL.revokeObjectURL(l.current)}},[r.resultAudioData]);const c=()=>{a.current||(a.current=new Audio(l.current||""),a.current.addEventListener("ended",()=>{h(!1)})),s?(a.current.pause(),h(!1)):(a.current.play(),h(!0))},o=()=>{const f=new Date(r.timestamp).toISOString().replace(/[:.]/g,"-").slice(0,-5),m=r.targetVoice.replace(/[^a-zA-Z0-9-]/g,"_"),w=`voiceconversion-${r.sourceFileName.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9-]/g,"_")}-to-${m}-${f}.mp3`;c0(r.resultAudioData,w)},u=()=>{a.current&&(a.current.pause(),a.current=null),n(r.id)},d=new Date(r.timestamp).toLocaleTimeString(),v=r.targetVoice.replace("en-US-","").replace("MultilingualNeural","").replace("Turbo"," (Turbo)");return C.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsxs("p",{className:"text-sm text-gray-800 truncate mb-1",children:[C.jsx("span",{className:"font-medium",children:r.sourceFileName}),C.jsx("span",{className:"text-gray-400 mx-2",children:""}),C.jsx("span",{className:"text-purple-600",children:v})]}),C.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[C.jsx("span",{children:d}),C.jsx("span",{children:""}),C.jsx("span",{children:r.region}),C.jsx("span",{children:""}),C.jsx("span",{children:u0(r.duration)})]})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{onClick:c,className:"p-2 text-purple-600 hover:bg-purple-50 rounded-md transition-colors",title:s?"Pause":"Play",children:s?C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M5 4h3v12H5V4zm7 0h3v12h-3V4z"})}):C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})}),C.jsx("button",{onClick:o,className:"p-2 text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"Save as MP3",children:C.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[C.jsx("path",{d:"M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.235a.75.75 0 10-1.09 1.03l4.25 4.5a.75.75 0 001.09 0l4.25-4.5a.75.75 0 00-1.09-1.03l-2.955 3.129V2.75z"}),C.jsx("path",{d:"M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z"})]})}),C.jsx("button",{onClick:u,className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})})})]})]})}function IA({sourceFileName:r,targetVoice:n,region:s,audioData:h}){const a=async()=>{try{const l=`
Source File: ${r||"[No file selected]"}
Target Voice: ${n||"[No voice selected]"}
Region: ${s}

${h?"Please find the converted audio file attached (downloaded separately).":"[No conversion completed yet]"}
      `.trim(),c=encodeURIComponent(`Azure Voice Conversion Feedback - ${n||"No voice"}`),o=encodeURIComponent(l),u=`mailto:ttsvoicefeedback@microsoft.com?subject=${c}&body=${o}`;if(h){const d=new Blob([h],{type:"audio/mpeg"}),v=URL.createObjectURL(d),f=document.createElement("a");f.href=v,f.download=`conversion-${n||"output"}-${Date.now()}.mp3`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(v)}window.open(u,"_blank"),h&&alert("Audio file downloaded! Please attach it to your email before sending.")}catch(l){console.error("Error sending feedback:",l),alert("Error preparing feedback. Please try again.")}};return C.jsxs("button",{onClick:a,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200 text-sm font-medium",title:"Send feedback about voice conversion",children:[C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[C.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),C.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Send Feedback"]})}function _A({settings:r,onSettingsChange:n,isConfigured:s,history:h,addToHistory:a,removeFromHistory:l,clearHistory:c}){const[o,u]=L.useState(SA),[d,v]=L.useState(!1),[f,m]=L.useState(null),[y,w]=L.useState(l0[0]),[P,T]=L.useState(!1),R=L.useRef(null),A=L.useRef(null),b=L.useRef(null),{state:x,error:z,resultAudioData:N,convert:F,reset:B}=PA({apiKey:r.apiKey,region:r.region});L.useEffect(()=>{CA(o)},[o]),L.useEffect(()=>{N&&f&&y&&N!==b.current&&(b.current=N,Ep(N).then(ee=>{a({timestamp:Date.now(),sourceFileName:f.name,targetVoice:y.name,region:r.region,resultAudioData:N,duration:ee})}).catch(ee=>{console.error("Failed to get audio duration:",ee);const ue=N.byteLength*8/48e3;a({timestamp:Date.now(),sourceFileName:f.name,targetVoice:y.name,region:r.region,resultAudioData:N,duration:ue})}))},[N,f,y,r.region,a]),L.useEffect(()=>{if(N){A.current&&URL.revokeObjectURL(A.current);const ee=new Blob([N],{type:"audio/mpeg"});A.current=URL.createObjectURL(ee)}return()=>{A.current&&URL.revokeObjectURL(A.current)}},[N]);const re=L.useCallback(()=>{!f||!y||F(f,y,o)},[f,y,o,F]),se=L.useCallback(()=>{A.current&&(R.current||(R.current=new Audio(A.current),R.current.addEventListener("ended",()=>{T(!1)})),P?(R.current.pause(),T(!1)):(R.current.play(),T(!0)))},[P]),pe=o.accountName&&o.containerName&&o.sasToken,Re=s&&pe&&f&&y&&(x==="idle"||x==="error");return C.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[C.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[C.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 shadow-md",children:[C.jsx("h1",{className:"text-3xl font-bold",children:"Voice Changer"}),C.jsx("p",{className:"text-purple-100 mt-1",children:"Transform your voice using Azure Voice Conversion (Preview)"})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[C.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[C.jsxs("button",{onClick:()=>v(!d),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})}),C.jsx("span",{className:"font-medium text-gray-800",children:"Azure Blob Storage Configuration"}),pe&&C.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full",children:"Configured"})]}),C.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${d?"rotate-180":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),d&&C.jsxs("div",{className:"p-4 space-y-4 border-t border-gray-200",children:[C.jsxs("p",{className:"text-sm text-gray-600",children:["Voice conversion requires uploading audio to Azure Blob Storage.",C.jsx("a",{href:"https://portal.azure.com/#create/Microsoft.StorageAccount",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:"Create a storage account"})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Account Name"}),C.jsx("input",{type:"text",value:o.accountName,onChange:ee=>u(ue=>({...ue,accountName:ee.target.value})),placeholder:"mystorageaccount",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Container Name"}),C.jsx("input",{type:"text",value:o.containerName,onChange:ee=>u(ue=>({...ue,containerName:ee.target.value})),placeholder:"audio-files",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SAS Token"}),C.jsx("input",{type:"password",value:o.sasToken,onChange:ee=>u(ue=>({...ue,sasToken:ee.target.value})),placeholder:"?sv=2022-11-02&ss=b...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]}),C.jsx("p",{className:"text-xs text-gray-500",children:"SAS token needs read and write permissions. Credentials are stored locally in your browser."}),C.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-md",children:[C.jsx("p",{className:"text-xs font-medium text-amber-800 mb-1",children:"CORS Configuration Required"}),C.jsx("p",{className:"text-xs text-amber-700",children:"In Azure Portal, go to your Storage Account  Resource sharing (CORS) and add a rule:"}),C.jsxs("ul",{className:"text-xs text-amber-700 mt-1 ml-4 list-disc",children:[C.jsxs("li",{children:["Allowed origins: ",C.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"*"})]}),C.jsxs("li",{children:["Allowed methods: ",C.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"GET, PUT, OPTIONS"})]}),C.jsxs("li",{children:["Allowed headers: ",C.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"*"})]})]})]})]})]}),C.jsx(TA,{file:f,onFileChange:m,disabled:x!=="idle"}),C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("button",{onClick:re,disabled:!Re,className:`px-6 py-3 rounded-lg font-medium transition-colors ${Re?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:x==="uploading"?"Uploading...":x==="converting"?"Converting...":"Convert Voice"}),!s&&C.jsx("p",{className:"text-sm text-amber-600",children:"Please configure Azure API key and region in the sidebar."}),s&&!pe&&C.jsx("p",{className:"text-sm text-amber-600",children:"Please configure Blob Storage above."})]}),z&&C.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[C.jsx("p",{className:"font-medium",children:"Error"}),C.jsx("p",{className:"text-sm",children:z})]}),N&&C.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("p",{className:"font-medium text-green-800",children:"Conversion Complete"}),C.jsxs("p",{className:"text-sm text-green-600",children:[f==null?void 0:f.name,"  ",y==null?void 0:y.displayName]})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{onClick:se,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:P?C.jsxs(C.Fragment,{children:[C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M5 4h3v12H5V4zm7 0h3v12h-3V4z"})}),"Pause"]}):C.jsxs(C.Fragment,{children:[C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})}),"Play Result"]})}),C.jsx("button",{onClick:B,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"New Conversion"})]})]})})]}),C.jsx(AA,{history:h,onClearHistory:c,onDeleteEntry:l}),C.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-3",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("p",{className:"text-xs text-gray-600",children:"Voice Conversion is a preview feature. Only en-US voices are supported. Zeroshot is also supported, contact us."}),C.jsx(IA,{sourceFileName:(f==null?void 0:f.name)||null,targetVoice:(y==null?void 0:y.displayName)||null,region:r.region,audioData:N})]})})]}),C.jsx("div",{className:"w-full md:w-80 flex-shrink-0 bg-gray-50 border-l border-gray-200 p-6 overflow-y-auto",children:C.jsx(wA,{selectedVoice:y,onVoiceChange:w})})]})}function kA(r){const n=r.match(/multitalker-([^:]+)/i);return n?n[1].split("-").filter(h=>h.length>0):[]}function xA(r){const n=r.match(/^([a-z]{2}-[a-z]{2})/i);if(n){const s=n[1].split("-");return`${s[0].toLowerCase()}-${s[1].toUpperCase()}`}return"en-US"}function MA(r){if(!r.name.toLowerCase().includes("multitalker"))return null;const n=kA(r.name);if(n.length===0)return null;const s=xA(r.name),a=`${n.map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" & ")} (${s})`;return{name:r.name,displayName:a,locale:s,speakers:n}}function nC(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function NA(r,n,s,h){const a=h.map(o=>o.toLowerCase()),c=r.split(`
`).filter(o=>o.trim()).map(o=>{const u=o.indexOf(":");if(u>0){const v=o.substring(0,u).trim().toLowerCase(),f=o.substring(u+1).trim(),m=a.indexOf(v);if(m>=0&&f)return`<mstts:turn speaker="${h[m]}">${nC(f)}</mstts:turn>`}return o.trim()?`<mstts:turn speaker="${h[0]}">${nC(o.trim())}</mstts:turn>`:""}).filter(o=>o).join(`
`);return`<speak xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="https://www.w3.org/2001/mstts" version="1.0" xml:lang="${s}">
<voice name="${n}">
<lang xml:lang="${s}">
<mstts:dialog>
${c}
</mstts:dialog>
</lang>
</voice>
</speak>`}function OA({apiKey:r,region:n}){const[s,h]=L.useState("idle"),[a,l]=L.useState(""),[c,o]=L.useState(null),[u,d]=L.useState(""),v=L.useRef(null),f=L.useRef(null),m=L.useRef([]),y=L.useRef(0),w=L.useRef(!1),P=L.useRef(null),T=L.useCallback(z=>{v.current&&v.current.close(),console.log("Initializing multi-talker synthesizer with voice:",z);const N=Rt.SpeechConfig.fromSubscription(r,n);N.speechSynthesisOutputFormat=Rt.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3;const F=new Rt.SpeakerAudioDestination;f.current=F;const B=Rt.AudioConfig.fromSpeakerOutput(F),re=new Rt.SpeechSynthesizer(N,B);return v.current=re,re},[r,n]),R=L.useCallback((z,N,F,B)=>{if(!z.trim()){l("Please enter some text to synthesize");return}if(!N){l("Please select a multi-talker voice");return}if(B.length===0){l("No speakers found in voice name");return}const re=NA(z,N,F,B);d(re),console.log("Generated SSML:",re),h("synthesizing"),l(""),m.current=[],w.current=!1;const se=T(N);se.synthesizing=(pe,Re)=>{Re.result.audioData&&(m.current.push(new Uint8Array(Re.result.audioData)),!w.current&&m.current.length===1&&(console.log("First audio chunk received - starting playback"),y.current=Date.now(),w.current=!0,h("playing")))},se.synthesisStarted=()=>{h("synthesizing"),console.log("Multi-talker synthesis started")},se.synthesisCompleted=(pe,Re)=>{const ee=m.current.reduce((Q,G)=>Q+G.length,0),ue=new Uint8Array(ee);let fe=0;for(const Q of m.current)ue.set(Q,fe),fe+=Q.length;o(ue.buffer),console.log("Multi-talker synthesis completed - audio size:",ee,"bytes");const Se=ee*8/48e3*1e3,he=Date.now()-y.current,q=Math.max(100,Se-he+300);console.log(`Estimated audio duration: ${Se}ms, will stop in: ${q}ms`),w.current||(y.current=Date.now(),w.current=!0,h("playing")),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{console.log("Audio playback ended"),w.current=!1,h("idle"),P.current=null},q)},se.SynthesisCanceled=(pe,Re)=>{console.error("Multi-talker synthesis canceled:",Re.errorDetails),l(Re.errorDetails||"Synthesis was canceled"),h("error"),w.current=!1},se.speakSsmlAsync(re,pe=>{pe.reason===Rt.ResultReason.SynthesizingAudioCompleted?console.log("Multi-talker synthesis completed successfully"):(console.error("Multi-talker synthesis failed:",pe.errorDetails),l(pe.errorDetails||"Synthesis failed"),h("error"))},pe=>{console.error("Multi-talker synthesis error:",pe),l(pe),h("error")})},[T]),A=L.useCallback(()=>{f.current&&s==="playing"&&(f.current.pause(),h("paused"),w.current=!1)},[s]),b=L.useCallback(()=>{f.current&&s==="paused"&&(f.current.resume(),h("playing"),w.current=!0)},[s]),x=L.useCallback(()=>{console.log("Stop called - cleaning up"),w.current=!1,P.current&&(clearTimeout(P.current),P.current=null),f.current&&f.current.pause(),v.current&&(v.current.close(),v.current=null),h("idle")},[]);return{state:s,error:a,audioData:c,generatedSSML:u,synthesize:R,pause:A,resume:b,stop:x}}function jA({apiKey:r,region:n,selectedVoice:s,onVoiceChange:h}){const[a,l]=L.useState([]),[c,o]=L.useState(!1),[u,d]=L.useState(""),[v,f]=L.useState("");L.useEffect(()=>{r&&n&&(o(!0),d(""),o0(r,n).then(w=>{l(w),o(!1)}).catch(w=>{console.error("Failed to fetch voices:",w),d("Failed to load voices from Azure."),l([]),o(!1)}))},[r,n]);const m=L.useMemo(()=>a.filter(w=>w.name.toLowerCase().includes("multitalker")).map(w=>MA(w)).filter(w=>w!==null),[a]),y=L.useMemo(()=>{if(!v)return m;const w=v.toLowerCase().trim();return m.filter(P=>P.displayName.toLowerCase().includes(w)||P.name.toLowerCase().includes(w)||P.speakers.some(T=>T.toLowerCase().includes(w))||P.locale.toLowerCase().includes(w))},[m,v]);return L.useEffect(()=>{!s&&y.length>0&&h(y[0])},[y,s,h]),C.jsxs("div",{className:"h-full flex flex-col space-y-2",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Multi-Talker Voice"}),u&&C.jsx("div",{className:"text-sm text-yellow-600 bg-yellow-50 p-2 rounded",children:u}),C.jsx("input",{type:"text",placeholder:"Search voices...",value:v,onChange:w=>f(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s&&C.jsxs("div",{className:"p-2 bg-purple-50 border border-purple-200 rounded-md flex-shrink-0",children:[C.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Selected:"}),C.jsx("div",{className:"text-sm text-purple-800 truncate",children:s.displayName}),C.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["Speakers: ",s.speakers.join(", ")]})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto border border-gray-200 rounded-md min-h-0",children:[c&&C.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Loading voices..."}),!c&&y.length===0&&C.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:m.length===0?"No multi-talker voices available in this region":"No voices found"}),!c&&y.map(w=>C.jsxs("button",{onClick:()=>h(w),className:`w-full px-4 py-3 text-left border-b border-gray-100 last:border-b-0 transition-colors ${(s==null?void 0:s.name)===w.name?"bg-purple-50 border-l-4 border-l-purple-600":"hover:bg-gray-50"}`,children:[C.jsx("div",{className:"font-medium text-gray-800 text-sm",children:w.displayName}),C.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[C.jsx("span",{className:"inline-block px-1.5 py-0.5 bg-purple-100 text-purple-700 rounded mr-2",children:w.locale}),w.speakers.map((P,T)=>C.jsx("span",{className:"inline-block px-1.5 py-0.5 bg-gray-100 text-gray-600 rounded mr-1",children:P},P))]})]},w.name))]}),C.jsxs("div",{className:"text-xs text-gray-500 flex-shrink-0 pt-2",children:[y.length," multi-talker voice",y.length!==1?"s":""," available"]})]})}const op=[{locale:"zh-CN",language:"Chinese (Simplified)",speakers:["xiaochen","yunhan"],script:`xiaochen: !,
yunhan: !?
xiaochen: ,
yunhan: !?
xiaochen: ,
yunhan: ,?
xiaochen: !
yunhan: !!
xiaochen: !!
yunhan: !`},{locale:"en-US",language:"English (US)",speakers:["speaker1","speaker2"],script:`speaker1: Welcome to Tech Talk! I'm your host, and today we're diving into artificial intelligence.
speaker2: Thanks for having me! AI is such a fascinating topic these days.
speaker1: Absolutely! Can you explain what makes modern AI so powerful?
speaker2: Of course! The key is deep learning, which allows computers to learn patterns from massive amounts of data.
speaker1: That sounds incredible. What are some practical applications?
speaker2: We see AI everywhere now - voice assistants, recommendation systems, autonomous vehicles, and more.
speaker1: Amazing! What do you think the future holds for AI?
speaker2: I believe we'll see even more integration into daily life, making technology more intuitive and helpful.
speaker1: Thank you for sharing your insights!
speaker2: My pleasure! Thanks for having me on the show.`},{locale:"ja-JP",language:"Japanese",speakers:["speaker1","speaker2"],script:`speaker1: !
speaker2: !AI
speaker1: !AI?
speaker2: !
speaker1: ?
speaker2: AI
speaker1: !AI?
speaker2: 
speaker1: !
speaker2: `},{locale:"de-DE",language:"German",speakers:["speaker1","speaker2"],script:`speaker1: Willkommen bei Tech Talk! Heute sprechen wir ber knstliche Intelligenz.
speaker2: Danke fr die Einladung! KI ist wirklich ein faszinierendes Thema.
speaker1: Absolut! Knnen Sie erklren, was moderne KI so leistungsfhig macht?
speaker2: Natrlich! Der Schlssel ist Deep Learning, das es Computern ermglicht, Muster aus riesigen Datenmengen zu lernen.
speaker1: Das klingt unglaublich. Welche praktischen Anwendungen gibt es?
speaker2: Wir sehen KI berall - Sprachassistenten, Empfehlungssysteme, autonome Fahrzeuge und mehr.
speaker1: Erstaunlich! Was denken Sie, wie die Zukunft der KI aussieht?
speaker2: Ich glaube, wir werden noch mehr Integration in den Alltag sehen.
speaker1: Vielen Dank fr Ihre Einblicke!
speaker2: Gern geschehen! Danke fr die Einladung zur Sendung.`},{locale:"fr-FR",language:"French",speakers:["speaker1","speaker2"],script:`speaker1: Bienvenue sur Tech Talk! Aujourd'hui, nous parlons d'intelligence artificielle.
speaker2: Merci de m'avoir invit! L'IA est un sujet vraiment fascinant.
speaker1: Absolument! Pouvez-vous expliquer ce qui rend l'IA moderne si puissante?
speaker2: Bien sr! La cl est l'apprentissage profond, qui permet aux ordinateurs d'apprendre des modles  partir de grandes quantits de donnes.
speaker1: C'est incroyable. Quelles sont les applications pratiques?
speaker2: L'IA est partout maintenant - assistants vocaux, systmes de recommandation, vhicules autonomes et plus encore.
speaker1: Incroyable! Que pensez-vous de l'avenir de l'IA?
speaker2: Je pense que nous verrons encore plus d'intgration dans la vie quotidienne.
speaker1: Merci pour vos perspectives!
speaker2: Avec plaisir! Merci de m'avoir reu dans l'mission.`},{locale:"es-ES",language:"Spanish",speakers:["speaker1","speaker2"],script:`speaker1: Bienvenidos a Tech Talk! Hoy hablamos sobre inteligencia artificial.
speaker2: Gracias por invitarme! La IA es un tema realmente fascinante.
speaker1: Absolutamente! Puede explicar qu hace que la IA moderna sea tan poderosa?
speaker2: Por supuesto! La clave es el aprendizaje profundo, que permite a las computadoras aprender patrones de grandes cantidades de datos.
speaker1: Eso suena increble. Cules son las aplicaciones prcticas?
speaker2: La IA est en todas partes ahora: asistentes de voz, sistemas de recomendacin, vehculos autnomos y ms.
speaker1: Increble! Qu piensa sobre el futuro de la IA?
speaker2: Creo que veremos an ms integracin en la vida diaria.
speaker1: Gracias por compartir sus conocimientos!
speaker2: Con mucho gusto! Gracias por invitarme al programa.`},{locale:"pt-BR",language:"Portuguese (Brazil)",speakers:["speaker1","speaker2"],script:`speaker1: Bem-vindos ao Tech Talk! Hoje vamos falar sobre inteligncia artificial.
speaker2: Obrigado pelo convite! IA  um tema realmente fascinante.
speaker1: Com certeza! Voc pode explicar o que torna a IA moderna to poderosa?
speaker2: Claro! A chave  o aprendizado profundo, que permite aos computadores aprender padres de grandes quantidades de dados.
speaker1: Isso parece incrvel. Quais so as aplicaes prticas?
speaker2: A IA est em toda parte agora - assistentes de voz, sistemas de recomendao, veculos autnomos e muito mais.
speaker1: Incrvel! O que voc acha sobre o futuro da IA?
speaker2: Acredito que veremos ainda mais integrao na vida cotidiana.
speaker1: Obrigado por compartilhar seus conhecimentos!
speaker2: Foi um prazer! Obrigado por me receber no programa.`},{locale:"it-IT",language:"Italian",speakers:["speaker1","speaker2"],script:`speaker1: Benvenuti a Tech Talk! Oggi parliamo di intelligenza artificiale.
speaker2: Grazie per l'invito! L'IA  un argomento davvero affascinante.
speaker1: Assolutamente! Pu spiegare cosa rende l'IA moderna cos potente?
speaker2: Certo! La chiave  il deep learning, che permette ai computer di imparare modelli da grandi quantit di dati.
speaker1: Sembra incredibile. Quali sono le applicazioni pratiche?
speaker2: L'IA  ovunque ora - assistenti vocali, sistemi di raccomandazione, veicoli autonomi e altro ancora.
speaker1: Fantastico! Cosa pensa del futuro dell'IA?
speaker2: Credo che vedremo ancora pi integrazione nella vita quotidiana.
speaker1: Grazie per aver condiviso le sue intuizioni!
speaker2:  stato un piacere! Grazie per avermi invitato al programma.`},{locale:"ko-KR",language:"Korean",speakers:["speaker1","speaker2"],script:`speaker1:     !     .
speaker2:   ! AI   .
speaker1: !  AI     ?
speaker2: !  .         .
speaker1:  .      ?
speaker2: AI   .  ,  ,    .
speaker1: ! AI    ?
speaker2:         .
speaker1:    !
speaker2:  !    .`}];function iC(r,n){let s=r.script;return r.speakers.forEach((h,a)=>{if(a<n.length){const l=new RegExp(`^${h}:`,"gmi");s=s.replace(l,`${n[a]}:`)}}),s}const DA=`speaker1: Welcome to Tech Talk! I'm your host, and today we're diving into artificial intelligence.
speaker2: Thanks for having me! AI is such a fascinating topic these days.
speaker1: Absolutely! Can you explain what makes modern AI so powerful?
speaker2: Of course! The key is deep learning, which allows computers to learn patterns from massive amounts of data.
speaker1: That sounds incredible. What are some practical applications?
speaker2: We see AI everywhere now - voice assistants, recommendation systems, autonomous vehicles, and more.`;function zA({settings:r,onSettingsChange:n,isConfigured:s,history:h,addToHistory:a,removeFromHistory:l,clearHistory:c}){const[o,u]=L.useState(DA),[d,v]=L.useState(null),[f,m]=L.useState(!1),[y,w]=L.useState(!1),[P,T]=L.useState("en-US"),[R,A]=L.useState(null),b=L.useRef(null),x=L.useRef(null),{state:z,error:N,audioData:F,generatedSSML:B,synthesize:re,pause:se,resume:pe,stop:Re}=OA({apiKey:r.apiKey,region:r.region}),ee=q=>{if(T(q),q&&d){const Q=op.find(G=>G.locale===q);if(Q){const G=iC(Q,d.speakers);u(G)}}};L.useEffect(()=>{if(d&&P){const q=op.find(Q=>Q.locale===P);if(q){const Q=iC(q,d.speakers);u(Q)}}},[d,P]),L.useEffect(()=>{F&&F!==b.current&&d&&(b.current=F,Ep(F).then(q=>{a({timestamp:Date.now(),text:o,voice:d.displayName,region:r.region,audioData:F,duration:q})}).catch(q=>{console.error("Failed to get audio duration:",q);const Q=F.byteLength*8/48e3;a({timestamp:Date.now(),text:o,voice:d.displayName,region:r.region,audioData:F,duration:Q})}))},[F,o,d,r.region,a]);const ue=()=>{d&&re(o,d.name,d.locale,d.speakers)},fe=q=>{const Q=new Blob([q.audioData],{type:"audio/mpeg"}),G=URL.createObjectURL(Q),M=document.createElement("a");M.href=G,M.download=`multitalker-${q.voice}-${Date.now()}.mp3`,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(G)},Se=q=>{if(R===q.id&&x.current){x.current.pause(),x.current=null,A(null);return}x.current&&(x.current.pause(),x.current=null);const Q=new Blob([q.audioData],{type:"audio/mpeg"}),G=URL.createObjectURL(Q),M=new Audio(G);x.current=M,A(q.id),M.play(),M.onended=()=>{URL.revokeObjectURL(G),A(null),x.current=null},M.onerror=()=>{URL.revokeObjectURL(G),A(null),x.current=null}},he=z;return C.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[C.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[C.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 shadow-md",children:[C.jsx("h1",{className:"text-3xl font-bold",children:"Podcast Generator"}),C.jsx("p",{className:"text-purple-100 mt-1",children:"Create multi-speaker dialog content with AI-powered voices"})]}),C.jsxs("div",{className:"flex-1 flex flex-col gap-4 p-6 overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Podcast Script Preset:"}),C.jsxs("select",{value:P,onChange:q=>ee(q.target.value),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",disabled:z==="synthesizing"||z==="playing",children:[C.jsx("option",{value:"",children:"-- Select a preset --"}),op.map(q=>C.jsx("option",{value:q.locale,children:q.language},q.locale))]}),P&&C.jsx("button",{onClick:()=>{T("")},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear"})]}),C.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dialog Text"}),d&&C.jsxs("div",{className:"text-xs text-gray-500",children:["Format: ",C.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"speaker: text"})," | Speakers: ",d.speakers.map((q,Q)=>C.jsx("code",{className:"bg-purple-100 text-purple-700 px-1 rounded mx-0.5",children:q},q))]})]}),C.jsx("textarea",{value:o,onChange:q=>u(q.target.value),placeholder:`Enter dialog text with speaker prefixes:
speaker1: Hello!
speaker2: Hi there!`,className:"flex-1 w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm resize-none",disabled:z==="synthesizing"||z==="playing"}),C.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[o.split(`
`).filter(q=>q.trim()).length," lines | ",o.length," characters"]})]}),C.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[C.jsxs("button",{onClick:()=>m(!f),className:"w-full px-4 py-2 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors text-sm",children:[C.jsx("span",{className:"font-medium text-gray-700",children:"SSML Preview"}),C.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${f?"rotate-180":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),f&&C.jsx("div",{className:"p-4 bg-gray-900 text-green-400 font-mono text-xs overflow-x-auto max-h-48 overflow-y-auto",children:C.jsx("pre",{children:B||"SSML will appear after synthesis"})})]}),C.jsx("div",{className:"border-t border-gray-200 pt-4",children:C.jsx(s0,{state:he,error:N,audioData:F,hasText:o.trim().length>0,isConfigured:s&&d!==null,onPlay:ue,onPause:se,onResume:pe,onStop:Re})})]}),C.jsxs("div",{className:"border-t border-gray-200 bg-gray-50",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-100",onClick:()=>w(!y),children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Synthesis History"}),h.length>0&&C.jsx("span",{className:"px-2 py-1 text-xs font-medium text-white bg-purple-600 rounded-full",children:h.length})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[h.length>0&&C.jsx("button",{onClick:q=>{q.stopPropagation(),window.confirm("Clear all history?")&&c()},className:"px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors",children:"Clear All"}),C.jsx("svg",{className:`w-5 h-5 text-gray-600 transform transition-transform ${y?"rotate-180":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),y&&C.jsx("div",{className:"max-h-64 overflow-y-auto",children:h.length===0?C.jsx("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:"No synthesis history yet"}):C.jsx("div",{className:"divide-y divide-gray-200",children:h.map(q=>C.jsxs("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-100",children:[C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",children:q.voice}),C.jsxs("div",{className:"text-xs text-gray-500",children:[new Date(q.timestamp).toLocaleTimeString()," |"," ",q.duration.toFixed(1),"s |"," ",q.text.substring(0,50),"..."]})]}),C.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[C.jsx("button",{onClick:()=>Se(q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:R===q.id?"Pause":"Play",children:R===q.id?C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M5 4h3v12H5V4zm7 0h3v12h-3V4z"})}):C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})}),C.jsx("button",{onClick:()=>fe(q),className:"p-2 text-gray-600 hover:bg-gray-200 rounded-full",title:"Download",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),C.jsx("button",{onClick:()=>l(q.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",title:"Delete",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]},q.id))})})]}),C.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-3 flex items-center justify-between",children:[C.jsx("p",{className:"text-xs text-gray-600",children:"Podcast Generator uses Azure Speech Service with mstts:dialog SSML elements."}),C.jsx(a0,{text:o,selectedVoice:(d==null?void 0:d.displayName)||"",region:r.region,audioData:F})]})]}),C.jsxs("div",{className:"w-full md:w-80 flex-shrink-0 bg-gray-50 border-l border-gray-200 p-6 flex flex-col overflow-hidden",children:[C.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Voice Selection"}),C.jsx("div",{className:"flex-1 min-h-0",children:C.jsx(jA,{apiKey:r.apiKey,region:r.region,selectedVoice:d,onVoiceChange:v})})]})]})}function LA(){return L.useMemo(()=>{const n=new URLSearchParams(window.location.search).get("podcast");return n==="1"||n==="true"},[])}function qA(){const{settings:r,updateSettings:n,isConfigured:s}=mw(),[h,a]=L.useState("text-to-speech"),l=LA(),c=yw(),o=Sw(),u=Cw(),d=()=>{switch(h){case"text-to-speech":return C.jsx(gA,{settings:r,onSettingsChange:n,isConfigured:s,history:c.history,addToHistory:c.addToHistory,removeFromHistory:c.removeFromHistory,clearHistory:c.clearHistory});case"voice-changer":return C.jsx(_A,{settings:r,onSettingsChange:n,isConfigured:s,history:o.history,addToHistory:o.addToHistory,removeFromHistory:o.removeFromHistory,clearHistory:o.clearHistory});case"multi-talker":return C.jsx(zA,{settings:r,onSettingsChange:n,isConfigured:s,history:u.history,addToHistory:u.addToHistory,removeFromHistory:u.removeFromHistory,clearHistory:u.clearHistory});default:return null}};return C.jsxs("div",{className:"h-screen flex overflow-hidden bg-white",children:[C.jsx(Rw,{activeMode:h,onModeChange:a,settings:r,onSettingsChange:n,showPodcastGenerator:l}),d()]})}gw.createRoot(document.getElementById("root")).render(C.jsx(uw.StrictMode,{children:C.jsx(qA,{})}));
